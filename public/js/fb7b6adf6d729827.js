(self.webpackChunk=self.webpackChunk||[]).push([[501],{9878:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});const i={name:"nzNavbar",data:function(){return{active:!1}},methods:{toggle:function(){this.active=!this.active}}}},4260:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(4015),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([t.id,".tn-slider{display:flex;flex-direction:column;height:100%;width:100%}.tn-slider-row{flex-direction:row}.tn-next,.tn-prev{flex:none}.tn-transform-container{flex:1;overflow:hidden}.tn-transform-wrapper{position:relative}.tn-slider-row .tn-transform-wrapper{white-space:nowrap}.tn-item{box-sizing:border-box;flex:none;overflow:hidden;position:relative;width:100%}.tn-slider-row .tn-item{display:inline-block;height:100%}","",{version:3,sources:["webpack://./node_modules/thumbnail-slider/dist/thumbnailSlider.css"],names:[],mappings:"AACA,WAGC,YAAa,CACb,qBAAsB,CAFtB,WAAY,CADZ,UAID,CACA,eACC,kBACD,CACA,kBACC,SACD,CACA,wBACC,MAAM,CACN,eACD,CACA,sBACC,iBACD,CACA,qCACC,kBACD,CAGA,SAKC,qBAAsB,CAFtB,SAAS,CADT,eAAgB,CAEhB,iBAAkB,CAHlB,UAKD,CACA,wBACC,oBAAqB,CACrB,WACD",sourceRoot:""}]);const o=a},7786:(t,e,n)=>{var i=n(1811),r=n(327);t.exports=function(t,e){for(var n=0,s=(e=i(e,t)).length;null!=t&&n<s;)t=t[r(e[n++])];return n&&n==s?t:void 0}},1811:(t,e,n)=>{var i=n(1469),r=n(5403),s=n(5514),a=n(9833);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:s(a(t))}},5403:(t,e,n)=>{var i=n(1469),r=n(3448),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||(a.test(t)||!s.test(t)||null!=e&&t in Object(e))}},4523:(t,e,n)=>{var i=n(8306);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},5514:(t,e,n)=>{var i=n(4523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,n,i,r){e.push(i?r.replace(s,"$1"):n||t)})),e}));t.exports=a},327:(t,e,n)=>{var i=n(3448);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},3279:(t,e,n)=>{var i=n(3218),r=n(7771),s=n(4841),a=Math.max,o=Math.min;t.exports=function(t,e,n){var l,u,c,d,f,h,p=0,m=!1,v=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function _(e){var n=l,i=u;return l=u=void 0,p=e,d=t.apply(i,n)}function y(t){return p=t,f=setTimeout(x,e),m?_(t):d}function C(t){var n=t-h;return void 0===h||n>=e||n<0||v&&t-p>=c}function x(){var t=r();if(C(t))return A(t);f=setTimeout(x,function(t){var n=e-(t-h);return v?o(n,c-(t-p)):n}(t))}function A(t){return f=void 0,g&&l?_(t):(l=u=void 0,d)}function b(){var t=r(),n=C(t);if(l=arguments,u=this,h=t,n){if(void 0===f)return y(h);if(v)return clearTimeout(f),f=setTimeout(x,e),_(h)}return void 0===f&&(f=setTimeout(x,e)),d}return e=s(e)||0,i(n)&&(m=!!n.leading,c=(v="maxWait"in n)?a(s(n.maxWait)||0,e):c,g="trailing"in n?!!n.trailing:g),b.cancel=function(){void 0!==f&&clearTimeout(f),p=0,l=h=u=f=void 0},b.flush=function(){return void 0===f?d:A(r())},b}},7361:(t,e,n)=>{var i=n(7786);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},8306:(t,e,n)=>{var i=n(3369);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var a=t.apply(this,i);return n.cache=s.set(r,a)||s,a};return n.cache=new(r.Cache||i),n}r.Cache=i,t.exports=r},7771:(t,e,n)=>{var i=n(5639);t.exports=function(){return i.Date.now()}},8375:function(t){var e;e=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=9)}([function(t,e,n){var i,r;n(4),i=n(6);var s=n(2);r=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(Object.keys(i).some((function(t){return"default"!==t&&"__esModule"!==t}))&&console.error("named exports are not supported in *.vue files."),r=i=i.default),"function"==typeof r&&(r=r.options),r.__file="/Users/huangdong/Documents/workspace/thumbnail-slider/src/tn-item.vue",r.render=s.render,r.staticRenderFns=s.staticRenderFns,r.functional&&console.error("[vue-loader] tn-item.vue: functional components are not supported and should be defined in plain js files using render functions."),t.exports=i},function(t,e,n){var i,r;n(5),i=n(7);var s=n(3);r=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(Object.keys(i).some((function(t){return"default"!==t&&"__esModule"!==t}))&&console.error("named exports are not supported in *.vue files."),r=i=i.default),"function"==typeof r&&(r=r.options),r.__file="/Users/huangdong/Documents/workspace/thumbnail-slider/src/tn-slider.vue",r.render=s.render,r.staticRenderFns=s.staticRenderFns,r.functional&&console.error("[vue-loader] tn-slider.vue: functional components are not supported and should be defined in plain js files using render functions."),t.exports=i},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"tn-item",on:{click:function(e){t.clickHandler()}}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tn-slider",class:{"tn-slider-row":"row"==t.direction}},[n("div",{staticClass:"tn-prev",on:{click:function(e){t.slidePrev()}}},[t._t("tn-prev")],2),t._v(" "),n("div",{staticClass:"tn-transform-container"},[n("div",{staticClass:"tn-transform-wrapper"},[t._t("default")],2)]),t._v(" "),n("div",{staticClass:"tn-next",on:{click:function(e){t.slideNext()}}},[t._t("tn-next")],2)])},staticRenderFns:[]}},function(t,e){},function(t,e){},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"tn-item",props:{},data:function(){return{}},methods:{clickHandler:function(){this.$emit("on-item-click",{vm:this})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(8),e.default={name:"tn-slider",props:{count:{type:Number,default:1},index:{type:Number,default:0},direction:{type:String,default:"row"},animation:{type:String,default:"ease"},hideNav:{type:Boolean,default:!1}},data:function(){return{$transformWrapper:null,fullLength:0,currentEl:null,allImgs:[],directionAtrMap:{translate:{row:"translateX",column:"translateY"},offset:{row:"offsetLeft",column:"offsetTop"},size:{row:"clientWidth",column:"clientHeight"},scrollSize:{row:"scrollWidth",column:"scrollHeight"}},ANIMATION_TIME:400}},watch:{index:function(){var t=this.$el.getElementsByClassName("tn-item")[this.index];t&&this._slideToItem(t)},fullLength:function(){this.resize()}},mounted:function(){var t=this,e=this.$el.getElementsByClassName("tn-transform-wrapper")[0];Transform(e),this.$transformWrapper=e,setTimeout((function(){t.fullLength=t.$el.getElementsByClassName("tn-transform-container")[0][t.directionAtrMap.size[t.direction]]}),50),this._addResizeHandler()},methods:{slidePrev:function(){this._slideBy(this.$transformWrapper[this.directionAtrMap.translate[this.direction]]+this.fullLength)},slideNext:function(){this._slideBy(this.$transformWrapper[this.directionAtrMap.translate[this.direction]]-this.fullLength)},resetSliderPos:function(){this.$transformWrapper[this.directionAtrMap.translate[this.direction]]=0},resize:function(){var t=this;this.fullLength=this.$el.getElementsByClassName("tn-transform-container")[0][this.directionAtrMap.size[this.direction]];var e=this.$el.getElementsByClassName("tn-item"),n=this.fullLength/this.count;Array.prototype.map.call(e,(function(e){"column"==t.direction?e.style.height=n+"px":e.style.width=n+"px"})),this._slideToItem(e[this.index],!0)},_slideToItem:function(t,e){var n=.5*this.fullLength-.5*this.fullLength/this.count-t[this.directionAtrMap.offset[this.direction]];this._slideBy(n,e)},_slideBy:function(t,e){var n=this.$el.getElementsByClassName("tn-transform-wrapper")[0][this.directionAtrMap.scrollSize[this.direction]],i=this.directionAtrMap.translate[this.direction];(t>=0||this.fullLength>n)&&(t=0),t<0&&t<=this.fullLength-n&&(t=this.fullLength-n),"ease"!=this.animation||e?this.$transformWrapper[i]=t:this._animate(this.$transformWrapper,i,t,this.ANIMATION_TIME,this._ease,null)},_addResizeHandler:function(){var t=this;window.addEventListener("resize",t.resize,!1)},_animate:function(t,e,n,i,r,s,a){var o=t[e],l=n-o,u=new Date,c=this,d=r||function(t){return t};this.tickID=null,function r(){var f=new Date-u;if(f>=i)return t[e]=n,a&&a(n),s&&s(n),cancelAnimationFrame(c.tickID),void(c.toTick=null);t[e]=l*d(f/i)+o,c.tickID=requestAnimationFrame(r),a&&a(t[e])}()},_ease:function(t){return Math.sqrt(1-Math.pow(t-1,2))}}}},function(t,e){"use strict";!function(){var t=function(t,e,n,i,r,s,a,o,l,u,c,d,f,h,p,m){this.elements=window.Float32Array?new Float32Array(16):[];var v=this.elements;v[0]=void 0!==t?t:1,v[4]=e||0,v[8]=n||0,v[12]=i||0,v[1]=r||0,v[5]=void 0!==s?s:1,v[9]=a||0,v[13]=o||0,v[2]=l||0,v[6]=u||0,v[10]=void 0!==c?c:1,v[14]=d||0,v[3]=f||0,v[7]=h||0,v[11]=p||0,v[15]=void 0!==m?m:1};function e(t,e,i){for(var r=0,s=e.length;r<s;r++)n(t,e[r],i)}function n(t,e,n){Object.defineProperty(t,e,{get:function(){return this["__"+e]},set:function(t){t!==this["__"+e]&&(this["__"+e]=t,n())}})}t.DEG_TO_RAD=Math.PI/180,t.prototype={set:function(t,e,n,i,r,s,a,o,l,u,c,d,f,h,p,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=s,v[9]=a,v[13]=o,v[2]=l,v[6]=u,v[10]=c,v[14]=d,v[3]=f,v[7]=h,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var n=t.elements,i=this.elements,r=n[0],s=n[4],a=n[8],o=n[12],l=n[1],u=n[5],c=n[9],d=n[13],f=n[2],h=n[6],p=n[10],m=n[14],v=n[3],g=n[7],_=n[11],y=n[15],C=e[0],x=e[1],A=e[2],b=e[3],w=e[4],T=e[5],k=e[6],M=e[7],S=e[8],D=e[9],B=e[10],z=e[11],O=e[12],N=e[13],E=e[14],$=e[15];return i[0]=r*C+s*w+a*S+o*O,i[4]=r*x+s*T+a*D+o*N,i[8]=r*A+s*k+a*B+o*E,i[12]=r*b+s*M+a*z+o*$,i[1]=l*C+u*w+c*S+d*O,i[5]=l*x+u*T+c*D+d*N,i[9]=l*A+u*k+c*B+d*E,i[13]=l*b+u*M+c*z+d*$,i[2]=f*C+h*w+p*S+m*O,i[6]=f*x+h*T+p*D+m*N,i[10]=f*A+h*k+p*B+m*E,i[14]=f*b+h*M+p*z+m*$,i[3]=v*C+g*w+_*S+y*O,i[7]=v*x+g*T+_*D+y*N,i[11]=v*A+g*k+_*B+y*E,i[15]=v*b+g*M+_*z+y*$,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},appendTransform:function(e,n,i,r,s,a,o,l,u,c,d,f,h,p){var m=o*t.DEG_TO_RAD,v=this._rounded(Math.cos(m)),g=this._rounded(Math.sin(m)),_=l*t.DEG_TO_RAD,y=this._rounded(Math.cos(_)),C=this._rounded(Math.sin(_)),x=u*t.DEG_TO_RAD,A=this._rounded(Math.cos(-1*x)),b=this._rounded(Math.sin(-1*x));return this.multiplyMatrices(this,[1,0,0,e,0,v,g,n,0,-g,v,i,0,0,0,1]),this.multiplyMatrices(this,[y,0,C,0,0,1,0,0,-C,0,y,0,0,0,0,1]),this.multiplyMatrices(this,[A*r,b*s,0,0,-b*r,A*s,0,0,0,0,1*a,0,0,0,0,1]),(c||d)&&this.multiplyMatrices(this,[this._rounded(Math.cos(c*t.DEG_TO_RAD)),this._rounded(Math.sin(c*t.DEG_TO_RAD)),0,0,-1*this._rounded(Math.sin(d*t.DEG_TO_RAD)),this._rounded(Math.cos(d*t.DEG_TO_RAD)),0,0,0,0,1,0,0,0,0,1]),(f||h||p)&&(this.elements[12]-=f*this.elements[0]+h*this.elements[4]+p*this.elements[8],this.elements[13]-=f*this.elements[1]+h*this.elements[5]+p*this.elements[9],this.elements[14]-=f*this.elements[2]+h*this.elements[6]+p*this.elements[10]),this}},window.Transform=function(n,i){e(n,["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],(function(){var t=n.matrix3D.identity().appendTransform(n.translateX,n.translateY,n.translateZ,n.scaleX,n.scaleY,n.scaleZ,n.rotateX,n.rotateY,n.rotateZ,n.skewX,n.skewY,n.originX,n.originY,n.originZ);n.style.transform=n.style.msTransform=n.style.OTransform=n.style.MozTransform=n.style.webkitTransform=(i?"":"perspective("+(void 0===n.perspective?500:n.perspective)+"px) ")+"matrix3d("+Array.prototype.slice.call(t.elements).join(",")+")"})),n.matrix3D=new t,i||(e(n,["perspective"],(function(){n.style.transform=n.style.msTransform=n.style.OTransform=n.style.MozTransform=n.style.webkitTransform="perspective("+n.perspective+"px) matrix3d("+Array.prototype.slice.call(n.matrix3D.elements).join(",")+")"})),n.perspective=500),n.scaleX=n.scaleY=n.scaleZ=1,n.translateX=n.translateY=n.translateZ=n.rotateX=n.rotateY=n.rotateZ=n.skewX=n.skewY=n.originX=n.originY=n.originZ=0}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TnSlider=e.TnItem=void 0;var i=s(n(1)),r=s(n(0));function s(t){return t&&t.__esModule?t:{default:t}}e.TnItem=r.default,e.TnSlider=i.default}])},t.exports=e()},8122:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var i=n(9669),r=n.n(i);const s={name:"nzCaptcha",props:{url:String},data:function(){return{imageUrl:this.url,refreshing:!1}},methods:{refresh:function(){var t=this;this.refreshing||(this.refreshing=!0,r().get(this.imageUrl+"&refresh").then((function(e){var n=e.data;t.imageUrl=n.url,t.refreshing=!1})))}}};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"is-flex is-flex-center"},[e("img",{staticClass:"image",staticStyle:{height:"60px"},attrs:{src:t.imageUrl,alt:"CAPTCHA Image"}}),t._v(" "),e("button",{staticClass:"button is-small ml-2",attrs:{type:"button"},on:{click:t.refresh}},[e("b-icon",{attrs:{icon:"refresh",size:"is-small"}})],1)])}),[],!1,null,null,null).exports},2777:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const i={name:"nzGroupTaxaSearch",components:{NzTaxonAutocomplete:n(7586).Z},props:{group:{type:Number,required:!0}},data:function(){return{name:"",selected:null}},computed:{link:function(){return this.selected&&this.selected.first_species_id?route("groups.species.show",{group:this.group,species:this.selected.first_species_id}):null},url:function(){return route("api.groups.taxa.index",{group:this.group})}},methods:{onTaxonSelect:function(t){this.selected=t},visitLink:function(){this.link&&(window.location.href=this.link)}}};var r=n(1900);const s=(0,r.Z)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card group-taxa-search"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.trans("navigation.find_in_group")))])]),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("nz-taxon-autocomplete",{attrs:{autofocus:"",url:t.url,label:t.trans("labels.field_observations.taxon"),placeholder:t.trans("labels.field_observations.search_for_taxon")},on:{select:t.onTaxonSelect,enter:t.visitLink},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),e("footer",{staticClass:"modal-card-foot",staticStyle:{"justify-content":"flex-end"}},[e("a",{staticClass:"button is-primary",attrs:{href:t.link,disabled:!t.link}},[e("i",{staticClass:"fa fa-arrow-right"})])])])}),[],!1,null,null,null).exports,a={name:"nzGroupTaxaSearchButton",props:{group:{type:Number,required:!0}},methods:{showModal:function(){var t=this.$buefy.modal.open({parent:this,component:s,hasModalCard:!0,props:{group:this.group}});setTimeout((function(){t.$el.querySelector("input").focus()}),500)}}};const o=(0,r.Z)(a,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"button has-text-hidden-tablet-only",attrs:{type:"button",title:t.trans("navigation.find_in_group")},on:{click:t.showModal}},[e("b-icon",{staticClass:"has-text-grey",attrs:{icon:"search",size:"is-small"}}),t._v(" "),e("span",{staticClass:"is-hidden-tablet-only"},[t._v("\n    "+t._s(t.trans("navigation.find_in_group"))+"\n  ")])],1)}),[],!1,null,null,null).exports},8146:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var i=n(3379),r=n.n(i),s=n(4260),a={insert:"head",singleton:!1};r()(s.Z,a);s.Z.locals;var o=n(8375);const l={name:"nzSlider",components:{"tn-item":o.TnItem,"tn-slider":o.TnSlider},props:{items:{type:Array,default:function(){return[]}},withThumbnails:{type:Boolean,default:!0},thumbnailNumber:{type:Number,default:5}},data:function(){return{item:0}},computed:{moreThanOne:function(){return this.items.length>1}},methods:{goToPrevSlide:function(){this.item>0?this.item--:this.item=this.items.length-1},goToNextSlide:function(){this.item<this.items.length-1?this.item++:this.item=0},setCurrentSlide:function(t){this.item=t},isCurrent:function(t){return this.item===t}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"slider"},[e("div",{staticClass:"slide-container"},[t._l(t.items,(function(n,i){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCurrent(i),expression:"isCurrent(index)"}],staticClass:"slide"},[e("div",{staticClass:"slide-image-container"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.url,expression:"image.url"}]}),t._v(" "),n.caption?e("div",{staticClass:"slide-caption",domProps:{innerHTML:t._s(n.caption)}}):t._e()])])})),t._v(" "),t.moreThanOne?e("a",{staticClass:"prev flex is-flex-center",attrs:{title:t.trans("pagination.previous")},on:{click:t.goToPrevSlide}},[e("b-icon",{attrs:{icon:"chevron-left",size:"is-small","aria-hidden":"true"}})],1):t._e(),t._v(" "),t.moreThanOne?e("a",{staticClass:"next flex is-flex-center",attrs:{title:t.trans("pagination.next")},on:{click:t.goToNextSlide}},[e("b-icon",{attrs:{icon:"chevron-right",size:"is-small","aria-hidden":"true"}})],1):t._e()],2),t._v(" "),t.withThumbnails&&t.moreThanOne?e("tn-slider",{staticClass:"thumbnails",attrs:{index:t.item,count:t.thumbnailNumber}},t._l(t.items,(function(n,i){return e("tn-item",{key:i,class:{active:t.isCurrent(i)},on:{"on-item-click":function(e){return t.setCurrentSlide(i)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.url,expression:"image.url"}]}),t._v(" "),e("div",{staticClass:"inner-shadow"})])})),1):t.moreThanOne?e("div",{staticClass:"dots"},t._l(t.items,(function(n,i){return e("div",{staticClass:"dot",class:{active:t.isCurrent(i)},on:{click:function(e){return t.setCurrentSlide(i)}}})})),0):t._e()],1)}),[],!1,null,null,null).exports},7586:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var i=n(9669),r=n.n(i),s=n(3279),a=n.n(s),o=n(7361),l=n.n(o);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}const c={name:"nzTaxonAutocomplete",props:{label:{type:String,default:"Taxon"},placeholder:{type:String,default:"Search for taxon..."},taxon:{type:Object,default:null},url:{type:String,default:function(){return route("api.taxa.index")}},value:{type:String,default:""},error:Boolean,message:{type:String,default:null},except:{},autofocus:Boolean},data:function(){return{data:[],selected:this.taxon||null,loading:!1,page:1,isLastPage:!1}},computed:{haveThumbnail:function(){return this.selected&&this.selected.thumbnail_url},icon:function(){return this.selected?"check":"search"}},watch:{taxon:function(t){this.selected=t}},methods:{fetchData:a()((function(){var t=this;if(this.value&&!this.isLastPage){this.loading=!0;var e={name:this.value,limit:20,page:this.page};this.except&&(e.except=this.except),r().get(this.url,{params:e}).then((function(e){var n=e.data;n.data.forEach((function(e){return t.data.push(e)})),t.isLastPage=n.meta.last_page<=t.page,t.loading=!1}),(function(e){t.loading=!1}))}}),500),onSelect:function(t){this.selected=t,this.$emit("select",t)},onInput:function(t){var e=this.getValue(this.selected);e&&e!==t&&this.onSelect(null),this.$emit("input",t),this.page=1,this.data=[],this.isLastPage=!1,this.fetchData()},focusOnInput:function(){this.$el.querySelector("input").focus()},getValue:function(t){if(t)return"object"===u(t)?l()(t,"name"):t},enterPressed:function(){this.$refs.autocomplete.isActive||this.$emit("name")},loadMore:function(){this.isLastPage||(this.page++,this.fetchData())}}};const d=(0,n(1900).Z)(c,(function(){var t=this,e=t._self._c;return e("b-field",{staticClass:"nz-taxon-autocomplete",attrs:{label:t.label,type:t.error?"is-danger":null,message:t.message}},[e("b-field",{attrs:{grouped:""}},[t.haveThumbnail?e("img",{attrs:{width:"32",src:this.selected.thumbnail_url}}):t._e(),t._v(" "),e("b-autocomplete",{ref:"autocomplete",class:[t.selected?"has-icon-success":""],attrs:{value:t.value,data:t.data,field:"name",loading:t.loading,icon:t.icon,placeholder:t.placeholder,expanded:"",autofocus:t.autofocus,"check-infinite-scroll":""},on:{input:t.onInput,select:t.onSelect,"infinite-scroll":t.loadMore},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterPressed.apply(null,arguments)}},scopedSlots:t._u([{key:"detault",fn:function(n){var i=n.option;return[e("div",{staticClass:"media"},[e("div",{staticClass:"media-left"},[i.thumbnail_url?e("img",{attrs:{width:"32",src:i.thumbnail_url}}):t._e()]),t._v(" "),e("div",{staticClass:"media-content"},[t._v("\n            "+t._s(i.name)+t._s(i.native_name?" (".concat(i.native_name,")"):"")+"\n          ")])])]}}])})],1)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=fb7b6adf6d729827.js.map