{"version":3,"file":"js/cf88b11fff0cff89.js","mappings":"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","sources":["webpack:///./node_modules/form-backend-validation/dist/Errors.js","webpack:///./node_modules/form-backend-validation/dist/Form.js","webpack:///./node_modules/form-backend-validation/dist/index.js","webpack:///./node_modules/form-backend-validation/dist/util/fieldNameValidation.js","webpack:///./node_modules/form-backend-validation/dist/util/formData.js","webpack:///./node_modules/form-backend-validation/dist/util/index.js","webpack:///./node_modules/form-backend-validation/dist/util/objects.js","webpack:///./node_modules/lodash/_baseGet.js","webpack:///./node_modules/lodash/_castPath.js","webpack:///./node_modules/lodash/_isKey.js","webpack:///./node_modules/lodash/_memoizeCapped.js","webpack:///./node_modules/lodash/_stringToPath.js","webpack:///./node_modules/lodash/_toKey.js","webpack:///./node_modules/lodash/first.js","webpack:///./node_modules/lodash/get.js","webpack:///./node_modules/lodash/head.js","webpack:///./node_modules/lodash/memoize.js","webpack:///./resources/js/components/forms/AnnouncementForm.vue","webpack:///resources/js/components/forms/AnnouncementForm.vue","webpack:///./resources/js/components/forms/AnnouncementForm.vue?6fd7","webpack:///./resources/js/components/forms/AnnouncementForm.vue?4aa1","webpack:///./resources/js/components/inputs/Wysiwyg.vue","webpack:///./node_modules/trix/dist/trix.js","webpack:///resources/js/components/inputs/Wysiwyg.vue","webpack:///./resources/js/components/inputs/Wysiwyg.vue?36a0","webpack:///./resources/js/components/inputs/Wysiwyg.vue?709b"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Errors = function () {\n    /**\n     * Create a new Errors instance.\n     */\n    function Errors() {\n        var errors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Errors);\n\n        this.record(errors);\n    }\n\n    /**\n     * Get all the errors.\n     *\n     * @return {object}\n     */\n\n\n    _createClass(Errors, [{\n        key: \"all\",\n        value: function all() {\n            return this.errors;\n        }\n\n        /**\n         * Determine if any errors exists for the given field or object.\n         *\n         * @param {string} field\n         */\n\n    }, {\n        key: \"has\",\n        value: function has(field) {\n            var hasError = this.errors.hasOwnProperty(field);\n\n            if (!hasError) {\n                var errors = Object.keys(this.errors).filter(function (e) {\n                    return e.startsWith(field + \".\") || e.startsWith(field + \"[\");\n                });\n\n                hasError = errors.length > 0;\n            }\n\n            return hasError;\n        }\n    }, {\n        key: \"first\",\n        value: function first(field) {\n            return this.get(field)[0];\n        }\n    }, {\n        key: \"get\",\n        value: function get(field) {\n            return this.errors[field] || [];\n        }\n\n        /**\n         * Determine if we have any errors.\n         * Or return errors for the given keys.\n         *\n         * @param {array} keys\n         */\n\n    }, {\n        key: \"any\",\n        value: function any() {\n            var _this = this;\n\n            var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n            if (keys.length === 0) {\n                return Object.keys(this.errors).length > 0;\n            }\n\n            var errors = {};\n\n            keys.forEach(function (key) {\n                return errors[key] = _this.get(key);\n            });\n\n            return errors;\n        }\n\n        /**\n         * Record the new errors.\n         *\n         * @param {object} errors\n         */\n\n    }, {\n        key: \"record\",\n        value: function record() {\n            var errors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            this.errors = errors;\n        }\n\n        /**\n         * Clear a specific field, object or all error fields.\n         *\n         * @param {string|null} field\n         */\n\n    }, {\n        key: \"clear\",\n        value: function clear(field) {\n            if (!field) {\n                this.errors = {};\n\n                return;\n            }\n\n            var errors = Object.assign({}, this.errors);\n\n            Object.keys(errors).filter(function (e) {\n                return e === field || e.startsWith(field + \".\") || e.startsWith(field + \"[\");\n            }).forEach(function (e) {\n                return delete errors[e];\n            });\n\n            this.errors = errors;\n        }\n    }]);\n\n    return Errors;\n}();\n\nexports.default = Errors;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Errors = require('./Errors');\n\nvar _Errors2 = _interopRequireDefault(_Errors);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Form = function () {\n    /**\n     * Create a new Form instance.\n     *\n     * @param {object} data\n     * @param {object} options\n     */\n    function Form() {\n        var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, Form);\n\n        this.processing = false;\n        this.successful = false;\n\n        this.withData(data).withOptions(options).withErrors({});\n    }\n\n    _createClass(Form, [{\n        key: 'withData',\n        value: function withData(data) {\n            if ((0, _util.isArray)(data)) {\n                data = data.reduce(function (carry, element) {\n                    carry[element] = '';\n                    return carry;\n                }, {});\n            }\n\n            this.setInitialValues(data);\n\n            this.errors = new _Errors2.default();\n            this.processing = false;\n            this.successful = false;\n\n            for (var field in data) {\n                (0, _util.guardAgainstReservedFieldName)(field);\n\n                this[field] = data[field];\n            }\n\n            return this;\n        }\n    }, {\n        key: 'withErrors',\n        value: function withErrors(errors) {\n            this.errors = new _Errors2.default(errors);\n\n            return this;\n        }\n    }, {\n        key: 'withOptions',\n        value: function withOptions(options) {\n            this.__options = {\n                resetOnSuccess: true\n            };\n\n            if (options.hasOwnProperty('resetOnSuccess')) {\n                this.__options.resetOnSuccess = options.resetOnSuccess;\n            }\n\n            if (options.hasOwnProperty('onSuccess')) {\n                this.onSuccess = options.onSuccess;\n            }\n\n            if (options.hasOwnProperty('onFail')) {\n                this.onFail = options.onFail;\n            }\n\n            var windowAxios = typeof window === 'undefined' ? false : window.axios;\n\n            this.__http = options.http || windowAxios || require('axios');\n\n            if (!this.__http) {\n                throw new Error('No http library provided. Either pass an http option, or install axios.');\n            }\n\n            return this;\n        }\n\n        /**\n         * Fetch all relevant data for the form.\n         */\n\n    }, {\n        key: 'data',\n        value: function data() {\n            var data = {};\n\n            for (var property in this.initial) {\n                data[property] = this[property];\n            }\n\n            return data;\n        }\n\n        /**\n         * Fetch specific data for the form.\n         *\n         * @param {array} fields\n         * @return {object}\n         */\n\n    }, {\n        key: 'only',\n        value: function only(fields) {\n            var _this = this;\n\n            return fields.reduce(function (filtered, field) {\n                filtered[field] = _this[field];\n                return filtered;\n            }, {});\n        }\n\n        /**\n         * Reset the form fields.\n         */\n\n    }, {\n        key: 'reset',\n        value: function reset() {\n            (0, _util.merge)(this, this.initial);\n\n            this.errors.clear();\n        }\n    }, {\n        key: 'setInitialValues',\n        value: function setInitialValues(values) {\n            this.initial = {};\n\n            (0, _util.merge)(this.initial, values);\n        }\n    }, {\n        key: 'populate',\n        value: function populate(data) {\n            var _this2 = this;\n\n            Object.keys(data).forEach(function (field) {\n                (0, _util.guardAgainstReservedFieldName)(field);\n\n                if (_this2.hasOwnProperty(field)) {\n                    (0, _util.merge)(_this2, _defineProperty({}, field, data[field]));\n                }\n            });\n\n            return this;\n        }\n\n        /**\n         * Clear the form fields.\n         */\n\n    }, {\n        key: 'clear',\n        value: function clear() {\n            for (var field in this.initial) {\n                this[field] = '';\n            }\n\n            this.errors.clear();\n        }\n\n        /**\n         * Send a POST request to the given URL.\n         *\n         * @param {string} url\n         */\n\n    }, {\n        key: 'post',\n        value: function post(url) {\n            return this.submit('post', url);\n        }\n\n        /**\n         * Send a PUT request to the given URL.\n         *\n         * @param {string} url\n         */\n\n    }, {\n        key: 'put',\n        value: function put(url) {\n            return this.submit('put', url);\n        }\n\n        /**\n         * Send a PATCH request to the given URL.\n         *\n         * @param {string} url\n         */\n\n    }, {\n        key: 'patch',\n        value: function patch(url) {\n            return this.submit('patch', url);\n        }\n\n        /**\n         * Send a DELETE request to the given URL.\n         *\n         * @param {string} url\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(url) {\n            return this.submit('delete', url);\n        }\n\n        /**\n         * Submit the form.\n         *\n         * @param {string} requestType\n         * @param {string} url\n         */\n\n    }, {\n        key: 'submit',\n        value: function submit(requestType, url) {\n            var _this3 = this;\n\n            this.__validateRequestType(requestType);\n            this.errors.clear();\n            this.processing = true;\n            this.successful = false;\n\n            return new Promise(function (resolve, reject) {\n                _this3.__http[requestType](url, _this3.hasFiles() ? (0, _util.objectToFormData)(_this3.data()) : _this3.data()).then(function (response) {\n                    _this3.processing = false;\n                    _this3.onSuccess(response.data);\n\n                    resolve(response.data);\n                }).catch(function (error) {\n                    _this3.processing = false;\n                    _this3.onFail(error);\n\n                    reject(error);\n                });\n            });\n        }\n\n        /**\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'hasFiles',\n        value: function hasFiles() {\n            for (var property in this.initial) {\n                if (this.hasFilesDeep(this[property])) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    }, {\n        key: 'hasFilesDeep',\n\n\n        /**\n         * @param {Object|Array} object\n         * @returns {boolean}\n         */\n        value: function hasFilesDeep(object) {\n            if (object === null) {\n                return false;\n            }\n\n            if ((typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object') {\n                for (var key in object) {\n                    if (object.hasOwnProperty(key)) {\n                        if (this.hasFilesDeep(object[key])) {\n                            return true;\n                        }\n                    }\n                }\n            }\n\n            if (Array.isArray(object)) {\n                for (var _key in object) {\n                    if (object.hasOwnProperty(_key)) {\n                        return this.hasFilesDeep(object[_key]);\n                    }\n                }\n            }\n\n            return (0, _util.isFile)(object);\n        }\n\n        /**\n         * Handle a successful form submission.\n         *\n         * @param {object} data\n         */\n\n    }, {\n        key: 'onSuccess',\n        value: function onSuccess(data) {\n            this.successful = true;\n\n            if (this.__options.resetOnSuccess) {\n                this.reset();\n            }\n        }\n\n        /**\n         * Handle a failed form submission.\n         *\n         * @param {object} data\n         */\n\n    }, {\n        key: 'onFail',\n        value: function onFail(error) {\n            this.successful = false;\n\n            if (error.response && error.response.data.errors) {\n                this.errors.record(error.response.data.errors);\n            }\n        }\n\n        /**\n         * Get the error message(s) for the given field.\n         *\n         * @param field\n         */\n\n    }, {\n        key: 'hasError',\n        value: function hasError(field) {\n            return this.errors.has(field);\n        }\n\n        /**\n         * Get the first error message for the given field.\n         *\n         * @param {string} field\n         * @return {string}\n         */\n\n    }, {\n        key: 'getError',\n        value: function getError(field) {\n            return this.errors.first(field);\n        }\n\n        /**\n         * Get the error messages for the given field.\n         *\n         * @param {string} field\n         * @return {array}\n         */\n\n    }, {\n        key: 'getErrors',\n        value: function getErrors(field) {\n            return this.errors.get(field);\n        }\n    }, {\n        key: '__validateRequestType',\n        value: function __validateRequestType(requestType) {\n            var requestTypes = ['get', 'delete', 'head', 'post', 'put', 'patch'];\n\n            if (requestTypes.indexOf(requestType) === -1) {\n                throw new Error('`' + requestType + '` is not a valid request type, ' + ('must be one of: `' + requestTypes.join('`, `') + '`.'));\n            }\n        }\n    }], [{\n        key: 'create',\n        value: function create() {\n            var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            return new Form().withData(data);\n        }\n    }]);\n\n    return Form;\n}();\n\nexports.default = Form;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Form = require('./Form');\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Form).default;\n  }\n});\nObject.defineProperty(exports, 'Form', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Form).default;\n  }\n});\n\nvar _Errors = require('./Errors');\n\nObject.defineProperty(exports, 'Errors', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Errors).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.guardAgainstReservedFieldName = guardAgainstReservedFieldName;\nvar reservedFieldNames = exports.reservedFieldNames = ['__http', '__options', '__validateRequestType', 'clear', 'data', 'delete', 'errors', 'getError', 'getErrors', 'hasError', 'initial', 'onFail', 'only', 'onSuccess', 'patch', 'populate', 'post', 'processing', 'successful', 'put', 'reset', 'submit', 'withData', 'withErrors', 'withOptions'];\n\nfunction guardAgainstReservedFieldName(fieldName) {\n    if (reservedFieldNames.indexOf(fieldName) !== -1) {\n        throw new Error('Field name ' + fieldName + ' isn\\'t allowed to be used in a Form or Errors instance.');\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.objectToFormData = objectToFormData;\nfunction objectToFormData(object) {\n    var formData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new FormData();\n    var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (object === null || object === 'undefined' || object.length === 0) {\n        return formData.append(parent, object);\n    }\n\n    for (var property in object) {\n        if (object.hasOwnProperty(property)) {\n            appendToFormData(formData, getKey(parent, property), object[property]);\n        }\n    }\n\n    return formData;\n}\n\nfunction getKey(parent, property) {\n    return parent ? parent + '[' + property + ']' : property;\n}\n\nfunction appendToFormData(formData, key, value) {\n    if (value instanceof Date) {\n        return formData.append(key, value.toISOString());\n    }\n\n    if (value instanceof File) {\n        return formData.append(key, value, value.name);\n    }\n\n    if (typeof value === \"boolean\") {\n        return formData.append(key, value ? '1' : '0');\n    }\n\n    if (value === null) {\n        return formData.append(key, '');\n    }\n\n    if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object') {\n        return formData.append(key, value);\n    }\n\n    objectToFormData(value, formData, key);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _objects = require('./objects');\n\nObject.keys(_objects).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _objects[key];\n    }\n  });\n});\n\nvar _formData = require('./formData');\n\nObject.keys(_formData).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _formData[key];\n    }\n  });\n});\n\nvar _fieldNameValidation = require('./fieldNameValidation');\n\nObject.keys(_fieldNameValidation).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _fieldNameValidation[key];\n    }\n  });\n});","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.isArray = isArray;\nexports.isFile = isFile;\nexports.merge = merge;\nexports.cloneDeep = cloneDeep;\nfunction isArray(object) {\n    return Object.prototype.toString.call(object) === '[object Array]';\n}\n\nfunction isFile(object) {\n    return object instanceof File || object instanceof FileList;\n}\n\nfunction merge(a, b) {\n    for (var key in b) {\n        a[key] = cloneDeep(b[key]);\n    }\n}\n\nfunction cloneDeep(object) {\n    if (object === null) {\n        return null;\n    }\n\n    if (isFile(object)) {\n        return object;\n    }\n\n    if (Array.isArray(object)) {\n        var clone = [];\n\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                clone[key] = cloneDeep(object[key]);\n            }\n        }\n\n        return clone;\n    }\n\n    if ((typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object') {\n        var _clone = {};\n\n        for (var _key in object) {\n            if (object.hasOwnProperty(_key)) {\n                _clone[_key] = cloneDeep(object[_key]);\n            }\n        }\n\n        return _clone;\n    }\n\n    return object;\n}","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","module.exports = require('./head');\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nmodule.exports = head;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('form',{staticClass:\"announcement-form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.submit.apply(null, arguments)}}},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.announcements.title'),\"type\":_vm.form.errors.has('title') ? 'is-danger' : '',\"message\":_vm.form.errors.has('title') ? _vm.form.errors.first('title') : ''}},[_c('b-tabs',{staticClass:\"block\",attrs:{\"size\":\"is-small\"},on:{\"change\":(index) => _vm.focusOnTranslation(index, 'title')}},_vm._l((_vm.supportedLocales),function(data,locale){return _c('b-tab-item',{key:locale,attrs:{\"label\":_vm.trans('languages.' + data.name)}},[_c('b-input',{ref:`title-${locale}`,refInFor:true,attrs:{\"autofocus\":\"\"},model:{value:(_vm.form.title[locale]),callback:function ($$v) {_vm.$set(_vm.form.title, locale, $$v)},expression:\"form.title[locale]\"}})],1)}),1)],1),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.announcements.message'),\"type\":_vm.form.errors.has('message') ? 'is-danger' : '',\"message\":_vm.form.errors.has('message') ? _vm.form.errors.first('message') : ''}},[_c('b-tabs',{staticClass:\"block\",attrs:{\"size\":\"is-small\"},on:{\"change\":(index) => _vm.focusOnTranslation(index, 'message')}},_vm._l((_vm.supportedLocales),function(data,locale){return _c('b-tab-item',{key:locale,attrs:{\"label\":_vm.trans('languages.' + data.name)}},[_c('nz-wysiwyg',{ref:`message-${locale}`,refInFor:true,model:{value:(_vm.form.message[locale]),callback:function ($$v) {_vm.$set(_vm.form.message, locale, $$v)},expression:\"form.message[locale]\"}})],1)}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.announcements.private')}},[_c('b-switch',{model:{value:(_vm.form.private),callback:function ($$v) {_vm.$set(_vm.form, \"private\", $$v)},expression:\"form.private\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.form.private ? _vm.trans('Yes') : _vm.trans('No'))+\"\\n        \")])],1)],1)]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.isEdit ? _vm.trans('buttons.save') : _vm.trans('labels.announcements.publish')))]),_vm._v(\" \"),_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.cancelUrl}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <form @submit.prevent=\"submit\" class=\"announcement-form\">\r\n    <b-field\r\n      class=\"is-required\"\r\n      :label=\"trans('labels.announcements.title')\"\r\n      :type=\"form.errors.has('title') ? 'is-danger' : ''\"\r\n      :message=\"form.errors.has('title') ? form.errors.first('title') : ''\"\r\n    >\r\n      <b-tabs size=\"is-small\" class=\"block\" @change=\"(index) => focusOnTranslation(index, 'title')\">\r\n        <b-tab-item :label=\"trans('languages.' + data.name)\" v-for=\"(data, locale) in supportedLocales\" :key=\"locale\">\r\n          <b-input v-model=\"form.title[locale]\" autofocus  :ref=\"`title-${locale}`\" />\r\n        </b-tab-item>\r\n      </b-tabs>\r\n    </b-field>\r\n\r\n    <b-field\r\n      class=\"is-required\"\r\n      :label=\"trans('labels.announcements.message')\"\r\n      :type=\"form.errors.has('message') ? 'is-danger' : ''\"\r\n      :message=\"form.errors.has('message') ? form.errors.first('message') : ''\"\r\n    >\r\n      <b-tabs size=\"is-small\" class=\"block\" @change=\"(index) => focusOnTranslation(index, 'message')\">\r\n        <b-tab-item :label=\"trans('languages.' + data.name)\" v-for=\"(data, locale) in supportedLocales\" :key=\"locale\">\r\n          <nz-wysiwyg v-model=\"form.message[locale]\" :ref=\"`message-${locale}`\" />\r\n        </b-tab-item>\r\n      </b-tabs>\r\n    </b-field>\r\n\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <b-field :label=\"trans('labels.announcements.private')\">\r\n          <b-switch v-model=\"form.private\">\r\n              {{ form.private ? trans('Yes') : trans('No') }}\r\n          </b-switch>\r\n        </b-field>\r\n      </div>\r\n    </div>\r\n\r\n    <hr>\r\n\r\n    <button type=\"submit\" class=\"button is-primary\">{{ isEdit ? trans('buttons.save') : trans('labels.announcements.publish') }}</button>\r\n\r\n    <a :href=\"cancelUrl\" class=\"button\">{{ trans('buttons.cancel') }}</a>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport Form from 'form-backend-validation'\r\nimport _keys from 'lodash/keys'\r\nimport _get from 'lodash/get'\r\nimport _first from 'lodash/first'\r\nimport NzWysiwyg from '@/components/inputs/Wysiwyg'\r\n\r\nfunction defaultTranslations() {\r\n    const value = {};\r\n\r\n    _keys(window.App.supportedLocales).forEach(locale => {\r\n        value[locale] = null;\r\n    });\r\n\r\n    return value;\r\n}\r\n\r\nexport default {\r\n    name: 'nzAnnouncementForm',\r\n\r\n    components: {\r\n      NzWysiwyg\r\n    },\r\n\r\n    props: {\r\n        action: String,\r\n        method: {\r\n            type: String,\r\n            default: 'post'\r\n        },\r\n        types: {\r\n            type: Array,\r\n            default: () => []\r\n        },\r\n        announcement: {\r\n            type: Object,\r\n            default() {\r\n                return {\r\n                    private: false,\r\n                };\r\n            }\r\n        },\r\n        title: {\r\n            type: Object,\r\n            default: () => defaultTranslations()\r\n        },\r\n        message: {\r\n            type: Object,\r\n            default: () => defaultTranslations()\r\n        },\r\n        redirectUrl: String,\r\n        cancelUrl: String\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            form: this.newForm()\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        supportedLocales() {\r\n            return window.App.supportedLocales;\r\n        },\r\n\r\n        isEdit() {\r\n            return this.method.toLowerCase() === 'put'\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        submit() {\r\n            if (this.form.processing) return;\r\n\r\n            this.form[this.method.toLowerCase()](this.action)\r\n                .then(this.onSuccessfulSubmit)\r\n                .catch(this.onFailedSubmit);\r\n        },\r\n\r\n        /**\r\n         * Handle successful form submit.\r\n         */\r\n        onSuccessfulSubmit() {\r\n            this.form.processing = true\r\n\r\n            this.$buefy.toast.open({\r\n                message: this.trans('Saved successfully'),\r\n                type: 'is-success'\r\n            });\r\n\r\n            // We want to wait a bit before we send the user to redirect route\r\n            // so we can show the message that the action was successful.\r\n            setTimeout(() => {\r\n                this.form.processing = false;\r\n\r\n                window.location.href = this.redirectUrl;\r\n            }, 500);\r\n        },\r\n\r\n        /**\r\n         * Handle failed form submit.\r\n         *\r\n         * @param {Error} error\r\n         */\r\n        onFailedSubmit(error) {\r\n            this.$buefy.toast.open({\r\n                duration: 2500,\r\n                message: _get(error, 'response.data.message', error.message),\r\n                type: 'is-danger'\r\n            });\r\n        },\r\n\r\n        newForm() {\r\n            return new Form({\r\n                ...this.announcement,\r\n                title: this.title,\r\n                message: this.message\r\n            }, {\r\n                resetOnSuccess: false\r\n            });\r\n        },\r\n\r\n        focusOnTranslation(index, attribute) {\r\n            const locales = _keys(this.supportedLocales);\r\n            const selector = `${attribute}-${locales[index]}`;\r\n\r\n            setTimeout(() => {\r\n                _first(this.$refs[selector]).focus();\r\n            }, 500);\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnouncementForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnouncementForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnouncementForm.vue?vue&type=template&id=020990ed&\"\nimport script from \"./AnnouncementForm.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnouncementForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"wysiwyg\"},[_c('input',{ref:\"input\",attrs:{\"id\":_vm.inputId,\"type\":\"hidden\",\"name\":_vm.name},domProps:{\"value\":_vm.value}}),_vm._v(\" \"),_c('trix-editor',{ref:\"trix\",attrs:{\"input\":_vm.inputId}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\nTrix 2.0.0-alpha.1\nCopyright  2022 Basecamp, LLC\n */\nvar name = \"trix\";\nvar version = \"2.0.0-alpha.1\";\nvar description = \"A rich text editor for everyday writing\";\nvar main = \"dist/trix.umd.js\";\nvar module = \"dist/trix.js\";\nvar style = \"dist/trix.css\";\nvar files = [\n\t\"dist/*.css\",\n\t\"dist/*.js\"\n];\nvar repository = {\n\ttype: \"git\",\n\turl: \"git+https://github.com/basecamp/trix.git\"\n};\nvar keywords = [\n\t\"rich text\",\n\t\"wysiwyg\",\n\t\"editor\"\n];\nvar author = \"Basecamp, LLC\";\nvar license = \"MIT\";\nvar bugs = {\n\turl: \"https://github.com/basecamp/trix/issues\"\n};\nvar homepage = \"https://trix-editor.org/\";\nvar devDependencies = {\n\t\"@babel/core\": \"^7.16.0\",\n\t\"@babel/preset-env\": \"^7.16.4\",\n\t\"@rollup/plugin-babel\": \"^5.3.0\",\n\t\"@rollup/plugin-json\": \"^4.1.0\",\n\t\"babel-eslint\": \"^10.1.0\",\n\teslint: \"^7.32.0\",\n\tesm: \"^3.2.25\",\n\tkarma: \"5.0.2\",\n\t\"karma-chrome-launcher\": \"3.1.0\",\n\t\"karma-qunit\": \"^4.1.2\",\n\t\"karma-sauce-launcher\": \"^4.3.6\",\n\t\"node-sass\": \"^7.0.1\",\n\tqunit: \"2.9.3\",\n\trangy: \"^1.3.0\",\n\trollup: \"^2.56.3\",\n\t\"rollup-plugin-commonjs\": \"^10.1.0\",\n\t\"rollup-plugin-includepaths\": \"^0.2.4\",\n\t\"rollup-plugin-node-resolve\": \"^5.2.0\",\n\t\"rollup-plugin-terser\": \"^7.0.2\",\n\tsvgo: \"^2.8.0\"\n};\nvar scripts = {\n\t\"build-css\": \"node-sass --functions=./assets/trix/stylesheets/functions assets/trix.scss dist/trix.css\",\n\t\"build-js\": \"rollup -c\",\n\t\"build-assets\": \"cp -f assets/*.html dist/\",\n\tbuild: \"yarn run build-js && yarn run build-css && yarn run build-assets\",\n\twatch: \"rollup -c -w\",\n\tlint: \"eslint .\",\n\tpretest: \"yarn run lint && yarn run build\",\n\ttest: \"karma start\",\n\tpostversion: \"git push && git push --tags\",\n\trelease: \"yarn test && npm adduser && yarn version && npm publish\"\n};\nvar dependencies = {\n};\nvar _package = {\n\tname: name,\n\tversion: version,\n\tdescription: description,\n\tmain: main,\n\tmodule: module,\n\tstyle: style,\n\tfiles: files,\n\trepository: repository,\n\tkeywords: keywords,\n\tauthor: author,\n\tlicense: license,\n\tbugs: bugs,\n\thomepage: homepage,\n\tdevDependencies: devDependencies,\n\tscripts: scripts,\n\tdependencies: dependencies\n};\n\nconst attachmentSelector = \"[data-trix-attachment]\";\nconst attachments = {\n  preview: {\n    presentation: \"gallery\",\n    caption: {\n      name: true,\n      size: true\n    }\n  },\n  file: {\n    caption: {\n      size: true\n    }\n  }\n};\n\nconst attributes = {\n  default: {\n    tagName: \"div\",\n    parse: false\n  },\n  quote: {\n    tagName: \"blockquote\",\n    nestable: true\n  },\n  heading1: {\n    tagName: \"h1\",\n    terminal: true,\n    breakOnReturn: true,\n    group: false\n  },\n  code: {\n    tagName: \"pre\",\n    terminal: true,\n    text: {\n      plaintext: true\n    }\n  },\n  bulletList: {\n    tagName: \"ul\",\n    parse: false\n  },\n  bullet: {\n    tagName: \"li\",\n    listAttribute: \"bulletList\",\n    group: false,\n    nestable: true,\n\n    test(element) {\n      return tagName$1(element.parentNode) === attributes[this.listAttribute].tagName;\n    }\n\n  },\n  numberList: {\n    tagName: \"ol\",\n    parse: false\n  },\n  number: {\n    tagName: \"li\",\n    listAttribute: \"numberList\",\n    group: false,\n    nestable: true,\n\n    test(element) {\n      return tagName$1(element.parentNode) === attributes[this.listAttribute].tagName;\n    }\n\n  },\n  attachmentGallery: {\n    tagName: \"div\",\n    exclusive: true,\n    terminal: true,\n    parse: false,\n    group: false\n  }\n};\n\nconst tagName$1 = element => {\n  var _element$tagName;\n\n  return element === null || element === void 0 ? void 0 : (_element$tagName = element.tagName) === null || _element$tagName === void 0 ? void 0 : _element$tagName.toLowerCase();\n};\n\nvar browser$1 = {\n  // Android emits composition events when moving the cursor through existing text\n  // Introduced in Chrome 65: https://bugs.chromium.org/p/chromium/issues/detail?id=764439#c9\n  composesExistingText: /Android.*Chrome/.test(navigator.userAgent),\n  // IE 11 activates resizing handles on editable elements that have \"layout\"\n  forcesObjectResizing: /Trident.*rv:11/.test(navigator.userAgent),\n  // https://www.w3.org/TR/input-events-1/ + https://www.w3.org/TR/input-events-2/\n  supportsInputEvents: function () {\n    if (typeof InputEvent === \"undefined\") {\n      return false;\n    }\n\n    for (const property of [\"data\", \"getTargetRanges\", \"inputType\"]) {\n      if (!(property in InputEvent.prototype)) {\n        return false;\n      }\n    }\n\n    return true;\n  }()\n};\n\nvar css$3 = {\n  attachment: \"attachment\",\n  attachmentCaption: \"attachment__caption\",\n  attachmentCaptionEditor: \"attachment__caption-editor\",\n  attachmentMetadata: \"attachment__metadata\",\n  attachmentMetadataContainer: \"attachment__metadata-container\",\n  attachmentName: \"attachment__name\",\n  attachmentProgress: \"attachment__progress\",\n  attachmentSize: \"attachment__size\",\n  attachmentToolbar: \"attachment__toolbar\",\n  attachmentGallery: \"attachment-gallery\"\n};\n\nvar lang$1 = {\n  attachFiles: \"Attach Files\",\n  bold: \"Bold\",\n  bullets: \"Bullets\",\n  byte: \"Byte\",\n  bytes: \"Bytes\",\n  captionPlaceholder: \"Add a caption\",\n  code: \"Code\",\n  heading1: \"Heading\",\n  indent: \"Increase Level\",\n  italic: \"Italic\",\n  link: \"Link\",\n  numbers: \"Numbers\",\n  outdent: \"Decrease Level\",\n  quote: \"Quote\",\n  redo: \"Redo\",\n  remove: \"Remove\",\n  strike: \"Strikethrough\",\n  undo: \"Undo\",\n  unlink: \"Unlink\",\n  url: \"URL\",\n  urlPlaceholder: \"Enter a URL\",\n  GB: \"GB\",\n  KB: \"KB\",\n  MB: \"MB\",\n  PB: \"PB\",\n  TB: \"TB\"\n};\n\n/* eslint-disable\n    no-case-declarations,\n*/\nconst sizes = [lang$1.bytes, lang$1.KB, lang$1.MB, lang$1.GB, lang$1.TB, lang$1.PB];\nvar fileSize = {\n  prefix: \"IEC\",\n  precision: 2,\n\n  formatter(number) {\n    switch (number) {\n      case 0:\n        return \"0 \".concat(lang$1.bytes);\n\n      case 1:\n        return \"1 \".concat(lang$1.byte);\n\n      default:\n        let base;\n\n        if (this.prefix === \"SI\") {\n          base = 1000;\n        } else if (this.prefix === \"IEC\") {\n          base = 1024;\n        }\n\n        const exp = Math.floor(Math.log(number) / Math.log(base));\n        const humanSize = number / Math.pow(base, exp);\n        const string = humanSize.toFixed(this.precision);\n        const withoutInsignificantZeros = string.replace(/0*$/, \"\").replace(/\\.$/, \"\");\n        return \"\".concat(withoutInsignificantZeros, \" \").concat(sizes[exp]);\n    }\n  }\n\n};\n\nconst ZERO_WIDTH_SPACE = \"\\uFEFF\";\nconst NON_BREAKING_SPACE = \"\\u00A0\";\nconst OBJECT_REPLACEMENT_CHARACTER = \"\\uFFFC\";\n\nconst extend = function (properties) {\n  for (const key in properties) {\n    const value = properties[key];\n    this[key] = value;\n  }\n\n  return this;\n};\n\nconst html = document.documentElement;\nconst match = html.matches;\nconst handleEvent = function (eventName) {\n  let {\n    onElement,\n    matchingSelector,\n    withCallback,\n    inPhase,\n    preventDefault,\n    times\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const element = onElement ? onElement : html;\n  const selector = matchingSelector;\n  const useCapture = inPhase === \"capturing\";\n\n  const handler = function (event) {\n    if (times != null && --times === 0) {\n      handler.destroy();\n    }\n\n    const target = findClosestElementFromNode(event.target, {\n      matchingSelector: selector\n    });\n\n    if (target != null) {\n      withCallback === null || withCallback === void 0 ? void 0 : withCallback.call(target, event, target);\n\n      if (preventDefault) {\n        event.preventDefault();\n      }\n    }\n  };\n\n  handler.destroy = () => element.removeEventListener(eventName, handler, useCapture);\n\n  element.addEventListener(eventName, handler, useCapture);\n  return handler;\n};\nconst handleEventOnce = function (eventName) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  options.times = 1;\n  return handleEvent(eventName, options);\n};\nconst triggerEvent = function (eventName) {\n  let {\n    onElement,\n    bubbles,\n    cancelable,\n    attributes\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const element = onElement != null ? onElement : html;\n  bubbles = bubbles !== false;\n  cancelable = cancelable !== false;\n  const event = document.createEvent(\"Events\");\n  event.initEvent(eventName, bubbles, cancelable);\n\n  if (attributes != null) {\n    extend.call(event, attributes);\n  }\n\n  return element.dispatchEvent(event);\n};\nconst elementMatchesSelector = function (element, selector) {\n  if ((element === null || element === void 0 ? void 0 : element.nodeType) === 1) {\n    return match.call(element, selector);\n  }\n};\nconst findClosestElementFromNode = function (node) {\n  let {\n    matchingSelector,\n    untilNode\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  while (node && node.nodeType !== Node.ELEMENT_NODE) {\n    node = node.parentNode;\n  }\n\n  if (node == null) {\n    return;\n  }\n\n  if (matchingSelector != null) {\n    if (node.closest && untilNode == null) {\n      return node.closest(matchingSelector);\n    } else {\n      while (node && node !== untilNode) {\n        if (elementMatchesSelector(node, matchingSelector)) {\n          return node;\n        }\n\n        node = node.parentNode;\n      }\n    }\n  } else {\n    return node;\n  }\n};\nconst findInnerElement = function (element) {\n  while ((_element = element) !== null && _element !== void 0 && _element.firstElementChild) {\n    var _element;\n\n    element = element.firstElementChild;\n  }\n\n  return element;\n};\nconst innerElementIsActive = element => document.activeElement !== element && elementContainsNode(element, document.activeElement);\nconst elementContainsNode = function (element, node) {\n  if (!element || !node) {\n    return;\n  }\n\n  while (node) {\n    if (node === element) {\n      return true;\n    }\n\n    node = node.parentNode;\n  }\n};\nconst findNodeFromContainerAndOffset = function (container, offset) {\n  if (!container) {\n    return;\n  }\n\n  if (container.nodeType === Node.TEXT_NODE) {\n    return container;\n  } else if (offset === 0) {\n    return container.firstChild != null ? container.firstChild : container;\n  } else {\n    return container.childNodes.item(offset - 1);\n  }\n};\nconst findElementFromContainerAndOffset = function (container, offset) {\n  const node = findNodeFromContainerAndOffset(container, offset);\n  return findClosestElementFromNode(node);\n};\nconst findChildIndexOfNode = function (node) {\n  var _node;\n\n  if (!((_node = node) !== null && _node !== void 0 && _node.parentNode)) {\n    return;\n  }\n\n  let childIndex = 0;\n  node = node.previousSibling;\n\n  while (node) {\n    childIndex++;\n    node = node.previousSibling;\n  }\n\n  return childIndex;\n};\nconst removeNode = node => {\n  var _node$parentNode;\n\n  return node === null || node === void 0 ? void 0 : (_node$parentNode = node.parentNode) === null || _node$parentNode === void 0 ? void 0 : _node$parentNode.removeChild(node);\n};\nconst walkTree = function (tree) {\n  let {\n    onlyNodesOfType,\n    usingFilter,\n    expandEntityReferences\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  const whatToShow = (() => {\n    switch (onlyNodesOfType) {\n      case \"element\":\n        return NodeFilter.SHOW_ELEMENT;\n\n      case \"text\":\n        return NodeFilter.SHOW_TEXT;\n\n      case \"comment\":\n        return NodeFilter.SHOW_COMMENT;\n\n      default:\n        return NodeFilter.SHOW_ALL;\n    }\n  })();\n\n  return document.createTreeWalker(tree, whatToShow, usingFilter != null ? usingFilter : null, expandEntityReferences === true);\n};\nconst tagName = element => {\n  var _element$tagName;\n\n  return element === null || element === void 0 ? void 0 : (_element$tagName = element.tagName) === null || _element$tagName === void 0 ? void 0 : _element$tagName.toLowerCase();\n};\nconst makeElement = function (tag) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let key, value;\n\n  if (typeof tag === \"object\") {\n    options = tag;\n    tag = options.tagName;\n  } else {\n    options = {\n      attributes: options\n    };\n  }\n\n  const element = document.createElement(tag);\n\n  if (options.editable != null) {\n    if (options.attributes == null) {\n      options.attributes = {};\n    }\n\n    options.attributes.contenteditable = options.editable;\n  }\n\n  if (options.attributes) {\n    for (key in options.attributes) {\n      value = options.attributes[key];\n      element.setAttribute(key, value);\n    }\n  }\n\n  if (options.style) {\n    for (key in options.style) {\n      value = options.style[key];\n      element.style[key] = value;\n    }\n  }\n\n  if (options.data) {\n    for (key in options.data) {\n      value = options.data[key];\n      element.dataset[key] = value;\n    }\n  }\n\n  if (options.className) {\n    options.className.split(\" \").forEach(className => {\n      element.classList.add(className);\n    });\n  }\n\n  if (options.textContent) {\n    element.textContent = options.textContent;\n  }\n\n  if (options.childNodes) {\n    [].concat(options.childNodes).forEach(childNode => {\n      element.appendChild(childNode);\n    });\n  }\n\n  return element;\n};\nlet blockTagNames = undefined;\nconst getBlockTagNames = function () {\n  if (blockTagNames != null) {\n    return blockTagNames;\n  }\n\n  blockTagNames = [];\n\n  for (const key in attributes) {\n    const attributes$1 = attributes[key];\n\n    if (attributes$1.tagName) {\n      blockTagNames.push(attributes$1.tagName);\n    }\n  }\n\n  return blockTagNames;\n};\nconst nodeIsBlockContainer = node => nodeIsBlockStartComment(node === null || node === void 0 ? void 0 : node.firstChild);\nconst nodeProbablyIsBlockContainer = function (node) {\n  return getBlockTagNames().includes(tagName(node)) && !getBlockTagNames().includes(tagName(node.firstChild));\n};\nconst nodeIsBlockStart = function (node) {\n  let {\n    strict\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    strict: true\n  };\n\n  if (strict) {\n    return nodeIsBlockStartComment(node);\n  } else {\n    return nodeIsBlockStartComment(node) || !nodeIsBlockStartComment(node.firstChild) && nodeProbablyIsBlockContainer(node);\n  }\n};\nconst nodeIsBlockStartComment = node => nodeIsCommentNode(node) && (node === null || node === void 0 ? void 0 : node.data) === \"block\";\nconst nodeIsCommentNode = node => (node === null || node === void 0 ? void 0 : node.nodeType) === Node.COMMENT_NODE;\nconst nodeIsCursorTarget = function (node) {\n  let {\n    name\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!node) {\n    return;\n  }\n\n  if (nodeIsTextNode(node)) {\n    if (node.data === ZERO_WIDTH_SPACE) {\n      if (name) {\n        return node.parentNode.dataset.trixCursorTarget === name;\n      } else {\n        return true;\n      }\n    }\n  } else {\n    return nodeIsCursorTarget(node.firstChild);\n  }\n};\nconst nodeIsAttachmentElement = node => elementMatchesSelector(node, attachmentSelector);\nconst nodeIsEmptyTextNode = node => nodeIsTextNode(node) && (node === null || node === void 0 ? void 0 : node.data) === \"\";\nconst nodeIsTextNode = node => (node === null || node === void 0 ? void 0 : node.nodeType) === Node.TEXT_NODE;\n\nconst input = {\n  level2Enabled: true,\n\n  getLevel() {\n    if (this.level2Enabled && browser$1.supportsInputEvents) {\n      return 2;\n    } else {\n      return 0;\n    }\n  },\n\n  pickFiles(callback) {\n    const input = makeElement(\"input\", {\n      type: \"file\",\n      multiple: true,\n      hidden: true,\n      id: this.fileInputId\n    });\n    input.addEventListener(\"change\", () => {\n      callback(input.files);\n      removeNode(input);\n    });\n    removeNode(document.getElementById(this.fileInputId));\n    document.body.appendChild(input);\n    input.click();\n  }\n\n};\n\nvar keyNames$2 = {\n  8: \"backspace\",\n  9: \"tab\",\n  13: \"return\",\n  27: \"escape\",\n  37: \"left\",\n  39: \"right\",\n  46: \"delete\",\n  68: \"d\",\n  72: \"h\",\n  79: \"o\"\n};\n\nvar textAttributes = {\n  bold: {\n    tagName: \"strong\",\n    inheritable: true,\n\n    parser(element) {\n      const style = window.getComputedStyle(element);\n      return style.fontWeight === \"bold\" || style.fontWeight >= 600;\n    }\n\n  },\n  italic: {\n    tagName: \"em\",\n    inheritable: true,\n\n    parser(element) {\n      const style = window.getComputedStyle(element);\n      return style.fontStyle === \"italic\";\n    }\n\n  },\n  href: {\n    groupTagName: \"a\",\n\n    parser(element) {\n      const matchingSelector = \"a:not(\".concat(attachmentSelector, \")\");\n      const link = element.closest(matchingSelector);\n\n      if (link) {\n        return link.getAttribute(\"href\");\n      }\n    }\n\n  },\n  strike: {\n    tagName: \"del\",\n    inheritable: true\n  },\n  frozen: {\n    style: {\n      backgroundColor: \"highlight\"\n    }\n  }\n};\n\nvar toolbar = {\n  getDefaultHTML() {\n    return \"<div class=\\\"trix-button-row\\\">\\n      <span class=\\\"trix-button-group trix-button-group--text-tools\\\" data-trix-button-group=\\\"text-tools\\\">\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-bold\\\" data-trix-attribute=\\\"bold\\\" data-trix-key=\\\"b\\\" title=\\\"\".concat(lang$1.bold, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.bold, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-italic\\\" data-trix-attribute=\\\"italic\\\" data-trix-key=\\\"i\\\" title=\\\"\").concat(lang$1.italic, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.italic, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-strike\\\" data-trix-attribute=\\\"strike\\\" title=\\\"\").concat(lang$1.strike, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.strike, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-link\\\" data-trix-attribute=\\\"href\\\" data-trix-action=\\\"link\\\" data-trix-key=\\\"k\\\" title=\\\"\").concat(lang$1.link, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.link, \"</button>\\n      </span>\\n\\n      <span class=\\\"trix-button-group trix-button-group--block-tools\\\" data-trix-button-group=\\\"block-tools\\\">\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-heading-1\\\" data-trix-attribute=\\\"heading1\\\" title=\\\"\").concat(lang$1.heading1, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.heading1, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-quote\\\" data-trix-attribute=\\\"quote\\\" title=\\\"\").concat(lang$1.quote, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.quote, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-code\\\" data-trix-attribute=\\\"code\\\" title=\\\"\").concat(lang$1.code, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.code, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-bullet-list\\\" data-trix-attribute=\\\"bullet\\\" title=\\\"\").concat(lang$1.bullets, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.bullets, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-number-list\\\" data-trix-attribute=\\\"number\\\" title=\\\"\").concat(lang$1.numbers, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.numbers, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-decrease-nesting-level\\\" data-trix-action=\\\"decreaseNestingLevel\\\" title=\\\"\").concat(lang$1.outdent, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.outdent, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-increase-nesting-level\\\" data-trix-action=\\\"increaseNestingLevel\\\" title=\\\"\").concat(lang$1.indent, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.indent, \"</button>\\n      </span>\\n\\n      <span class=\\\"trix-button-group trix-button-group--file-tools\\\" data-trix-button-group=\\\"file-tools\\\">\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-attach\\\" data-trix-action=\\\"attachFiles\\\" title=\\\"\").concat(lang$1.attachFiles, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.attachFiles, \"</button>\\n      </span>\\n\\n      <span class=\\\"trix-button-group-spacer\\\"></span>\\n\\n      <span class=\\\"trix-button-group trix-button-group--history-tools\\\" data-trix-button-group=\\\"history-tools\\\">\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-undo\\\" data-trix-action=\\\"undo\\\" data-trix-key=\\\"z\\\" title=\\\"\").concat(lang$1.undo, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.undo, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-redo\\\" data-trix-action=\\\"redo\\\" data-trix-key=\\\"shift+z\\\" title=\\\"\").concat(lang$1.redo, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.redo, \"</button>\\n      </span>\\n    </div>\\n\\n    <div class=\\\"trix-dialogs\\\" data-trix-dialogs>\\n      <div class=\\\"trix-dialog trix-dialog--link\\\" data-trix-dialog=\\\"href\\\" data-trix-dialog-attribute=\\\"href\\\">\\n        <div class=\\\"trix-dialog__link-fields\\\">\\n          <input type=\\\"url\\\" name=\\\"href\\\" class=\\\"trix-input trix-input--dialog\\\" placeholder=\\\"\").concat(lang$1.urlPlaceholder, \"\\\" aria-label=\\\"\").concat(lang$1.url, \"\\\" required data-trix-input>\\n          <div class=\\\"trix-button-group\\\">\\n            <input type=\\\"button\\\" class=\\\"trix-button trix-button--dialog\\\" value=\\\"\").concat(lang$1.link, \"\\\" data-trix-method=\\\"setAttribute\\\">\\n            <input type=\\\"button\\\" class=\\\"trix-button trix-button--dialog\\\" value=\\\"\").concat(lang$1.unlink, \"\\\" data-trix-method=\\\"removeAttribute\\\">\\n          </div>\\n        </div>\\n      </div>\\n    </div>\");\n  }\n\n};\n\nconst undoInterval = 5000;\n\nconst config = {\n  attachments,\n  blockAttributes: attributes,\n  browser: browser$1,\n  css: css$3,\n  fileSize,\n  input,\n  keyNames: keyNames$2,\n  lang: lang$1,\n  textAttributes,\n  toolbar,\n  undoInterval\n};\n\nfunction createMetadataMethodsForProperty(metadataMap, kind, property, decoratorFinishedRef) {\n  return {\n    getMetadata: function (key) {\n      assertNotFinished(decoratorFinishedRef, \"getMetadata\"), assertMetadataKey(key);\n      var metadataForKey = metadataMap[key];\n      if (void 0 !== metadataForKey) if (1 === kind) {\n        var pub = metadataForKey.public;\n        if (void 0 !== pub) return pub[property];\n      } else if (2 === kind) {\n        var priv = metadataForKey.private;\n        if (void 0 !== priv) return priv.get(property);\n      } else if (Object.hasOwnProperty.call(metadataForKey, \"constructor\")) return metadataForKey.constructor;\n    },\n    setMetadata: function (key, value) {\n      assertNotFinished(decoratorFinishedRef, \"setMetadata\"), assertMetadataKey(key);\n      var metadataForKey = metadataMap[key];\n\n      if (void 0 === metadataForKey && (metadataForKey = metadataMap[key] = {}), 1 === kind) {\n        var pub = metadataForKey.public;\n        void 0 === pub && (pub = metadataForKey.public = {}), pub[property] = value;\n      } else if (2 === kind) {\n        var priv = metadataForKey.priv;\n        void 0 === priv && (priv = metadataForKey.private = new Map()), priv.set(property, value);\n      } else metadataForKey.constructor = value;\n    }\n  };\n}\n\nfunction convertMetadataMapToFinal(obj, metadataMap) {\n  var parentMetadataMap = obj[Symbol.metadata || Symbol.for(\"Symbol.metadata\")],\n      metadataKeys = Object.getOwnPropertySymbols(metadataMap);\n\n  if (0 !== metadataKeys.length) {\n    for (var i = 0; i < metadataKeys.length; i++) {\n      var key = metadataKeys[i],\n          metaForKey = metadataMap[key],\n          parentMetaForKey = parentMetadataMap ? parentMetadataMap[key] : null,\n          pub = metaForKey.public,\n          parentPub = parentMetaForKey ? parentMetaForKey.public : null;\n      pub && parentPub && Object.setPrototypeOf(pub, parentPub);\n      var priv = metaForKey.private;\n\n      if (priv) {\n        var privArr = Array.from(priv.values()),\n            parentPriv = parentMetaForKey ? parentMetaForKey.private : null;\n        parentPriv && (privArr = privArr.concat(parentPriv)), metaForKey.private = privArr;\n      }\n\n      parentMetaForKey && Object.setPrototypeOf(metaForKey, parentMetaForKey);\n    }\n\n    parentMetadataMap && Object.setPrototypeOf(metadataMap, parentMetadataMap), obj[Symbol.metadata || Symbol.for(\"Symbol.metadata\")] = metadataMap;\n  }\n}\n\nfunction createAddInitializerMethod(initializers, decoratorFinishedRef) {\n  return function (initializer) {\n    assertNotFinished(decoratorFinishedRef, \"addInitializer\"), assertCallable(initializer, \"An initializer\"), initializers.push(initializer);\n  };\n}\n\nfunction memberDec(dec, name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value) {\n  var kindStr;\n\n  switch (kind) {\n    case 1:\n      kindStr = \"accessor\";\n      break;\n\n    case 2:\n      kindStr = \"method\";\n      break;\n\n    case 3:\n      kindStr = \"getter\";\n      break;\n\n    case 4:\n      kindStr = \"setter\";\n      break;\n\n    default:\n      kindStr = \"field\";\n  }\n\n  var metadataKind,\n      metadataName,\n      ctx = {\n    kind: kindStr,\n    name: isPrivate ? \"#\" + name : name,\n    isStatic: isStatic,\n    isPrivate: isPrivate\n  },\n      decoratorFinishedRef = {\n    v: !1\n  };\n\n  if (0 !== kind && (ctx.addInitializer = createAddInitializerMethod(initializers, decoratorFinishedRef)), isPrivate) {\n    metadataKind = 2, metadataName = Symbol(name);\n    var access = {};\n    0 === kind ? (access.get = desc.get, access.set = desc.set) : 2 === kind ? access.get = function () {\n      return desc.value;\n    } : (1 !== kind && 3 !== kind || (access.get = function () {\n      return desc.get.call(this);\n    }), 1 !== kind && 4 !== kind || (access.set = function (v) {\n      desc.set.call(this, v);\n    })), ctx.access = access;\n  } else metadataKind = 1, metadataName = name;\n\n  try {\n    return dec(value, Object.assign(ctx, createMetadataMethodsForProperty(metadataMap, metadataKind, metadataName, decoratorFinishedRef)));\n  } finally {\n    decoratorFinishedRef.v = !0;\n  }\n}\n\nfunction assertNotFinished(decoratorFinishedRef, fnName) {\n  if (decoratorFinishedRef.v) throw new Error(\"attempted to call \" + fnName + \" after decoration was finished\");\n}\n\nfunction assertMetadataKey(key) {\n  if (\"symbol\" != typeof key) throw new TypeError(\"Metadata keys must be symbols, received: \" + key);\n}\n\nfunction assertCallable(fn, hint) {\n  if (\"function\" != typeof fn) throw new TypeError(hint + \" must be a function\");\n}\n\nfunction assertValidReturnValue(kind, value) {\n  var type = typeof value;\n\n  if (1 === kind) {\n    if (\"object\" !== type || null === value) throw new TypeError(\"accessor decorators must return an object with get, set, or init properties or void 0\");\n    void 0 !== value.get && assertCallable(value.get, \"accessor.get\"), void 0 !== value.set && assertCallable(value.set, \"accessor.set\"), void 0 !== value.init && assertCallable(value.init, \"accessor.init\"), void 0 !== value.initializer && assertCallable(value.initializer, \"accessor.initializer\");\n  } else if (\"function\" !== type) {\n    var hint;\n    throw hint = 0 === kind ? \"field\" : 10 === kind ? \"class\" : \"method\", new TypeError(hint + \" decorators must return a function or void 0\");\n  }\n}\n\nfunction getInit(desc) {\n  var initializer;\n  return null == (initializer = desc.init) && (initializer = desc.initializer) && \"undefined\" != typeof console && console.warn(\".initializer has been renamed to .init as of March 2022\"), initializer;\n}\n\nfunction applyMemberDec(ret, base, decInfo, name, kind, isStatic, isPrivate, metadataMap, initializers) {\n  var desc,\n      initializer,\n      value,\n      newValue,\n      get,\n      set,\n      decs = decInfo[0];\n  if (isPrivate ? desc = 0 === kind || 1 === kind ? {\n    get: decInfo[3],\n    set: decInfo[4]\n  } : 3 === kind ? {\n    get: decInfo[3]\n  } : 4 === kind ? {\n    set: decInfo[3]\n  } : {\n    value: decInfo[3]\n  } : 0 !== kind && (desc = Object.getOwnPropertyDescriptor(base, name)), 1 === kind ? value = {\n    get: desc.get,\n    set: desc.set\n  } : 2 === kind ? value = desc.value : 3 === kind ? value = desc.get : 4 === kind && (value = desc.set), \"function\" == typeof decs) void 0 !== (newValue = memberDec(decs, name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value)) && (assertValidReturnValue(kind, newValue), 0 === kind ? initializer = newValue : 1 === kind ? (initializer = getInit(newValue), get = newValue.get || value.get, set = newValue.set || value.set, value = {\n    get: get,\n    set: set\n  }) : value = newValue);else for (var i = decs.length - 1; i >= 0; i--) {\n    var newInit;\n    if (void 0 !== (newValue = memberDec(decs[i], name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value))) assertValidReturnValue(kind, newValue), 0 === kind ? newInit = newValue : 1 === kind ? (newInit = getInit(newValue), get = newValue.get || value.get, set = newValue.set || value.set, value = {\n      get: get,\n      set: set\n    }) : value = newValue, void 0 !== newInit && (void 0 === initializer ? initializer = newInit : \"function\" == typeof initializer ? initializer = [initializer, newInit] : initializer.push(newInit));\n  }\n\n  if (0 === kind || 1 === kind) {\n    if (void 0 === initializer) initializer = function (instance, init) {\n      return init;\n    };else if (\"function\" != typeof initializer) {\n      var ownInitializers = initializer;\n\n      initializer = function (instance, init) {\n        for (var value = init, i = 0; i < ownInitializers.length; i++) value = ownInitializers[i].call(instance, value);\n\n        return value;\n      };\n    } else {\n      var originalInitializer = initializer;\n\n      initializer = function (instance, init) {\n        return originalInitializer.call(instance, init);\n      };\n    }\n    ret.push(initializer);\n  }\n\n  0 !== kind && (1 === kind ? (desc.get = value.get, desc.set = value.set) : 2 === kind ? desc.value = value : 3 === kind ? desc.get = value : 4 === kind && (desc.set = value), isPrivate ? 1 === kind ? (ret.push(function (instance, args) {\n    return value.get.call(instance, args);\n  }), ret.push(function (instance, args) {\n    return value.set.call(instance, args);\n  })) : 2 === kind ? ret.push(value) : ret.push(function (instance, args) {\n    return value.call(instance, args);\n  }) : Object.defineProperty(base, name, desc));\n}\n\nfunction applyMemberDecs(ret, Class, protoMetadataMap, staticMetadataMap, decInfos) {\n  for (var protoInitializers, staticInitializers, existingProtoNonFields = new Map(), existingStaticNonFields = new Map(), i = 0; i < decInfos.length; i++) {\n    var decInfo = decInfos[i];\n\n    if (Array.isArray(decInfo)) {\n      var base,\n          metadataMap,\n          initializers,\n          kind = decInfo[1],\n          name = decInfo[2],\n          isPrivate = decInfo.length > 3,\n          isStatic = kind >= 5;\n\n      if (isStatic ? (base = Class, metadataMap = staticMetadataMap, 0 !== (kind -= 5) && (initializers = staticInitializers = staticInitializers || [])) : (base = Class.prototype, metadataMap = protoMetadataMap, 0 !== kind && (initializers = protoInitializers = protoInitializers || [])), 0 !== kind && !isPrivate) {\n        var existingNonFields = isStatic ? existingStaticNonFields : existingProtoNonFields,\n            existingKind = existingNonFields.get(name) || 0;\n        if (!0 === existingKind || 3 === existingKind && 4 !== kind || 4 === existingKind && 3 !== kind) throw new Error(\"Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: \" + name);\n        !existingKind && kind > 2 ? existingNonFields.set(name, kind) : existingNonFields.set(name, !0);\n      }\n\n      applyMemberDec(ret, base, decInfo, name, kind, isStatic, isPrivate, metadataMap, initializers);\n    }\n  }\n\n  pushInitializers(ret, protoInitializers), pushInitializers(ret, staticInitializers);\n}\n\nfunction pushInitializers(ret, initializers) {\n  initializers && ret.push(function (instance) {\n    for (var i = 0; i < initializers.length; i++) initializers[i].call(instance);\n\n    return instance;\n  });\n}\n\nfunction applyClassDecs(ret, targetClass, metadataMap, classDecs) {\n  if (classDecs.length > 0) {\n    for (var initializers = [], newClass = targetClass, name = targetClass.name, i = classDecs.length - 1; i >= 0; i--) {\n      var decoratorFinishedRef = {\n        v: !1\n      };\n\n      try {\n        var ctx = Object.assign({\n          kind: \"class\",\n          name: name,\n          addInitializer: createAddInitializerMethod(initializers, decoratorFinishedRef)\n        }, createMetadataMethodsForProperty(metadataMap, 0, name, decoratorFinishedRef)),\n            nextNewClass = classDecs[i](newClass, ctx);\n      } finally {\n        decoratorFinishedRef.v = !0;\n      }\n\n      void 0 !== nextNewClass && (assertValidReturnValue(10, nextNewClass), newClass = nextNewClass);\n    }\n\n    ret.push(newClass, function () {\n      for (var i = 0; i < initializers.length; i++) initializers[i].call(newClass);\n    });\n  }\n}\n\nfunction _applyDecs(targetClass, memberDecs, classDecs) {\n  var ret = [],\n      staticMetadataMap = {},\n      protoMetadataMap = {};\n  return applyMemberDecs(ret, targetClass, protoMetadataMap, staticMetadataMap, memberDecs), convertMetadataMapToFinal(targetClass.prototype, protoMetadataMap), applyClassDecs(ret, targetClass, staticMetadataMap, classDecs), convertMetadataMapToFinal(targetClass, staticMetadataMap), ret;\n}\n\nfunction _asyncIterator(iterable) {\n  var method,\n      async,\n      sync,\n      retry = 2;\n\n  for (\"undefined\" != typeof Symbol && (async = Symbol.asyncIterator, sync = Symbol.iterator); retry--;) {\n    if (async && null != (method = iterable[async])) return method.call(iterable);\n    if (sync && null != (method = iterable[sync])) return new AsyncFromSyncIterator(method.call(iterable));\n    async = \"@@asyncIterator\", sync = \"@@iterator\";\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}\n\nfunction AsyncFromSyncIterator(s) {\n  function AsyncFromSyncIteratorContinuation(r) {\n    if (Object(r) !== r) return Promise.reject(new TypeError(r + \" is not an object.\"));\n    var done = r.done;\n    return Promise.resolve(r.value).then(function (value) {\n      return {\n        value: value,\n        done: done\n      };\n    });\n  }\n\n  return AsyncFromSyncIterator = function (s) {\n    this.s = s, this.n = s.next;\n  }, AsyncFromSyncIterator.prototype = {\n    s: null,\n    n: null,\n    next: function () {\n      return AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments));\n    },\n    return: function (value) {\n      var ret = this.s.return;\n      return void 0 === ret ? Promise.resolve({\n        value: value,\n        done: !0\n      }) : AsyncFromSyncIteratorContinuation(ret.apply(this.s, arguments));\n    },\n    throw: function (value) {\n      var thr = this.s.return;\n      return void 0 === thr ? Promise.reject(value) : AsyncFromSyncIteratorContinuation(thr.apply(this.s, arguments));\n    }\n  }, new AsyncFromSyncIterator(s);\n}\n\nvar REACT_ELEMENT_TYPE;\n\nfunction _jsx(type, props, key, children) {\n  REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);\n  var defaultProps = type && type.defaultProps,\n      childrenLength = arguments.length - 3;\n  if (props || 0 === childrenLength || (props = {\n    children: void 0\n  }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {\n    for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];\n\n    props.children = childArray;\n  }\n  if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: void 0 === key ? null : \"\" + key,\n    ref: null,\n    props: props,\n    _owner: null\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      return groups[name] = result[g[name]], groups;\n    }, Object.create(null));\n  }\n\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    return result && (result.groups = buildGroups(result, this)), result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        return \"$\" + groups[name];\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\n\nfunction _AwaitValue(value) {\n  this.wrapped = value;\n}\n\nfunction _AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof _AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen.return !== \"function\") {\n    this.return = undefined;\n  }\n}\n\n_AsyncGenerator.prototype[typeof Symbol === \"function\" && Symbol.asyncIterator || \"@@asyncIterator\"] = function () {\n  return this;\n};\n\n_AsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\n_AsyncGenerator.prototype.throw = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\n_AsyncGenerator.prototype.return = function (arg) {\n  return this._invoke(\"return\", arg);\n};\n\nfunction _wrapAsyncGenerator(fn) {\n  return function () {\n    return new _AsyncGenerator(fn.apply(this, arguments));\n  };\n}\n\nfunction _awaitAsyncGenerator(value) {\n  return new _AwaitValue(value);\n}\n\nfunction _asyncGeneratorDelegate(inner, awaitWrap) {\n  var iter = {},\n      waiting = false;\n\n  function pump(key, value) {\n    waiting = true;\n    value = new Promise(function (resolve) {\n      resolve(inner[key](value));\n    });\n    return {\n      done: false,\n      value: awaitWrap(value)\n    };\n  }\n\n  ;\n\n  iter[typeof Symbol !== \"undefined\" && Symbol.iterator || \"@@iterator\"] = function () {\n    return this;\n  };\n\n  iter.next = function (value) {\n    if (waiting) {\n      waiting = false;\n      return value;\n    }\n\n    return pump(\"next\", value);\n  };\n\n  if (typeof inner.throw === \"function\") {\n    iter.throw = function (value) {\n      if (waiting) {\n        waiting = false;\n        throw value;\n      }\n\n      return pump(\"throw\", value);\n    };\n  }\n\n  if (typeof inner.return === \"function\") {\n    iter.return = function (value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump(\"return\", value);\n    };\n  }\n\n  return iter;\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _defineEnumerableProperties(obj, descs) {\n  for (var key in descs) {\n    var desc = descs[key];\n    desc.configurable = desc.enumerable = true;\n    if (\"value\" in desc) desc.writable = true;\n    Object.defineProperty(obj, key, desc);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n    for (var i = 0; i < objectSymbols.length; i++) {\n      var sym = objectSymbols[i];\n      var desc = descs[sym];\n      desc.configurable = desc.enumerable = true;\n      if (\"value\" in desc) desc.writable = true;\n      Object.defineProperty(obj, sym, desc);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys.push.apply(ownKeys, Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nfunction _instanceof(left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return !!right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _newArrowCheck(innerThis, boundThis) {\n  if (innerThis !== boundThis) {\n    throw new TypeError(\"Cannot instantiate an arrow function\");\n  }\n}\n\nfunction _objectDestructuringEmpty(obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get.apply(this, arguments);\n}\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = _superPropBase(target, property);\n\n      var desc;\n\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        _defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nfunction _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _taggedTemplateLiteralLoose(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  strings.raw = raw;\n  return strings;\n}\n\nfunction _readOnlyError(name) {\n  throw new TypeError(\"\\\"\" + name + \"\\\" is read-only\");\n}\n\nfunction _writeOnlyError(name) {\n  throw new TypeError(\"\\\"\" + name + \"\\\" is write-only\");\n}\n\nfunction _classNameTDZError(name) {\n  throw new Error(\"Class \\\"\" + name + \"\\\" cannot be referenced in computed property keys.\");\n}\n\nfunction _temporalUndefined() {}\n\nfunction _tdz(name) {\n  throw new ReferenceError(name + \" is not defined - temporal dead zone\");\n}\n\nfunction _temporalRef(val, name) {\n  return val === _temporalUndefined ? _tdz(name) : val;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _slicedToArrayLoose(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toArray(arr) {\n  return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _maybeArrayLike(next, arr, i) {\n  if (arr && !Array.isArray(arr) && typeof arr.length === \"number\") {\n    var len = arr.length;\n    return _arrayLikeToArray(arr, i !== void 0 && i < len ? i : len);\n  }\n\n  return next(arr, i);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _iterableToArrayLimitLoose(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n\n  for (_i = _i.call(arr), _step; !(_step = _i.next()).done;) {\n    _arr.push(_step.value);\n\n    if (i && _arr.length === i) break;\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _skipFirstGeneratorNext(fn) {\n  return function () {\n    var it = fn.apply(this, arguments);\n    it.next();\n    return it;\n  };\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _initializerWarningHelper(descriptor, context) {\n  throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.');\n}\n\nfunction _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object.keys(descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object.defineProperty(target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\nvar id$2 = 0;\n\nfunction _classPrivateFieldLooseKey(name) {\n  return \"__private_\" + id$2++ + \"_\" + name;\n}\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) {\n  if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n    throw new TypeError(\"attempted to use private field on non-instance\");\n  }\n\n  return receiver;\n}\n\nfunction _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\");\n\n  return _classApplyDescriptorGet(receiver, descriptor);\n}\n\nfunction _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\");\n\n  _classApplyDescriptorSet(receiver, descriptor, value);\n\n  return value;\n}\n\nfunction _classPrivateFieldDestructureSet(receiver, privateMap) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\");\n\n  return _classApplyDescriptorDestructureSet(receiver, descriptor);\n}\n\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n\n  return privateMap.get(receiver);\n}\n\nfunction _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n  _classCheckPrivateStaticAccess(receiver, classConstructor);\n\n  _classCheckPrivateStaticFieldDescriptor(descriptor, \"get\");\n\n  return _classApplyDescriptorGet(receiver, descriptor);\n}\n\nfunction _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n  _classCheckPrivateStaticAccess(receiver, classConstructor);\n\n  _classCheckPrivateStaticFieldDescriptor(descriptor, \"set\");\n\n  _classApplyDescriptorSet(receiver, descriptor, value);\n\n  return value;\n}\n\nfunction _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n  _classCheckPrivateStaticAccess(receiver, classConstructor);\n\n  return method;\n}\n\nfunction _classStaticPrivateMethodSet() {\n  throw new TypeError(\"attempted to set read only static private field\");\n}\n\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n\n  return descriptor.value;\n}\n\nfunction _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    descriptor.value = value;\n  }\n}\n\nfunction _classApplyDescriptorDestructureSet(receiver, descriptor) {\n  if (descriptor.set) {\n    if (!(\"__destrObj\" in descriptor)) {\n      descriptor.__destrObj = {\n        set value(v) {\n          descriptor.set.call(receiver, v);\n        }\n\n      };\n    }\n\n    return descriptor.__destrObj;\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    return descriptor;\n  }\n}\n\nfunction _classStaticPrivateFieldDestructureSet(receiver, classConstructor, descriptor) {\n  _classCheckPrivateStaticAccess(receiver, classConstructor);\n\n  _classCheckPrivateStaticFieldDescriptor(descriptor, \"set\");\n\n  return _classApplyDescriptorDestructureSet(receiver, descriptor);\n}\n\nfunction _classCheckPrivateStaticAccess(receiver, classConstructor) {\n  if (receiver !== classConstructor) {\n    throw new TypeError(\"Private static access of wrong provenance\");\n  }\n}\n\nfunction _classCheckPrivateStaticFieldDescriptor(descriptor, action) {\n  if (descriptor === undefined) {\n    throw new TypeError(\"attempted to \" + action + \" private static field before its declaration\");\n  }\n}\n\nfunction _decorate(decorators, factory, superClass, mixins) {\n  var api = _getDecoratorsApi();\n\n  if (mixins) {\n    for (var i = 0; i < mixins.length; i++) {\n      api = mixins[i](api);\n    }\n  }\n\n  var r = factory(function initialize(O) {\n    api.initializeInstanceElements(O, decorated.elements);\n  }, superClass);\n  var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators);\n  api.initializeClassElements(r.F, decorated.elements);\n  return api.runClassFinishers(r.F, decorated.finishers);\n}\n\nfunction _getDecoratorsApi() {\n  _getDecoratorsApi = function () {\n    return api;\n  };\n\n  var api = {\n    elementsDefinitionOrder: [[\"method\"], [\"field\"]],\n    initializeInstanceElements: function (O, elements) {\n      [\"method\", \"field\"].forEach(function (kind) {\n        elements.forEach(function (element) {\n          if (element.kind === kind && element.placement === \"own\") {\n            this.defineClassElement(O, element);\n          }\n        }, this);\n      }, this);\n    },\n    initializeClassElements: function (F, elements) {\n      var proto = F.prototype;\n      [\"method\", \"field\"].forEach(function (kind) {\n        elements.forEach(function (element) {\n          var placement = element.placement;\n\n          if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) {\n            var receiver = placement === \"static\" ? F : proto;\n            this.defineClassElement(receiver, element);\n          }\n        }, this);\n      }, this);\n    },\n    defineClassElement: function (receiver, element) {\n      var descriptor = element.descriptor;\n\n      if (element.kind === \"field\") {\n        var initializer = element.initializer;\n        descriptor = {\n          enumerable: descriptor.enumerable,\n          writable: descriptor.writable,\n          configurable: descriptor.configurable,\n          value: initializer === void 0 ? void 0 : initializer.call(receiver)\n        };\n      }\n\n      Object.defineProperty(receiver, element.key, descriptor);\n    },\n    decorateClass: function (elements, decorators) {\n      var newElements = [];\n      var finishers = [];\n      var placements = {\n        static: [],\n        prototype: [],\n        own: []\n      };\n      elements.forEach(function (element) {\n        this.addElementPlacement(element, placements);\n      }, this);\n      elements.forEach(function (element) {\n        if (!_hasDecorators(element)) return newElements.push(element);\n        var elementFinishersExtras = this.decorateElement(element, placements);\n        newElements.push(elementFinishersExtras.element);\n        newElements.push.apply(newElements, elementFinishersExtras.extras);\n        finishers.push.apply(finishers, elementFinishersExtras.finishers);\n      }, this);\n\n      if (!decorators) {\n        return {\n          elements: newElements,\n          finishers: finishers\n        };\n      }\n\n      var result = this.decorateConstructor(newElements, decorators);\n      finishers.push.apply(finishers, result.finishers);\n      result.finishers = finishers;\n      return result;\n    },\n    addElementPlacement: function (element, placements, silent) {\n      var keys = placements[element.placement];\n\n      if (!silent && keys.indexOf(element.key) !== -1) {\n        throw new TypeError(\"Duplicated element (\" + element.key + \")\");\n      }\n\n      keys.push(element.key);\n    },\n    decorateElement: function (element, placements) {\n      var extras = [];\n      var finishers = [];\n\n      for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n        var keys = placements[element.placement];\n        keys.splice(keys.indexOf(element.key), 1);\n        var elementObject = this.fromElementDescriptor(element);\n        var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject);\n        element = elementFinisherExtras.element;\n        this.addElementPlacement(element, placements);\n\n        if (elementFinisherExtras.finisher) {\n          finishers.push(elementFinisherExtras.finisher);\n        }\n\n        var newExtras = elementFinisherExtras.extras;\n\n        if (newExtras) {\n          for (var j = 0; j < newExtras.length; j++) {\n            this.addElementPlacement(newExtras[j], placements);\n          }\n\n          extras.push.apply(extras, newExtras);\n        }\n      }\n\n      return {\n        element: element,\n        finishers: finishers,\n        extras: extras\n      };\n    },\n    decorateConstructor: function (elements, decorators) {\n      var finishers = [];\n\n      for (var i = decorators.length - 1; i >= 0; i--) {\n        var obj = this.fromClassDescriptor(elements);\n        var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj);\n\n        if (elementsAndFinisher.finisher !== undefined) {\n          finishers.push(elementsAndFinisher.finisher);\n        }\n\n        if (elementsAndFinisher.elements !== undefined) {\n          elements = elementsAndFinisher.elements;\n\n          for (var j = 0; j < elements.length - 1; j++) {\n            for (var k = j + 1; k < elements.length; k++) {\n              if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) {\n                throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\");\n              }\n            }\n          }\n        }\n      }\n\n      return {\n        elements: elements,\n        finishers: finishers\n      };\n    },\n    fromElementDescriptor: function (element) {\n      var obj = {\n        kind: element.kind,\n        key: element.key,\n        placement: element.placement,\n        descriptor: element.descriptor\n      };\n      var desc = {\n        value: \"Descriptor\",\n        configurable: true\n      };\n      Object.defineProperty(obj, Symbol.toStringTag, desc);\n      if (element.kind === \"field\") obj.initializer = element.initializer;\n      return obj;\n    },\n    toElementDescriptors: function (elementObjects) {\n      if (elementObjects === undefined) return;\n      return _toArray(elementObjects).map(function (elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n        this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\");\n        this.disallowProperty(elementObject, \"extras\", \"An element descriptor\");\n        return element;\n      }, this);\n    },\n    toElementDescriptor: function (elementObject) {\n      var kind = String(elementObject.kind);\n\n      if (kind !== \"method\" && kind !== \"field\") {\n        throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"');\n      }\n\n      var key = _toPropertyKey(elementObject.key);\n\n      var placement = String(elementObject.placement);\n\n      if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") {\n        throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"');\n      }\n\n      var descriptor = elementObject.descriptor;\n      this.disallowProperty(elementObject, \"elements\", \"An element descriptor\");\n      var element = {\n        kind: kind,\n        key: key,\n        placement: placement,\n        descriptor: Object.assign({}, descriptor)\n      };\n\n      if (kind !== \"field\") {\n        this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\");\n      } else {\n        this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\");\n        this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\");\n        this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\");\n        element.initializer = elementObject.initializer;\n      }\n\n      return element;\n    },\n    toElementFinisherExtras: function (elementObject) {\n      var element = this.toElementDescriptor(elementObject);\n\n      var finisher = _optionalCallableProperty(elementObject, \"finisher\");\n\n      var extras = this.toElementDescriptors(elementObject.extras);\n      return {\n        element: element,\n        finisher: finisher,\n        extras: extras\n      };\n    },\n    fromClassDescriptor: function (elements) {\n      var obj = {\n        kind: \"class\",\n        elements: elements.map(this.fromElementDescriptor, this)\n      };\n      var desc = {\n        value: \"Descriptor\",\n        configurable: true\n      };\n      Object.defineProperty(obj, Symbol.toStringTag, desc);\n      return obj;\n    },\n    toClassDescriptor: function (obj) {\n      var kind = String(obj.kind);\n\n      if (kind !== \"class\") {\n        throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"');\n      }\n\n      this.disallowProperty(obj, \"key\", \"A class descriptor\");\n      this.disallowProperty(obj, \"placement\", \"A class descriptor\");\n      this.disallowProperty(obj, \"descriptor\", \"A class descriptor\");\n      this.disallowProperty(obj, \"initializer\", \"A class descriptor\");\n      this.disallowProperty(obj, \"extras\", \"A class descriptor\");\n\n      var finisher = _optionalCallableProperty(obj, \"finisher\");\n\n      var elements = this.toElementDescriptors(obj.elements);\n      return {\n        elements: elements,\n        finisher: finisher\n      };\n    },\n    runClassFinishers: function (constructor, finishers) {\n      for (var i = 0; i < finishers.length; i++) {\n        var newConstructor = (0, finishers[i])(constructor);\n\n        if (newConstructor !== undefined) {\n          if (typeof newConstructor !== \"function\") {\n            throw new TypeError(\"Finishers must return a constructor.\");\n          }\n\n          constructor = newConstructor;\n        }\n      }\n\n      return constructor;\n    },\n    disallowProperty: function (obj, name, objectType) {\n      if (obj[name] !== undefined) {\n        throw new TypeError(objectType + \" can't have a .\" + name + \" property.\");\n      }\n    }\n  };\n  return api;\n}\n\nfunction _createElementDescriptor(def) {\n  var key = _toPropertyKey(def.key);\n\n  var descriptor;\n\n  if (def.kind === \"method\") {\n    descriptor = {\n      value: def.value,\n      writable: true,\n      configurable: true,\n      enumerable: false\n    };\n  } else if (def.kind === \"get\") {\n    descriptor = {\n      get: def.value,\n      configurable: true,\n      enumerable: false\n    };\n  } else if (def.kind === \"set\") {\n    descriptor = {\n      set: def.value,\n      configurable: true,\n      enumerable: false\n    };\n  } else if (def.kind === \"field\") {\n    descriptor = {\n      configurable: true,\n      writable: true,\n      enumerable: true\n    };\n  }\n\n  var element = {\n    kind: def.kind === \"field\" ? \"field\" : \"method\",\n    key: key,\n    placement: def.static ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\",\n    descriptor: descriptor\n  };\n  if (def.decorators) element.decorators = def.decorators;\n  if (def.kind === \"field\") element.initializer = def.value;\n  return element;\n}\n\nfunction _coalesceGetterSetter(element, other) {\n  if (element.descriptor.get !== undefined) {\n    other.descriptor.get = element.descriptor.get;\n  } else {\n    other.descriptor.set = element.descriptor.set;\n  }\n}\n\nfunction _coalesceClassElements(elements) {\n  var newElements = [];\n\n  var isSameElement = function (other) {\n    return other.kind === \"method\" && other.key === element.key && other.placement === element.placement;\n  };\n\n  for (var i = 0; i < elements.length; i++) {\n    var element = elements[i];\n    var other;\n\n    if (element.kind === \"method\" && (other = newElements.find(isSameElement))) {\n      if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n        if (_hasDecorators(element) || _hasDecorators(other)) {\n          throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\");\n        }\n\n        other.descriptor = element.descriptor;\n      } else {\n        if (_hasDecorators(element)) {\n          if (_hasDecorators(other)) {\n            throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\");\n          }\n\n          other.decorators = element.decorators;\n        }\n\n        _coalesceGetterSetter(element, other);\n      }\n    } else {\n      newElements.push(element);\n    }\n  }\n\n  return newElements;\n}\n\nfunction _hasDecorators(element) {\n  return element.decorators && element.decorators.length;\n}\n\nfunction _isDataDescriptor(desc) {\n  return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n}\n\nfunction _optionalCallableProperty(obj, name) {\n  var value = obj[name];\n\n  if (value !== undefined && typeof value !== \"function\") {\n    throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n  }\n\n  return value;\n}\n\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n\n  privateMap.set(obj, value);\n}\n\nfunction _classPrivateMethodInitSpec(obj, privateSet) {\n  _checkPrivateRedeclaration(obj, privateSet);\n\n  privateSet.add(obj);\n}\n\nfunction _classPrivateMethodSet() {\n  throw new TypeError(\"attempted to reassign private method\");\n}\n\nfunction _identity(x) {\n  return x;\n}\n\nclass BasicObject {\n  static proxyMethod(expression) {\n    const {\n      name,\n      toMethod,\n      toProperty,\n      optional\n    } = parseProxyMethodExpression(expression);\n\n    this.prototype[name] = function () {\n      let subject;\n      let object;\n\n      if (toMethod) {\n        if (optional) {\n          var _this$toMethod;\n\n          object = (_this$toMethod = this[toMethod]) === null || _this$toMethod === void 0 ? void 0 : _this$toMethod.call(this);\n        } else {\n          object = this[toMethod]();\n        }\n      } else if (toProperty) {\n        object = this[toProperty];\n      }\n\n      if (optional) {\n        var _object;\n\n        subject = (_object = object) === null || _object === void 0 ? void 0 : _object[name];\n\n        if (subject) {\n          return apply.call(subject, object, arguments);\n        }\n      } else {\n        subject = object[name];\n        return apply.call(subject, object, arguments);\n      }\n    };\n  }\n\n}\n\nconst parseProxyMethodExpression = function (expression) {\n  const match = expression.match(proxyMethodExpressionPattern);\n\n  if (!match) {\n    throw new Error(\"can't parse @proxyMethod expression: \".concat(expression));\n  }\n\n  const args = {\n    name: match[4]\n  };\n\n  if (match[2] != null) {\n    args.toMethod = match[1];\n  } else {\n    args.toProperty = match[1];\n  }\n\n  if (match[3] != null) {\n    args.optional = true;\n  }\n\n  return args;\n};\n\nconst {\n  apply\n} = Function.prototype;\nconst proxyMethodExpressionPattern = new RegExp(\"\\\n^\\\n(.+?)\\\n(\\\\(\\\\))?\\\n(\\\\?)?\\\n\\\\.\\\n(.+?)\\\n$\\\n\");\n\nvar _Array$from, _$codePointAt$1, _$1, _String$fromCodePoint;\nclass UTF16String extends BasicObject {\n  static box() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n\n    if (value instanceof this) {\n      return value;\n    } else {\n      return this.fromUCS2String(value === null || value === void 0 ? void 0 : value.toString());\n    }\n  }\n\n  static fromUCS2String(ucs2String) {\n    return new this(ucs2String, ucs2decode(ucs2String));\n  }\n\n  static fromCodepoints(codepoints) {\n    return new this(ucs2encode(codepoints), codepoints);\n  }\n\n  constructor(ucs2String, codepoints) {\n    super(...arguments);\n    this.ucs2String = ucs2String;\n    this.codepoints = codepoints;\n    this.length = this.codepoints.length;\n    this.ucs2Length = this.ucs2String.length;\n  }\n\n  offsetToUCS2Offset(offset) {\n    return ucs2encode(this.codepoints.slice(0, Math.max(0, offset))).length;\n  }\n\n  offsetFromUCS2Offset(ucs2Offset) {\n    return ucs2decode(this.ucs2String.slice(0, Math.max(0, ucs2Offset))).length;\n  }\n\n  slice() {\n    return this.constructor.fromCodepoints(this.codepoints.slice(...arguments));\n  }\n\n  charAt(offset) {\n    return this.slice(offset, offset + 1);\n  }\n\n  isEqualTo(value) {\n    return this.constructor.box(value).ucs2String === this.ucs2String;\n  }\n\n  toJSON() {\n    return this.ucs2String;\n  }\n\n  getCacheKey() {\n    return this.ucs2String;\n  }\n\n  toString() {\n    return this.ucs2String;\n  }\n\n}\nconst hasArrayFrom = ((_Array$from = Array.from) === null || _Array$from === void 0 ? void 0 : _Array$from.call(Array, \"\\ud83d\\udc7c\").length) === 1;\nconst hasStringCodePointAt$1 = ((_$codePointAt$1 = (_$1 = \" \").codePointAt) === null || _$codePointAt$1 === void 0 ? void 0 : _$codePointAt$1.call(_$1, 0)) != null;\nconst hasStringFromCodePoint = ((_String$fromCodePoint = String.fromCodePoint) === null || _String$fromCodePoint === void 0 ? void 0 : _String$fromCodePoint.call(String, 32, 128124)) === \" \\ud83d\\udc7c\"; // UCS-2 conversion helpers ported from Mathias Bynens' Punycode.js:\n// https://github.com/bestiejs/punycode.js#punycodeucs2\n\nlet ucs2decode, ucs2encode; // Creates an array containing the numeric code points of each Unicode\n// character in the string. While JavaScript uses UCS-2 internally,\n// this function will convert a pair of surrogate halves (each of which\n// UCS-2 exposes as separate characters) into a single code point,\n// matching UTF-16.\n\nif (hasArrayFrom && hasStringCodePointAt$1) {\n  ucs2decode = string => Array.from(string).map(char => char.codePointAt(0));\n} else {\n  ucs2decode = function (string) {\n    const output = [];\n    let counter = 0;\n    const {\n      length\n    } = string;\n\n    while (counter < length) {\n      let value = string.charCodeAt(counter++);\n\n      if (0xd800 <= value && value <= 0xdbff && counter < length) {\n        // high surrogate, and there is a next character\n        const extra = string.charCodeAt(counter++);\n\n        if ((extra & 0xfc00) === 0xdc00) {\n          // low surrogate\n          value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n        } else {\n          // unmatched surrogate; only append this code unit, in case the\n          // next code unit is the high surrogate of a surrogate pair\n          counter--;\n        }\n      }\n\n      output.push(value);\n    }\n\n    return output;\n  };\n} // Creates a string based on an array of numeric code points.\n\n\nif (hasStringFromCodePoint) {\n  ucs2encode = array => String.fromCodePoint(...Array.from(array || []));\n} else {\n  ucs2encode = function (array) {\n    const characters = (() => {\n      const result = [];\n      Array.from(array).forEach(value => {\n        let output = \"\";\n\n        if (value > 0xffff) {\n          value -= 0x10000;\n          output += String.fromCharCode(value >>> 10 & 0x3ff | 0xd800);\n          value = 0xdc00 | value & 0x3ff;\n        }\n\n        result.push(output + String.fromCharCode(value));\n      });\n      return result;\n    })();\n\n    return characters.join(\"\");\n  };\n}\n\nlet id$1 = 0;\nclass TrixObject extends BasicObject {\n  static fromJSONString(jsonString) {\n    return this.fromJSON(JSON.parse(jsonString));\n  }\n\n  constructor() {\n    super(...arguments);\n    this.id = ++id$1;\n  }\n\n  hasSameConstructorAs(object) {\n    return this.constructor === (object === null || object === void 0 ? void 0 : object.constructor);\n  }\n\n  isEqualTo(object) {\n    return this === object;\n  }\n\n  inspect() {\n    const parts = [];\n    const contents = this.contentsForInspection() || {};\n\n    for (const key in contents) {\n      const value = contents[key];\n      parts.push(\"\".concat(key, \"=\").concat(value));\n    }\n\n    return \"#<\".concat(this.constructor.name, \":\").concat(this.id).concat(parts.length ? \" \".concat(parts.join(\", \")) : \"\", \">\");\n  }\n\n  contentsForInspection() {}\n\n  toJSONString() {\n    return JSON.stringify(this);\n  }\n\n  toUTF16String() {\n    return UTF16String.box(this);\n  }\n\n  getCacheKey() {\n    return this.id.toString();\n  }\n\n}\n\n/* eslint-disable\n    id-length,\n*/\nconst arraysAreEqual = function () {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (let index = 0; index < a.length; index++) {\n    const value = a[index];\n\n    if (value !== b[index]) {\n      return false;\n    }\n  }\n\n  return true;\n};\nconst arrayStartsWith = function () {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return arraysAreEqual(a.slice(0, b.length), b);\n};\nconst spliceArray = function (array) {\n  const result = array.slice(0);\n\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  result.splice(...args);\n  return result;\n};\nconst summarizeArrayChange = function () {\n  let oldArray = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let newArray = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  const added = [];\n  const removed = [];\n  const existingValues = new Set();\n  oldArray.forEach(value => {\n    existingValues.add(value);\n  });\n  const currentValues = new Set();\n  newArray.forEach(value => {\n    currentValues.add(value);\n\n    if (!existingValues.has(value)) {\n      added.push(value);\n    }\n  });\n  oldArray.forEach(value => {\n    if (!currentValues.has(value)) {\n      removed.push(value);\n    }\n  });\n  return {\n    added,\n    removed\n  };\n};\n\nconst RTL_PATTERN = /[\\u05BE\\u05C0\\u05C3\\u05D0-\\u05EA\\u05F0-\\u05F4\\u061B\\u061F\\u0621-\\u063A\\u0640-\\u064A\\u066D\\u0671-\\u06B7\\u06BA-\\u06BE\\u06C0-\\u06CE\\u06D0-\\u06D5\\u06E5\\u06E6\\u200F\\u202B\\u202E\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE72\\uFE74\\uFE76-\\uFEFC]/;\nconst getDirection = function () {\n  const input = makeElement(\"input\", {\n    dir: \"auto\",\n    name: \"x\",\n    dirName: \"x.dir\"\n  });\n  const form = makeElement(\"form\");\n  form.appendChild(input);\n\n  const supportsDirName = function () {\n    try {\n      return new FormData(form).has(input.dirName);\n    } catch (error) {\n      return false;\n    }\n  }();\n\n  const supportsDirSelector = function () {\n    try {\n      return input.matches(\":dir(ltr),:dir(rtl)\");\n    } catch (error) {\n      return false;\n    }\n  }();\n\n  if (supportsDirName) {\n    return function (string) {\n      input.value = string;\n      return new FormData(form).get(input.dirName);\n    };\n  } else if (supportsDirSelector) {\n    return function (string) {\n      input.value = string;\n\n      if (input.matches(\":dir(rtl)\")) {\n        return \"rtl\";\n      } else {\n        return \"ltr\";\n      }\n    };\n  } else {\n    return function (string) {\n      const char = string.trim().charAt(0);\n\n      if (RTL_PATTERN.test(char)) {\n        return \"rtl\";\n      } else {\n        return \"ltr\";\n      }\n    };\n  }\n}();\n\nlet allAttributeNames = null;\nlet blockAttributeNames = null;\nlet textAttributeNames = null;\nlet listAttributeNames = null;\nconst getAllAttributeNames = () => {\n  if (!allAttributeNames) {\n    allAttributeNames = getTextAttributeNames().concat(getBlockAttributeNames());\n  }\n\n  return allAttributeNames;\n};\nconst getBlockConfig = attributeName => config.blockAttributes[attributeName];\nconst getBlockAttributeNames = () => {\n  if (!blockAttributeNames) {\n    blockAttributeNames = Object.keys(config.blockAttributes);\n  }\n\n  return blockAttributeNames;\n};\nconst getTextConfig = attributeName => config.textAttributes[attributeName];\nconst getTextAttributeNames = () => {\n  if (!textAttributeNames) {\n    textAttributeNames = Object.keys(config.textAttributes);\n  }\n\n  return textAttributeNames;\n};\nconst getListAttributeNames = () => {\n  if (!listAttributeNames) {\n    listAttributeNames = [];\n\n    for (const key in config.blockAttributes) {\n      const {\n        listAttribute\n      } = config.blockAttributes[key];\n\n      if (listAttribute != null) {\n        listAttributeNames.push(listAttribute);\n      }\n    }\n  }\n\n  return listAttributeNames;\n};\n\n/* eslint-disable\n*/\nconst installDefaultCSSForTagName = function (tagName, defaultCSS) {\n  const styleElement = insertStyleElementForTagName(tagName);\n  styleElement.textContent = defaultCSS.replace(/%t/g, tagName);\n};\n\nconst insertStyleElementForTagName = function (tagName) {\n  const element = document.createElement(\"style\");\n  element.setAttribute(\"type\", \"text/css\");\n  element.setAttribute(\"data-tag-name\", tagName.toLowerCase());\n  const nonce = getCSPNonce();\n\n  if (nonce) {\n    element.setAttribute(\"nonce\", nonce);\n  }\n\n  document.head.insertBefore(element, document.head.firstChild);\n  return element;\n};\n\nconst getCSPNonce = function () {\n  const element = getMetaElement(\"trix-csp-nonce\") || getMetaElement(\"csp-nonce\");\n\n  if (element) {\n    return element.getAttribute(\"content\");\n  }\n};\n\nconst getMetaElement = name => document.head.querySelector(\"meta[name=\".concat(name, \"]\"));\n\nconst testTransferData = {\n  \"application/x-trix-feature-detection\": \"test\"\n};\nconst dataTransferIsPlainText = function (dataTransfer) {\n  const text = dataTransfer.getData(\"text/plain\");\n  const html = dataTransfer.getData(\"text/html\");\n\n  if (text && html) {\n    const {\n      body\n    } = new DOMParser().parseFromString(html, \"text/html\");\n\n    if (body.textContent === text) {\n      return !body.querySelector(\"*\");\n    }\n  } else {\n    return text === null || text === void 0 ? void 0 : text.length;\n  }\n};\nconst dataTransferIsWritable = function (dataTransfer) {\n  if (!(dataTransfer !== null && dataTransfer !== void 0 && dataTransfer.setData)) return false;\n\n  for (const key in testTransferData) {\n    const value = testTransferData[key];\n\n    try {\n      dataTransfer.setData(key, value);\n      if (!dataTransfer.getData(key) === value) return false;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  return true;\n};\nconst keyEventIsKeyboardCommand = function () {\n  if (/Mac|^iP/.test(navigator.platform)) {\n    return event => event.metaKey;\n  } else {\n    return event => event.ctrlKey;\n  }\n}();\n\nconst defer = fn => setTimeout(fn, 1);\n\n/* eslint-disable\n    id-length,\n*/\nconst copyObject = function () {\n  let object = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const result = {};\n\n  for (const key in object) {\n    const value = object[key];\n    result[key] = value;\n  }\n\n  return result;\n};\nconst objectsAreEqual = function () {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n\n  for (const key in a) {\n    const value = a[key];\n\n    if (value !== b[key]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst normalizeRange = function (range) {\n  if (range == null) return;\n\n  if (!Array.isArray(range)) {\n    range = [range, range];\n  }\n\n  return [copyValue(range[0]), copyValue(range[1] != null ? range[1] : range[0])];\n};\nconst rangeIsCollapsed = function (range) {\n  if (range == null) return;\n  const [start, end] = normalizeRange(range);\n  return rangeValuesAreEqual(start, end);\n};\nconst rangesAreEqual = function (leftRange, rightRange) {\n  if (leftRange == null || rightRange == null) return;\n  const [leftStart, leftEnd] = normalizeRange(leftRange);\n  const [rightStart, rightEnd] = normalizeRange(rightRange);\n  return rangeValuesAreEqual(leftStart, rightStart) && rangeValuesAreEqual(leftEnd, rightEnd);\n};\n\nconst copyValue = function (value) {\n  if (typeof value === \"number\") {\n    return value;\n  } else {\n    return copyObject(value);\n  }\n};\n\nconst rangeValuesAreEqual = function (left, right) {\n  if (typeof left === \"number\") {\n    return left === right;\n  } else {\n    return objectsAreEqual(left, right);\n  }\n};\n\n/* eslint-disable\n    id-length,\n*/\nclass SelectionChangeObserver extends BasicObject {\n  constructor() {\n    super(...arguments);\n    this.update = this.update.bind(this);\n    this.run = this.run.bind(this);\n    this.selectionManagers = [];\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true;\n\n      if (\"onselectionchange\" in document) {\n        return document.addEventListener(\"selectionchange\", this.update, true);\n      } else {\n        return this.run();\n      }\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false;\n      return document.removeEventListener(\"selectionchange\", this.update, true);\n    }\n  }\n\n  registerSelectionManager(selectionManager) {\n    if (!this.selectionManagers.includes(selectionManager)) {\n      this.selectionManagers.push(selectionManager);\n      return this.start();\n    }\n  }\n\n  unregisterSelectionManager(selectionManager) {\n    this.selectionManagers = this.selectionManagers.filter(s => s !== selectionManager);\n\n    if (this.selectionManagers.length === 0) {\n      return this.stop();\n    }\n  }\n\n  notifySelectionManagersOfSelectionChange() {\n    return this.selectionManagers.map(selectionManager => selectionManager.selectionDidChange());\n  }\n\n  update() {\n    const domRange = getDOMRange();\n\n    if (!domRangesAreEqual(domRange, this.domRange)) {\n      this.domRange = domRange;\n      return this.notifySelectionManagersOfSelectionChange();\n    }\n  }\n\n  reset() {\n    this.domRange = null;\n    return this.update();\n  } // Private\n\n\n  run() {\n    if (this.started) {\n      this.update();\n      return requestAnimationFrame(this.run);\n    }\n  }\n\n}\n\nconst domRangesAreEqual = (left, right) => (left === null || left === void 0 ? void 0 : left.startContainer) === (right === null || right === void 0 ? void 0 : right.startContainer) && (left === null || left === void 0 ? void 0 : left.startOffset) === (right === null || right === void 0 ? void 0 : right.startOffset) && (left === null || left === void 0 ? void 0 : left.endContainer) === (right === null || right === void 0 ? void 0 : right.endContainer) && (left === null || left === void 0 ? void 0 : left.endOffset) === (right === null || right === void 0 ? void 0 : right.endOffset);\n\nconst selectionChangeObserver = new SelectionChangeObserver();\nconst getDOMSelection = function () {\n  const selection = window.getSelection();\n\n  if (selection.rangeCount > 0) {\n    return selection;\n  }\n};\nconst getDOMRange = function () {\n  var _getDOMSelection;\n\n  const domRange = (_getDOMSelection = getDOMSelection()) === null || _getDOMSelection === void 0 ? void 0 : _getDOMSelection.getRangeAt(0);\n\n  if (domRange) {\n    if (!domRangeIsPrivate(domRange)) {\n      return domRange;\n    }\n  }\n};\nconst setDOMRange = function (domRange) {\n  const selection = window.getSelection();\n  selection.removeAllRanges();\n  selection.addRange(domRange);\n  return selectionChangeObserver.update();\n}; // In Firefox, clicking certain <input> elements changes the selection to a\n// private element used to draw its UI. Attempting to access properties of those\n// elements throws an error.\n// https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n\nconst domRangeIsPrivate = domRange => nodeIsPrivate(domRange.startContainer) || nodeIsPrivate(domRange.endContainer);\n\nconst nodeIsPrivate = node => !Object.getPrototypeOf(node);\n\n/* eslint-disable\n    id-length,\n    no-useless-escape,\n*/\nconst normalizeSpaces = string => string.replace(new RegExp(\"\".concat(ZERO_WIDTH_SPACE), \"g\"), \"\").replace(new RegExp(\"\".concat(NON_BREAKING_SPACE), \"g\"), \" \");\nconst normalizeNewlines = string => string.replace(/\\r\\n/g, \"\\n\");\nconst breakableWhitespacePattern = new RegExp(\"[^\\\\S\".concat(NON_BREAKING_SPACE, \"]\"));\nconst squishBreakableWhitespace = string => string // Replace all breakable whitespace characters with a space\n.replace(new RegExp(\"\".concat(breakableWhitespacePattern.source), \"g\"), \" \") // Replace two or more spaces with a single space\n.replace(/\\ {2,}/g, \" \");\nconst summarizeStringChange = function (oldString, newString) {\n  let added, removed;\n  oldString = UTF16String.box(oldString);\n  newString = UTF16String.box(newString);\n\n  if (newString.length < oldString.length) {\n    [removed, added] = utf16StringDifferences(oldString, newString);\n  } else {\n    [added, removed] = utf16StringDifferences(newString, oldString);\n  }\n\n  return {\n    added,\n    removed\n  };\n};\n\nconst utf16StringDifferences = function (a, b) {\n  if (a.isEqualTo(b)) {\n    return [\"\", \"\"];\n  }\n\n  const diffA = utf16StringDifference(a, b);\n  const {\n    length\n  } = diffA.utf16String;\n  let diffB;\n\n  if (length) {\n    const {\n      offset\n    } = diffA;\n    const codepoints = a.codepoints.slice(0, offset).concat(a.codepoints.slice(offset + length));\n    diffB = utf16StringDifference(b, UTF16String.fromCodepoints(codepoints));\n  } else {\n    diffB = utf16StringDifference(b, a);\n  }\n\n  return [diffA.utf16String.toString(), diffB.utf16String.toString()];\n};\n\nconst utf16StringDifference = function (a, b) {\n  let leftIndex = 0;\n  let rightIndexA = a.length;\n  let rightIndexB = b.length;\n\n  while (leftIndex < rightIndexA && a.charAt(leftIndex).isEqualTo(b.charAt(leftIndex))) {\n    leftIndex++;\n  }\n\n  while (rightIndexA > leftIndex + 1 && a.charAt(rightIndexA - 1).isEqualTo(b.charAt(rightIndexB - 1))) {\n    rightIndexA--;\n    rightIndexB--;\n  }\n\n  return {\n    utf16String: a.slice(leftIndex, rightIndexA),\n    offset: leftIndex\n  };\n};\n\nclass Hash extends TrixObject {\n  static fromCommonAttributesOfObjects() {\n    let objects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    if (!objects.length) {\n      return new this();\n    }\n\n    let hash = box(objects[0]);\n    let keys = hash.getKeys();\n    objects.slice(1).forEach(object => {\n      keys = hash.getKeysCommonToHash(box(object));\n      hash = hash.slice(keys);\n    });\n    return hash;\n  }\n\n  static box(values) {\n    return box(values);\n  }\n\n  constructor() {\n    let values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(...arguments);\n    this.values = copy(values);\n  }\n\n  add(key, value) {\n    return this.merge(object(key, value));\n  }\n\n  remove(key) {\n    return new Hash(copy(this.values, key));\n  }\n\n  get(key) {\n    return this.values[key];\n  }\n\n  has(key) {\n    return key in this.values;\n  }\n\n  merge(values) {\n    return new Hash(merge(this.values, unbox(values)));\n  }\n\n  slice(keys) {\n    const values = {};\n    keys.forEach(key => {\n      if (this.has(key)) {\n        values[key] = this.values[key];\n      }\n    });\n    return new Hash(values);\n  }\n\n  getKeys() {\n    return Object.keys(this.values);\n  }\n\n  getKeysCommonToHash(hash) {\n    hash = box(hash);\n    return this.getKeys().filter(key => this.values[key] === hash.values[key]);\n  }\n\n  isEqualTo(values) {\n    return arraysAreEqual(this.toArray(), box(values).toArray());\n  }\n\n  isEmpty() {\n    return this.getKeys().length === 0;\n  }\n\n  toArray() {\n    if (!this.array) {\n      const result = [];\n\n      for (const key in this.values) {\n        const value = this.values[key];\n        result.push(result.push(key, value));\n      }\n\n      this.array = result.slice(0);\n    }\n\n    return this.array;\n  }\n\n  toObject() {\n    return copy(this.values);\n  }\n\n  toJSON() {\n    return this.toObject();\n  }\n\n  contentsForInspection() {\n    return {\n      values: JSON.stringify(this.values)\n    };\n  }\n\n}\n\nconst object = function (key, value) {\n  const result = {};\n  result[key] = value;\n  return result;\n};\n\nconst merge = function (object, values) {\n  const result = copy(object);\n\n  for (const key in values) {\n    const value = values[key];\n    result[key] = value;\n  }\n\n  return result;\n};\n\nconst copy = function (object, keyToRemove) {\n  const result = {};\n  const sortedKeys = Object.keys(object).sort();\n  sortedKeys.forEach(key => {\n    if (key !== keyToRemove) {\n      result[key] = object[key];\n    }\n  });\n  return result;\n};\n\nconst box = function (object) {\n  if (object instanceof Hash) {\n    return object;\n  } else {\n    return new Hash(object);\n  }\n};\n\nconst unbox = function (object) {\n  if (object instanceof Hash) {\n    return object.values;\n  } else {\n    return object;\n  }\n};\n\nclass Operation extends BasicObject {\n  isPerforming() {\n    return this.performing === true;\n  }\n\n  hasPerformed() {\n    return this.performed === true;\n  }\n\n  hasSucceeded() {\n    return this.performed && this.succeeded;\n  }\n\n  hasFailed() {\n    return this.performed && !this.succeeded;\n  }\n\n  getPromise() {\n    if (!this.promise) {\n      this.promise = new Promise((resolve, reject) => {\n        this.performing = true;\n        return this.perform((succeeded, result) => {\n          this.succeeded = succeeded;\n          this.performing = false;\n          this.performed = true;\n\n          if (this.succeeded) {\n            resolve(result);\n          } else {\n            reject(result);\n          }\n        });\n      });\n    }\n\n    return this.promise;\n  }\n\n  perform(callback) {\n    return callback(false);\n  }\n\n  release() {\n    var _this$promise, _this$promise$cancel;\n\n    (_this$promise = this.promise) === null || _this$promise === void 0 ? void 0 : (_this$promise$cancel = _this$promise.cancel) === null || _this$promise$cancel === void 0 ? void 0 : _this$promise$cancel.call(_this$promise);\n    this.promise = null;\n    this.performing = null;\n    this.performed = null;\n    this.succeeded = null;\n  }\n\n}\nOperation.proxyMethod(\"getPromise().then\");\nOperation.proxyMethod(\"getPromise().catch\");\n\nclass ImagePreloadOperation extends Operation {\n  constructor(url) {\n    super(...arguments);\n    this.url = url;\n  }\n\n  perform(callback) {\n    const image = new Image();\n\n    image.onload = () => {\n      image.width = this.width = image.naturalWidth;\n      image.height = this.height = image.naturalHeight;\n      return callback(true, image);\n    };\n\n    image.onerror = () => callback(false);\n\n    image.src = this.url;\n  }\n\n}\n\nclass Attachment extends TrixObject {\n  static attachmentForFile(file) {\n    const attributes = this.attributesForFile(file);\n    const attachment = new this(attributes);\n    attachment.setFile(file);\n    return attachment;\n  }\n\n  static attributesForFile(file) {\n    return new Hash({\n      filename: file.name,\n      filesize: file.size,\n      contentType: file.type\n    });\n  }\n\n  static fromJSON(attachmentJSON) {\n    return new this(attachmentJSON);\n  }\n\n  constructor() {\n    let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(attributes);\n    this.releaseFile = this.releaseFile.bind(this);\n    this.attributes = Hash.box(attributes);\n    this.didChangeAttributes();\n  }\n\n  getAttribute(attribute) {\n    return this.attributes.get(attribute);\n  }\n\n  hasAttribute(attribute) {\n    return this.attributes.has(attribute);\n  }\n\n  getAttributes() {\n    return this.attributes.toObject();\n  }\n\n  setAttributes() {\n    let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const newAttributes = this.attributes.merge(attributes);\n\n    if (!this.attributes.isEqualTo(newAttributes)) {\n      var _this$previewDelegate, _this$previewDelegate2, _this$delegate, _this$delegate$attach;\n\n      this.attributes = newAttributes;\n      this.didChangeAttributes();\n      (_this$previewDelegate = this.previewDelegate) === null || _this$previewDelegate === void 0 ? void 0 : (_this$previewDelegate2 = _this$previewDelegate.attachmentDidChangeAttributes) === null || _this$previewDelegate2 === void 0 ? void 0 : _this$previewDelegate2.call(_this$previewDelegate, this);\n      return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$attach = _this$delegate.attachmentDidChangeAttributes) === null || _this$delegate$attach === void 0 ? void 0 : _this$delegate$attach.call(_this$delegate, this);\n    }\n  }\n\n  didChangeAttributes() {\n    if (this.isPreviewable()) {\n      return this.preloadURL();\n    }\n  }\n\n  isPending() {\n    return this.file != null && !(this.getURL() || this.getHref());\n  }\n\n  isPreviewable() {\n    if (this.attributes.has(\"previewable\")) {\n      return this.attributes.get(\"previewable\");\n    } else {\n      return Attachment.previewablePattern.test(this.getContentType());\n    }\n  }\n\n  getType() {\n    if (this.hasContent()) {\n      return \"content\";\n    } else if (this.isPreviewable()) {\n      return \"preview\";\n    } else {\n      return \"file\";\n    }\n  }\n\n  getURL() {\n    return this.attributes.get(\"url\");\n  }\n\n  getHref() {\n    return this.attributes.get(\"href\");\n  }\n\n  getFilename() {\n    return this.attributes.get(\"filename\") || \"\";\n  }\n\n  getFilesize() {\n    return this.attributes.get(\"filesize\");\n  }\n\n  getFormattedFilesize() {\n    const filesize = this.attributes.get(\"filesize\");\n\n    if (typeof filesize === \"number\") {\n      return config.fileSize.formatter(filesize);\n    } else {\n      return \"\";\n    }\n  }\n\n  getExtension() {\n    var _this$getFilename$mat;\n\n    return (_this$getFilename$mat = this.getFilename().match(/\\.(\\w+)$/)) === null || _this$getFilename$mat === void 0 ? void 0 : _this$getFilename$mat[1].toLowerCase();\n  }\n\n  getContentType() {\n    return this.attributes.get(\"contentType\");\n  }\n\n  hasContent() {\n    return this.attributes.has(\"content\");\n  }\n\n  getContent() {\n    return this.attributes.get(\"content\");\n  }\n\n  getWidth() {\n    return this.attributes.get(\"width\");\n  }\n\n  getHeight() {\n    return this.attributes.get(\"height\");\n  }\n\n  getFile() {\n    return this.file;\n  }\n\n  setFile(file) {\n    this.file = file;\n\n    if (this.isPreviewable()) {\n      return this.preloadFile();\n    }\n  }\n\n  releaseFile() {\n    this.releasePreloadedFile();\n    this.file = null;\n  }\n\n  getUploadProgress() {\n    return this.uploadProgress != null ? this.uploadProgress : 0;\n  }\n\n  setUploadProgress(value) {\n    if (this.uploadProgress !== value) {\n      var _this$uploadProgressD, _this$uploadProgressD2;\n\n      this.uploadProgress = value;\n      return (_this$uploadProgressD = this.uploadProgressDelegate) === null || _this$uploadProgressD === void 0 ? void 0 : (_this$uploadProgressD2 = _this$uploadProgressD.attachmentDidChangeUploadProgress) === null || _this$uploadProgressD2 === void 0 ? void 0 : _this$uploadProgressD2.call(_this$uploadProgressD, this);\n    }\n  }\n\n  toJSON() {\n    return this.getAttributes();\n  }\n\n  getCacheKey() {\n    return [super.getCacheKey(...arguments), this.attributes.getCacheKey(), this.getPreviewURL()].join(\"/\");\n  } // Previewable\n\n\n  getPreviewURL() {\n    return this.previewURL || this.preloadingURL;\n  }\n\n  setPreviewURL(url) {\n    if (url !== this.getPreviewURL()) {\n      var _this$previewDelegate3, _this$previewDelegate4, _this$delegate2, _this$delegate2$attac;\n\n      this.previewURL = url;\n      (_this$previewDelegate3 = this.previewDelegate) === null || _this$previewDelegate3 === void 0 ? void 0 : (_this$previewDelegate4 = _this$previewDelegate3.attachmentDidChangeAttributes) === null || _this$previewDelegate4 === void 0 ? void 0 : _this$previewDelegate4.call(_this$previewDelegate3, this);\n      return (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$attac = _this$delegate2.attachmentDidChangePreviewURL) === null || _this$delegate2$attac === void 0 ? void 0 : _this$delegate2$attac.call(_this$delegate2, this);\n    }\n  }\n\n  preloadURL() {\n    return this.preload(this.getURL(), this.releaseFile);\n  }\n\n  preloadFile() {\n    if (this.file) {\n      this.fileObjectURL = URL.createObjectURL(this.file);\n      return this.preload(this.fileObjectURL);\n    }\n  }\n\n  releasePreloadedFile() {\n    if (this.fileObjectURL) {\n      URL.revokeObjectURL(this.fileObjectURL);\n      this.fileObjectURL = null;\n    }\n  }\n\n  preload(url, callback) {\n    if (url && url !== this.getPreviewURL()) {\n      this.preloadingURL = url;\n      const operation = new ImagePreloadOperation(url);\n      return operation.then(_ref => {\n        let {\n          width,\n          height\n        } = _ref;\n\n        if (!this.getWidth() || !this.getHeight()) {\n          this.setAttributes({\n            width,\n            height\n          });\n        }\n\n        this.preloadingURL = null;\n        this.setPreviewURL(url);\n        return callback === null || callback === void 0 ? void 0 : callback();\n      }).catch(() => {\n        this.preloadingURL = null;\n        return callback === null || callback === void 0 ? void 0 : callback();\n      });\n    }\n  }\n\n}\n\n_defineProperty(Attachment, \"previewablePattern\", /^image(\\/(gif|png|jpe?g)|$)/);\n\nclass ManagedAttachment extends BasicObject {\n  constructor(attachmentManager, attachment) {\n    super(...arguments);\n    this.attachmentManager = attachmentManager;\n    this.attachment = attachment;\n    this.id = this.attachment.id;\n    this.file = this.attachment.file;\n  }\n\n  remove() {\n    return this.attachmentManager.requestRemovalOfAttachment(this.attachment);\n  }\n\n}\nManagedAttachment.proxyMethod(\"attachment.getAttribute\");\nManagedAttachment.proxyMethod(\"attachment.hasAttribute\");\nManagedAttachment.proxyMethod(\"attachment.setAttribute\");\nManagedAttachment.proxyMethod(\"attachment.getAttributes\");\nManagedAttachment.proxyMethod(\"attachment.setAttributes\");\nManagedAttachment.proxyMethod(\"attachment.isPending\");\nManagedAttachment.proxyMethod(\"attachment.isPreviewable\");\nManagedAttachment.proxyMethod(\"attachment.getURL\");\nManagedAttachment.proxyMethod(\"attachment.getHref\");\nManagedAttachment.proxyMethod(\"attachment.getFilename\");\nManagedAttachment.proxyMethod(\"attachment.getFilesize\");\nManagedAttachment.proxyMethod(\"attachment.getFormattedFilesize\");\nManagedAttachment.proxyMethod(\"attachment.getExtension\");\nManagedAttachment.proxyMethod(\"attachment.getContentType\");\nManagedAttachment.proxyMethod(\"attachment.getFile\");\nManagedAttachment.proxyMethod(\"attachment.setFile\");\nManagedAttachment.proxyMethod(\"attachment.releaseFile\");\nManagedAttachment.proxyMethod(\"attachment.getUploadProgress\");\nManagedAttachment.proxyMethod(\"attachment.setUploadProgress\");\n\nclass AttachmentManager extends BasicObject {\n  constructor() {\n    let attachments = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n    this.managedAttachments = {};\n    Array.from(attachments).forEach(attachment => {\n      this.manageAttachment(attachment);\n    });\n  }\n\n  getAttachments() {\n    const result = [];\n\n    for (const id in this.managedAttachments) {\n      const attachment = this.managedAttachments[id];\n      result.push(attachment);\n    }\n\n    return result;\n  }\n\n  manageAttachment(attachment) {\n    if (!this.managedAttachments[attachment.id]) {\n      this.managedAttachments[attachment.id] = new ManagedAttachment(this, attachment);\n    }\n\n    return this.managedAttachments[attachment.id];\n  }\n\n  attachmentIsManaged(attachment) {\n    return attachment.id in this.managedAttachments;\n  }\n\n  requestRemovalOfAttachment(attachment) {\n    if (this.attachmentIsManaged(attachment)) {\n      var _this$delegate, _this$delegate$attach;\n\n      return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$attach = _this$delegate.attachmentManagerDidRequestRemovalOfAttachment) === null || _this$delegate$attach === void 0 ? void 0 : _this$delegate$attach.call(_this$delegate, attachment);\n    }\n  }\n\n  unmanageAttachment(attachment) {\n    const managedAttachment = this.managedAttachments[attachment.id];\n    delete this.managedAttachments[attachment.id];\n    return managedAttachment;\n  }\n\n}\n\nclass Piece extends TrixObject {\n  static registerType(type, constructor) {\n    constructor.type = type;\n    this.types[type] = constructor;\n  }\n\n  static fromJSON(pieceJSON) {\n    const constructor = this.types[pieceJSON.type];\n\n    if (constructor) {\n      return constructor.fromJSON(pieceJSON);\n    }\n  }\n\n  constructor(value) {\n    let attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(...arguments);\n    this.attributes = Hash.box(attributes);\n  }\n\n  copyWithAttributes(attributes) {\n    return new this.constructor(this.getValue(), attributes);\n  }\n\n  copyWithAdditionalAttributes(attributes) {\n    return this.copyWithAttributes(this.attributes.merge(attributes));\n  }\n\n  copyWithoutAttribute(attribute) {\n    return this.copyWithAttributes(this.attributes.remove(attribute));\n  }\n\n  copy() {\n    return this.copyWithAttributes(this.attributes);\n  }\n\n  getAttribute(attribute) {\n    return this.attributes.get(attribute);\n  }\n\n  getAttributesHash() {\n    return this.attributes;\n  }\n\n  getAttributes() {\n    return this.attributes.toObject();\n  }\n\n  hasAttribute(attribute) {\n    return this.attributes.has(attribute);\n  }\n\n  hasSameStringValueAsPiece(piece) {\n    return piece && this.toString() === piece.toString();\n  }\n\n  hasSameAttributesAsPiece(piece) {\n    return piece && (this.attributes === piece.attributes || this.attributes.isEqualTo(piece.attributes));\n  }\n\n  isBlockBreak() {\n    return false;\n  }\n\n  isEqualTo(piece) {\n    return super.isEqualTo(...arguments) || this.hasSameConstructorAs(piece) && this.hasSameStringValueAsPiece(piece) && this.hasSameAttributesAsPiece(piece);\n  }\n\n  isEmpty() {\n    return this.length === 0;\n  }\n\n  isSerializable() {\n    return true;\n  }\n\n  toJSON() {\n    return {\n      type: this.constructor.type,\n      attributes: this.getAttributes()\n    };\n  }\n\n  contentsForInspection() {\n    return {\n      type: this.constructor.type,\n      attributes: this.attributes.inspect()\n    };\n  } // Grouping\n\n\n  canBeGrouped() {\n    return this.hasAttribute(\"href\");\n  }\n\n  canBeGroupedWith(piece) {\n    return this.getAttribute(\"href\") === piece.getAttribute(\"href\");\n  } // Splittable\n\n\n  getLength() {\n    return this.length;\n  }\n\n  canBeConsolidatedWith(piece) {\n    return false;\n  }\n\n}\n\n_defineProperty(Piece, \"types\", {});\n\nclass AttachmentPiece extends Piece {\n  static fromJSON(pieceJSON) {\n    return new this(Attachment.fromJSON(pieceJSON.attachment), pieceJSON.attributes);\n  }\n\n  constructor(attachment) {\n    super(...arguments);\n    this.attachment = attachment;\n    this.length = 1;\n    this.ensureAttachmentExclusivelyHasAttribute(\"href\");\n\n    if (!this.attachment.hasContent()) {\n      this.removeProhibitedAttributes();\n    }\n  }\n\n  ensureAttachmentExclusivelyHasAttribute(attribute) {\n    if (this.hasAttribute(attribute)) {\n      if (!this.attachment.hasAttribute(attribute)) {\n        this.attachment.setAttributes(this.attributes.slice(attribute));\n      }\n\n      this.attributes = this.attributes.remove(attribute);\n    }\n  }\n\n  removeProhibitedAttributes() {\n    const attributes = this.attributes.slice(AttachmentPiece.permittedAttributes);\n\n    if (!attributes.isEqualTo(this.attributes)) {\n      this.attributes = attributes;\n    }\n  }\n\n  getValue() {\n    return this.attachment;\n  }\n\n  isSerializable() {\n    return !this.attachment.isPending();\n  }\n\n  getCaption() {\n    return this.attributes.get(\"caption\") || \"\";\n  }\n\n  isEqualTo(piece) {\n    var _piece$attachment;\n\n    return super.isEqualTo(piece) && this.attachment.id === (piece === null || piece === void 0 ? void 0 : (_piece$attachment = piece.attachment) === null || _piece$attachment === void 0 ? void 0 : _piece$attachment.id);\n  }\n\n  toString() {\n    return OBJECT_REPLACEMENT_CHARACTER;\n  }\n\n  toJSON() {\n    const json = super.toJSON(...arguments);\n    json.attachment = this.attachment;\n    return json;\n  }\n\n  getCacheKey() {\n    return [super.getCacheKey(...arguments), this.attachment.getCacheKey()].join(\"/\");\n  }\n\n  toConsole() {\n    return JSON.stringify(this.toString());\n  }\n\n}\n\n_defineProperty(AttachmentPiece, \"permittedAttributes\", [\"caption\", \"presentation\"]);\n\nPiece.registerType(\"attachment\", AttachmentPiece);\n\nclass StringPiece extends Piece {\n  static fromJSON(pieceJSON) {\n    return new this(pieceJSON.string, pieceJSON.attributes);\n  }\n\n  constructor(string) {\n    super(...arguments);\n    this.string = normalizeNewlines(string);\n    this.length = this.string.length;\n  }\n\n  getValue() {\n    return this.string;\n  }\n\n  toString() {\n    return this.string.toString();\n  }\n\n  isBlockBreak() {\n    return this.toString() === \"\\n\" && this.getAttribute(\"blockBreak\") === true;\n  }\n\n  toJSON() {\n    const result = super.toJSON(...arguments);\n    result.string = this.string;\n    return result;\n  } // Splittable\n\n\n  canBeConsolidatedWith(piece) {\n    return piece && this.hasSameConstructorAs(piece) && this.hasSameAttributesAsPiece(piece);\n  }\n\n  consolidateWith(piece) {\n    return new this.constructor(this.toString() + piece.toString(), this.attributes);\n  }\n\n  splitAtOffset(offset) {\n    let left, right;\n\n    if (offset === 0) {\n      left = null;\n      right = this;\n    } else if (offset === this.length) {\n      left = this;\n      right = null;\n    } else {\n      left = new this.constructor(this.string.slice(0, offset), this.attributes);\n      right = new this.constructor(this.string.slice(offset), this.attributes);\n    }\n\n    return [left, right];\n  }\n\n  toConsole() {\n    let {\n      string\n    } = this;\n\n    if (string.length > 15) {\n      string = string.slice(0, 14) + \"\";\n    }\n\n    return JSON.stringify(string.toString());\n  }\n\n}\nPiece.registerType(\"string\", StringPiece);\n\n/* eslint-disable\n    prefer-const,\n*/\nclass SplittableList extends TrixObject {\n  static box(objects) {\n    if (objects instanceof this) {\n      return objects;\n    } else {\n      return new this(objects);\n    }\n  }\n\n  constructor() {\n    let objects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n    this.objects = objects.slice(0);\n    this.length = this.objects.length;\n  }\n\n  indexOf(object) {\n    return this.objects.indexOf(object);\n  }\n\n  splice() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return new this.constructor(spliceArray(this.objects, ...args));\n  }\n\n  eachObject(callback) {\n    return this.objects.map((object, index) => callback(object, index));\n  }\n\n  insertObjectAtIndex(object, index) {\n    return this.splice(index, 0, object);\n  }\n\n  insertSplittableListAtIndex(splittableList, index) {\n    return this.splice(index, 0, ...splittableList.objects);\n  }\n\n  insertSplittableListAtPosition(splittableList, position) {\n    const [objects, index] = this.splitObjectAtPosition(position);\n    return new this.constructor(objects).insertSplittableListAtIndex(splittableList, index);\n  }\n\n  editObjectAtIndex(index, callback) {\n    return this.replaceObjectAtIndex(callback(this.objects[index]), index);\n  }\n\n  replaceObjectAtIndex(object, index) {\n    return this.splice(index, 1, object);\n  }\n\n  removeObjectAtIndex(index) {\n    return this.splice(index, 1);\n  }\n\n  getObjectAtIndex(index) {\n    return this.objects[index];\n  }\n\n  getSplittableListInRange(range) {\n    const [objects, leftIndex, rightIndex] = this.splitObjectsAtRange(range);\n    return new this.constructor(objects.slice(leftIndex, rightIndex + 1));\n  }\n\n  selectSplittableList(test) {\n    const objects = this.objects.filter(object => test(object));\n    return new this.constructor(objects);\n  }\n\n  removeObjectsInRange(range) {\n    const [objects, leftIndex, rightIndex] = this.splitObjectsAtRange(range);\n    return new this.constructor(objects).splice(leftIndex, rightIndex - leftIndex + 1);\n  }\n\n  transformObjectsInRange(range, transform) {\n    const [objects, leftIndex, rightIndex] = this.splitObjectsAtRange(range);\n    const transformedObjects = objects.map((object, index) => leftIndex <= index && index <= rightIndex ? transform(object) : object);\n    return new this.constructor(transformedObjects);\n  }\n\n  splitObjectsAtRange(range) {\n    let rightOuterIndex;\n    let [objects, leftInnerIndex, offset] = this.splitObjectAtPosition(startOfRange(range));\n    [objects, rightOuterIndex] = new this.constructor(objects).splitObjectAtPosition(endOfRange(range) + offset);\n    return [objects, leftInnerIndex, rightOuterIndex - 1];\n  }\n\n  getObjectAtPosition(position) {\n    const {\n      index\n    } = this.findIndexAndOffsetAtPosition(position);\n    return this.objects[index];\n  }\n\n  splitObjectAtPosition(position) {\n    let splitIndex, splitOffset;\n    const {\n      index,\n      offset\n    } = this.findIndexAndOffsetAtPosition(position);\n    const objects = this.objects.slice(0);\n\n    if (index != null) {\n      if (offset === 0) {\n        splitIndex = index;\n        splitOffset = 0;\n      } else {\n        const object = this.getObjectAtIndex(index);\n        const [leftObject, rightObject] = object.splitAtOffset(offset);\n        objects.splice(index, 1, leftObject, rightObject);\n        splitIndex = index + 1;\n        splitOffset = leftObject.getLength() - offset;\n      }\n    } else {\n      splitIndex = objects.length;\n      splitOffset = 0;\n    }\n\n    return [objects, splitIndex, splitOffset];\n  }\n\n  consolidate() {\n    const objects = [];\n    let pendingObject = this.objects[0];\n    this.objects.slice(1).forEach(object => {\n      var _pendingObject$canBeC, _pendingObject;\n\n      if ((_pendingObject$canBeC = (_pendingObject = pendingObject).canBeConsolidatedWith) !== null && _pendingObject$canBeC !== void 0 && _pendingObject$canBeC.call(_pendingObject, object)) {\n        pendingObject = pendingObject.consolidateWith(object);\n      } else {\n        objects.push(pendingObject);\n        pendingObject = object;\n      }\n    });\n\n    if (pendingObject) {\n      objects.push(pendingObject);\n    }\n\n    return new this.constructor(objects);\n  }\n\n  consolidateFromIndexToIndex(startIndex, endIndex) {\n    const objects = this.objects.slice(0);\n    const objectsInRange = objects.slice(startIndex, endIndex + 1);\n    const consolidatedInRange = new this.constructor(objectsInRange).consolidate().toArray();\n    return this.splice(startIndex, objectsInRange.length, ...consolidatedInRange);\n  }\n\n  findIndexAndOffsetAtPosition(position) {\n    let index;\n    let currentPosition = 0;\n\n    for (index = 0; index < this.objects.length; index++) {\n      const object = this.objects[index];\n      const nextPosition = currentPosition + object.getLength();\n\n      if (currentPosition <= position && position < nextPosition) {\n        return {\n          index,\n          offset: position - currentPosition\n        };\n      }\n\n      currentPosition = nextPosition;\n    }\n\n    return {\n      index: null,\n      offset: null\n    };\n  }\n\n  findPositionAtIndexAndOffset(index, offset) {\n    let position = 0;\n\n    for (let currentIndex = 0; currentIndex < this.objects.length; currentIndex++) {\n      const object = this.objects[currentIndex];\n\n      if (currentIndex < index) {\n        position += object.getLength();\n      } else if (currentIndex === index) {\n        position += offset;\n        break;\n      }\n    }\n\n    return position;\n  }\n\n  getEndPosition() {\n    if (this.endPosition == null) {\n      this.endPosition = 0;\n      this.objects.forEach(object => this.endPosition += object.getLength());\n    }\n\n    return this.endPosition;\n  }\n\n  toString() {\n    return this.objects.join(\"\");\n  }\n\n  toArray() {\n    return this.objects.slice(0);\n  }\n\n  toJSON() {\n    return this.toArray();\n  }\n\n  isEqualTo(splittableList) {\n    return super.isEqualTo(...arguments) || objectArraysAreEqual(this.objects, splittableList === null || splittableList === void 0 ? void 0 : splittableList.objects);\n  }\n\n  contentsForInspection() {\n    return {\n      objects: \"[\".concat(this.objects.map(object => object.inspect()).join(\", \"), \"]\")\n    };\n  }\n\n}\n\nconst objectArraysAreEqual = function (left) {\n  let right = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (left.length !== right.length) {\n    return false;\n  }\n\n  let result = true;\n\n  for (let index = 0; index < left.length; index++) {\n    const object = left[index];\n\n    if (result && !object.isEqualTo(right[index])) {\n      result = false;\n    }\n  }\n\n  return result;\n};\n\nconst startOfRange = range => range[0];\n\nconst endOfRange = range => range[1];\n\nclass Text extends TrixObject {\n  static textForAttachmentWithAttributes(attachment, attributes) {\n    const piece = new AttachmentPiece(attachment, attributes);\n    return new this([piece]);\n  }\n\n  static textForStringWithAttributes(string, attributes) {\n    const piece = new StringPiece(string, attributes);\n    return new this([piece]);\n  }\n\n  static fromJSON(textJSON) {\n    const pieces = Array.from(textJSON).map(pieceJSON => Piece.fromJSON(pieceJSON));\n    return new this(pieces);\n  }\n\n  constructor() {\n    let pieces = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n    const notEmpty = pieces.filter(piece => !piece.isEmpty());\n    this.pieceList = new SplittableList(notEmpty);\n  }\n\n  copy() {\n    return this.copyWithPieceList(this.pieceList);\n  }\n\n  copyWithPieceList(pieceList) {\n    return new this.constructor(pieceList.consolidate().toArray());\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const pieces = this.getPieces().map(piece => objectMap.find(piece) || piece);\n    return new this.constructor(pieces);\n  }\n\n  appendText(text) {\n    return this.insertTextAtPosition(text, this.getLength());\n  }\n\n  insertTextAtPosition(text, position) {\n    return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(text.pieceList, position));\n  }\n\n  removeTextAtRange(range) {\n    return this.copyWithPieceList(this.pieceList.removeObjectsInRange(range));\n  }\n\n  replaceTextAtRange(text, range) {\n    return this.removeTextAtRange(range).insertTextAtPosition(text, range[0]);\n  }\n\n  moveTextFromRangeToPosition(range, position) {\n    if (range[0] <= position && position <= range[1]) return;\n    const text = this.getTextAtRange(range);\n    const length = text.getLength();\n\n    if (range[0] < position) {\n      position -= length;\n    }\n\n    return this.removeTextAtRange(range).insertTextAtPosition(text, position);\n  }\n\n  addAttributeAtRange(attribute, value, range) {\n    const attributes = {};\n    attributes[attribute] = value;\n    return this.addAttributesAtRange(attributes, range);\n  }\n\n  addAttributesAtRange(attributes, range) {\n    return this.copyWithPieceList(this.pieceList.transformObjectsInRange(range, piece => piece.copyWithAdditionalAttributes(attributes)));\n  }\n\n  removeAttributeAtRange(attribute, range) {\n    return this.copyWithPieceList(this.pieceList.transformObjectsInRange(range, piece => piece.copyWithoutAttribute(attribute)));\n  }\n\n  setAttributesAtRange(attributes, range) {\n    return this.copyWithPieceList(this.pieceList.transformObjectsInRange(range, piece => piece.copyWithAttributes(attributes)));\n  }\n\n  getAttributesAtPosition(position) {\n    var _this$pieceList$getOb;\n\n    return ((_this$pieceList$getOb = this.pieceList.getObjectAtPosition(position)) === null || _this$pieceList$getOb === void 0 ? void 0 : _this$pieceList$getOb.getAttributes()) || {};\n  }\n\n  getCommonAttributes() {\n    const objects = Array.from(this.pieceList.toArray()).map(piece => piece.getAttributes());\n    return Hash.fromCommonAttributesOfObjects(objects).toObject();\n  }\n\n  getCommonAttributesAtRange(range) {\n    return this.getTextAtRange(range).getCommonAttributes() || {};\n  }\n\n  getExpandedRangeForAttributeAtOffset(attributeName, offset) {\n    let right;\n    let left = right = offset;\n    const length = this.getLength();\n\n    while (left > 0 && this.getCommonAttributesAtRange([left - 1, right])[attributeName]) {\n      left--;\n    }\n\n    while (right < length && this.getCommonAttributesAtRange([offset, right + 1])[attributeName]) {\n      right++;\n    }\n\n    return [left, right];\n  }\n\n  getTextAtRange(range) {\n    return this.copyWithPieceList(this.pieceList.getSplittableListInRange(range));\n  }\n\n  getStringAtRange(range) {\n    return this.pieceList.getSplittableListInRange(range).toString();\n  }\n\n  getStringAtPosition(position) {\n    return this.getStringAtRange([position, position + 1]);\n  }\n\n  startsWithString(string) {\n    return this.getStringAtRange([0, string.length]) === string;\n  }\n\n  endsWithString(string) {\n    const length = this.getLength();\n    return this.getStringAtRange([length - string.length, length]) === string;\n  }\n\n  getAttachmentPieces() {\n    return this.pieceList.toArray().filter(piece => !!piece.attachment);\n  }\n\n  getAttachments() {\n    return this.getAttachmentPieces().map(piece => piece.attachment);\n  }\n\n  getAttachmentAndPositionById(attachmentId) {\n    let position = 0;\n\n    for (const piece of this.pieceList.toArray()) {\n      var _piece$attachment;\n\n      if (((_piece$attachment = piece.attachment) === null || _piece$attachment === void 0 ? void 0 : _piece$attachment.id) === attachmentId) {\n        return {\n          attachment: piece.attachment,\n          position\n        };\n      }\n\n      position += piece.length;\n    }\n\n    return {\n      attachment: null,\n      position: null\n    };\n  }\n\n  getAttachmentById(attachmentId) {\n    const {\n      attachment\n    } = this.getAttachmentAndPositionById(attachmentId);\n    return attachment;\n  }\n\n  getRangeOfAttachment(attachment) {\n    const attachmentAndPosition = this.getAttachmentAndPositionById(attachment.id);\n    const position = attachmentAndPosition.position;\n    attachment = attachmentAndPosition.attachment;\n\n    if (attachment) {\n      return [position, position + 1];\n    }\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    const range = this.getRangeOfAttachment(attachment);\n\n    if (range) {\n      return this.addAttributesAtRange(attributes, range);\n    } else {\n      return this;\n    }\n  }\n\n  getLength() {\n    return this.pieceList.getEndPosition();\n  }\n\n  isEmpty() {\n    return this.getLength() === 0;\n  }\n\n  isEqualTo(text) {\n    var _text$pieceList;\n\n    return super.isEqualTo(text) || (text === null || text === void 0 ? void 0 : (_text$pieceList = text.pieceList) === null || _text$pieceList === void 0 ? void 0 : _text$pieceList.isEqualTo(this.pieceList));\n  }\n\n  isBlockBreak() {\n    return this.getLength() === 1 && this.pieceList.getObjectAtIndex(0).isBlockBreak();\n  }\n\n  eachPiece(callback) {\n    return this.pieceList.eachObject(callback);\n  }\n\n  getPieces() {\n    return this.pieceList.toArray();\n  }\n\n  getPieceAtPosition(position) {\n    return this.pieceList.getObjectAtPosition(position);\n  }\n\n  contentsForInspection() {\n    return {\n      pieceList: this.pieceList.inspect()\n    };\n  }\n\n  toSerializableText() {\n    const pieceList = this.pieceList.selectSplittableList(piece => piece.isSerializable());\n    return this.copyWithPieceList(pieceList);\n  }\n\n  toString() {\n    return this.pieceList.toString();\n  }\n\n  toJSON() {\n    return this.pieceList.toJSON();\n  }\n\n  toConsole() {\n    return JSON.stringify(this.pieceList.toArray().map(piece => JSON.parse(piece.toConsole())));\n  } // BIDI\n\n\n  getDirection() {\n    return getDirection(this.toString());\n  }\n\n  isRTL() {\n    return this.getDirection() === \"rtl\";\n  }\n\n}\n\nclass Block extends TrixObject {\n  static fromJSON(blockJSON) {\n    const text = Text.fromJSON(blockJSON.text);\n    return new this(text, blockJSON.attributes);\n  }\n\n  constructor(text, attributes) {\n    super(...arguments);\n    this.text = applyBlockBreakToText(text || new Text());\n    this.attributes = attributes || [];\n  }\n\n  isEmpty() {\n    return this.text.isBlockBreak();\n  }\n\n  isEqualTo(block) {\n    if (super.isEqualTo(block)) return true;\n    return this.text.isEqualTo(block === null || block === void 0 ? void 0 : block.text) && arraysAreEqual(this.attributes, block === null || block === void 0 ? void 0 : block.attributes);\n  }\n\n  copyWithText(text) {\n    return new Block(text, this.attributes);\n  }\n\n  copyWithoutText() {\n    return this.copyWithText(null);\n  }\n\n  copyWithAttributes(attributes) {\n    return new Block(this.text, attributes);\n  }\n\n  copyWithoutAttributes() {\n    return this.copyWithAttributes(null);\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const mappedText = objectMap.find(this.text);\n\n    if (mappedText) {\n      return this.copyWithText(mappedText);\n    } else {\n      return this.copyWithText(this.text.copyUsingObjectMap(objectMap));\n    }\n  }\n\n  addAttribute(attribute) {\n    const attributes = this.attributes.concat(expandAttribute(attribute));\n    return this.copyWithAttributes(attributes);\n  }\n\n  removeAttribute(attribute) {\n    const {\n      listAttribute\n    } = getBlockConfig(attribute);\n    const attributes = removeLastValue(removeLastValue(this.attributes, attribute), listAttribute);\n    return this.copyWithAttributes(attributes);\n  }\n\n  removeLastAttribute() {\n    return this.removeAttribute(this.getLastAttribute());\n  }\n\n  getLastAttribute() {\n    return getLastElement(this.attributes);\n  }\n\n  getAttributes() {\n    return this.attributes.slice(0);\n  }\n\n  getAttributeLevel() {\n    return this.attributes.length;\n  }\n\n  getAttributeAtLevel(level) {\n    return this.attributes[level - 1];\n  }\n\n  hasAttribute(attributeName) {\n    return this.attributes.includes(attributeName);\n  }\n\n  hasAttributes() {\n    return this.getAttributeLevel() > 0;\n  }\n\n  getLastNestableAttribute() {\n    return getLastElement(this.getNestableAttributes());\n  }\n\n  getNestableAttributes() {\n    return this.attributes.filter(attribute => getBlockConfig(attribute).nestable);\n  }\n\n  getNestingLevel() {\n    return this.getNestableAttributes().length;\n  }\n\n  decreaseNestingLevel() {\n    const attribute = this.getLastNestableAttribute();\n\n    if (attribute) {\n      return this.removeAttribute(attribute);\n    } else {\n      return this;\n    }\n  }\n\n  increaseNestingLevel() {\n    const attribute = this.getLastNestableAttribute();\n\n    if (attribute) {\n      const index = this.attributes.lastIndexOf(attribute);\n      const attributes = spliceArray(this.attributes, index + 1, 0, ...expandAttribute(attribute));\n      return this.copyWithAttributes(attributes);\n    } else {\n      return this;\n    }\n  }\n\n  getListItemAttributes() {\n    return this.attributes.filter(attribute => getBlockConfig(attribute).listAttribute);\n  }\n\n  isListItem() {\n    var _getBlockConfig;\n\n    return (_getBlockConfig = getBlockConfig(this.getLastAttribute())) === null || _getBlockConfig === void 0 ? void 0 : _getBlockConfig.listAttribute;\n  }\n\n  isTerminalBlock() {\n    var _getBlockConfig2;\n\n    return (_getBlockConfig2 = getBlockConfig(this.getLastAttribute())) === null || _getBlockConfig2 === void 0 ? void 0 : _getBlockConfig2.terminal;\n  }\n\n  breaksOnReturn() {\n    var _getBlockConfig3;\n\n    return (_getBlockConfig3 = getBlockConfig(this.getLastAttribute())) === null || _getBlockConfig3 === void 0 ? void 0 : _getBlockConfig3.breakOnReturn;\n  }\n\n  findLineBreakInDirectionFromPosition(direction, position) {\n    const string = this.toString();\n    let result;\n\n    switch (direction) {\n      case \"forward\":\n        result = string.indexOf(\"\\n\", position);\n        break;\n\n      case \"backward\":\n        result = string.slice(0, position).lastIndexOf(\"\\n\");\n    }\n\n    if (result !== -1) {\n      return result;\n    }\n  }\n\n  contentsForInspection() {\n    return {\n      text: this.text.inspect(),\n      attributes: this.attributes\n    };\n  }\n\n  toString() {\n    return this.text.toString();\n  }\n\n  toJSON() {\n    return {\n      text: this.text,\n      attributes: this.attributes\n    };\n  } // BIDI\n\n\n  getDirection() {\n    return this.text.getDirection();\n  }\n\n  isRTL() {\n    return this.text.isRTL();\n  } // Splittable\n\n\n  getLength() {\n    return this.text.getLength();\n  }\n\n  canBeConsolidatedWith(block) {\n    return !this.hasAttributes() && !block.hasAttributes() && this.getDirection() === block.getDirection();\n  }\n\n  consolidateWith(block) {\n    const newlineText = Text.textForStringWithAttributes(\"\\n\");\n    const text = this.getTextWithoutBlockBreak().appendText(newlineText);\n    return this.copyWithText(text.appendText(block.text));\n  }\n\n  splitAtOffset(offset) {\n    let left, right;\n\n    if (offset === 0) {\n      left = null;\n      right = this;\n    } else if (offset === this.getLength()) {\n      left = this;\n      right = null;\n    } else {\n      left = this.copyWithText(this.text.getTextAtRange([0, offset]));\n      right = this.copyWithText(this.text.getTextAtRange([offset, this.getLength()]));\n    }\n\n    return [left, right];\n  }\n\n  getBlockBreakPosition() {\n    return this.text.getLength() - 1;\n  }\n\n  getTextWithoutBlockBreak() {\n    if (textEndsInBlockBreak(this.text)) {\n      return this.text.getTextAtRange([0, this.getBlockBreakPosition()]);\n    } else {\n      return this.text.copy();\n    }\n  } // Grouping\n\n\n  canBeGrouped(depth) {\n    return this.attributes[depth];\n  }\n\n  canBeGroupedWith(otherBlock, depth) {\n    const otherAttributes = otherBlock.getAttributes();\n    const otherAttribute = otherAttributes[depth];\n    const attribute = this.attributes[depth];\n    return attribute === otherAttribute && !(getBlockConfig(attribute).group === false && !getListAttributeNames().includes(otherAttributes[depth + 1])) && (this.getDirection() === otherBlock.getDirection() || otherBlock.isEmpty());\n  }\n\n} // Block breaks\n\nconst applyBlockBreakToText = function (text) {\n  text = unmarkExistingInnerBlockBreaksInText(text);\n  text = addBlockBreakToText(text);\n  return text;\n};\n\nconst unmarkExistingInnerBlockBreaksInText = function (text) {\n  let modified = false;\n  const pieces = text.getPieces();\n  let innerPieces = pieces.slice(0, pieces.length - 1);\n  const lastPiece = pieces[pieces.length - 1];\n  if (!lastPiece) return text;\n  innerPieces = innerPieces.map(piece => {\n    if (piece.isBlockBreak()) {\n      modified = true;\n      return unmarkBlockBreakPiece(piece);\n    } else {\n      return piece;\n    }\n  });\n\n  if (modified) {\n    return new Text([...innerPieces, lastPiece]);\n  } else {\n    return text;\n  }\n};\n\nconst blockBreakText = Text.textForStringWithAttributes(\"\\n\", {\n  blockBreak: true\n});\n\nconst addBlockBreakToText = function (text) {\n  if (textEndsInBlockBreak(text)) {\n    return text;\n  } else {\n    return text.appendText(blockBreakText);\n  }\n};\n\nconst textEndsInBlockBreak = function (text) {\n  const length = text.getLength();\n\n  if (length === 0) {\n    return false;\n  }\n\n  const endText = text.getTextAtRange([length - 1, length]);\n  return endText.isBlockBreak();\n};\n\nconst unmarkBlockBreakPiece = piece => piece.copyWithoutAttribute(\"blockBreak\"); // Attributes\n\n\nconst expandAttribute = function (attribute) {\n  const {\n    listAttribute\n  } = getBlockConfig(attribute);\n\n  if (listAttribute) {\n    return [listAttribute, attribute];\n  } else {\n    return [attribute];\n  }\n}; // Array helpers\n\n\nconst getLastElement = array => array.slice(-1)[0];\n\nconst removeLastValue = function (array, value) {\n  const index = array.lastIndexOf(value);\n\n  if (index === -1) {\n    return array;\n  } else {\n    return spliceArray(array, index, 1);\n  }\n};\n\nclass ObjectMap extends BasicObject {\n  constructor() {\n    let objects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n    this.objects = {};\n    Array.from(objects).forEach(object => {\n      const hash = JSON.stringify(object);\n\n      if (this.objects[hash] == null) {\n        this.objects[hash] = object;\n      }\n    });\n  }\n\n  find(object) {\n    const hash = JSON.stringify(object);\n    return this.objects[hash];\n  }\n\n}\n\nclass Document extends TrixObject {\n  static fromJSON(documentJSON) {\n    const blocks = Array.from(documentJSON).map(blockJSON => Block.fromJSON(blockJSON));\n    return new this(blocks);\n  }\n\n  static fromString(string, textAttributes) {\n    const text = Text.textForStringWithAttributes(string, textAttributes);\n    return new this([new Block(text)]);\n  }\n\n  constructor() {\n    let blocks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n\n    if (blocks.length === 0) {\n      blocks = [new Block()];\n    }\n\n    this.blockList = SplittableList.box(blocks);\n  }\n\n  isEmpty() {\n    const block = this.getBlockAtIndex(0);\n    return this.blockList.length === 1 && block.isEmpty() && !block.hasAttributes();\n  }\n\n  copy() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const blocks = options.consolidateBlocks ? this.blockList.consolidate().toArray() : this.blockList.toArray();\n    return new this.constructor(blocks);\n  }\n\n  copyUsingObjectsFromDocument(sourceDocument) {\n    const objectMap = new ObjectMap(sourceDocument.getObjects());\n    return this.copyUsingObjectMap(objectMap);\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const blocks = this.getBlocks().map(block => {\n      const mappedBlock = objectMap.find(block);\n      return mappedBlock || block.copyUsingObjectMap(objectMap);\n    });\n    return new this.constructor(blocks);\n  }\n\n  copyWithBaseBlockAttributes() {\n    let blockAttributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    const blocks = this.getBlocks().map(block => {\n      const attributes = blockAttributes.concat(block.getAttributes());\n      return block.copyWithAttributes(attributes);\n    });\n    return new this.constructor(blocks);\n  }\n\n  replaceBlock(oldBlock, newBlock) {\n    const index = this.blockList.indexOf(oldBlock);\n\n    if (index === -1) {\n      return this;\n    }\n\n    return new this.constructor(this.blockList.replaceObjectAtIndex(newBlock, index));\n  }\n\n  insertDocumentAtRange(document, range) {\n    const {\n      blockList\n    } = document;\n    range = normalizeRange(range);\n    let [position] = range;\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    let result = this;\n    const block = this.getBlockAtPosition(position);\n\n    if (rangeIsCollapsed(range) && block.isEmpty() && !block.hasAttributes()) {\n      result = new this.constructor(result.blockList.removeObjectAtIndex(index));\n    } else if (block.getBlockBreakPosition() === offset) {\n      position++;\n    }\n\n    result = result.removeTextAtRange(range);\n    return new this.constructor(result.blockList.insertSplittableListAtPosition(blockList, position));\n  }\n\n  mergeDocumentAtRange(document, range) {\n    let formattedDocument, result;\n    range = normalizeRange(range);\n    const [startPosition] = range;\n    const startLocation = this.locationFromPosition(startPosition);\n    const blockAttributes = this.getBlockAtIndex(startLocation.index).getAttributes();\n    const baseBlockAttributes = document.getBaseBlockAttributes();\n    const trailingBlockAttributes = blockAttributes.slice(-baseBlockAttributes.length);\n\n    if (arraysAreEqual(baseBlockAttributes, trailingBlockAttributes)) {\n      const leadingBlockAttributes = blockAttributes.slice(0, -baseBlockAttributes.length);\n      formattedDocument = document.copyWithBaseBlockAttributes(leadingBlockAttributes);\n    } else {\n      formattedDocument = document.copy({\n        consolidateBlocks: true\n      }).copyWithBaseBlockAttributes(blockAttributes);\n    }\n\n    const blockCount = formattedDocument.getBlockCount();\n    const firstBlock = formattedDocument.getBlockAtIndex(0);\n\n    if (arraysAreEqual(blockAttributes, firstBlock.getAttributes())) {\n      const firstText = firstBlock.getTextWithoutBlockBreak();\n      result = this.insertTextAtRange(firstText, range);\n\n      if (blockCount > 1) {\n        formattedDocument = new this.constructor(formattedDocument.getBlocks().slice(1));\n        const position = startPosition + firstText.getLength();\n        result = result.insertDocumentAtRange(formattedDocument, position);\n      }\n    } else {\n      result = this.insertDocumentAtRange(formattedDocument, range);\n    }\n\n    return result;\n  }\n\n  insertTextAtRange(text, range) {\n    range = normalizeRange(range);\n    const [startPosition] = range;\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(startPosition);\n    const document = this.removeTextAtRange(range);\n    return new this.constructor(document.blockList.editObjectAtIndex(index, block => block.copyWithText(block.text.insertTextAtPosition(text, offset))));\n  }\n\n  removeTextAtRange(range) {\n    let blocks;\n    range = normalizeRange(range);\n    const [leftPosition, rightPosition] = range;\n\n    if (rangeIsCollapsed(range)) {\n      return this;\n    }\n\n    const [leftLocation, rightLocation] = Array.from(this.locationRangeFromRange(range));\n    const leftIndex = leftLocation.index;\n    const leftOffset = leftLocation.offset;\n    const leftBlock = this.getBlockAtIndex(leftIndex);\n    const rightIndex = rightLocation.index;\n    const rightOffset = rightLocation.offset;\n    const rightBlock = this.getBlockAtIndex(rightIndex);\n    const removeRightNewline = rightPosition - leftPosition === 1 && leftBlock.getBlockBreakPosition() === leftOffset && rightBlock.getBlockBreakPosition() !== rightOffset && rightBlock.text.getStringAtPosition(rightOffset) === \"\\n\";\n\n    if (removeRightNewline) {\n      blocks = this.blockList.editObjectAtIndex(rightIndex, block => block.copyWithText(block.text.removeTextAtRange([rightOffset, rightOffset + 1])));\n    } else {\n      let block;\n      const leftText = leftBlock.text.getTextAtRange([0, leftOffset]);\n      const rightText = rightBlock.text.getTextAtRange([rightOffset, rightBlock.getLength()]);\n      const text = leftText.appendText(rightText);\n      const removingLeftBlock = leftIndex !== rightIndex && leftOffset === 0;\n      const useRightBlock = removingLeftBlock && leftBlock.getAttributeLevel() >= rightBlock.getAttributeLevel();\n\n      if (useRightBlock) {\n        block = rightBlock.copyWithText(text);\n      } else {\n        block = leftBlock.copyWithText(text);\n      }\n\n      const affectedBlockCount = rightIndex + 1 - leftIndex;\n      blocks = this.blockList.splice(leftIndex, affectedBlockCount, block);\n    }\n\n    return new this.constructor(blocks);\n  }\n\n  moveTextFromRangeToPosition(range, position) {\n    let text;\n    range = normalizeRange(range);\n    const [startPosition, endPosition] = range;\n\n    if (startPosition <= position && position <= endPosition) {\n      return this;\n    }\n\n    let document = this.getDocumentAtRange(range);\n    let result = this.removeTextAtRange(range);\n    const movingRightward = startPosition < position;\n\n    if (movingRightward) {\n      position -= document.getLength();\n    }\n\n    const [firstBlock, ...blocks] = document.getBlocks();\n\n    if (blocks.length === 0) {\n      text = firstBlock.getTextWithoutBlockBreak();\n\n      if (movingRightward) {\n        position += 1;\n      }\n    } else {\n      text = firstBlock.text;\n    }\n\n    result = result.insertTextAtRange(text, position);\n\n    if (blocks.length === 0) {\n      return result;\n    }\n\n    document = new this.constructor(blocks);\n    position += text.getLength();\n    return result.insertDocumentAtRange(document, position);\n  }\n\n  addAttributeAtRange(attribute, value, range) {\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, (block, textRange, index) => blockList = blockList.editObjectAtIndex(index, function () {\n      if (getBlockConfig(attribute)) {\n        return block.addAttribute(attribute, value);\n      } else {\n        if (textRange[0] === textRange[1]) {\n          return block;\n        } else {\n          return block.copyWithText(block.text.addAttributeAtRange(attribute, value, textRange));\n        }\n      }\n    }));\n    return new this.constructor(blockList);\n  }\n\n  addAttribute(attribute, value) {\n    let {\n      blockList\n    } = this;\n    this.eachBlock((block, index) => blockList = blockList.editObjectAtIndex(index, () => block.addAttribute(attribute, value)));\n    return new this.constructor(blockList);\n  }\n\n  removeAttributeAtRange(attribute, range) {\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, function (block, textRange, index) {\n      if (getBlockConfig(attribute)) {\n        blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(attribute));\n      } else if (textRange[0] !== textRange[1]) {\n        blockList = blockList.editObjectAtIndex(index, () => block.copyWithText(block.text.removeAttributeAtRange(attribute, textRange)));\n      }\n    });\n    return new this.constructor(blockList);\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    const range = this.getRangeOfAttachment(attachment);\n    const [startPosition] = Array.from(range);\n    const {\n      index\n    } = this.locationFromPosition(startPosition);\n    const text = this.getTextAtIndex(index);\n    return new this.constructor(this.blockList.editObjectAtIndex(index, block => block.copyWithText(text.updateAttributesForAttachment(attributes, attachment))));\n  }\n\n  removeAttributeForAttachment(attribute, attachment) {\n    const range = this.getRangeOfAttachment(attachment);\n    return this.removeAttributeAtRange(attribute, range);\n  }\n\n  insertBlockBreakAtRange(range) {\n    let blocks;\n    range = normalizeRange(range);\n    const [startPosition] = range;\n    const {\n      offset\n    } = this.locationFromPosition(startPosition);\n    const document = this.removeTextAtRange(range);\n\n    if (offset === 0) {\n      blocks = [new Block()];\n    }\n\n    return new this.constructor(document.blockList.insertSplittableListAtPosition(new SplittableList(blocks), startPosition));\n  }\n\n  applyBlockAttributeAtRange(attributeName, value, range) {\n    const expanded = this.expandRangeToLineBreaksAndSplitBlocks(range);\n    let document = expanded.document;\n    range = expanded.range;\n    const blockConfig = getBlockConfig(attributeName);\n\n    if (blockConfig.listAttribute) {\n      document = document.removeLastListAttributeAtRange(range, {\n        exceptAttributeName: attributeName\n      });\n      const converted = document.convertLineBreaksToBlockBreaksInRange(range);\n      document = converted.document;\n      range = converted.range;\n    } else if (blockConfig.exclusive) {\n      document = document.removeBlockAttributesAtRange(range);\n    } else if (blockConfig.terminal) {\n      document = document.removeLastTerminalAttributeAtRange(range);\n    } else {\n      document = document.consolidateBlocksAtRange(range);\n    }\n\n    return document.addAttributeAtRange(attributeName, value, range);\n  }\n\n  removeLastListAttributeAtRange(range) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, function (block, textRange, index) {\n      const lastAttributeName = block.getLastAttribute();\n\n      if (!lastAttributeName) {\n        return;\n      }\n\n      if (!getBlockConfig(lastAttributeName).listAttribute) {\n        return;\n      }\n\n      if (lastAttributeName === options.exceptAttributeName) {\n        return;\n      }\n\n      blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(lastAttributeName));\n    });\n    return new this.constructor(blockList);\n  }\n\n  removeLastTerminalAttributeAtRange(range) {\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, function (block, textRange, index) {\n      const lastAttributeName = block.getLastAttribute();\n\n      if (!lastAttributeName) {\n        return;\n      }\n\n      if (!getBlockConfig(lastAttributeName).terminal) {\n        return;\n      }\n\n      blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(lastAttributeName));\n    });\n    return new this.constructor(blockList);\n  }\n\n  removeBlockAttributesAtRange(range) {\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, function (block, textRange, index) {\n      if (block.hasAttributes()) {\n        blockList = blockList.editObjectAtIndex(index, () => block.copyWithoutAttributes());\n      }\n    });\n    return new this.constructor(blockList);\n  }\n\n  expandRangeToLineBreaksAndSplitBlocks(range) {\n    let position;\n    range = normalizeRange(range);\n    let [startPosition, endPosition] = range;\n    const startLocation = this.locationFromPosition(startPosition);\n    const endLocation = this.locationFromPosition(endPosition);\n    let document = this;\n    const startBlock = document.getBlockAtIndex(startLocation.index);\n    startLocation.offset = startBlock.findLineBreakInDirectionFromPosition(\"backward\", startLocation.offset);\n\n    if (startLocation.offset != null) {\n      position = document.positionFromLocation(startLocation);\n      document = document.insertBlockBreakAtRange([position, position + 1]);\n      endLocation.index += 1;\n      endLocation.offset -= document.getBlockAtIndex(startLocation.index).getLength();\n      startLocation.index += 1;\n    }\n\n    startLocation.offset = 0;\n\n    if (endLocation.offset === 0 && endLocation.index > startLocation.index) {\n      endLocation.index -= 1;\n      endLocation.offset = document.getBlockAtIndex(endLocation.index).getBlockBreakPosition();\n    } else {\n      const endBlock = document.getBlockAtIndex(endLocation.index);\n\n      if (endBlock.text.getStringAtRange([endLocation.offset - 1, endLocation.offset]) === \"\\n\") {\n        endLocation.offset -= 1;\n      } else {\n        endLocation.offset = endBlock.findLineBreakInDirectionFromPosition(\"forward\", endLocation.offset);\n      }\n\n      if (endLocation.offset !== endBlock.getBlockBreakPosition()) {\n        position = document.positionFromLocation(endLocation);\n        document = document.insertBlockBreakAtRange([position, position + 1]);\n      }\n    }\n\n    startPosition = document.positionFromLocation(startLocation);\n    endPosition = document.positionFromLocation(endLocation);\n    range = normalizeRange([startPosition, endPosition]);\n    return {\n      document,\n      range\n    };\n  }\n\n  convertLineBreaksToBlockBreaksInRange(range) {\n    range = normalizeRange(range);\n    let [position] = range;\n    const string = this.getStringAtRange(range).slice(0, -1);\n    let document = this;\n    string.replace(/.*?\\n/g, function (match) {\n      position += match.length;\n      document = document.insertBlockBreakAtRange([position - 1, position]);\n    });\n    return {\n      document,\n      range\n    };\n  }\n\n  consolidateBlocksAtRange(range) {\n    range = normalizeRange(range);\n    const [startPosition, endPosition] = range;\n    const startIndex = this.locationFromPosition(startPosition).index;\n    const endIndex = this.locationFromPosition(endPosition).index;\n    return new this.constructor(this.blockList.consolidateFromIndexToIndex(startIndex, endIndex));\n  }\n\n  getDocumentAtRange(range) {\n    range = normalizeRange(range);\n    const blocks = this.blockList.getSplittableListInRange(range).toArray();\n    return new this.constructor(blocks);\n  }\n\n  getStringAtRange(range) {\n    let endIndex;\n    const array = range = normalizeRange(range),\n          endPosition = array[array.length - 1];\n\n    if (endPosition !== this.getLength()) {\n      endIndex = -1;\n    }\n\n    return this.getDocumentAtRange(range).toString().slice(0, endIndex);\n  }\n\n  getBlockAtIndex(index) {\n    return this.blockList.getObjectAtIndex(index);\n  }\n\n  getBlockAtPosition(position) {\n    const {\n      index\n    } = this.locationFromPosition(position);\n    return this.getBlockAtIndex(index);\n  }\n\n  getTextAtIndex(index) {\n    var _this$getBlockAtIndex;\n\n    return (_this$getBlockAtIndex = this.getBlockAtIndex(index)) === null || _this$getBlockAtIndex === void 0 ? void 0 : _this$getBlockAtIndex.text;\n  }\n\n  getTextAtPosition(position) {\n    const {\n      index\n    } = this.locationFromPosition(position);\n    return this.getTextAtIndex(index);\n  }\n\n  getPieceAtPosition(position) {\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    return this.getTextAtIndex(index).getPieceAtPosition(offset);\n  }\n\n  getCharacterAtPosition(position) {\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    return this.getTextAtIndex(index).getStringAtRange([offset, offset + 1]);\n  }\n\n  getLength() {\n    return this.blockList.getEndPosition();\n  }\n\n  getBlocks() {\n    return this.blockList.toArray();\n  }\n\n  getBlockCount() {\n    return this.blockList.length;\n  }\n\n  getEditCount() {\n    return this.editCount;\n  }\n\n  eachBlock(callback) {\n    return this.blockList.eachObject(callback);\n  }\n\n  eachBlockAtRange(range, callback) {\n    let block, textRange;\n    range = normalizeRange(range);\n    const [startPosition, endPosition] = range;\n    const startLocation = this.locationFromPosition(startPosition);\n    const endLocation = this.locationFromPosition(endPosition);\n\n    if (startLocation.index === endLocation.index) {\n      block = this.getBlockAtIndex(startLocation.index);\n      textRange = [startLocation.offset, endLocation.offset];\n      return callback(block, textRange, startLocation.index);\n    } else {\n      for (let index = startLocation.index; index <= endLocation.index; index++) {\n        block = this.getBlockAtIndex(index);\n\n        if (block) {\n          switch (index) {\n            case startLocation.index:\n              textRange = [startLocation.offset, block.text.getLength()];\n              break;\n\n            case endLocation.index:\n              textRange = [0, endLocation.offset];\n              break;\n\n            default:\n              textRange = [0, block.text.getLength()];\n          }\n\n          callback(block, textRange, index);\n        }\n      }\n    }\n  }\n\n  getCommonAttributesAtRange(range) {\n    range = normalizeRange(range);\n    const [startPosition] = range;\n\n    if (rangeIsCollapsed(range)) {\n      return this.getCommonAttributesAtPosition(startPosition);\n    } else {\n      const textAttributes = [];\n      const blockAttributes = [];\n      this.eachBlockAtRange(range, function (block, textRange) {\n        if (textRange[0] !== textRange[1]) {\n          textAttributes.push(block.text.getCommonAttributesAtRange(textRange));\n          return blockAttributes.push(attributesForBlock(block));\n        }\n      });\n      return Hash.fromCommonAttributesOfObjects(textAttributes).merge(Hash.fromCommonAttributesOfObjects(blockAttributes)).toObject();\n    }\n  }\n\n  getCommonAttributesAtPosition(position) {\n    let key, value;\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    const block = this.getBlockAtIndex(index);\n\n    if (!block) {\n      return {};\n    }\n\n    const commonAttributes = attributesForBlock(block);\n    const attributes = block.text.getAttributesAtPosition(offset);\n    const attributesLeft = block.text.getAttributesAtPosition(offset - 1);\n    const inheritableAttributes = Object.keys(config.textAttributes).filter(key => {\n      return config.textAttributes[key].inheritable;\n    });\n\n    for (key in attributesLeft) {\n      value = attributesLeft[key];\n\n      if (value === attributes[key] || inheritableAttributes.includes(key)) {\n        commonAttributes[key] = value;\n      }\n    }\n\n    return commonAttributes;\n  }\n\n  getRangeOfCommonAttributeAtPosition(attributeName, position) {\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    const text = this.getTextAtIndex(index);\n    const [startOffset, endOffset] = Array.from(text.getExpandedRangeForAttributeAtOffset(attributeName, offset));\n    const start = this.positionFromLocation({\n      index,\n      offset: startOffset\n    });\n    const end = this.positionFromLocation({\n      index,\n      offset: endOffset\n    });\n    return normalizeRange([start, end]);\n  }\n\n  getBaseBlockAttributes() {\n    let baseBlockAttributes = this.getBlockAtIndex(0).getAttributes();\n\n    for (let blockIndex = 1; blockIndex < this.getBlockCount(); blockIndex++) {\n      const blockAttributes = this.getBlockAtIndex(blockIndex).getAttributes();\n      const lastAttributeIndex = Math.min(baseBlockAttributes.length, blockAttributes.length);\n\n      baseBlockAttributes = (() => {\n        const result = [];\n\n        for (let index = 0; index < lastAttributeIndex; index++) {\n          if (blockAttributes[index] !== baseBlockAttributes[index]) {\n            break;\n          }\n\n          result.push(blockAttributes[index]);\n        }\n\n        return result;\n      })();\n    }\n\n    return baseBlockAttributes;\n  }\n\n  getAttachmentById(attachmentId) {\n    for (const attachment of this.getAttachments()) {\n      if (attachment.id === attachmentId) {\n        return attachment;\n      }\n    }\n  }\n\n  getAttachmentPieces() {\n    let attachmentPieces = [];\n    this.blockList.eachObject(_ref => {\n      let {\n        text\n      } = _ref;\n      return attachmentPieces = attachmentPieces.concat(text.getAttachmentPieces());\n    });\n    return attachmentPieces;\n  }\n\n  getAttachments() {\n    return this.getAttachmentPieces().map(piece => piece.attachment);\n  }\n\n  getRangeOfAttachment(attachment) {\n    let position = 0;\n    const iterable = this.blockList.toArray();\n\n    for (let index = 0; index < iterable.length; index++) {\n      const {\n        text\n      } = iterable[index];\n      const textRange = text.getRangeOfAttachment(attachment);\n\n      if (textRange) {\n        return normalizeRange([position + textRange[0], position + textRange[1]]);\n      }\n\n      position += text.getLength();\n    }\n  }\n\n  getLocationRangeOfAttachment(attachment) {\n    const range = this.getRangeOfAttachment(attachment);\n    return this.locationRangeFromRange(range);\n  }\n\n  getAttachmentPieceForAttachment(attachment) {\n    for (const piece of this.getAttachmentPieces()) {\n      if (piece.attachment === attachment) {\n        return piece;\n      }\n    }\n  }\n\n  findRangesForBlockAttribute(attributeName) {\n    let position = 0;\n    const ranges = [];\n    this.getBlocks().forEach(block => {\n      const length = block.getLength();\n\n      if (block.hasAttribute(attributeName)) {\n        ranges.push([position, position + length]);\n      }\n\n      position += length;\n    });\n    return ranges;\n  }\n\n  findRangesForTextAttribute(attributeName) {\n    let {\n      withValue\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let position = 0;\n    let range = [];\n    const ranges = [];\n\n    const match = function (piece) {\n      if (withValue) {\n        return piece.getAttribute(attributeName) === withValue;\n      } else {\n        return piece.hasAttribute(attributeName);\n      }\n    };\n\n    this.getPieces().forEach(piece => {\n      const length = piece.getLength();\n\n      if (match(piece)) {\n        if (range[1] === position) {\n          range[1] = position + length;\n        } else {\n          ranges.push(range = [position, position + length]);\n        }\n      }\n\n      position += length;\n    });\n    return ranges;\n  }\n\n  locationFromPosition(position) {\n    const location = this.blockList.findIndexAndOffsetAtPosition(Math.max(0, position));\n\n    if (location.index != null) {\n      return location;\n    } else {\n      const blocks = this.getBlocks();\n      return {\n        index: blocks.length - 1,\n        offset: blocks[blocks.length - 1].getLength()\n      };\n    }\n  }\n\n  positionFromLocation(location) {\n    return this.blockList.findPositionAtIndexAndOffset(location.index, location.offset);\n  }\n\n  locationRangeFromPosition(position) {\n    return normalizeRange(this.locationFromPosition(position));\n  }\n\n  locationRangeFromRange(range) {\n    range = normalizeRange(range);\n    if (!range) return;\n    const [startPosition, endPosition] = Array.from(range);\n    const startLocation = this.locationFromPosition(startPosition);\n    const endLocation = this.locationFromPosition(endPosition);\n    return normalizeRange([startLocation, endLocation]);\n  }\n\n  rangeFromLocationRange(locationRange) {\n    let rightPosition;\n    locationRange = normalizeRange(locationRange);\n    const leftPosition = this.positionFromLocation(locationRange[0]);\n\n    if (!rangeIsCollapsed(locationRange)) {\n      rightPosition = this.positionFromLocation(locationRange[1]);\n    }\n\n    return normalizeRange([leftPosition, rightPosition]);\n  }\n\n  isEqualTo(document) {\n    return this.blockList.isEqualTo(document === null || document === void 0 ? void 0 : document.blockList);\n  }\n\n  getTexts() {\n    return this.getBlocks().map(block => block.text);\n  }\n\n  getPieces() {\n    const pieces = [];\n    Array.from(this.getTexts()).forEach(text => {\n      pieces.push(...Array.from(text.getPieces() || []));\n    });\n    return pieces;\n  }\n\n  getObjects() {\n    return this.getBlocks().concat(this.getTexts()).concat(this.getPieces());\n  }\n\n  toSerializableDocument() {\n    const blocks = [];\n    this.blockList.eachObject(block => blocks.push(block.copyWithText(block.text.toSerializableText())));\n    return new this.constructor(blocks);\n  }\n\n  toString() {\n    return this.blockList.toString();\n  }\n\n  toJSON() {\n    return this.blockList.toJSON();\n  }\n\n  toConsole() {\n    return JSON.stringify(this.blockList.toArray()).map(block => JSON.parse(block.text.toConsole()));\n  }\n\n}\n\nconst attributesForBlock = function (block) {\n  const attributes = {};\n  const attributeName = block.getLastAttribute();\n\n  if (attributeName) {\n    attributes[attributeName] = true;\n  }\n\n  return attributes;\n};\n\nconst DEFAULT_ALLOWED_ATTRIBUTES = \"style href src width height class\".split(\" \");\nconst DEFAULT_FORBIDDEN_PROTOCOLS = \"javascript:\".split(\" \");\nconst DEFAULT_FORBIDDEN_ELEMENTS = \"script iframe\".split(\" \");\nclass HTMLSanitizer extends BasicObject {\n  static sanitize(html, options) {\n    const sanitizer = new this(html, options);\n    sanitizer.sanitize();\n    return sanitizer;\n  }\n\n  constructor(html) {\n    let {\n      allowedAttributes,\n      forbiddenProtocols,\n      forbiddenElements\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(...arguments);\n    this.allowedAttributes = allowedAttributes || DEFAULT_ALLOWED_ATTRIBUTES;\n    this.forbiddenProtocols = forbiddenProtocols || DEFAULT_FORBIDDEN_PROTOCOLS;\n    this.forbiddenElements = forbiddenElements || DEFAULT_FORBIDDEN_ELEMENTS;\n    this.body = createBodyElementForHTML(html);\n  }\n\n  sanitize() {\n    this.sanitizeElements();\n    return this.normalizeListElementNesting();\n  }\n\n  getHTML() {\n    return this.body.innerHTML;\n  }\n\n  getBody() {\n    return this.body;\n  } // Private\n\n\n  sanitizeElements() {\n    const walker = walkTree(this.body);\n    const nodesToRemove = [];\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode;\n\n      switch (node.nodeType) {\n        case Node.ELEMENT_NODE:\n          if (this.elementIsRemovable(node)) {\n            nodesToRemove.push(node);\n          } else {\n            this.sanitizeElement(node);\n          }\n\n          break;\n\n        case Node.COMMENT_NODE:\n          nodesToRemove.push(node);\n          break;\n      }\n    }\n\n    nodesToRemove.forEach(node => removeNode(node));\n    return this.body;\n  }\n\n  sanitizeElement(element) {\n    if (element.hasAttribute(\"href\")) {\n      if (this.forbiddenProtocols.includes(element.protocol)) {\n        element.removeAttribute(\"href\");\n      }\n    }\n\n    Array.from(element.attributes).forEach(_ref => {\n      let {\n        name\n      } = _ref;\n\n      if (!this.allowedAttributes.includes(name) && name.indexOf(\"data-trix\") !== 0) {\n        element.removeAttribute(name);\n      }\n    });\n    return element;\n  }\n\n  normalizeListElementNesting() {\n    Array.from(this.body.querySelectorAll(\"ul,ol\")).forEach(listElement => {\n      const previousElement = listElement.previousElementSibling;\n\n      if (previousElement) {\n        if (tagName(previousElement) === \"li\") {\n          previousElement.appendChild(listElement);\n        }\n      }\n    });\n    return this.body;\n  }\n\n  elementIsRemovable(element) {\n    if ((element === null || element === void 0 ? void 0 : element.nodeType) !== Node.ELEMENT_NODE) return;\n    return this.elementIsForbidden(element) || this.elementIsntSerializable(element);\n  }\n\n  elementIsForbidden(element) {\n    return this.forbiddenElements.includes(tagName(element));\n  }\n\n  elementIsntSerializable(element) {\n    return element.getAttribute(\"data-trix-serialize\") === \"false\" && !nodeIsAttachmentElement(element);\n  }\n\n}\n\nconst createBodyElementForHTML = function () {\n  let html = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  // Remove everything after </html>\n  html = html.replace(/<\\/html[^>]*>[^]*$/i, \"</html>\");\n  const doc = document.implementation.createHTMLDocument(\"\");\n  doc.documentElement.innerHTML = html;\n  Array.from(doc.head.querySelectorAll(\"style\")).forEach(element => {\n    doc.body.appendChild(element);\n  });\n  return doc.body;\n};\n\n/* eslint-disable\n    no-case-declarations,\n    no-irregular-whitespace,\n*/\n\nconst pieceForString = function (string) {\n  let attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const type = \"string\";\n  string = normalizeSpaces(string);\n  return {\n    string,\n    attributes,\n    type\n  };\n};\n\nconst pieceForAttachment = function (attachment) {\n  let attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const type = \"attachment\";\n  return {\n    attachment,\n    attributes,\n    type\n  };\n};\n\nconst blockForAttributes = function () {\n  let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const text = [];\n  return {\n    text,\n    attributes\n  };\n};\n\nconst parseTrixDataAttribute = (element, name) => {\n  try {\n    return JSON.parse(element.getAttribute(\"data-trix-\".concat(name)));\n  } catch (error) {\n    return {};\n  }\n};\n\nconst getImageDimensions = element => {\n  const width = element.getAttribute(\"width\");\n  const height = element.getAttribute(\"height\");\n  const dimensions = {};\n\n  if (width) {\n    dimensions.width = parseInt(width, 10);\n  }\n\n  if (height) {\n    dimensions.height = parseInt(height, 10);\n  }\n\n  return dimensions;\n};\n\nclass HTMLParser extends BasicObject {\n  static parse(html, options) {\n    const parser = new this(html, options);\n    parser.parse();\n    return parser;\n  }\n\n  constructor(html) {\n    let {\n      referenceElement\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(...arguments);\n    this.html = html;\n    this.referenceElement = referenceElement;\n    this.blocks = [];\n    this.blockElements = [];\n    this.processedElements = [];\n  }\n\n  getDocument() {\n    return Document.fromJSON(this.blocks);\n  } // HTML parsing\n\n\n  parse() {\n    try {\n      this.createHiddenContainer();\n      const html = HTMLSanitizer.sanitize(this.html).getHTML();\n      this.containerElement.innerHTML = html;\n      const walker = walkTree(this.containerElement, {\n        usingFilter: nodeFilter\n      });\n\n      while (walker.nextNode()) {\n        this.processNode(walker.currentNode);\n      }\n\n      return this.translateBlockElementMarginsToNewlines();\n    } finally {\n      this.removeHiddenContainer();\n    }\n  }\n\n  createHiddenContainer() {\n    if (this.referenceElement) {\n      this.containerElement = this.referenceElement.cloneNode(false);\n      this.containerElement.removeAttribute(\"id\");\n      this.containerElement.setAttribute(\"data-trix-internal\", \"\");\n      this.containerElement.style.display = \"none\";\n      return this.referenceElement.parentNode.insertBefore(this.containerElement, this.referenceElement.nextSibling);\n    } else {\n      this.containerElement = makeElement({\n        tagName: \"div\",\n        style: {\n          display: \"none\"\n        }\n      });\n      return document.body.appendChild(this.containerElement);\n    }\n  }\n\n  removeHiddenContainer() {\n    return removeNode(this.containerElement);\n  }\n\n  processNode(node) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        if (!this.isInsignificantTextNode(node)) {\n          this.appendBlockForTextNode(node);\n          return this.processTextNode(node);\n        }\n\n        break;\n\n      case Node.ELEMENT_NODE:\n        this.appendBlockForElement(node);\n        return this.processElement(node);\n    }\n  }\n\n  appendBlockForTextNode(node) {\n    const element = node.parentNode;\n\n    if (element === this.currentBlockElement && this.isBlockElement(node.previousSibling)) {\n      return this.appendStringWithAttributes(\"\\n\");\n    } else if (element === this.containerElement || this.isBlockElement(element)) {\n      var _this$currentBlock;\n\n      const attributes = this.getBlockAttributes(element);\n\n      if (!arraysAreEqual(attributes, (_this$currentBlock = this.currentBlock) === null || _this$currentBlock === void 0 ? void 0 : _this$currentBlock.attributes)) {\n        this.currentBlock = this.appendBlockForAttributesWithElement(attributes, element);\n        this.currentBlockElement = element;\n      }\n    }\n  }\n\n  appendBlockForElement(element) {\n    const elementIsBlockElement = this.isBlockElement(element);\n    const currentBlockContainsElement = elementContainsNode(this.currentBlockElement, element);\n\n    if (elementIsBlockElement && !this.isBlockElement(element.firstChild)) {\n      if (!this.isInsignificantTextNode(element.firstChild) || !this.isBlockElement(element.firstElementChild)) {\n        const attributes = this.getBlockAttributes(element);\n\n        if (element.firstChild) {\n          if (!(currentBlockContainsElement && arraysAreEqual(attributes, this.currentBlock.attributes))) {\n            this.currentBlock = this.appendBlockForAttributesWithElement(attributes, element);\n            this.currentBlockElement = element;\n          } else {\n            return this.appendStringWithAttributes(\"\\n\");\n          }\n        }\n      }\n    } else if (this.currentBlockElement && !currentBlockContainsElement && !elementIsBlockElement) {\n      const parentBlockElement = this.findParentBlockElement(element);\n\n      if (parentBlockElement) {\n        return this.appendBlockForElement(parentBlockElement);\n      } else {\n        this.currentBlock = this.appendEmptyBlock();\n        this.currentBlockElement = null;\n      }\n    }\n  }\n\n  findParentBlockElement(element) {\n    let {\n      parentElement\n    } = element;\n\n    while (parentElement && parentElement !== this.containerElement) {\n      if (this.isBlockElement(parentElement) && this.blockElements.includes(parentElement)) {\n        return parentElement;\n      } else {\n        parentElement = parentElement.parentElement;\n      }\n    }\n\n    return null;\n  }\n\n  processTextNode(node) {\n    let string = node.data;\n\n    if (!elementCanDisplayPreformattedText(node.parentNode)) {\n      var _node$previousSibling;\n\n      string = squishBreakableWhitespace(string);\n\n      if (stringEndsWithWhitespace((_node$previousSibling = node.previousSibling) === null || _node$previousSibling === void 0 ? void 0 : _node$previousSibling.textContent)) {\n        string = leftTrimBreakableWhitespace(string);\n      }\n    }\n\n    return this.appendStringWithAttributes(string, this.getTextAttributes(node.parentNode));\n  }\n\n  processElement(element) {\n    let attributes;\n\n    if (nodeIsAttachmentElement(element)) {\n      attributes = parseTrixDataAttribute(element, \"attachment\");\n\n      if (Object.keys(attributes).length) {\n        const textAttributes = this.getTextAttributes(element);\n        this.appendAttachmentWithAttributes(attributes, textAttributes); // We have everything we need so avoid processing inner nodes\n\n        element.innerHTML = \"\";\n      }\n\n      return this.processedElements.push(element);\n    } else {\n      switch (tagName(element)) {\n        case \"br\":\n          if (!this.isExtraBR(element) && !this.isBlockElement(element.nextSibling)) {\n            this.appendStringWithAttributes(\"\\n\", this.getTextAttributes(element));\n          }\n\n          return this.processedElements.push(element);\n\n        case \"img\":\n          attributes = {\n            url: element.getAttribute(\"src\"),\n            contentType: \"image\"\n          };\n          const object = getImageDimensions(element);\n\n          for (const key in object) {\n            const value = object[key];\n            attributes[key] = value;\n          }\n\n          this.appendAttachmentWithAttributes(attributes, this.getTextAttributes(element));\n          return this.processedElements.push(element);\n\n        case \"tr\":\n          if (element.parentNode.firstChild !== element) {\n            return this.appendStringWithAttributes(\"\\n\");\n          }\n\n          break;\n\n        case \"td\":\n          if (element.parentNode.firstChild !== element) {\n            return this.appendStringWithAttributes(\" | \");\n          }\n\n          break;\n      }\n    }\n  } // Document construction\n\n\n  appendBlockForAttributesWithElement(attributes, element) {\n    this.blockElements.push(element);\n    const block = blockForAttributes(attributes);\n    this.blocks.push(block);\n    return block;\n  }\n\n  appendEmptyBlock() {\n    return this.appendBlockForAttributesWithElement([], null);\n  }\n\n  appendStringWithAttributes(string, attributes) {\n    return this.appendPiece(pieceForString(string, attributes));\n  }\n\n  appendAttachmentWithAttributes(attachment, attributes) {\n    return this.appendPiece(pieceForAttachment(attachment, attributes));\n  }\n\n  appendPiece(piece) {\n    if (this.blocks.length === 0) {\n      this.appendEmptyBlock();\n    }\n\n    return this.blocks[this.blocks.length - 1].text.push(piece);\n  }\n\n  appendStringToTextAtIndex(string, index) {\n    const {\n      text\n    } = this.blocks[index];\n    const piece = text[text.length - 1];\n\n    if ((piece === null || piece === void 0 ? void 0 : piece.type) === \"string\") {\n      piece.string += string;\n    } else {\n      return text.push(pieceForString(string));\n    }\n  }\n\n  prependStringToTextAtIndex(string, index) {\n    const {\n      text\n    } = this.blocks[index];\n    const piece = text[0];\n\n    if ((piece === null || piece === void 0 ? void 0 : piece.type) === \"string\") {\n      piece.string = string + piece.string;\n    } else {\n      return text.unshift(pieceForString(string));\n    }\n  } // Attribute parsing\n\n\n  getTextAttributes(element) {\n    let value;\n    const attributes = {};\n\n    for (const attribute in config.textAttributes) {\n      const configAttr = config.textAttributes[attribute];\n\n      if (configAttr.tagName && findClosestElementFromNode(element, {\n        matchingSelector: configAttr.tagName,\n        untilNode: this.containerElement\n      })) {\n        attributes[attribute] = true;\n      } else if (configAttr.parser) {\n        value = configAttr.parser(element);\n\n        if (value) {\n          let attributeInheritedFromBlock = false;\n\n          for (const blockElement of this.findBlockElementAncestors(element)) {\n            if (configAttr.parser(blockElement) === value) {\n              attributeInheritedFromBlock = true;\n              break;\n            }\n          }\n\n          if (!attributeInheritedFromBlock) {\n            attributes[attribute] = value;\n          }\n        }\n      } else if (configAttr.styleProperty) {\n        value = element.style[configAttr.styleProperty];\n\n        if (value) {\n          attributes[attribute] = value;\n        }\n      }\n    }\n\n    if (nodeIsAttachmentElement(element)) {\n      const object = parseTrixDataAttribute(element, \"attributes\");\n\n      for (const key in object) {\n        value = object[key];\n        attributes[key] = value;\n      }\n    }\n\n    return attributes;\n  }\n\n  getBlockAttributes(element) {\n    const attributes = [];\n\n    while (element && element !== this.containerElement) {\n      for (const attribute in config.blockAttributes) {\n        const attrConfig = config.blockAttributes[attribute];\n\n        if (attrConfig.parse !== false) {\n          if (tagName(element) === attrConfig.tagName) {\n            var _attrConfig$test;\n\n            if ((_attrConfig$test = attrConfig.test) !== null && _attrConfig$test !== void 0 && _attrConfig$test.call(attrConfig, element) || !attrConfig.test) {\n              attributes.push(attribute);\n\n              if (attrConfig.listAttribute) {\n                attributes.push(attrConfig.listAttribute);\n              }\n            }\n          }\n        }\n      }\n\n      element = element.parentNode;\n    }\n\n    return attributes.reverse();\n  }\n\n  findBlockElementAncestors(element) {\n    const ancestors = [];\n\n    while (element && element !== this.containerElement) {\n      const tag = tagName(element);\n\n      if (getBlockTagNames().includes(tag)) {\n        ancestors.push(element);\n      }\n\n      element = element.parentNode;\n    }\n\n    return ancestors;\n  } // Element inspection\n\n\n  isBlockElement(element) {\n    if ((element === null || element === void 0 ? void 0 : element.nodeType) !== Node.ELEMENT_NODE) return;\n    if (nodeIsAttachmentElement(element)) return;\n    if (findClosestElementFromNode(element, {\n      matchingSelector: \"td\",\n      untilNode: this.containerElement\n    })) return;\n    return getBlockTagNames().includes(tagName(element)) || window.getComputedStyle(element).display === \"block\";\n  }\n\n  isInsignificantTextNode(node) {\n    if ((node === null || node === void 0 ? void 0 : node.nodeType) !== Node.TEXT_NODE) return;\n    if (!stringIsAllBreakableWhitespace(node.data)) return;\n    const {\n      parentNode,\n      previousSibling,\n      nextSibling\n    } = node;\n    if (nodeEndsWithNonWhitespace(parentNode.previousSibling) && !this.isBlockElement(parentNode.previousSibling)) return;\n    if (elementCanDisplayPreformattedText(parentNode)) return;\n    return !previousSibling || this.isBlockElement(previousSibling) || !nextSibling || this.isBlockElement(nextSibling);\n  }\n\n  isExtraBR(element) {\n    return tagName(element) === \"br\" && this.isBlockElement(element.parentNode) && element.parentNode.lastChild === element;\n  } // Margin translation\n\n\n  translateBlockElementMarginsToNewlines() {\n    const defaultMargin = this.getMarginOfDefaultBlockElement();\n\n    for (let index = 0; index < this.blocks.length; index++) {\n      const margin = this.getMarginOfBlockElementAtIndex(index);\n\n      if (margin) {\n        if (margin.top > defaultMargin.top * 2) {\n          this.prependStringToTextAtIndex(\"\\n\", index);\n        }\n\n        if (margin.bottom > defaultMargin.bottom * 2) {\n          this.appendStringToTextAtIndex(\"\\n\", index);\n        }\n      }\n    }\n  }\n\n  getMarginOfBlockElementAtIndex(index) {\n    const element = this.blockElements[index];\n\n    if (element) {\n      if (element.textContent) {\n        if (!getBlockTagNames().includes(tagName(element)) && !this.processedElements.includes(element)) {\n          return getBlockElementMargin(element);\n        }\n      }\n    }\n  }\n\n  getMarginOfDefaultBlockElement() {\n    const element = makeElement(config.blockAttributes.default.tagName);\n    this.containerElement.appendChild(element);\n    return getBlockElementMargin(element);\n  }\n\n} //Helpers\n\nconst elementCanDisplayPreformattedText = function (element) {\n  const {\n    whiteSpace\n  } = window.getComputedStyle(element);\n  return [\"pre\", \"pre-wrap\", \"pre-line\"].includes(whiteSpace);\n};\n\nconst nodeEndsWithNonWhitespace = node => node && !stringEndsWithWhitespace(node.textContent);\n\nconst getBlockElementMargin = function (element) {\n  const style = window.getComputedStyle(element);\n\n  if (style.display === \"block\") {\n    return {\n      top: parseInt(style.marginTop),\n      bottom: parseInt(style.marginBottom)\n    };\n  }\n};\n\nconst nodeFilter = function (node) {\n  if (tagName(node) === \"style\") {\n    return NodeFilter.FILTER_REJECT;\n  } else {\n    return NodeFilter.FILTER_ACCEPT;\n  }\n}; // Whitespace\n\n\nconst leftTrimBreakableWhitespace = string => string.replace(new RegExp(\"^\".concat(breakableWhitespacePattern.source, \"+\")), \"\");\n\nconst stringIsAllBreakableWhitespace = string => new RegExp(\"^\".concat(breakableWhitespacePattern.source, \"*$\")).test(string);\n\nconst stringEndsWithWhitespace = string => /\\s$/.test(string);\n\nclass LineBreakInsertion {\n  constructor(composition) {\n    this.composition = composition;\n    this.document = this.composition.document;\n    const selectedRange = this.composition.getSelectedRange();\n    this.startPosition = selectedRange[0];\n    this.endPosition = selectedRange[1];\n    this.startLocation = this.document.locationFromPosition(this.startPosition);\n    this.endLocation = this.document.locationFromPosition(this.endPosition);\n    this.block = this.document.getBlockAtIndex(this.endLocation.index);\n    this.breaksOnReturn = this.block.breaksOnReturn();\n    this.previousCharacter = this.block.text.getStringAtPosition(this.endLocation.offset - 1);\n    this.nextCharacter = this.block.text.getStringAtPosition(this.endLocation.offset);\n  }\n\n  shouldInsertBlockBreak() {\n    if (this.block.hasAttributes() && this.block.isListItem() && !this.block.isEmpty()) {\n      return this.startLocation.offset !== 0;\n    } else {\n      return this.breaksOnReturn && this.nextCharacter !== \"\\n\";\n    }\n  }\n\n  shouldBreakFormattedBlock() {\n    return this.block.hasAttributes() && !this.block.isListItem() && (this.breaksOnReturn && this.nextCharacter === \"\\n\" || this.previousCharacter === \"\\n\");\n  }\n\n  shouldDecreaseListLevel() {\n    return this.block.hasAttributes() && this.block.isListItem() && this.block.isEmpty();\n  }\n\n  shouldPrependListItem() {\n    return this.block.isListItem() && this.startLocation.offset === 0 && !this.block.isEmpty();\n  }\n\n  shouldRemoveLastBlockAttribute() {\n    return this.block.hasAttributes() && !this.block.isListItem() && this.block.isEmpty();\n  }\n\n}\n\nconst PLACEHOLDER = \" \";\nclass Composition extends BasicObject {\n  constructor() {\n    super(...arguments);\n    this.document = new Document();\n    this.attachments = [];\n    this.currentAttributes = {};\n    this.revision = 0;\n  }\n\n  setDocument(document) {\n    if (!document.isEqualTo(this.document)) {\n      var _this$delegate, _this$delegate$compos;\n\n      this.document = document;\n      this.refreshAttachments();\n      this.revision++;\n      return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$compos = _this$delegate.compositionDidChangeDocument) === null || _this$delegate$compos === void 0 ? void 0 : _this$delegate$compos.call(_this$delegate, document);\n    }\n  } // Snapshots\n\n\n  getSnapshot() {\n    return {\n      document: this.document,\n      selectedRange: this.getSelectedRange()\n    };\n  }\n\n  loadSnapshot(_ref) {\n    var _this$delegate2, _this$delegate2$compo, _this$delegate3, _this$delegate3$compo;\n\n    let {\n      document,\n      selectedRange\n    } = _ref;\n    (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$compo = _this$delegate2.compositionWillLoadSnapshot) === null || _this$delegate2$compo === void 0 ? void 0 : _this$delegate2$compo.call(_this$delegate2);\n    this.setDocument(document != null ? document : new Document());\n    this.setSelection(selectedRange != null ? selectedRange : [0, 0]);\n    return (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : (_this$delegate3$compo = _this$delegate3.compositionDidLoadSnapshot) === null || _this$delegate3$compo === void 0 ? void 0 : _this$delegate3$compo.call(_this$delegate3);\n  } // Responder protocol\n\n\n  insertText(text) {\n    let {\n      updatePosition\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      updatePosition: true\n    };\n    const selectedRange = this.getSelectedRange();\n    this.setDocument(this.document.insertTextAtRange(text, selectedRange));\n    const startPosition = selectedRange[0];\n    const endPosition = startPosition + text.getLength();\n\n    if (updatePosition) {\n      this.setSelection(endPosition);\n    }\n\n    return this.notifyDelegateOfInsertionAtRange([startPosition, endPosition]);\n  }\n\n  insertBlock() {\n    let block = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Block();\n    const document = new Document([block]);\n    return this.insertDocument(document);\n  }\n\n  insertDocument() {\n    let document = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Document();\n    const selectedRange = this.getSelectedRange();\n    this.setDocument(this.document.insertDocumentAtRange(document, selectedRange));\n    const startPosition = selectedRange[0];\n    const endPosition = startPosition + document.getLength();\n    this.setSelection(endPosition);\n    return this.notifyDelegateOfInsertionAtRange([startPosition, endPosition]);\n  }\n\n  insertString(string, options) {\n    const attributes = this.getCurrentTextAttributes();\n    const text = Text.textForStringWithAttributes(string, attributes);\n    return this.insertText(text, options);\n  }\n\n  insertBlockBreak() {\n    const selectedRange = this.getSelectedRange();\n    this.setDocument(this.document.insertBlockBreakAtRange(selectedRange));\n    const startPosition = selectedRange[0];\n    const endPosition = startPosition + 1;\n    this.setSelection(endPosition);\n    return this.notifyDelegateOfInsertionAtRange([startPosition, endPosition]);\n  }\n\n  insertLineBreak() {\n    const insertion = new LineBreakInsertion(this);\n\n    if (insertion.shouldDecreaseListLevel()) {\n      this.decreaseListLevel();\n      return this.setSelection(insertion.startPosition);\n    } else if (insertion.shouldPrependListItem()) {\n      const document = new Document([insertion.block.copyWithoutText()]);\n      return this.insertDocument(document);\n    } else if (insertion.shouldInsertBlockBreak()) {\n      return this.insertBlockBreak();\n    } else if (insertion.shouldRemoveLastBlockAttribute()) {\n      return this.removeLastBlockAttribute();\n    } else if (insertion.shouldBreakFormattedBlock()) {\n      return this.breakFormattedBlock(insertion);\n    } else {\n      return this.insertString(\"\\n\");\n    }\n  }\n\n  insertHTML(html) {\n    const document = HTMLParser.parse(html).getDocument();\n    const selectedRange = this.getSelectedRange();\n    this.setDocument(this.document.mergeDocumentAtRange(document, selectedRange));\n    const startPosition = selectedRange[0];\n    const endPosition = startPosition + document.getLength() - 1;\n    this.setSelection(endPosition);\n    return this.notifyDelegateOfInsertionAtRange([startPosition, endPosition]);\n  }\n\n  replaceHTML(html) {\n    const document = HTMLParser.parse(html).getDocument().copyUsingObjectsFromDocument(this.document);\n    const locationRange = this.getLocationRange({\n      strict: false\n    });\n    const selectedRange = this.document.rangeFromLocationRange(locationRange);\n    this.setDocument(document);\n    return this.setSelection(selectedRange);\n  }\n\n  insertFile(file) {\n    return this.insertFiles([file]);\n  }\n\n  insertFiles(files) {\n    const attachments = [];\n    Array.from(files).forEach(file => {\n      var _this$delegate4;\n\n      if ((_this$delegate4 = this.delegate) !== null && _this$delegate4 !== void 0 && _this$delegate4.compositionShouldAcceptFile(file)) {\n        const attachment = Attachment.attachmentForFile(file);\n        attachments.push(attachment);\n      }\n    });\n    return this.insertAttachments(attachments);\n  }\n\n  insertAttachment(attachment) {\n    return this.insertAttachments([attachment]);\n  }\n\n  insertAttachments(attachments) {\n    let text = new Text();\n    Array.from(attachments).forEach(attachment => {\n      var _config$attachments$t;\n\n      const type = attachment.getType();\n      const presentation = (_config$attachments$t = config.attachments[type]) === null || _config$attachments$t === void 0 ? void 0 : _config$attachments$t.presentation;\n      const attributes = this.getCurrentTextAttributes();\n\n      if (presentation) {\n        attributes.presentation = presentation;\n      }\n\n      const attachmentText = Text.textForAttachmentWithAttributes(attachment, attributes);\n      text = text.appendText(attachmentText);\n    });\n    return this.insertText(text);\n  }\n\n  shouldManageDeletingInDirection(direction) {\n    const locationRange = this.getLocationRange();\n\n    if (rangeIsCollapsed(locationRange)) {\n      if (direction === \"backward\" && locationRange[0].offset === 0) {\n        return true;\n      }\n\n      if (this.shouldManageMovingCursorInDirection(direction)) {\n        return true;\n      }\n    } else {\n      if (locationRange[0].index !== locationRange[1].index) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  deleteInDirection(direction) {\n    let {\n      length\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let attachment, deletingIntoPreviousBlock, selectionSpansBlocks;\n    const locationRange = this.getLocationRange();\n    let range = this.getSelectedRange();\n    const selectionIsCollapsed = rangeIsCollapsed(range);\n\n    if (selectionIsCollapsed) {\n      deletingIntoPreviousBlock = direction === \"backward\" && locationRange[0].offset === 0;\n    } else {\n      selectionSpansBlocks = locationRange[0].index !== locationRange[1].index;\n    }\n\n    if (deletingIntoPreviousBlock) {\n      if (this.canDecreaseBlockAttributeLevel()) {\n        const block = this.getBlock();\n\n        if (block.isListItem()) {\n          this.decreaseListLevel();\n        } else {\n          this.decreaseBlockAttributeLevel();\n        }\n\n        this.setSelection(range[0]);\n\n        if (block.isEmpty()) {\n          return false;\n        }\n      }\n    }\n\n    if (selectionIsCollapsed) {\n      range = this.getExpandedRangeInDirection(direction, {\n        length\n      });\n\n      if (direction === \"backward\") {\n        attachment = this.getAttachmentAtRange(range);\n      }\n    }\n\n    if (attachment) {\n      this.editAttachment(attachment);\n      return false;\n    } else {\n      this.setDocument(this.document.removeTextAtRange(range));\n      this.setSelection(range[0]);\n\n      if (deletingIntoPreviousBlock || selectionSpansBlocks) {\n        return false;\n      }\n    }\n  }\n\n  moveTextFromRange(range) {\n    const [position] = Array.from(this.getSelectedRange());\n    this.setDocument(this.document.moveTextFromRangeToPosition(range, position));\n    return this.setSelection(position);\n  }\n\n  removeAttachment(attachment) {\n    const range = this.document.getRangeOfAttachment(attachment);\n\n    if (range) {\n      this.stopEditingAttachment();\n      this.setDocument(this.document.removeTextAtRange(range));\n      return this.setSelection(range[0]);\n    }\n  }\n\n  removeLastBlockAttribute() {\n    const [startPosition, endPosition] = Array.from(this.getSelectedRange());\n    const block = this.document.getBlockAtPosition(endPosition);\n    this.removeCurrentAttribute(block.getLastAttribute());\n    return this.setSelection(startPosition);\n  }\n\n  insertPlaceholder() {\n    this.placeholderPosition = this.getPosition();\n    return this.insertString(PLACEHOLDER);\n  }\n\n  selectPlaceholder() {\n    if (this.placeholderPosition != null) {\n      this.setSelectedRange([this.placeholderPosition, this.placeholderPosition + PLACEHOLDER.length]);\n      return this.getSelectedRange();\n    }\n  }\n\n  forgetPlaceholder() {\n    this.placeholderPosition = null;\n  } // Current attributes\n\n\n  hasCurrentAttribute(attributeName) {\n    const value = this.currentAttributes[attributeName];\n    return value != null && value !== false;\n  }\n\n  toggleCurrentAttribute(attributeName) {\n    const value = !this.currentAttributes[attributeName];\n\n    if (value) {\n      return this.setCurrentAttribute(attributeName, value);\n    } else {\n      return this.removeCurrentAttribute(attributeName);\n    }\n  }\n\n  canSetCurrentAttribute(attributeName) {\n    if (getBlockConfig(attributeName)) {\n      return this.canSetCurrentBlockAttribute(attributeName);\n    } else {\n      return this.canSetCurrentTextAttribute(attributeName);\n    }\n  }\n\n  canSetCurrentTextAttribute(attributeName) {\n    const document = this.getSelectedDocument();\n    if (!document) return;\n\n    for (const attachment of Array.from(document.getAttachments())) {\n      if (!attachment.hasContent()) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  canSetCurrentBlockAttribute(attributeName) {\n    const block = this.getBlock();\n    if (!block) return;\n    return !block.isTerminalBlock();\n  }\n\n  setCurrentAttribute(attributeName, value) {\n    if (getBlockConfig(attributeName)) {\n      return this.setBlockAttribute(attributeName, value);\n    } else {\n      this.setTextAttribute(attributeName, value);\n      this.currentAttributes[attributeName] = value;\n      return this.notifyDelegateOfCurrentAttributesChange();\n    }\n  }\n\n  setTextAttribute(attributeName, value) {\n    const selectedRange = this.getSelectedRange();\n    if (!selectedRange) return;\n    const [startPosition, endPosition] = Array.from(selectedRange);\n\n    if (startPosition === endPosition) {\n      if (attributeName === \"href\") {\n        const text = Text.textForStringWithAttributes(value, {\n          href: value\n        });\n        return this.insertText(text);\n      }\n    } else {\n      return this.setDocument(this.document.addAttributeAtRange(attributeName, value, selectedRange));\n    }\n  }\n\n  setBlockAttribute(attributeName, value) {\n    const selectedRange = this.getSelectedRange();\n\n    if (this.canSetCurrentAttribute(attributeName)) {\n      this.setDocument(this.document.applyBlockAttributeAtRange(attributeName, value, selectedRange));\n      return this.setSelection(selectedRange);\n    }\n  }\n\n  removeCurrentAttribute(attributeName) {\n    if (getBlockConfig(attributeName)) {\n      this.removeBlockAttribute(attributeName);\n      return this.updateCurrentAttributes();\n    } else {\n      this.removeTextAttribute(attributeName);\n      delete this.currentAttributes[attributeName];\n      return this.notifyDelegateOfCurrentAttributesChange();\n    }\n  }\n\n  removeTextAttribute(attributeName) {\n    const selectedRange = this.getSelectedRange();\n    if (!selectedRange) return;\n    return this.setDocument(this.document.removeAttributeAtRange(attributeName, selectedRange));\n  }\n\n  removeBlockAttribute(attributeName) {\n    const selectedRange = this.getSelectedRange();\n    if (!selectedRange) return;\n    return this.setDocument(this.document.removeAttributeAtRange(attributeName, selectedRange));\n  }\n\n  canDecreaseNestingLevel() {\n    var _this$getBlock;\n\n    return ((_this$getBlock = this.getBlock()) === null || _this$getBlock === void 0 ? void 0 : _this$getBlock.getNestingLevel()) > 0;\n  }\n\n  canIncreaseNestingLevel() {\n    var _getBlockConfig;\n\n    const block = this.getBlock();\n    if (!block) return;\n\n    if ((_getBlockConfig = getBlockConfig(block.getLastNestableAttribute())) !== null && _getBlockConfig !== void 0 && _getBlockConfig.listAttribute) {\n      const previousBlock = this.getPreviousBlock();\n\n      if (previousBlock) {\n        return arrayStartsWith(previousBlock.getListItemAttributes(), block.getListItemAttributes());\n      }\n    } else {\n      return block.getNestingLevel() > 0;\n    }\n  }\n\n  decreaseNestingLevel() {\n    const block = this.getBlock();\n    if (!block) return;\n    return this.setDocument(this.document.replaceBlock(block, block.decreaseNestingLevel()));\n  }\n\n  increaseNestingLevel() {\n    const block = this.getBlock();\n    if (!block) return;\n    return this.setDocument(this.document.replaceBlock(block, block.increaseNestingLevel()));\n  }\n\n  canDecreaseBlockAttributeLevel() {\n    var _this$getBlock2;\n\n    return ((_this$getBlock2 = this.getBlock()) === null || _this$getBlock2 === void 0 ? void 0 : _this$getBlock2.getAttributeLevel()) > 0;\n  }\n\n  decreaseBlockAttributeLevel() {\n    var _this$getBlock3;\n\n    const attribute = (_this$getBlock3 = this.getBlock()) === null || _this$getBlock3 === void 0 ? void 0 : _this$getBlock3.getLastAttribute();\n\n    if (attribute) {\n      return this.removeCurrentAttribute(attribute);\n    }\n  }\n\n  decreaseListLevel() {\n    let [startPosition] = Array.from(this.getSelectedRange());\n    const {\n      index\n    } = this.document.locationFromPosition(startPosition);\n    let endIndex = index;\n    const attributeLevel = this.getBlock().getAttributeLevel();\n    let block = this.document.getBlockAtIndex(endIndex + 1);\n\n    while (block) {\n      if (!block.isListItem() || block.getAttributeLevel() <= attributeLevel) {\n        break;\n      }\n\n      endIndex++;\n      block = this.document.getBlockAtIndex(endIndex + 1);\n    }\n\n    startPosition = this.document.positionFromLocation({\n      index,\n      offset: 0\n    });\n    const endPosition = this.document.positionFromLocation({\n      index: endIndex,\n      offset: 0\n    });\n    return this.setDocument(this.document.removeLastListAttributeAtRange([startPosition, endPosition]));\n  }\n\n  updateCurrentAttributes() {\n    const selectedRange = this.getSelectedRange({\n      ignoreLock: true\n    });\n\n    if (selectedRange) {\n      const currentAttributes = this.document.getCommonAttributesAtRange(selectedRange);\n      Array.from(getAllAttributeNames()).forEach(attributeName => {\n        if (!currentAttributes[attributeName]) {\n          if (!this.canSetCurrentAttribute(attributeName)) {\n            currentAttributes[attributeName] = false;\n          }\n        }\n      });\n\n      if (!objectsAreEqual(currentAttributes, this.currentAttributes)) {\n        this.currentAttributes = currentAttributes;\n        return this.notifyDelegateOfCurrentAttributesChange();\n      }\n    }\n  }\n\n  getCurrentAttributes() {\n    return extend.call({}, this.currentAttributes);\n  }\n\n  getCurrentTextAttributes() {\n    const attributes = {};\n\n    for (const key in this.currentAttributes) {\n      const value = this.currentAttributes[key];\n\n      if (value !== false) {\n        if (getTextConfig(key)) {\n          attributes[key] = value;\n        }\n      }\n    }\n\n    return attributes;\n  } // Selection freezing\n\n\n  freezeSelection() {\n    return this.setCurrentAttribute(\"frozen\", true);\n  }\n\n  thawSelection() {\n    return this.removeCurrentAttribute(\"frozen\");\n  }\n\n  hasFrozenSelection() {\n    return this.hasCurrentAttribute(\"frozen\");\n  }\n\n  setSelection(selectedRange) {\n    var _this$delegate5;\n\n    const locationRange = this.document.locationRangeFromRange(selectedRange);\n    return (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : _this$delegate5.compositionDidRequestChangingSelectionToLocationRange(locationRange);\n  }\n\n  getSelectedRange() {\n    const locationRange = this.getLocationRange();\n\n    if (locationRange) {\n      return this.document.rangeFromLocationRange(locationRange);\n    }\n  }\n\n  setSelectedRange(selectedRange) {\n    const locationRange = this.document.locationRangeFromRange(selectedRange);\n    return this.getSelectionManager().setLocationRange(locationRange);\n  }\n\n  getPosition() {\n    const locationRange = this.getLocationRange();\n\n    if (locationRange) {\n      return this.document.positionFromLocation(locationRange[0]);\n    }\n  }\n\n  getLocationRange(options) {\n    if (this.targetLocationRange) {\n      return this.targetLocationRange;\n    } else {\n      return this.getSelectionManager().getLocationRange(options) || normalizeRange({\n        index: 0,\n        offset: 0\n      });\n    }\n  }\n\n  withTargetLocationRange(locationRange, fn) {\n    let result;\n    this.targetLocationRange = locationRange;\n\n    try {\n      result = fn();\n    } finally {\n      this.targetLocationRange = null;\n    }\n\n    return result;\n  }\n\n  withTargetRange(range, fn) {\n    const locationRange = this.document.locationRangeFromRange(range);\n    return this.withTargetLocationRange(locationRange, fn);\n  }\n\n  withTargetDOMRange(domRange, fn) {\n    const locationRange = this.createLocationRangeFromDOMRange(domRange, {\n      strict: false\n    });\n    return this.withTargetLocationRange(locationRange, fn);\n  }\n\n  getExpandedRangeInDirection(direction) {\n    let {\n      length\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let [startPosition, endPosition] = Array.from(this.getSelectedRange());\n\n    if (direction === \"backward\") {\n      if (length) {\n        startPosition -= length;\n      } else {\n        startPosition = this.translateUTF16PositionFromOffset(startPosition, -1);\n      }\n    } else {\n      if (length) {\n        endPosition += length;\n      } else {\n        endPosition = this.translateUTF16PositionFromOffset(endPosition, 1);\n      }\n    }\n\n    return normalizeRange([startPosition, endPosition]);\n  }\n\n  shouldManageMovingCursorInDirection(direction) {\n    if (this.editingAttachment) {\n      return true;\n    }\n\n    const range = this.getExpandedRangeInDirection(direction);\n    return this.getAttachmentAtRange(range) != null;\n  }\n\n  moveCursorInDirection(direction) {\n    let canEditAttachment, range;\n\n    if (this.editingAttachment) {\n      range = this.document.getRangeOfAttachment(this.editingAttachment);\n    } else {\n      const selectedRange = this.getSelectedRange();\n      range = this.getExpandedRangeInDirection(direction);\n      canEditAttachment = !rangesAreEqual(selectedRange, range);\n    }\n\n    if (direction === \"backward\") {\n      this.setSelectedRange(range[0]);\n    } else {\n      this.setSelectedRange(range[1]);\n    }\n\n    if (canEditAttachment) {\n      const attachment = this.getAttachmentAtRange(range);\n\n      if (attachment) {\n        return this.editAttachment(attachment);\n      }\n    }\n  }\n\n  expandSelectionInDirection(direction) {\n    let {\n      length\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const range = this.getExpandedRangeInDirection(direction, {\n      length\n    });\n    return this.setSelectedRange(range);\n  }\n\n  expandSelectionForEditing() {\n    if (this.hasCurrentAttribute(\"href\")) {\n      return this.expandSelectionAroundCommonAttribute(\"href\");\n    }\n  }\n\n  expandSelectionAroundCommonAttribute(attributeName) {\n    const position = this.getPosition();\n    const range = this.document.getRangeOfCommonAttributeAtPosition(attributeName, position);\n    return this.setSelectedRange(range);\n  }\n\n  selectionContainsAttachments() {\n    var _this$getSelectedAtta;\n\n    return ((_this$getSelectedAtta = this.getSelectedAttachments()) === null || _this$getSelectedAtta === void 0 ? void 0 : _this$getSelectedAtta.length) > 0;\n  }\n\n  selectionIsInCursorTarget() {\n    return this.editingAttachment || this.positionIsCursorTarget(this.getPosition());\n  }\n\n  positionIsCursorTarget(position) {\n    const location = this.document.locationFromPosition(position);\n\n    if (location) {\n      return this.locationIsCursorTarget(location);\n    }\n  }\n\n  positionIsBlockBreak(position) {\n    var _this$document$getPie;\n\n    return (_this$document$getPie = this.document.getPieceAtPosition(position)) === null || _this$document$getPie === void 0 ? void 0 : _this$document$getPie.isBlockBreak();\n  }\n\n  getSelectedDocument() {\n    const selectedRange = this.getSelectedRange();\n\n    if (selectedRange) {\n      return this.document.getDocumentAtRange(selectedRange);\n    }\n  }\n\n  getSelectedAttachments() {\n    var _this$getSelectedDocu;\n\n    return (_this$getSelectedDocu = this.getSelectedDocument()) === null || _this$getSelectedDocu === void 0 ? void 0 : _this$getSelectedDocu.getAttachments();\n  } // Attachments\n\n\n  getAttachments() {\n    return this.attachments.slice(0);\n  }\n\n  refreshAttachments() {\n    const attachments = this.document.getAttachments();\n    const {\n      added,\n      removed\n    } = summarizeArrayChange(this.attachments, attachments);\n    this.attachments = attachments;\n    Array.from(removed).forEach(attachment => {\n      var _this$delegate6, _this$delegate6$compo;\n\n      attachment.delegate = null;\n      (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : (_this$delegate6$compo = _this$delegate6.compositionDidRemoveAttachment) === null || _this$delegate6$compo === void 0 ? void 0 : _this$delegate6$compo.call(_this$delegate6, attachment);\n    });\n    return (() => {\n      const result = [];\n      Array.from(added).forEach(attachment => {\n        var _this$delegate7, _this$delegate7$compo;\n\n        attachment.delegate = this;\n        result.push((_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : (_this$delegate7$compo = _this$delegate7.compositionDidAddAttachment) === null || _this$delegate7$compo === void 0 ? void 0 : _this$delegate7$compo.call(_this$delegate7, attachment));\n      });\n      return result;\n    })();\n  } // Attachment delegate\n\n\n  attachmentDidChangeAttributes(attachment) {\n    var _this$delegate8, _this$delegate8$compo;\n\n    this.revision++;\n    return (_this$delegate8 = this.delegate) === null || _this$delegate8 === void 0 ? void 0 : (_this$delegate8$compo = _this$delegate8.compositionDidEditAttachment) === null || _this$delegate8$compo === void 0 ? void 0 : _this$delegate8$compo.call(_this$delegate8, attachment);\n  }\n\n  attachmentDidChangePreviewURL(attachment) {\n    var _this$delegate9, _this$delegate9$compo;\n\n    this.revision++;\n    return (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : (_this$delegate9$compo = _this$delegate9.compositionDidChangeAttachmentPreviewURL) === null || _this$delegate9$compo === void 0 ? void 0 : _this$delegate9$compo.call(_this$delegate9, attachment);\n  } // Attachment editing\n\n\n  editAttachment(attachment, options) {\n    var _this$delegate10, _this$delegate10$comp;\n\n    if (attachment === this.editingAttachment) return;\n    this.stopEditingAttachment();\n    this.editingAttachment = attachment;\n    return (_this$delegate10 = this.delegate) === null || _this$delegate10 === void 0 ? void 0 : (_this$delegate10$comp = _this$delegate10.compositionDidStartEditingAttachment) === null || _this$delegate10$comp === void 0 ? void 0 : _this$delegate10$comp.call(_this$delegate10, this.editingAttachment, options);\n  }\n\n  stopEditingAttachment() {\n    var _this$delegate11, _this$delegate11$comp;\n\n    if (!this.editingAttachment) return;\n    (_this$delegate11 = this.delegate) === null || _this$delegate11 === void 0 ? void 0 : (_this$delegate11$comp = _this$delegate11.compositionDidStopEditingAttachment) === null || _this$delegate11$comp === void 0 ? void 0 : _this$delegate11$comp.call(_this$delegate11, this.editingAttachment);\n    this.editingAttachment = null;\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    return this.setDocument(this.document.updateAttributesForAttachment(attributes, attachment));\n  }\n\n  removeAttributeForAttachment(attribute, attachment) {\n    return this.setDocument(this.document.removeAttributeForAttachment(attribute, attachment));\n  } // Private\n\n\n  breakFormattedBlock(insertion) {\n    let {\n      document\n    } = insertion;\n    const {\n      block\n    } = insertion;\n    let position = insertion.startPosition;\n    let range = [position - 1, position];\n\n    if (block.getBlockBreakPosition() === insertion.startLocation.offset) {\n      if (block.breaksOnReturn() && insertion.nextCharacter === \"\\n\") {\n        position += 1;\n      } else {\n        document = document.removeTextAtRange(range);\n      }\n\n      range = [position, position];\n    } else if (insertion.nextCharacter === \"\\n\") {\n      if (insertion.previousCharacter === \"\\n\") {\n        range = [position - 1, position + 1];\n      } else {\n        range = [position, position + 1];\n        position += 1;\n      }\n    } else if (insertion.startLocation.offset - 1 !== 0) {\n      position += 1;\n    }\n\n    const newDocument = new Document([block.removeLastAttribute().copyWithoutText()]);\n    this.setDocument(document.insertDocumentAtRange(newDocument, range));\n    return this.setSelection(position);\n  }\n\n  getPreviousBlock() {\n    const locationRange = this.getLocationRange();\n\n    if (locationRange) {\n      const {\n        index\n      } = locationRange[0];\n\n      if (index > 0) {\n        return this.document.getBlockAtIndex(index - 1);\n      }\n    }\n  }\n\n  getBlock() {\n    const locationRange = this.getLocationRange();\n\n    if (locationRange) {\n      return this.document.getBlockAtIndex(locationRange[0].index);\n    }\n  }\n\n  getAttachmentAtRange(range) {\n    const document = this.document.getDocumentAtRange(range);\n\n    if (document.toString() === \"\".concat(OBJECT_REPLACEMENT_CHARACTER, \"\\n\")) {\n      return document.getAttachments()[0];\n    }\n  }\n\n  notifyDelegateOfCurrentAttributesChange() {\n    var _this$delegate12, _this$delegate12$comp;\n\n    return (_this$delegate12 = this.delegate) === null || _this$delegate12 === void 0 ? void 0 : (_this$delegate12$comp = _this$delegate12.compositionDidChangeCurrentAttributes) === null || _this$delegate12$comp === void 0 ? void 0 : _this$delegate12$comp.call(_this$delegate12, this.currentAttributes);\n  }\n\n  notifyDelegateOfInsertionAtRange(range) {\n    var _this$delegate13, _this$delegate13$comp;\n\n    return (_this$delegate13 = this.delegate) === null || _this$delegate13 === void 0 ? void 0 : (_this$delegate13$comp = _this$delegate13.compositionDidPerformInsertionAtRange) === null || _this$delegate13$comp === void 0 ? void 0 : _this$delegate13$comp.call(_this$delegate13, range);\n  }\n\n  translateUTF16PositionFromOffset(position, offset) {\n    const utf16string = this.document.toUTF16String();\n    const utf16position = utf16string.offsetFromUCS2Offset(position);\n    return utf16string.offsetToUCS2Offset(utf16position + offset);\n  }\n\n}\nComposition.proxyMethod(\"getSelectionManager().getPointRange\");\nComposition.proxyMethod(\"getSelectionManager().setLocationRangeFromPointRange\");\nComposition.proxyMethod(\"getSelectionManager().createLocationRangeFromDOMRange\");\nComposition.proxyMethod(\"getSelectionManager().locationIsCursorTarget\");\nComposition.proxyMethod(\"getSelectionManager().selectionIsExpanded\");\nComposition.proxyMethod(\"delegate?.getSelectionManager\");\n\nclass UndoManager extends BasicObject {\n  constructor(composition) {\n    super(...arguments);\n    this.composition = composition;\n    this.undoEntries = [];\n    this.redoEntries = [];\n  }\n\n  recordUndoEntry(description) {\n    let {\n      context,\n      consolidatable\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const previousEntry = this.undoEntries.slice(-1)[0];\n\n    if (!consolidatable || !entryHasDescriptionAndContext(previousEntry, description, context)) {\n      const undoEntry = this.createEntry({\n        description,\n        context\n      });\n      this.undoEntries.push(undoEntry);\n      this.redoEntries = [];\n    }\n  }\n\n  undo() {\n    const undoEntry = this.undoEntries.pop();\n\n    if (undoEntry) {\n      const redoEntry = this.createEntry(undoEntry);\n      this.redoEntries.push(redoEntry);\n      return this.composition.loadSnapshot(undoEntry.snapshot);\n    }\n  }\n\n  redo() {\n    const redoEntry = this.redoEntries.pop();\n\n    if (redoEntry) {\n      const undoEntry = this.createEntry(redoEntry);\n      this.undoEntries.push(undoEntry);\n      return this.composition.loadSnapshot(redoEntry.snapshot);\n    }\n  }\n\n  canUndo() {\n    return this.undoEntries.length > 0;\n  }\n\n  canRedo() {\n    return this.redoEntries.length > 0;\n  } // Private\n\n\n  createEntry() {\n    let {\n      description,\n      context\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return {\n      description: description === null || description === void 0 ? void 0 : description.toString(),\n      context: JSON.stringify(context),\n      snapshot: this.composition.getSnapshot()\n    };\n  }\n\n}\n\nconst entryHasDescriptionAndContext = (entry, description, context) => (entry === null || entry === void 0 ? void 0 : entry.description) === (description === null || description === void 0 ? void 0 : description.toString()) && (entry === null || entry === void 0 ? void 0 : entry.context) === JSON.stringify(context);\n\nconst attachmentGalleryFilter = function (snapshot) {\n  const filter = new Filter(snapshot);\n  filter.perform();\n  return filter.getSnapshot();\n};\nconst BLOCK_ATTRIBUTE_NAME = \"attachmentGallery\";\nconst TEXT_ATTRIBUTE_NAME = \"presentation\";\nconst TEXT_ATTRIBUTE_VALUE = \"gallery\";\n\nclass Filter {\n  constructor(snapshot) {\n    this.document = snapshot.document;\n    this.selectedRange = snapshot.selectedRange;\n  }\n\n  perform() {\n    this.removeBlockAttribute();\n    return this.applyBlockAttribute();\n  }\n\n  getSnapshot() {\n    return {\n      document: this.document,\n      selectedRange: this.selectedRange\n    };\n  } // Private\n\n\n  removeBlockAttribute() {\n    return this.findRangesOfBlocks().map(range => this.document = this.document.removeAttributeAtRange(BLOCK_ATTRIBUTE_NAME, range));\n  }\n\n  applyBlockAttribute() {\n    let offset = 0;\n    this.findRangesOfPieces().forEach(range => {\n      if (range[1] - range[0] > 1) {\n        range[0] += offset;\n        range[1] += offset;\n\n        if (this.document.getCharacterAtPosition(range[1]) !== \"\\n\") {\n          this.document = this.document.insertBlockBreakAtRange(range[1]);\n\n          if (range[1] < this.selectedRange[1]) {\n            this.moveSelectedRangeForward();\n          }\n\n          range[1]++;\n          offset++;\n        }\n\n        if (range[0] !== 0) {\n          if (this.document.getCharacterAtPosition(range[0] - 1) !== \"\\n\") {\n            this.document = this.document.insertBlockBreakAtRange(range[0]);\n\n            if (range[0] < this.selectedRange[0]) {\n              this.moveSelectedRangeForward();\n            }\n\n            range[0]++;\n            offset++;\n          }\n        }\n\n        this.document = this.document.applyBlockAttributeAtRange(BLOCK_ATTRIBUTE_NAME, true, range);\n      }\n    });\n  }\n\n  findRangesOfBlocks() {\n    return this.document.findRangesForBlockAttribute(BLOCK_ATTRIBUTE_NAME);\n  }\n\n  findRangesOfPieces() {\n    return this.document.findRangesForTextAttribute(TEXT_ATTRIBUTE_NAME, {\n      withValue: TEXT_ATTRIBUTE_VALUE\n    });\n  }\n\n  moveSelectedRangeForward() {\n    this.selectedRange[0] += 1;\n    this.selectedRange[1] += 1;\n  }\n\n}\n\nconst DEFAULT_FILTERS = [attachmentGalleryFilter];\nclass Editor {\n  constructor(composition, selectionManager, element) {\n    this.insertFiles = this.insertFiles.bind(this);\n    this.composition = composition;\n    this.selectionManager = selectionManager;\n    this.element = element;\n    this.undoManager = new UndoManager(this.composition);\n    this.filters = DEFAULT_FILTERS.slice(0);\n  }\n\n  loadDocument(document) {\n    return this.loadSnapshot({\n      document,\n      selectedRange: [0, 0]\n    });\n  }\n\n  loadHTML() {\n    let html = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    const document = HTMLParser.parse(html, {\n      referenceElement: this.element\n    }).getDocument();\n    return this.loadDocument(document);\n  }\n\n  loadJSON(_ref) {\n    let {\n      document,\n      selectedRange\n    } = _ref;\n    document = Document.fromJSON(document);\n    return this.loadSnapshot({\n      document,\n      selectedRange\n    });\n  }\n\n  loadSnapshot(snapshot) {\n    this.undoManager = new UndoManager(this.composition);\n    return this.composition.loadSnapshot(snapshot);\n  }\n\n  getDocument() {\n    return this.composition.document;\n  }\n\n  getSelectedDocument() {\n    return this.composition.getSelectedDocument();\n  }\n\n  getSnapshot() {\n    return this.composition.getSnapshot();\n  }\n\n  toJSON() {\n    return this.getSnapshot();\n  } // Document manipulation\n\n\n  deleteInDirection(direction) {\n    return this.composition.deleteInDirection(direction);\n  }\n\n  insertAttachment(attachment) {\n    return this.composition.insertAttachment(attachment);\n  }\n\n  insertAttachments(attachments) {\n    return this.composition.insertAttachments(attachments);\n  }\n\n  insertDocument(document) {\n    return this.composition.insertDocument(document);\n  }\n\n  insertFile(file) {\n    return this.composition.insertFile(file);\n  }\n\n  insertFiles(files) {\n    return this.composition.insertFiles(files);\n  }\n\n  insertHTML(html) {\n    return this.composition.insertHTML(html);\n  }\n\n  insertString(string) {\n    return this.composition.insertString(string);\n  }\n\n  insertText(text) {\n    return this.composition.insertText(text);\n  }\n\n  insertLineBreak() {\n    return this.composition.insertLineBreak();\n  } // Selection\n\n\n  getSelectedRange() {\n    return this.composition.getSelectedRange();\n  }\n\n  getPosition() {\n    return this.composition.getPosition();\n  }\n\n  getClientRectAtPosition(position) {\n    const locationRange = this.getDocument().locationRangeFromRange([position, position + 1]);\n    return this.selectionManager.getClientRectAtLocationRange(locationRange);\n  }\n\n  expandSelectionInDirection(direction) {\n    return this.composition.expandSelectionInDirection(direction);\n  }\n\n  moveCursorInDirection(direction) {\n    return this.composition.moveCursorInDirection(direction);\n  }\n\n  setSelectedRange(selectedRange) {\n    return this.composition.setSelectedRange(selectedRange);\n  } // Attributes\n\n\n  activateAttribute(name) {\n    let value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    return this.composition.setCurrentAttribute(name, value);\n  }\n\n  attributeIsActive(name) {\n    return this.composition.hasCurrentAttribute(name);\n  }\n\n  canActivateAttribute(name) {\n    return this.composition.canSetCurrentAttribute(name);\n  }\n\n  deactivateAttribute(name) {\n    return this.composition.removeCurrentAttribute(name);\n  } // Nesting level\n\n\n  canDecreaseNestingLevel() {\n    return this.composition.canDecreaseNestingLevel();\n  }\n\n  canIncreaseNestingLevel() {\n    return this.composition.canIncreaseNestingLevel();\n  }\n\n  decreaseNestingLevel() {\n    if (this.canDecreaseNestingLevel()) {\n      return this.composition.decreaseNestingLevel();\n    }\n  }\n\n  increaseNestingLevel() {\n    if (this.canIncreaseNestingLevel()) {\n      return this.composition.increaseNestingLevel();\n    }\n  } // Undo/redo\n\n\n  canRedo() {\n    return this.undoManager.canRedo();\n  }\n\n  canUndo() {\n    return this.undoManager.canUndo();\n  }\n\n  recordUndoEntry(description) {\n    let {\n      context,\n      consolidatable\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this.undoManager.recordUndoEntry(description, {\n      context,\n      consolidatable\n    });\n  }\n\n  redo() {\n    if (this.canRedo()) {\n      return this.undoManager.redo();\n    }\n  }\n\n  undo() {\n    if (this.canUndo()) {\n      return this.undoManager.undo();\n    }\n  }\n\n}\n\n/* eslint-disable\n    no-var,\n    prefer-const,\n*/\nclass LocationMapper {\n  constructor(element) {\n    this.element = element;\n  }\n\n  findLocationFromContainerAndOffset(container, offset) {\n    let {\n      strict\n    } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      strict: true\n    };\n    let childIndex = 0;\n    let foundBlock = false;\n    const location = {\n      index: 0,\n      offset: 0\n    };\n    const attachmentElement = this.findAttachmentElementParentForNode(container);\n\n    if (attachmentElement) {\n      container = attachmentElement.parentNode;\n      offset = findChildIndexOfNode(attachmentElement);\n    }\n\n    const walker = walkTree(this.element, {\n      usingFilter: rejectAttachmentContents\n    });\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode;\n\n      if (node === container && nodeIsTextNode(container)) {\n        if (!nodeIsCursorTarget(node)) {\n          location.offset += offset;\n        }\n\n        break;\n      } else {\n        if (node.parentNode === container) {\n          if (childIndex++ === offset) {\n            break;\n          }\n        } else if (!elementContainsNode(container, node)) {\n          if (childIndex > 0) {\n            break;\n          }\n        }\n\n        if (nodeIsBlockStart(node, {\n          strict\n        })) {\n          if (foundBlock) {\n            location.index++;\n          }\n\n          location.offset = 0;\n          foundBlock = true;\n        } else {\n          location.offset += nodeLength(node);\n        }\n      }\n    }\n\n    return location;\n  }\n\n  findContainerAndOffsetFromLocation(location) {\n    let container, offset;\n\n    if (location.index === 0 && location.offset === 0) {\n      container = this.element;\n      offset = 0;\n\n      while (container.firstChild) {\n        container = container.firstChild;\n\n        if (nodeIsBlockContainer(container)) {\n          offset = 1;\n          break;\n        }\n      }\n\n      return [container, offset];\n    }\n\n    let [node, nodeOffset] = this.findNodeAndOffsetFromLocation(location);\n    if (!node) return;\n\n    if (nodeIsTextNode(node)) {\n      if (nodeLength(node) === 0) {\n        container = node.parentNode.parentNode;\n        offset = findChildIndexOfNode(node.parentNode);\n\n        if (nodeIsCursorTarget(node, {\n          name: \"right\"\n        })) {\n          offset++;\n        }\n      } else {\n        container = node;\n        offset = location.offset - nodeOffset;\n      }\n    } else {\n      container = node.parentNode;\n\n      if (!nodeIsBlockStart(node.previousSibling)) {\n        if (!nodeIsBlockContainer(container)) {\n          while (node === container.lastChild) {\n            node = container;\n            container = container.parentNode;\n\n            if (nodeIsBlockContainer(container)) {\n              break;\n            }\n          }\n        }\n      }\n\n      offset = findChildIndexOfNode(node);\n\n      if (location.offset !== 0) {\n        offset++;\n      }\n    }\n\n    return [container, offset];\n  }\n\n  findNodeAndOffsetFromLocation(location) {\n    let node, nodeOffset;\n    let offset = 0;\n\n    for (const currentNode of this.getSignificantNodesForIndex(location.index)) {\n      const length = nodeLength(currentNode);\n\n      if (location.offset <= offset + length) {\n        if (nodeIsTextNode(currentNode)) {\n          node = currentNode;\n          nodeOffset = offset;\n\n          if (location.offset === nodeOffset && nodeIsCursorTarget(node)) {\n            break;\n          }\n        } else if (!node) {\n          node = currentNode;\n          nodeOffset = offset;\n        }\n      }\n\n      offset += length;\n\n      if (offset > location.offset) {\n        break;\n      }\n    }\n\n    return [node, nodeOffset];\n  } // Private\n\n\n  findAttachmentElementParentForNode(node) {\n    while (node && node !== this.element) {\n      if (nodeIsAttachmentElement(node)) {\n        return node;\n      }\n\n      node = node.parentNode;\n    }\n  }\n\n  getSignificantNodesForIndex(index) {\n    const nodes = [];\n    const walker = walkTree(this.element, {\n      usingFilter: acceptSignificantNodes\n    });\n    let recordingNodes = false;\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode;\n\n      if (nodeIsBlockStartComment(node)) {\n        var blockIndex;\n\n        if (blockIndex != null) {\n          blockIndex++;\n        } else {\n          blockIndex = 0;\n        }\n\n        if (blockIndex === index) {\n          recordingNodes = true;\n        } else if (recordingNodes) {\n          break;\n        }\n      } else if (recordingNodes) {\n        nodes.push(node);\n      }\n    }\n\n    return nodes;\n  }\n\n}\n\nconst nodeLength = function (node) {\n  if (node.nodeType === Node.TEXT_NODE) {\n    if (nodeIsCursorTarget(node)) {\n      return 0;\n    } else {\n      const string = node.textContent;\n      return string.length;\n    }\n  } else if (tagName(node) === \"br\" || nodeIsAttachmentElement(node)) {\n    return 1;\n  } else {\n    return 0;\n  }\n};\n\nconst acceptSignificantNodes = function (node) {\n  if (rejectEmptyTextNodes(node) === NodeFilter.FILTER_ACCEPT) {\n    return rejectAttachmentContents(node);\n  } else {\n    return NodeFilter.FILTER_REJECT;\n  }\n};\n\nconst rejectEmptyTextNodes = function (node) {\n  if (nodeIsEmptyTextNode(node)) {\n    return NodeFilter.FILTER_REJECT;\n  } else {\n    return NodeFilter.FILTER_ACCEPT;\n  }\n};\n\nconst rejectAttachmentContents = function (node) {\n  if (nodeIsAttachmentElement(node.parentNode)) {\n    return NodeFilter.FILTER_REJECT;\n  } else {\n    return NodeFilter.FILTER_ACCEPT;\n  }\n};\n\n/* eslint-disable\n    id-length,\n    no-empty,\n*/\nclass PointMapper {\n  createDOMRangeFromPoint(_ref) {\n    let {\n      x,\n      y\n    } = _ref;\n    let domRange;\n\n    if (document.caretPositionFromPoint) {\n      const {\n        offsetNode,\n        offset\n      } = document.caretPositionFromPoint(x, y);\n      domRange = document.createRange();\n      domRange.setStart(offsetNode, offset);\n      return domRange;\n    } else if (document.caretRangeFromPoint) {\n      return document.caretRangeFromPoint(x, y);\n    } else if (document.body.createTextRange) {\n      const originalDOMRange = getDOMRange();\n\n      try {\n        // IE 11 throws \"Unspecified error\" when using moveToPoint\n        // during a drag-and-drop operation.\n        const textRange = document.body.createTextRange();\n        textRange.moveToPoint(x, y);\n        textRange.select();\n      } catch (error) {}\n\n      domRange = getDOMRange();\n      setDOMRange(originalDOMRange);\n      return domRange;\n    }\n  }\n\n  getClientRectsForDOMRange(domRange) {\n    const array = Array.from(domRange.getClientRects());\n    const start = array[0];\n    const end = array[array.length - 1];\n    return [start, end];\n  }\n\n}\n\n/* eslint-disable\n*/\nclass SelectionManager extends BasicObject {\n  constructor(element) {\n    super(...arguments);\n    this.didMouseDown = this.didMouseDown.bind(this);\n    this.selectionDidChange = this.selectionDidChange.bind(this);\n    this.element = element;\n    this.locationMapper = new LocationMapper(this.element);\n    this.pointMapper = new PointMapper();\n    this.lockCount = 0;\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      withCallback: this.didMouseDown\n    });\n  }\n\n  getLocationRange() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (options.strict === false) {\n      return this.createLocationRangeFromDOMRange(getDOMRange());\n    } else if (options.ignoreLock) {\n      return this.currentLocationRange;\n    } else if (this.lockedLocationRange) {\n      return this.lockedLocationRange;\n    } else {\n      return this.currentLocationRange;\n    }\n  }\n\n  setLocationRange(locationRange) {\n    if (this.lockedLocationRange) return;\n    locationRange = normalizeRange(locationRange);\n    const domRange = this.createDOMRangeFromLocationRange(locationRange);\n\n    if (domRange) {\n      setDOMRange(domRange);\n      this.updateCurrentLocationRange(locationRange);\n    }\n  }\n\n  setLocationRangeFromPointRange(pointRange) {\n    pointRange = normalizeRange(pointRange);\n    const startLocation = this.getLocationAtPoint(pointRange[0]);\n    const endLocation = this.getLocationAtPoint(pointRange[1]);\n    this.setLocationRange([startLocation, endLocation]);\n  }\n\n  getClientRectAtLocationRange(locationRange) {\n    const domRange = this.createDOMRangeFromLocationRange(locationRange);\n\n    if (domRange) {\n      return this.getClientRectsForDOMRange(domRange)[1];\n    }\n  }\n\n  locationIsCursorTarget(location) {\n    const node = Array.from(this.findNodeAndOffsetFromLocation(location))[0];\n    return nodeIsCursorTarget(node);\n  }\n\n  lock() {\n    if (this.lockCount++ === 0) {\n      this.updateCurrentLocationRange();\n      this.lockedLocationRange = this.getLocationRange();\n    }\n  }\n\n  unlock() {\n    if (--this.lockCount === 0) {\n      const {\n        lockedLocationRange\n      } = this;\n      this.lockedLocationRange = null;\n\n      if (lockedLocationRange != null) {\n        return this.setLocationRange(lockedLocationRange);\n      }\n    }\n  }\n\n  clearSelection() {\n    var _getDOMSelection;\n\n    return (_getDOMSelection = getDOMSelection()) === null || _getDOMSelection === void 0 ? void 0 : _getDOMSelection.removeAllRanges();\n  }\n\n  selectionIsCollapsed() {\n    var _getDOMRange;\n\n    return ((_getDOMRange = getDOMRange()) === null || _getDOMRange === void 0 ? void 0 : _getDOMRange.collapsed) === true;\n  }\n\n  selectionIsExpanded() {\n    return !this.selectionIsCollapsed();\n  }\n\n  createLocationRangeFromDOMRange(domRange, options) {\n    if (domRange == null || !this.domRangeWithinElement(domRange)) return;\n    const start = this.findLocationFromContainerAndOffset(domRange.startContainer, domRange.startOffset, options);\n    if (!start) return;\n    const end = domRange.collapsed ? undefined : this.findLocationFromContainerAndOffset(domRange.endContainer, domRange.endOffset, options);\n    return normalizeRange([start, end]);\n  }\n\n  didMouseDown() {\n    return this.pauseTemporarily();\n  }\n\n  pauseTemporarily() {\n    let resumeHandlers;\n    this.paused = true;\n\n    const resume = () => {\n      this.paused = false;\n      clearTimeout(resumeTimeout);\n      Array.from(resumeHandlers).forEach(handler => {\n        handler.destroy();\n      });\n\n      if (elementContainsNode(document, this.element)) {\n        return this.selectionDidChange();\n      }\n    };\n\n    const resumeTimeout = setTimeout(resume, 200);\n    resumeHandlers = [\"mousemove\", \"keydown\"].map(eventName => handleEvent(eventName, {\n      onElement: document,\n      withCallback: resume\n    }));\n  }\n\n  selectionDidChange() {\n    if (!this.paused && !innerElementIsActive(this.element)) {\n      return this.updateCurrentLocationRange();\n    }\n  }\n\n  updateCurrentLocationRange(locationRange) {\n    if (locationRange != null ? locationRange : locationRange = this.createLocationRangeFromDOMRange(getDOMRange())) {\n      if (!rangesAreEqual(locationRange, this.currentLocationRange)) {\n        var _this$delegate, _this$delegate$locati;\n\n        this.currentLocationRange = locationRange;\n        return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$locati = _this$delegate.locationRangeDidChange) === null || _this$delegate$locati === void 0 ? void 0 : _this$delegate$locati.call(_this$delegate, this.currentLocationRange.slice(0));\n      }\n    }\n  }\n\n  createDOMRangeFromLocationRange(locationRange) {\n    const rangeStart = this.findContainerAndOffsetFromLocation(locationRange[0]);\n    const rangeEnd = rangeIsCollapsed(locationRange) ? rangeStart : this.findContainerAndOffsetFromLocation(locationRange[1]) || rangeStart;\n\n    if (rangeStart != null && rangeEnd != null) {\n      const domRange = document.createRange();\n      domRange.setStart(...Array.from(rangeStart || []));\n      domRange.setEnd(...Array.from(rangeEnd || []));\n      return domRange;\n    }\n  }\n\n  getLocationAtPoint(point) {\n    const domRange = this.createDOMRangeFromPoint(point);\n\n    if (domRange) {\n      var _this$createLocationR;\n\n      return (_this$createLocationR = this.createLocationRangeFromDOMRange(domRange)) === null || _this$createLocationR === void 0 ? void 0 : _this$createLocationR[0];\n    }\n  }\n\n  domRangeWithinElement(domRange) {\n    if (domRange.collapsed) {\n      return elementContainsNode(this.element, domRange.startContainer);\n    } else {\n      return elementContainsNode(this.element, domRange.startContainer) && elementContainsNode(this.element, domRange.endContainer);\n    }\n  }\n\n}\nSelectionManager.proxyMethod(\"locationMapper.findLocationFromContainerAndOffset\");\nSelectionManager.proxyMethod(\"locationMapper.findContainerAndOffsetFromLocation\");\nSelectionManager.proxyMethod(\"locationMapper.findNodeAndOffsetFromLocation\");\nSelectionManager.proxyMethod(\"pointMapper.createDOMRangeFromPoint\");\nSelectionManager.proxyMethod(\"pointMapper.getClientRectsForDOMRange\");\n\nvar models = {\n  Attachment,\n  AttachmentManager,\n  AttachmentPiece,\n  Block,\n  Composition,\n  Cocument: Document,\n  Editor,\n  HTMLParser,\n  HTMLSanitizer,\n  LineBreakInsertion,\n  LocationMapper,\n  ManagedAttachment,\n  Piece,\n  PointMapper,\n  SelectionManager,\n  SplittableList,\n  StringPiece,\n  Text,\n  UndoManager\n};\n\nconst Trix = {\n  VERSION: version,\n  config\n};\nObject.assign(Trix, models);\nwindow.Trix = Trix;\n\nclass ObjectGroup {\n  static groupObjects() {\n    let ungroupedObjects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let {\n      depth,\n      asTree\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let group;\n\n    if (asTree) {\n      if (depth == null) {\n        depth = 0;\n      }\n    }\n\n    const objects = [];\n    Array.from(ungroupedObjects).forEach(object => {\n      var _object$canBeGrouped2;\n\n      if (group) {\n        var _object$canBeGrouped, _group$canBeGroupedWi, _group;\n\n        if ((_object$canBeGrouped = object.canBeGrouped) !== null && _object$canBeGrouped !== void 0 && _object$canBeGrouped.call(object, depth) && (_group$canBeGroupedWi = (_group = group[group.length - 1]).canBeGroupedWith) !== null && _group$canBeGroupedWi !== void 0 && _group$canBeGroupedWi.call(_group, object, depth)) {\n          group.push(object);\n          return;\n        } else {\n          objects.push(new this(group, {\n            depth,\n            asTree\n          }));\n          group = null;\n        }\n      }\n\n      if ((_object$canBeGrouped2 = object.canBeGrouped) !== null && _object$canBeGrouped2 !== void 0 && _object$canBeGrouped2.call(object, depth)) {\n        group = [object];\n      } else {\n        objects.push(object);\n      }\n    });\n\n    if (group) {\n      objects.push(new this(group, {\n        depth,\n        asTree\n      }));\n    }\n\n    return objects;\n  }\n\n  constructor() {\n    let objects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let {\n      depth,\n      asTree\n    } = arguments.length > 1 ? arguments[1] : undefined;\n    this.objects = objects;\n\n    if (asTree) {\n      this.depth = depth;\n      this.objects = this.constructor.groupObjects(this.objects, {\n        asTree,\n        depth: this.depth + 1\n      });\n    }\n  }\n\n  getObjects() {\n    return this.objects;\n  }\n\n  getDepth() {\n    return this.depth;\n  }\n\n  getCacheKey() {\n    const keys = [\"objectGroup\"];\n    Array.from(this.getObjects()).forEach(object => {\n      keys.push(object.getCacheKey());\n    });\n    return keys.join(\"/\");\n  }\n\n}\n\nclass ElementStore {\n  constructor(elements) {\n    this.reset(elements);\n  }\n\n  add(element) {\n    const key = getKey(element);\n    this.elements[key] = element;\n  }\n\n  remove(element) {\n    const key = getKey(element);\n    const value = this.elements[key];\n\n    if (value) {\n      delete this.elements[key];\n      return value;\n    }\n  }\n\n  reset() {\n    let elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    this.elements = {};\n    Array.from(elements).forEach(element => {\n      this.add(element);\n    });\n    return elements;\n  }\n\n}\n\nconst getKey = element => element.dataset.trixStoreKey;\n\nclass ObjectView extends BasicObject {\n  constructor(object) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(...arguments);\n    this.object = object;\n    this.options = options;\n    this.childViews = [];\n    this.rootView = this;\n  }\n\n  getNodes() {\n    if (!this.nodes) {\n      this.nodes = this.createNodes();\n    }\n\n    return this.nodes.map(node => node.cloneNode(true));\n  }\n\n  invalidate() {\n    var _this$parentView;\n\n    this.nodes = null;\n    this.childViews = [];\n    return (_this$parentView = this.parentView) === null || _this$parentView === void 0 ? void 0 : _this$parentView.invalidate();\n  }\n\n  invalidateViewForObject(object) {\n    var _this$findViewForObje;\n\n    return (_this$findViewForObje = this.findViewForObject(object)) === null || _this$findViewForObje === void 0 ? void 0 : _this$findViewForObje.invalidate();\n  }\n\n  findOrCreateCachedChildView(viewClass, object, options) {\n    let view = this.getCachedViewForObject(object);\n\n    if (view) {\n      this.recordChildView(view);\n    } else {\n      view = this.createChildView(...arguments);\n      this.cacheViewForObject(view, object);\n    }\n\n    return view;\n  }\n\n  createChildView(viewClass, object) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (object instanceof ObjectGroup) {\n      options.viewClass = viewClass;\n      viewClass = ObjectGroupView;\n    }\n\n    const view = new viewClass(object, options);\n    return this.recordChildView(view);\n  }\n\n  recordChildView(view) {\n    view.parentView = this;\n    view.rootView = this.rootView;\n    this.childViews.push(view);\n    return view;\n  }\n\n  getAllChildViews() {\n    let views = [];\n    this.childViews.forEach(childView => {\n      views.push(childView);\n      views = views.concat(childView.getAllChildViews());\n    });\n    return views;\n  }\n\n  findElement() {\n    return this.findElementForObject(this.object);\n  }\n\n  findElementForObject(object) {\n    const id = object === null || object === void 0 ? void 0 : object.id;\n\n    if (id) {\n      return this.rootView.element.querySelector(\"[data-trix-id='\".concat(id, \"']\"));\n    }\n  }\n\n  findViewForObject(object) {\n    for (const view of this.getAllChildViews()) {\n      if (view.object === object) {\n        return view;\n      }\n    }\n  }\n\n  getViewCache() {\n    if (this.rootView === this) {\n      if (this.isViewCachingEnabled()) {\n        if (!this.viewCache) {\n          this.viewCache = {};\n        }\n\n        return this.viewCache;\n      }\n    } else {\n      return this.rootView.getViewCache();\n    }\n  }\n\n  isViewCachingEnabled() {\n    return this.shouldCacheViews !== false;\n  }\n\n  enableViewCaching() {\n    this.shouldCacheViews = true;\n  }\n\n  disableViewCaching() {\n    this.shouldCacheViews = false;\n  }\n\n  getCachedViewForObject(object) {\n    var _this$getViewCache;\n\n    return (_this$getViewCache = this.getViewCache()) === null || _this$getViewCache === void 0 ? void 0 : _this$getViewCache[object.getCacheKey()];\n  }\n\n  cacheViewForObject(view, object) {\n    const cache = this.getViewCache();\n\n    if (cache) {\n      cache[object.getCacheKey()] = view;\n    }\n  }\n\n  garbageCollectCachedViews() {\n    const cache = this.getViewCache();\n\n    if (cache) {\n      const views = this.getAllChildViews().concat(this);\n      const objectKeys = views.map(view => view.object.getCacheKey());\n\n      for (const key in cache) {\n        if (!objectKeys.includes(key)) {\n          delete cache[key];\n        }\n      }\n    }\n  }\n\n}\nclass ObjectGroupView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.objectGroup = this.object;\n    this.viewClass = this.options.viewClass;\n    delete this.options.viewClass;\n  }\n\n  getChildViews() {\n    if (!this.childViews.length) {\n      Array.from(this.objectGroup.getObjects()).forEach(object => {\n        this.findOrCreateCachedChildView(this.viewClass, object, this.options);\n      });\n    }\n\n    return this.childViews;\n  }\n\n  createNodes() {\n    const element = this.createContainerElement();\n    this.getChildViews().forEach(view => {\n      Array.from(view.getNodes()).forEach(node => {\n        element.appendChild(node);\n      });\n    });\n    return [element];\n  }\n\n  createContainerElement() {\n    let depth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.objectGroup.getDepth();\n    return this.getChildViews()[0].createContainerElement(depth);\n  }\n\n}\n\nconst {\n  css: css$2\n} = config;\nclass AttachmentView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.attachment = this.object;\n    this.attachment.uploadProgressDelegate = this;\n    this.attachmentPiece = this.options.piece;\n  }\n\n  createContentNodes() {\n    return [];\n  }\n\n  createNodes() {\n    let innerElement;\n    const figure = innerElement = makeElement({\n      tagName: \"figure\",\n      className: this.getClassName(),\n      data: this.getData(),\n      editable: false\n    });\n    const href = this.getHref();\n\n    if (href) {\n      innerElement = makeElement({\n        tagName: \"a\",\n        editable: false,\n        attributes: {\n          href,\n          tabindex: -1\n        }\n      });\n      figure.appendChild(innerElement);\n    }\n\n    if (this.attachment.hasContent()) {\n      innerElement.innerHTML = this.attachment.getContent();\n    } else {\n      this.createContentNodes().forEach(node => {\n        innerElement.appendChild(node);\n      });\n    }\n\n    innerElement.appendChild(this.createCaptionElement());\n\n    if (this.attachment.isPending()) {\n      this.progressElement = makeElement({\n        tagName: \"progress\",\n        attributes: {\n          class: css$2.attachmentProgress,\n          value: this.attachment.getUploadProgress(),\n          max: 100\n        },\n        data: {\n          trixMutable: true,\n          trixStoreKey: [\"progressElement\", this.attachment.id].join(\"/\")\n        }\n      });\n      figure.appendChild(this.progressElement);\n    }\n\n    return [createCursorTarget(\"left\"), figure, createCursorTarget(\"right\")];\n  }\n\n  createCaptionElement() {\n    const figcaption = makeElement({\n      tagName: \"figcaption\",\n      className: css$2.attachmentCaption\n    });\n    const caption = this.attachmentPiece.getCaption();\n\n    if (caption) {\n      figcaption.classList.add(\"\".concat(css$2.attachmentCaption, \"--edited\"));\n      figcaption.textContent = caption;\n    } else {\n      let name, size;\n      const captionConfig = this.getCaptionConfig();\n\n      if (captionConfig.name) {\n        name = this.attachment.getFilename();\n      }\n\n      if (captionConfig.size) {\n        size = this.attachment.getFormattedFilesize();\n      }\n\n      if (name) {\n        const nameElement = makeElement({\n          tagName: \"span\",\n          className: css$2.attachmentName,\n          textContent: name\n        });\n        figcaption.appendChild(nameElement);\n      }\n\n      if (size) {\n        if (name) {\n          figcaption.appendChild(document.createTextNode(\" \"));\n        }\n\n        const sizeElement = makeElement({\n          tagName: \"span\",\n          className: css$2.attachmentSize,\n          textContent: size\n        });\n        figcaption.appendChild(sizeElement);\n      }\n    }\n\n    return figcaption;\n  }\n\n  getClassName() {\n    const names = [css$2.attachment, \"\".concat(css$2.attachment, \"--\").concat(this.attachment.getType())];\n    const extension = this.attachment.getExtension();\n\n    if (extension) {\n      names.push(\"\".concat(css$2.attachment, \"--\").concat(extension));\n    }\n\n    return names.join(\" \");\n  }\n\n  getData() {\n    const data = {\n      trixAttachment: JSON.stringify(this.attachment),\n      trixContentType: this.attachment.getContentType(),\n      trixId: this.attachment.id\n    };\n    const {\n      attributes\n    } = this.attachmentPiece;\n\n    if (!attributes.isEmpty()) {\n      data.trixAttributes = JSON.stringify(attributes);\n    }\n\n    if (this.attachment.isPending()) {\n      data.trixSerialize = false;\n    }\n\n    return data;\n  }\n\n  getHref() {\n    if (!htmlContainsTagName(this.attachment.getContent(), \"a\")) {\n      return this.attachment.getHref();\n    }\n  }\n\n  getCaptionConfig() {\n    var _config$attachments$t;\n\n    const type = this.attachment.getType();\n    const captionConfig = copyObject((_config$attachments$t = config.attachments[type]) === null || _config$attachments$t === void 0 ? void 0 : _config$attachments$t.caption);\n\n    if (type === \"file\") {\n      captionConfig.name = true;\n    }\n\n    return captionConfig;\n  }\n\n  findProgressElement() {\n    var _this$findElement;\n\n    return (_this$findElement = this.findElement()) === null || _this$findElement === void 0 ? void 0 : _this$findElement.querySelector(\"progress\");\n  } // Attachment delegate\n\n\n  attachmentDidChangeUploadProgress() {\n    const value = this.attachment.getUploadProgress();\n    const progressElement = this.findProgressElement();\n\n    if (progressElement) {\n      progressElement.value = value;\n    }\n  }\n\n}\n\nconst createCursorTarget = name => makeElement({\n  tagName: \"span\",\n  textContent: ZERO_WIDTH_SPACE,\n  data: {\n    trixCursorTarget: name,\n    trixSerialize: false\n  }\n});\n\nconst htmlContainsTagName = function (html, tagName) {\n  const div = makeElement(\"div\");\n  div.innerHTML = html || \"\";\n  return div.querySelector(tagName);\n};\n\nclass PreviewableAttachmentView extends AttachmentView {\n  constructor() {\n    super(...arguments);\n    this.attachment.previewDelegate = this;\n  }\n\n  createContentNodes() {\n    this.image = makeElement({\n      tagName: \"img\",\n      attributes: {\n        src: \"\"\n      },\n      data: {\n        trixMutable: true\n      }\n    });\n    this.refresh(this.image);\n    return [this.image];\n  }\n\n  createCaptionElement() {\n    const figcaption = super.createCaptionElement(...arguments);\n\n    if (!figcaption.textContent) {\n      figcaption.setAttribute(\"data-trix-placeholder\", config.lang.captionPlaceholder);\n    }\n\n    return figcaption;\n  }\n\n  refresh(image) {\n    if (!image) {\n      var _this$findElement;\n\n      image = (_this$findElement = this.findElement()) === null || _this$findElement === void 0 ? void 0 : _this$findElement.querySelector(\"img\");\n    }\n\n    if (image) {\n      return this.updateAttributesForImage(image);\n    }\n  }\n\n  updateAttributesForImage(image) {\n    const url = this.attachment.getURL();\n    const previewURL = this.attachment.getPreviewURL();\n    image.src = previewURL || url;\n\n    if (previewURL === url) {\n      image.removeAttribute(\"data-trix-serialized-attributes\");\n    } else {\n      const serializedAttributes = JSON.stringify({\n        src: url\n      });\n      image.setAttribute(\"data-trix-serialized-attributes\", serializedAttributes);\n    }\n\n    const width = this.attachment.getWidth();\n    const height = this.attachment.getHeight();\n\n    if (width != null) {\n      image.width = width;\n    }\n\n    if (height != null) {\n      image.height = height;\n    }\n\n    const storeKey = [\"imageElement\", this.attachment.id, image.src, image.width, image.height].join(\"/\");\n    image.dataset.trixStoreKey = storeKey;\n  } // Attachment delegate\n\n\n  attachmentDidChangeAttributes() {\n    this.refresh(this.image);\n    return this.refresh();\n  }\n\n}\n\n/* eslint-disable\n    no-useless-escape,\n    no-var,\n*/\nclass PieceView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.piece = this.object;\n    this.attributes = this.piece.getAttributes();\n    this.textConfig = this.options.textConfig;\n    this.context = this.options.context;\n\n    if (this.piece.attachment) {\n      this.attachment = this.piece.attachment;\n    } else {\n      this.string = this.piece.toString();\n    }\n  }\n\n  createNodes() {\n    let nodes = this.attachment ? this.createAttachmentNodes() : this.createStringNodes();\n    const element = this.createElement();\n\n    if (element) {\n      const innerElement = findInnerElement(element);\n      Array.from(nodes).forEach(node => {\n        innerElement.appendChild(node);\n      });\n      nodes = [element];\n    }\n\n    return nodes;\n  }\n\n  createAttachmentNodes() {\n    const constructor = this.attachment.isPreviewable() ? PreviewableAttachmentView : AttachmentView;\n    const view = this.createChildView(constructor, this.piece.attachment, {\n      piece: this.piece\n    });\n    return view.getNodes();\n  }\n\n  createStringNodes() {\n    var _this$textConfig;\n\n    if ((_this$textConfig = this.textConfig) !== null && _this$textConfig !== void 0 && _this$textConfig.plaintext) {\n      return [document.createTextNode(this.string)];\n    } else {\n      const nodes = [];\n      const iterable = this.string.split(\"\\n\");\n\n      for (let index = 0; index < iterable.length; index++) {\n        const substring = iterable[index];\n\n        if (index > 0) {\n          const element = makeElement(\"br\");\n          nodes.push(element);\n        }\n\n        if (substring.length) {\n          const node = document.createTextNode(this.preserveSpaces(substring));\n          nodes.push(node);\n        }\n      }\n\n      return nodes;\n    }\n  }\n\n  createElement() {\n    let element, key, value;\n    const styles = {};\n\n    for (key in this.attributes) {\n      value = this.attributes[key];\n      const config = getTextConfig(key);\n\n      if (config) {\n        if (config.tagName) {\n          var innerElement;\n          const pendingElement = makeElement(config.tagName);\n\n          if (innerElement) {\n            innerElement.appendChild(pendingElement);\n            innerElement = pendingElement;\n          } else {\n            element = innerElement = pendingElement;\n          }\n        }\n\n        if (config.styleProperty) {\n          styles[config.styleProperty] = value;\n        }\n\n        if (config.style) {\n          for (key in config.style) {\n            value = config.style[key];\n            styles[key] = value;\n          }\n        }\n      }\n    }\n\n    if (Object.keys(styles).length) {\n      if (!element) {\n        element = makeElement(\"span\");\n      }\n\n      for (key in styles) {\n        value = styles[key];\n        element.style[key] = value;\n      }\n    }\n\n    return element;\n  }\n\n  createContainerElement() {\n    for (const key in this.attributes) {\n      const value = this.attributes[key];\n      const config = getTextConfig(key);\n\n      if (config) {\n        if (config.groupTagName) {\n          const attributes = {};\n          attributes[key] = value;\n          return makeElement(config.groupTagName, attributes);\n        }\n      }\n    }\n  }\n\n  preserveSpaces(string) {\n    if (this.context.isLast) {\n      string = string.replace(/\\ $/, NON_BREAKING_SPACE);\n    }\n\n    string = string.replace(/(\\S)\\ {3}(\\S)/g, \"$1 \".concat(NON_BREAKING_SPACE, \" $2\")).replace(/\\ {2}/g, \"\".concat(NON_BREAKING_SPACE, \" \")).replace(/\\ {2}/g, \" \".concat(NON_BREAKING_SPACE));\n\n    if (this.context.isFirst || this.context.followsWhitespace) {\n      string = string.replace(/^\\ /, NON_BREAKING_SPACE);\n    }\n\n    return string;\n  }\n\n}\n\n/* eslint-disable\n    no-var,\n*/\nclass TextView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.text = this.object;\n    this.textConfig = this.options.textConfig;\n  }\n\n  createNodes() {\n    const nodes = [];\n    const pieces = ObjectGroup.groupObjects(this.getPieces());\n    const lastIndex = pieces.length - 1;\n\n    for (let index = 0; index < pieces.length; index++) {\n      const piece = pieces[index];\n      const context = {};\n\n      if (index === 0) {\n        context.isFirst = true;\n      }\n\n      if (index === lastIndex) {\n        context.isLast = true;\n      }\n\n      if (endsWithWhitespace(previousPiece)) {\n        context.followsWhitespace = true;\n      }\n\n      const view = this.findOrCreateCachedChildView(PieceView, piece, {\n        textConfig: this.textConfig,\n        context\n      });\n      nodes.push(...Array.from(view.getNodes() || []));\n      var previousPiece = piece;\n    }\n\n    return nodes;\n  }\n\n  getPieces() {\n    return Array.from(this.text.getPieces()).filter(piece => !piece.hasAttribute(\"blockBreak\"));\n  }\n\n}\n\nconst endsWithWhitespace = piece => /\\s$/.test(piece === null || piece === void 0 ? void 0 : piece.toString());\n\nconst {\n  css: css$1\n} = config;\nclass BlockView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.block = this.object;\n    this.attributes = this.block.getAttributes();\n  }\n\n  createNodes() {\n    const comment = document.createComment(\"block\");\n    const nodes = [comment];\n\n    if (this.block.isEmpty()) {\n      nodes.push(makeElement(\"br\"));\n    } else {\n      var _getBlockConfig;\n\n      const textConfig = (_getBlockConfig = getBlockConfig(this.block.getLastAttribute())) === null || _getBlockConfig === void 0 ? void 0 : _getBlockConfig.text;\n      const textView = this.findOrCreateCachedChildView(TextView, this.block.text, {\n        textConfig\n      });\n      nodes.push(...Array.from(textView.getNodes() || []));\n\n      if (this.shouldAddExtraNewlineElement()) {\n        nodes.push(makeElement(\"br\"));\n      }\n    }\n\n    if (this.attributes.length) {\n      return nodes;\n    } else {\n      let attributes;\n      const {\n        tagName\n      } = config.blockAttributes.default;\n\n      if (this.block.isRTL()) {\n        attributes = {\n          dir: \"rtl\"\n        };\n      }\n\n      const element = makeElement({\n        tagName,\n        attributes\n      });\n      nodes.forEach(node => element.appendChild(node));\n      return [element];\n    }\n  }\n\n  createContainerElement(depth) {\n    let attributes, className;\n    const attributeName = this.attributes[depth];\n    const {\n      tagName\n    } = getBlockConfig(attributeName);\n\n    if (depth === 0 && this.block.isRTL()) {\n      attributes = {\n        dir: \"rtl\"\n      };\n    }\n\n    if (attributeName === \"attachmentGallery\") {\n      const size = this.block.getBlockBreakPosition();\n      className = \"\".concat(css$1.attachmentGallery, \" \").concat(css$1.attachmentGallery, \"--\").concat(size);\n    }\n\n    return makeElement({\n      tagName,\n      className,\n      attributes\n    });\n  } // A single <br> at the end of a block element has no visual representation\n  // so add an extra one.\n\n\n  shouldAddExtraNewlineElement() {\n    return /\\n\\n$/.test(this.block.toString());\n  }\n\n}\n\nclass DocumentView extends ObjectView {\n  static render(document) {\n    const element = makeElement(\"div\");\n    const view = new this(document, {\n      element\n    });\n    view.render();\n    view.sync();\n    return element;\n  }\n\n  constructor() {\n    super(...arguments);\n    this.element = this.options.element;\n    this.elementStore = new ElementStore();\n    this.setDocument(this.object);\n  }\n\n  setDocument(document) {\n    if (!document.isEqualTo(this.document)) {\n      this.document = this.object = document;\n    }\n  }\n\n  render() {\n    this.childViews = [];\n    this.shadowElement = makeElement(\"div\");\n\n    if (!this.document.isEmpty()) {\n      const objects = ObjectGroup.groupObjects(this.document.getBlocks(), {\n        asTree: true\n      });\n      Array.from(objects).forEach(object => {\n        const view = this.findOrCreateCachedChildView(BlockView, object);\n        Array.from(view.getNodes()).map(node => this.shadowElement.appendChild(node));\n      });\n    }\n  }\n\n  isSynced() {\n    return elementsHaveEqualHTML(this.shadowElement, this.element);\n  }\n\n  sync() {\n    const fragment = this.createDocumentFragmentForSync();\n\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild);\n    }\n\n    this.element.appendChild(fragment);\n    return this.didSync();\n  } // Private\n\n\n  didSync() {\n    this.elementStore.reset(findStoredElements(this.element));\n    return defer(() => this.garbageCollectCachedViews());\n  }\n\n  createDocumentFragmentForSync() {\n    const fragment = document.createDocumentFragment();\n    Array.from(this.shadowElement.childNodes).forEach(node => {\n      fragment.appendChild(node.cloneNode(true));\n    });\n    Array.from(findStoredElements(fragment)).forEach(element => {\n      const storedElement = this.elementStore.remove(element);\n\n      if (storedElement) {\n        element.parentNode.replaceChild(storedElement, element);\n      }\n    });\n    return fragment;\n  }\n\n}\n\nconst findStoredElements = element => element.querySelectorAll(\"[data-trix-store-key]\");\n\nconst elementsHaveEqualHTML = (element, otherElement) => ignoreSpaces(element.innerHTML) === ignoreSpaces(otherElement.innerHTML);\n\nconst ignoreSpaces = html => html.replace(/&nbsp;/g, \" \");\n\n/* eslint-disable\n    no-empty,\n*/\nconst unserializableElementSelector = \"[data-trix-serialize=false]\";\nconst unserializableAttributeNames = [\"contenteditable\", \"data-trix-id\", \"data-trix-store-key\", \"data-trix-mutable\", \"data-trix-placeholder\", \"tabindex\"];\nconst serializedAttributesAttribute = \"data-trix-serialized-attributes\";\nconst serializedAttributesSelector = \"[\".concat(serializedAttributesAttribute, \"]\");\nconst blockCommentPattern = new RegExp(\"<!--block-->\", \"g\");\nconst serializers = {\n  \"application/json\": function (serializable) {\n    let document;\n\n    if (serializable instanceof Document) {\n      document = serializable;\n    } else if (serializable instanceof HTMLElement) {\n      document = HTMLParser.parse(serializable.innerHTML).getDocument();\n    } else {\n      throw new Error(\"unserializable object\");\n    }\n\n    return document.toSerializableDocument().toJSONString();\n  },\n  \"text/html\": function (serializable) {\n    let element;\n\n    if (serializable instanceof Document) {\n      element = DocumentView.render(serializable);\n    } else if (serializable instanceof HTMLElement) {\n      element = serializable.cloneNode(true);\n    } else {\n      throw new Error(\"unserializable object\");\n    } // Remove unserializable elements\n\n\n    Array.from(element.querySelectorAll(unserializableElementSelector)).forEach(el => {\n      removeNode(el);\n    }); // Remove unserializable attributes\n\n    unserializableAttributeNames.forEach(attribute => {\n      Array.from(element.querySelectorAll(\"[\".concat(attribute, \"]\"))).forEach(el => {\n        el.removeAttribute(attribute);\n      });\n    }); // Rewrite elements with serialized attribute overrides\n\n    Array.from(element.querySelectorAll(serializedAttributesSelector)).forEach(el => {\n      try {\n        const attributes = JSON.parse(el.getAttribute(serializedAttributesAttribute));\n        el.removeAttribute(serializedAttributesAttribute);\n\n        for (const name in attributes) {\n          const value = attributes[name];\n          el.setAttribute(name, value);\n        }\n      } catch (error) {}\n    });\n    return element.innerHTML.replace(blockCommentPattern, \"\");\n  }\n};\nconst deserializers = {\n  \"application/json\": function (string) {\n    return Document.fromJSONString(string);\n  },\n  \"text/html\": function (string) {\n    return HTMLParser.parse(string).getDocument();\n  }\n};\nconst serializeToContentType = function (serializable, contentType) {\n  const serializer = serializers[contentType];\n\n  if (serializer) {\n    return serializer(serializable);\n  } else {\n    throw new Error(\"unknown content type: \".concat(contentType));\n  }\n};\nconst deserializeFromContentType = function (string, contentType) {\n  const deserializer = deserializers[contentType];\n\n  if (deserializer) {\n    return deserializer(string);\n  } else {\n    throw new Error(\"unknown content type: \".concat(contentType));\n  }\n};\n\nconst mutableAttributeName = \"data-trix-mutable\";\nconst mutableSelector = \"[\".concat(mutableAttributeName, \"]\");\nconst options = {\n  attributes: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true\n};\nclass MutationObserver extends BasicObject {\n  constructor(element) {\n    super(element);\n    this.didMutate = this.didMutate.bind(this);\n    this.element = element;\n    this.observer = new window.MutationObserver(this.didMutate);\n    this.start();\n  }\n\n  start() {\n    this.reset();\n    return this.observer.observe(this.element, options);\n  }\n\n  stop() {\n    return this.observer.disconnect();\n  }\n\n  didMutate(mutations) {\n    this.mutations.push(...Array.from(this.findSignificantMutations(mutations) || []));\n\n    if (this.mutations.length) {\n      var _this$delegate, _this$delegate$elemen;\n\n      (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$elemen = _this$delegate.elementDidMutate) === null || _this$delegate$elemen === void 0 ? void 0 : _this$delegate$elemen.call(_this$delegate, this.getMutationSummary());\n      return this.reset();\n    }\n  } // Private\n\n\n  reset() {\n    this.mutations = [];\n  }\n\n  findSignificantMutations(mutations) {\n    return mutations.filter(mutation => {\n      return this.mutationIsSignificant(mutation);\n    });\n  }\n\n  mutationIsSignificant(mutation) {\n    if (this.nodeIsMutable(mutation.target)) {\n      return false;\n    }\n\n    for (const node of Array.from(this.nodesModifiedByMutation(mutation))) {\n      if (this.nodeIsSignificant(node)) return true;\n    }\n\n    return false;\n  }\n\n  nodeIsSignificant(node) {\n    return node !== this.element && !this.nodeIsMutable(node) && !nodeIsEmptyTextNode(node);\n  }\n\n  nodeIsMutable(node) {\n    return findClosestElementFromNode(node, {\n      matchingSelector: mutableSelector\n    });\n  }\n\n  nodesModifiedByMutation(mutation) {\n    const nodes = [];\n\n    switch (mutation.type) {\n      case \"attributes\":\n        if (mutation.attributeName !== mutableAttributeName) {\n          nodes.push(mutation.target);\n        }\n\n        break;\n\n      case \"characterData\":\n        // Changes to text nodes should consider the parent element\n        nodes.push(mutation.target.parentNode);\n        nodes.push(mutation.target);\n        break;\n\n      case \"childList\":\n        // Consider each added or removed node\n        nodes.push(...Array.from(mutation.addedNodes || []));\n        nodes.push(...Array.from(mutation.removedNodes || []));\n        break;\n    }\n\n    return nodes;\n  }\n\n  getMutationSummary() {\n    return this.getTextMutationSummary();\n  }\n\n  getTextMutationSummary() {\n    const {\n      additions,\n      deletions\n    } = this.getTextChangesFromCharacterData();\n    const textChanges = this.getTextChangesFromChildList();\n    Array.from(textChanges.additions).forEach(addition => {\n      if (!Array.from(additions).includes(addition)) {\n        additions.push(addition);\n      }\n    });\n    deletions.push(...Array.from(textChanges.deletions || []));\n    const summary = {};\n    const added = additions.join(\"\");\n\n    if (added) {\n      summary.textAdded = added;\n    }\n\n    const deleted = deletions.join(\"\");\n\n    if (deleted) {\n      summary.textDeleted = deleted;\n    }\n\n    return summary;\n  }\n\n  getMutationsByType(type) {\n    return Array.from(this.mutations).filter(mutation => mutation.type === type);\n  }\n\n  getTextChangesFromChildList() {\n    let textAdded, textRemoved;\n    const addedNodes = [];\n    const removedNodes = [];\n    Array.from(this.getMutationsByType(\"childList\")).forEach(mutation => {\n      addedNodes.push(...Array.from(mutation.addedNodes || []));\n      removedNodes.push(...Array.from(mutation.removedNodes || []));\n    });\n    const singleBlockCommentRemoved = addedNodes.length === 0 && removedNodes.length === 1 && nodeIsBlockStartComment(removedNodes[0]);\n\n    if (singleBlockCommentRemoved) {\n      textAdded = [];\n      textRemoved = [\"\\n\"];\n    } else {\n      textAdded = getTextForNodes(addedNodes);\n      textRemoved = getTextForNodes(removedNodes);\n    }\n\n    const additions = textAdded.filter((text, index) => text !== textRemoved[index]).map(normalizeSpaces);\n    const deletions = textRemoved.filter((text, index) => text !== textAdded[index]).map(normalizeSpaces);\n    return {\n      additions,\n      deletions\n    };\n  }\n\n  getTextChangesFromCharacterData() {\n    let added, removed;\n    const characterMutations = this.getMutationsByType(\"characterData\");\n\n    if (characterMutations.length) {\n      const startMutation = characterMutations[0],\n            endMutation = characterMutations[characterMutations.length - 1];\n      const oldString = normalizeSpaces(startMutation.oldValue);\n      const newString = normalizeSpaces(endMutation.target.data);\n      const summarized = summarizeStringChange(oldString, newString);\n      added = summarized.added;\n      removed = summarized.removed;\n    }\n\n    return {\n      additions: added ? [added] : [],\n      deletions: removed ? [removed] : []\n    };\n  }\n\n}\n\nconst getTextForNodes = function () {\n  let nodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const text = [];\n\n  for (const node of Array.from(nodes)) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        text.push(node.data);\n        break;\n\n      case Node.ELEMENT_NODE:\n        if (tagName(node) === \"br\") {\n          text.push(\"\\n\");\n        } else {\n          text.push(...Array.from(getTextForNodes(node.childNodes) || []));\n        }\n\n        break;\n    }\n  }\n\n  return text;\n};\n\nclass Controller extends BasicObject {}\n\n/* eslint-disable\n    no-empty,\n*/\nclass FileVerificationOperation extends Operation {\n  constructor(file) {\n    super(...arguments);\n    this.file = file;\n  }\n\n  perform(callback) {\n    const reader = new FileReader();\n\n    reader.onerror = () => callback(false);\n\n    reader.onload = () => {\n      reader.onerror = null;\n\n      try {\n        reader.abort();\n      } catch (error) {}\n\n      return callback(true, this.file);\n    };\n\n    return reader.readAsArrayBuffer(this.file);\n  }\n\n}\n\nclass InputController extends BasicObject {\n  constructor(element) {\n    super(...arguments);\n    this.element = element;\n    this.mutationObserver = new MutationObserver(this.element);\n    this.mutationObserver.delegate = this;\n\n    for (const eventName in this.constructor.events) {\n      handleEvent(eventName, {\n        onElement: this.element,\n        withCallback: this.handlerFor(eventName)\n      });\n    }\n  }\n\n  elementDidMutate(mutationSummary) {}\n\n  editorWillSyncDocumentView() {\n    return this.mutationObserver.stop();\n  }\n\n  editorDidSyncDocumentView() {\n    return this.mutationObserver.start();\n  }\n\n  requestRender() {\n    var _this$delegate, _this$delegate$inputC;\n\n    return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$inputC = _this$delegate.inputControllerDidRequestRender) === null || _this$delegate$inputC === void 0 ? void 0 : _this$delegate$inputC.call(_this$delegate);\n  }\n\n  requestReparse() {\n    var _this$delegate2, _this$delegate2$input;\n\n    (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$input = _this$delegate2.inputControllerDidRequestReparse) === null || _this$delegate2$input === void 0 ? void 0 : _this$delegate2$input.call(_this$delegate2);\n    return this.requestRender();\n  }\n\n  attachFiles(files) {\n    const operations = Array.from(files).map(file => new FileVerificationOperation(file));\n    return Promise.all(operations).then(files => {\n      this.handleInput(function () {\n        var _this$delegate3, _this$responder;\n\n        (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : _this$delegate3.inputControllerWillAttachFiles();\n        (_this$responder = this.responder) === null || _this$responder === void 0 ? void 0 : _this$responder.insertFiles(files);\n        return this.requestRender();\n      });\n    });\n  } // Private\n\n\n  handlerFor(eventName) {\n    return event => {\n      if (!event.defaultPrevented) {\n        this.handleInput(() => {\n          if (!innerElementIsActive(this.element)) {\n            this.eventName = eventName;\n            this.constructor.events[eventName].call(this, event);\n          }\n        });\n      }\n    };\n  }\n\n  handleInput(callback) {\n    try {\n      var _this$delegate4;\n\n      (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.inputControllerWillHandleInput();\n      callback.call(this);\n    } finally {\n      var _this$delegate5;\n\n      (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : _this$delegate5.inputControllerDidHandleInput();\n    }\n  }\n\n  createLinkHTML(href, text) {\n    const link = document.createElement(\"a\");\n    link.href = href;\n    link.textContent = text ? text : href;\n    return link.outerHTML;\n  }\n\n}\n\n_defineProperty(InputController, \"events\", {});\n\nvar _$codePointAt, _;\nconst {\n  browser,\n  keyNames: keyNames$1\n} = config;\nlet pastedFileCount = 0;\nclass Level0InputController extends InputController {\n  constructor() {\n    super(...arguments);\n    this.resetInputSummary();\n  }\n\n  setInputSummary() {\n    let summary = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.inputSummary.eventName = this.eventName;\n\n    for (const key in summary) {\n      const value = summary[key];\n      this.inputSummary[key] = value;\n    }\n\n    return this.inputSummary;\n  }\n\n  resetInputSummary() {\n    this.inputSummary = {};\n  }\n\n  reset() {\n    this.resetInputSummary();\n    return selectionChangeObserver.reset();\n  } // Mutation observer delegate\n\n\n  elementDidMutate(mutationSummary) {\n    if (this.isComposing()) {\n      var _this$delegate, _this$delegate$inputC;\n\n      return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$inputC = _this$delegate.inputControllerDidAllowUnhandledInput) === null || _this$delegate$inputC === void 0 ? void 0 : _this$delegate$inputC.call(_this$delegate);\n    } else {\n      return this.handleInput(function () {\n        if (this.mutationIsSignificant(mutationSummary)) {\n          if (this.mutationIsExpected(mutationSummary)) {\n            this.requestRender();\n          } else {\n            this.requestReparse();\n          }\n        }\n\n        return this.reset();\n      });\n    }\n  }\n\n  mutationIsExpected(_ref) {\n    let {\n      textAdded,\n      textDeleted\n    } = _ref;\n\n    if (this.inputSummary.preferDocument) {\n      return true;\n    }\n\n    const mutationAdditionMatchesSummary = textAdded != null ? textAdded === this.inputSummary.textAdded : !this.inputSummary.textAdded;\n    const mutationDeletionMatchesSummary = textDeleted != null ? this.inputSummary.didDelete : !this.inputSummary.didDelete;\n    const unexpectedNewlineAddition = [\"\\n\", \" \\n\"].includes(textAdded) && !mutationAdditionMatchesSummary;\n    const unexpectedNewlineDeletion = textDeleted === \"\\n\" && !mutationDeletionMatchesSummary;\n    const singleUnexpectedNewline = unexpectedNewlineAddition && !unexpectedNewlineDeletion || unexpectedNewlineDeletion && !unexpectedNewlineAddition;\n\n    if (singleUnexpectedNewline) {\n      const range = this.getSelectedRange();\n\n      if (range) {\n        var _this$responder;\n\n        const offset = unexpectedNewlineAddition ? textAdded.replace(/\\n$/, \"\").length || -1 : (textAdded === null || textAdded === void 0 ? void 0 : textAdded.length) || 1;\n\n        if ((_this$responder = this.responder) !== null && _this$responder !== void 0 && _this$responder.positionIsBlockBreak(range[1] + offset)) {\n          return true;\n        }\n      }\n    }\n\n    return mutationAdditionMatchesSummary && mutationDeletionMatchesSummary;\n  }\n\n  mutationIsSignificant(mutationSummary) {\n    var _this$compositionInpu;\n\n    const textChanged = Object.keys(mutationSummary).length > 0;\n    const composedEmptyString = ((_this$compositionInpu = this.compositionInput) === null || _this$compositionInpu === void 0 ? void 0 : _this$compositionInpu.getEndData()) === \"\";\n    return textChanged || !composedEmptyString;\n  } // Private\n\n\n  getCompositionInput() {\n    if (this.isComposing()) {\n      return this.compositionInput;\n    } else {\n      this.compositionInput = new CompositionInput(this);\n    }\n  }\n\n  isComposing() {\n    return this.compositionInput && !this.compositionInput.isEnded();\n  }\n\n  deleteInDirection(direction, event) {\n    var _this$responder2;\n\n    if (((_this$responder2 = this.responder) === null || _this$responder2 === void 0 ? void 0 : _this$responder2.deleteInDirection(direction)) === false) {\n      if (event) {\n        event.preventDefault();\n        return this.requestRender();\n      }\n    } else {\n      return this.setInputSummary({\n        didDelete: true\n      });\n    }\n  }\n\n  serializeSelectionToDataTransfer(dataTransfer) {\n    var _this$responder3;\n\n    if (!dataTransferIsWritable(dataTransfer)) return;\n    const document = (_this$responder3 = this.responder) === null || _this$responder3 === void 0 ? void 0 : _this$responder3.getSelectedDocument().toSerializableDocument();\n    dataTransfer.setData(\"application/x-trix-document\", JSON.stringify(document));\n    dataTransfer.setData(\"text/html\", DocumentView.render(document).innerHTML);\n    dataTransfer.setData(\"text/plain\", document.toString().replace(/\\n$/, \"\"));\n    return true;\n  }\n\n  canAcceptDataTransfer(dataTransfer) {\n    const types = {};\n    Array.from((dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.types) || []).forEach(type => {\n      types[type] = true;\n    });\n    return types.Files || types[\"application/x-trix-document\"] || types[\"text/html\"] || types[\"text/plain\"];\n  }\n\n  getPastedHTMLUsingHiddenElement(callback) {\n    const selectedRange = this.getSelectedRange();\n    const style = {\n      position: \"absolute\",\n      left: \"\".concat(window.pageXOffset, \"px\"),\n      top: \"\".concat(window.pageYOffset, \"px\"),\n      opacity: 0\n    };\n    const element = makeElement({\n      style,\n      tagName: \"div\",\n      editable: true\n    });\n    document.body.appendChild(element);\n    element.focus();\n    return requestAnimationFrame(() => {\n      const html = element.innerHTML;\n      removeNode(element);\n      this.setSelectedRange(selectedRange);\n      return callback(html);\n    });\n  }\n\n}\n\n_defineProperty(Level0InputController, \"events\", {\n  keydown(event) {\n    if (!this.isComposing()) {\n      this.resetInputSummary();\n    }\n\n    this.inputSummary.didInput = true;\n    const keyName = keyNames$1[event.keyCode];\n\n    if (keyName) {\n      var _context2;\n\n      let context = this.keys;\n      [\"ctrl\", \"alt\", \"shift\", \"meta\"].forEach(modifier => {\n        if (event[\"\".concat(modifier, \"Key\")]) {\n          var _context;\n\n          if (modifier === \"ctrl\") {\n            modifier = \"control\";\n          }\n\n          context = (_context = context) === null || _context === void 0 ? void 0 : _context[modifier];\n        }\n      });\n\n      if (((_context2 = context) === null || _context2 === void 0 ? void 0 : _context2[keyName]) != null) {\n        this.setInputSummary({\n          keyName\n        });\n        selectionChangeObserver.reset();\n        context[keyName].call(this, event);\n      }\n    }\n\n    if (keyEventIsKeyboardCommand(event)) {\n      const character = String.fromCharCode(event.keyCode).toLowerCase();\n\n      if (character) {\n        var _this$delegate3;\n\n        const keys = [\"alt\", \"shift\"].map(modifier => {\n          if (event[\"\".concat(modifier, \"Key\")]) {\n            return modifier;\n          }\n        }).filter(key => key);\n        keys.push(character);\n\n        if ((_this$delegate3 = this.delegate) !== null && _this$delegate3 !== void 0 && _this$delegate3.inputControllerDidReceiveKeyboardCommand(keys)) {\n          event.preventDefault();\n        }\n      }\n    }\n  },\n\n  keypress(event) {\n    if (this.inputSummary.eventName != null) return;\n    if (event.metaKey) return;\n    if (event.ctrlKey && !event.altKey) return;\n    const string = stringFromKeyEvent(event);\n\n    if (string) {\n      var _this$delegate4, _this$responder9;\n\n      (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.inputControllerWillPerformTyping();\n      (_this$responder9 = this.responder) === null || _this$responder9 === void 0 ? void 0 : _this$responder9.insertString(string);\n      return this.setInputSummary({\n        textAdded: string,\n        didDelete: this.selectionIsExpanded()\n      });\n    }\n  },\n\n  textInput(event) {\n    // Handle autocapitalization\n    const {\n      data\n    } = event;\n    const {\n      textAdded\n    } = this.inputSummary;\n\n    if (textAdded && textAdded !== data && textAdded.toUpperCase() === data) {\n      var _this$responder10;\n\n      const range = this.getSelectedRange();\n      this.setSelectedRange([range[0], range[1] + textAdded.length]);\n      (_this$responder10 = this.responder) === null || _this$responder10 === void 0 ? void 0 : _this$responder10.insertString(data);\n      this.setInputSummary({\n        textAdded: data\n      });\n      return this.setSelectedRange(range);\n    }\n  },\n\n  dragenter(event) {\n    event.preventDefault();\n  },\n\n  dragstart(event) {\n    var _this$delegate5, _this$delegate5$input;\n\n    this.serializeSelectionToDataTransfer(event.dataTransfer);\n    this.draggedRange = this.getSelectedRange();\n    return (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : (_this$delegate5$input = _this$delegate5.inputControllerDidStartDrag) === null || _this$delegate5$input === void 0 ? void 0 : _this$delegate5$input.call(_this$delegate5);\n  },\n\n  dragover(event) {\n    if (this.draggedRange || this.canAcceptDataTransfer(event.dataTransfer)) {\n      event.preventDefault();\n      const draggingPoint = {\n        x: event.clientX,\n        y: event.clientY\n      };\n\n      if (!objectsAreEqual(draggingPoint, this.draggingPoint)) {\n        var _this$delegate6, _this$delegate6$input;\n\n        this.draggingPoint = draggingPoint;\n        return (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : (_this$delegate6$input = _this$delegate6.inputControllerDidReceiveDragOverPoint) === null || _this$delegate6$input === void 0 ? void 0 : _this$delegate6$input.call(_this$delegate6, this.draggingPoint);\n      }\n    }\n  },\n\n  dragend(event) {\n    var _this$delegate7, _this$delegate7$input;\n\n    (_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : (_this$delegate7$input = _this$delegate7.inputControllerDidCancelDrag) === null || _this$delegate7$input === void 0 ? void 0 : _this$delegate7$input.call(_this$delegate7);\n    this.draggedRange = null;\n    this.draggingPoint = null;\n  },\n\n  drop(event) {\n    var _event$dataTransfer, _this$responder11;\n\n    event.preventDefault();\n    const files = (_event$dataTransfer = event.dataTransfer) === null || _event$dataTransfer === void 0 ? void 0 : _event$dataTransfer.files;\n    const documentJSON = event.dataTransfer.getData(\"application/x-trix-document\");\n    const point = {\n      x: event.clientX,\n      y: event.clientY\n    };\n    (_this$responder11 = this.responder) === null || _this$responder11 === void 0 ? void 0 : _this$responder11.setLocationRangeFromPointRange(point);\n\n    if (files !== null && files !== void 0 && files.length) {\n      this.attachFiles(files);\n    } else if (this.draggedRange) {\n      var _this$delegate8, _this$responder12;\n\n      (_this$delegate8 = this.delegate) === null || _this$delegate8 === void 0 ? void 0 : _this$delegate8.inputControllerWillMoveText();\n      (_this$responder12 = this.responder) === null || _this$responder12 === void 0 ? void 0 : _this$responder12.moveTextFromRange(this.draggedRange);\n      this.draggedRange = null;\n      this.requestRender();\n    } else if (documentJSON) {\n      var _this$responder13;\n\n      const document = Document.fromJSONString(documentJSON);\n      (_this$responder13 = this.responder) === null || _this$responder13 === void 0 ? void 0 : _this$responder13.insertDocument(document);\n      this.requestRender();\n    }\n\n    this.draggedRange = null;\n    this.draggingPoint = null;\n  },\n\n  cut(event) {\n    var _this$responder14;\n\n    if ((_this$responder14 = this.responder) !== null && _this$responder14 !== void 0 && _this$responder14.selectionIsExpanded()) {\n      var _this$delegate9;\n\n      if (this.serializeSelectionToDataTransfer(event.clipboardData)) {\n        event.preventDefault();\n      }\n\n      (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : _this$delegate9.inputControllerWillCutText();\n      this.deleteInDirection(\"backward\");\n\n      if (event.defaultPrevented) {\n        return this.requestRender();\n      }\n    }\n  },\n\n  copy(event) {\n    var _this$responder15;\n\n    if ((_this$responder15 = this.responder) !== null && _this$responder15 !== void 0 && _this$responder15.selectionIsExpanded()) {\n      if (this.serializeSelectionToDataTransfer(event.clipboardData)) {\n        event.preventDefault();\n      }\n    }\n  },\n\n  paste(event) {\n    const clipboard = event.clipboardData || event.testClipboardData;\n    const paste = {\n      clipboard\n    };\n\n    if (!clipboard || pasteEventIsCrippledSafariHTMLPaste(event)) {\n      this.getPastedHTMLUsingHiddenElement(html => {\n        var _this$delegate10, _this$responder16, _this$delegate11;\n\n        paste.type = \"text/html\";\n        paste.html = html;\n        (_this$delegate10 = this.delegate) === null || _this$delegate10 === void 0 ? void 0 : _this$delegate10.inputControllerWillPaste(paste);\n        (_this$responder16 = this.responder) === null || _this$responder16 === void 0 ? void 0 : _this$responder16.insertHTML(paste.html);\n        this.requestRender();\n        return (_this$delegate11 = this.delegate) === null || _this$delegate11 === void 0 ? void 0 : _this$delegate11.inputControllerDidPaste(paste);\n      });\n      return;\n    }\n\n    const href = clipboard.getData(\"URL\");\n    const html = clipboard.getData(\"text/html\");\n    const name = clipboard.getData(\"public.url-name\");\n\n    if (href) {\n      var _this$delegate12, _this$responder17, _this$delegate13;\n\n      let string;\n      paste.type = \"text/html\";\n\n      if (name) {\n        string = squishBreakableWhitespace(name).trim();\n      } else {\n        string = href;\n      }\n\n      paste.html = this.createLinkHTML(href, string);\n      (_this$delegate12 = this.delegate) === null || _this$delegate12 === void 0 ? void 0 : _this$delegate12.inputControllerWillPaste(paste);\n      this.setInputSummary({\n        textAdded: string,\n        didDelete: this.selectionIsExpanded()\n      });\n      (_this$responder17 = this.responder) === null || _this$responder17 === void 0 ? void 0 : _this$responder17.insertHTML(paste.html);\n      this.requestRender();\n      (_this$delegate13 = this.delegate) === null || _this$delegate13 === void 0 ? void 0 : _this$delegate13.inputControllerDidPaste(paste);\n    } else if (dataTransferIsPlainText(clipboard)) {\n      var _this$delegate14, _this$responder18, _this$delegate15;\n\n      paste.type = \"text/plain\";\n      paste.string = clipboard.getData(\"text/plain\");\n      (_this$delegate14 = this.delegate) === null || _this$delegate14 === void 0 ? void 0 : _this$delegate14.inputControllerWillPaste(paste);\n      this.setInputSummary({\n        textAdded: paste.string,\n        didDelete: this.selectionIsExpanded()\n      });\n      (_this$responder18 = this.responder) === null || _this$responder18 === void 0 ? void 0 : _this$responder18.insertString(paste.string);\n      this.requestRender();\n      (_this$delegate15 = this.delegate) === null || _this$delegate15 === void 0 ? void 0 : _this$delegate15.inputControllerDidPaste(paste);\n    } else if (html) {\n      var _this$delegate16, _this$responder19, _this$delegate17;\n\n      paste.type = \"text/html\";\n      paste.html = html;\n      (_this$delegate16 = this.delegate) === null || _this$delegate16 === void 0 ? void 0 : _this$delegate16.inputControllerWillPaste(paste);\n      (_this$responder19 = this.responder) === null || _this$responder19 === void 0 ? void 0 : _this$responder19.insertHTML(paste.html);\n      this.requestRender();\n      (_this$delegate17 = this.delegate) === null || _this$delegate17 === void 0 ? void 0 : _this$delegate17.inputControllerDidPaste(paste);\n    } else if (Array.from(clipboard.types).includes(\"Files\")) {\n      var _clipboard$items, _clipboard$items$, _clipboard$items$$get;\n\n      const file = (_clipboard$items = clipboard.items) === null || _clipboard$items === void 0 ? void 0 : (_clipboard$items$ = _clipboard$items[0]) === null || _clipboard$items$ === void 0 ? void 0 : (_clipboard$items$$get = _clipboard$items$.getAsFile) === null || _clipboard$items$$get === void 0 ? void 0 : _clipboard$items$$get.call(_clipboard$items$);\n\n      if (file) {\n        var _this$delegate18, _this$responder20, _this$delegate19;\n\n        const extension = extensionForFile(file);\n\n        if (!file.name && extension) {\n          file.name = \"pasted-file-\".concat(++pastedFileCount, \".\").concat(extension);\n        }\n\n        paste.type = \"File\";\n        paste.file = file;\n        (_this$delegate18 = this.delegate) === null || _this$delegate18 === void 0 ? void 0 : _this$delegate18.inputControllerWillAttachFiles();\n        (_this$responder20 = this.responder) === null || _this$responder20 === void 0 ? void 0 : _this$responder20.insertFile(paste.file);\n        this.requestRender();\n        (_this$delegate19 = this.delegate) === null || _this$delegate19 === void 0 ? void 0 : _this$delegate19.inputControllerDidPaste(paste);\n      }\n    }\n\n    event.preventDefault();\n  },\n\n  compositionstart(event) {\n    return this.getCompositionInput().start(event.data);\n  },\n\n  compositionupdate(event) {\n    return this.getCompositionInput().update(event.data);\n  },\n\n  compositionend(event) {\n    return this.getCompositionInput().end(event.data);\n  },\n\n  beforeinput(event) {\n    this.inputSummary.didInput = true;\n  },\n\n  input(event) {\n    this.inputSummary.didInput = true;\n    return event.stopPropagation();\n  }\n\n});\n\n_defineProperty(Level0InputController, \"keys\", {\n  backspace(event) {\n    var _this$delegate20;\n\n    (_this$delegate20 = this.delegate) === null || _this$delegate20 === void 0 ? void 0 : _this$delegate20.inputControllerWillPerformTyping();\n    return this.deleteInDirection(\"backward\", event);\n  },\n\n  delete(event) {\n    var _this$delegate21;\n\n    (_this$delegate21 = this.delegate) === null || _this$delegate21 === void 0 ? void 0 : _this$delegate21.inputControllerWillPerformTyping();\n    return this.deleteInDirection(\"forward\", event);\n  },\n\n  return(event) {\n    var _this$delegate22, _this$responder21;\n\n    this.setInputSummary({\n      preferDocument: true\n    });\n    (_this$delegate22 = this.delegate) === null || _this$delegate22 === void 0 ? void 0 : _this$delegate22.inputControllerWillPerformTyping();\n    return (_this$responder21 = this.responder) === null || _this$responder21 === void 0 ? void 0 : _this$responder21.insertLineBreak();\n  },\n\n  tab(event) {\n    var _this$responder22;\n\n    if ((_this$responder22 = this.responder) !== null && _this$responder22 !== void 0 && _this$responder22.canIncreaseNestingLevel()) {\n      var _this$responder23;\n\n      (_this$responder23 = this.responder) === null || _this$responder23 === void 0 ? void 0 : _this$responder23.increaseNestingLevel();\n      this.requestRender();\n      event.preventDefault();\n    }\n  },\n\n  left(event) {\n    if (this.selectionIsInCursorTarget()) {\n      var _this$responder24;\n\n      event.preventDefault();\n      return (_this$responder24 = this.responder) === null || _this$responder24 === void 0 ? void 0 : _this$responder24.moveCursorInDirection(\"backward\");\n    }\n  },\n\n  right(event) {\n    if (this.selectionIsInCursorTarget()) {\n      var _this$responder25;\n\n      event.preventDefault();\n      return (_this$responder25 = this.responder) === null || _this$responder25 === void 0 ? void 0 : _this$responder25.moveCursorInDirection(\"forward\");\n    }\n  },\n\n  control: {\n    d(event) {\n      var _this$delegate23;\n\n      (_this$delegate23 = this.delegate) === null || _this$delegate23 === void 0 ? void 0 : _this$delegate23.inputControllerWillPerformTyping();\n      return this.deleteInDirection(\"forward\", event);\n    },\n\n    h(event) {\n      var _this$delegate24;\n\n      (_this$delegate24 = this.delegate) === null || _this$delegate24 === void 0 ? void 0 : _this$delegate24.inputControllerWillPerformTyping();\n      return this.deleteInDirection(\"backward\", event);\n    },\n\n    o(event) {\n      var _this$delegate25, _this$responder26;\n\n      event.preventDefault();\n      (_this$delegate25 = this.delegate) === null || _this$delegate25 === void 0 ? void 0 : _this$delegate25.inputControllerWillPerformTyping();\n      (_this$responder26 = this.responder) === null || _this$responder26 === void 0 ? void 0 : _this$responder26.insertString(\"\\n\", {\n        updatePosition: false\n      });\n      return this.requestRender();\n    }\n\n  },\n  shift: {\n    return(event) {\n      var _this$delegate26, _this$responder27;\n\n      (_this$delegate26 = this.delegate) === null || _this$delegate26 === void 0 ? void 0 : _this$delegate26.inputControllerWillPerformTyping();\n      (_this$responder27 = this.responder) === null || _this$responder27 === void 0 ? void 0 : _this$responder27.insertString(\"\\n\");\n      this.requestRender();\n      event.preventDefault();\n    },\n\n    tab(event) {\n      var _this$responder28;\n\n      if ((_this$responder28 = this.responder) !== null && _this$responder28 !== void 0 && _this$responder28.canDecreaseNestingLevel()) {\n        var _this$responder29;\n\n        (_this$responder29 = this.responder) === null || _this$responder29 === void 0 ? void 0 : _this$responder29.decreaseNestingLevel();\n        this.requestRender();\n        event.preventDefault();\n      }\n    },\n\n    left(event) {\n      if (this.selectionIsInCursorTarget()) {\n        event.preventDefault();\n        return this.expandSelectionInDirection(\"backward\");\n      }\n    },\n\n    right(event) {\n      if (this.selectionIsInCursorTarget()) {\n        event.preventDefault();\n        return this.expandSelectionInDirection(\"forward\");\n      }\n    }\n\n  },\n  alt: {\n    backspace(event) {\n      var _this$delegate27;\n\n      this.setInputSummary({\n        preferDocument: false\n      });\n      return (_this$delegate27 = this.delegate) === null || _this$delegate27 === void 0 ? void 0 : _this$delegate27.inputControllerWillPerformTyping();\n    }\n\n  },\n  meta: {\n    backspace(event) {\n      var _this$delegate28;\n\n      this.setInputSummary({\n        preferDocument: false\n      });\n      return (_this$delegate28 = this.delegate) === null || _this$delegate28 === void 0 ? void 0 : _this$delegate28.inputControllerWillPerformTyping();\n    }\n\n  }\n});\n\nLevel0InputController.proxyMethod(\"responder?.getSelectedRange\");\nLevel0InputController.proxyMethod(\"responder?.setSelectedRange\");\nLevel0InputController.proxyMethod(\"responder?.expandSelectionInDirection\");\nLevel0InputController.proxyMethod(\"responder?.selectionIsInCursorTarget\");\nLevel0InputController.proxyMethod(\"responder?.selectionIsExpanded\");\n\nconst extensionForFile = file => {\n  var _file$type, _file$type$match;\n\n  return (_file$type = file.type) === null || _file$type === void 0 ? void 0 : (_file$type$match = _file$type.match(/\\/(\\w+)$/)) === null || _file$type$match === void 0 ? void 0 : _file$type$match[1];\n};\n\nconst hasStringCodePointAt = !!((_$codePointAt = (_ = \" \").codePointAt) !== null && _$codePointAt !== void 0 && _$codePointAt.call(_, 0));\n\nconst stringFromKeyEvent = function (event) {\n  if (event.key && hasStringCodePointAt && event.key.codePointAt(0) === event.keyCode) {\n    return event.key;\n  } else {\n    let code;\n\n    if (event.which === null) {\n      code = event.keyCode;\n    } else if (event.which !== 0 && event.charCode !== 0) {\n      code = event.charCode;\n    }\n\n    if (code != null && keyNames$1[code] !== \"escape\") {\n      return UTF16String.fromCodepoints([code]).toString();\n    }\n  }\n};\n\nconst pasteEventIsCrippledSafariHTMLPaste = function (event) {\n  const paste = event.clipboardData;\n\n  if (paste) {\n    if (paste.types.includes(\"text/html\")) {\n      // Answer is yes if there's any possibility of Paste and Match Style in Safari,\n      // which is nearly impossible to detect confidently: https://bugs.webkit.org/show_bug.cgi?id=174165\n      for (const type of paste.types) {\n        const hasPasteboardFlavor = /^CorePasteboardFlavorType/.test(type);\n        const hasReadableDynamicData = /^dyn\\./.test(type) && paste.getData(type);\n        const mightBePasteAndMatchStyle = hasPasteboardFlavor || hasReadableDynamicData;\n\n        if (mightBePasteAndMatchStyle) {\n          return true;\n        }\n      }\n\n      return false;\n    } else {\n      const isExternalHTMLPaste = paste.types.includes(\"com.apple.webarchive\");\n      const isExternalRichTextPaste = paste.types.includes(\"com.apple.flat-rtfd\");\n      return isExternalHTMLPaste || isExternalRichTextPaste;\n    }\n  }\n};\n\nclass CompositionInput extends BasicObject {\n  constructor(inputController) {\n    super(...arguments);\n    this.inputController = inputController;\n    this.responder = this.inputController.responder;\n    this.delegate = this.inputController.delegate;\n    this.inputSummary = this.inputController.inputSummary;\n    this.data = {};\n  }\n\n  start(data) {\n    this.data.start = data;\n\n    if (this.isSignificant()) {\n      var _this$responder5;\n\n      if (this.inputSummary.eventName === \"keypress\" && this.inputSummary.textAdded) {\n        var _this$responder4;\n\n        (_this$responder4 = this.responder) === null || _this$responder4 === void 0 ? void 0 : _this$responder4.deleteInDirection(\"left\");\n      }\n\n      if (!this.selectionIsExpanded()) {\n        this.insertPlaceholder();\n        this.requestRender();\n      }\n\n      this.range = (_this$responder5 = this.responder) === null || _this$responder5 === void 0 ? void 0 : _this$responder5.getSelectedRange();\n    }\n  }\n\n  update(data) {\n    this.data.update = data;\n\n    if (this.isSignificant()) {\n      const range = this.selectPlaceholder();\n\n      if (range) {\n        this.forgetPlaceholder();\n        this.range = range;\n      }\n    }\n  }\n\n  end(data) {\n    this.data.end = data;\n\n    if (this.isSignificant()) {\n      this.forgetPlaceholder();\n\n      if (this.canApplyToDocument()) {\n        var _this$delegate2, _this$responder6, _this$responder7, _this$responder8;\n\n        this.setInputSummary({\n          preferDocument: true,\n          didInput: false\n        });\n        (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : _this$delegate2.inputControllerWillPerformTyping();\n        (_this$responder6 = this.responder) === null || _this$responder6 === void 0 ? void 0 : _this$responder6.setSelectedRange(this.range);\n        (_this$responder7 = this.responder) === null || _this$responder7 === void 0 ? void 0 : _this$responder7.insertString(this.data.end);\n        return (_this$responder8 = this.responder) === null || _this$responder8 === void 0 ? void 0 : _this$responder8.setSelectedRange(this.range[0] + this.data.end.length);\n      } else if (this.data.start != null || this.data.update != null) {\n        this.requestReparse();\n        return this.inputController.reset();\n      }\n    } else {\n      return this.inputController.reset();\n    }\n  }\n\n  getEndData() {\n    return this.data.end;\n  }\n\n  isEnded() {\n    return this.getEndData() != null;\n  }\n\n  isSignificant() {\n    if (browser.composesExistingText) {\n      return this.inputSummary.didInput;\n    } else {\n      return true;\n    }\n  } // Private\n\n\n  canApplyToDocument() {\n    var _this$data$start, _this$data$end;\n\n    return ((_this$data$start = this.data.start) === null || _this$data$start === void 0 ? void 0 : _this$data$start.length) === 0 && ((_this$data$end = this.data.end) === null || _this$data$end === void 0 ? void 0 : _this$data$end.length) > 0 && this.range;\n  }\n\n}\n\nCompositionInput.proxyMethod(\"inputController.setInputSummary\");\nCompositionInput.proxyMethod(\"inputController.requestRender\");\nCompositionInput.proxyMethod(\"inputController.requestReparse\");\nCompositionInput.proxyMethod(\"responder?.selectionIsExpanded\");\nCompositionInput.proxyMethod(\"responder?.insertPlaceholder\");\nCompositionInput.proxyMethod(\"responder?.selectPlaceholder\");\nCompositionInput.proxyMethod(\"responder?.forgetPlaceholder\");\n\nclass Level2InputController extends InputController {\n  constructor() {\n    super(...arguments);\n    this.render = this.render.bind(this);\n  }\n\n  elementDidMutate() {\n    if (this.scheduledRender) {\n      if (this.composing) {\n        var _this$delegate, _this$delegate$inputC;\n\n        return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$inputC = _this$delegate.inputControllerDidAllowUnhandledInput) === null || _this$delegate$inputC === void 0 ? void 0 : _this$delegate$inputC.call(_this$delegate);\n      }\n    } else {\n      return this.reparse();\n    }\n  }\n\n  scheduleRender() {\n    return this.scheduledRender ? this.scheduledRender : this.scheduledRender = requestAnimationFrame(this.render);\n  }\n\n  render() {\n    var _this$afterRender;\n\n    cancelAnimationFrame(this.scheduledRender);\n    this.scheduledRender = null;\n\n    if (!this.composing) {\n      var _this$delegate2;\n\n      (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : _this$delegate2.render();\n    }\n\n    (_this$afterRender = this.afterRender) === null || _this$afterRender === void 0 ? void 0 : _this$afterRender.call(this);\n    this.afterRender = null;\n  }\n\n  reparse() {\n    var _this$delegate3;\n\n    return (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : _this$delegate3.reparse();\n  } // Responder helpers\n\n\n  insertString() {\n    var _this$delegate4;\n\n    let string = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    let options = arguments.length > 1 ? arguments[1] : undefined;\n    (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.inputControllerWillPerformTyping();\n    return this.withTargetDOMRange(function () {\n      var _this$responder;\n\n      return (_this$responder = this.responder) === null || _this$responder === void 0 ? void 0 : _this$responder.insertString(string, options);\n    });\n  }\n\n  toggleAttributeIfSupported(attributeName) {\n    if (getAllAttributeNames().includes(attributeName)) {\n      var _this$delegate5;\n\n      (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : _this$delegate5.inputControllerWillPerformFormatting(attributeName);\n      return this.withTargetDOMRange(function () {\n        var _this$responder2;\n\n        return (_this$responder2 = this.responder) === null || _this$responder2 === void 0 ? void 0 : _this$responder2.toggleCurrentAttribute(attributeName);\n      });\n    }\n  }\n\n  activateAttributeIfSupported(attributeName, value) {\n    if (getAllAttributeNames().includes(attributeName)) {\n      var _this$delegate6;\n\n      (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : _this$delegate6.inputControllerWillPerformFormatting(attributeName);\n      return this.withTargetDOMRange(function () {\n        var _this$responder3;\n\n        return (_this$responder3 = this.responder) === null || _this$responder3 === void 0 ? void 0 : _this$responder3.setCurrentAttribute(attributeName, value);\n      });\n    }\n  }\n\n  deleteInDirection(direction) {\n    let {\n      recordUndoEntry\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      recordUndoEntry: true\n    };\n\n    if (recordUndoEntry) {\n      var _this$delegate7;\n\n      (_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : _this$delegate7.inputControllerWillPerformTyping();\n    }\n\n    const perform = () => {\n      var _this$responder4;\n\n      return (_this$responder4 = this.responder) === null || _this$responder4 === void 0 ? void 0 : _this$responder4.deleteInDirection(direction);\n    };\n\n    const domRange = this.getTargetDOMRange({\n      minLength: 2\n    });\n\n    if (domRange) {\n      return this.withTargetDOMRange(domRange, perform);\n    } else {\n      return perform();\n    }\n  } // Selection helpers\n\n\n  withTargetDOMRange(domRange, fn) {\n    if (typeof domRange === \"function\") {\n      fn = domRange;\n      domRange = this.getTargetDOMRange();\n    }\n\n    if (domRange) {\n      var _this$responder5;\n\n      return (_this$responder5 = this.responder) === null || _this$responder5 === void 0 ? void 0 : _this$responder5.withTargetDOMRange(domRange, fn.bind(this));\n    } else {\n      selectionChangeObserver.reset();\n      return fn.call(this);\n    }\n  }\n\n  getTargetDOMRange() {\n    var _this$event$getTarget, _this$event;\n\n    let {\n      minLength\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      minLength: 0\n    };\n    const targetRanges = (_this$event$getTarget = (_this$event = this.event).getTargetRanges) === null || _this$event$getTarget === void 0 ? void 0 : _this$event$getTarget.call(_this$event);\n\n    if (targetRanges) {\n      if (targetRanges.length) {\n        const domRange = staticRangeToRange(targetRanges[0]);\n\n        if (minLength === 0 || domRange.toString().length >= minLength) {\n          return domRange;\n        }\n      }\n    }\n  }\n\n  withEvent(event, fn) {\n    let result;\n    this.event = event;\n\n    try {\n      result = fn.call(this);\n    } finally {\n      this.event = null;\n    }\n\n    return result;\n  }\n\n}\n\n_defineProperty(Level2InputController, \"events\", {\n  keydown(event) {\n    if (keyEventIsKeyboardCommand(event)) {\n      var _this$delegate8;\n\n      const command = keyboardCommandFromKeyEvent(event);\n\n      if ((_this$delegate8 = this.delegate) !== null && _this$delegate8 !== void 0 && _this$delegate8.inputControllerDidReceiveKeyboardCommand(command)) {\n        event.preventDefault();\n      }\n    } else {\n      let name = event.key;\n\n      if (event.altKey) {\n        name += \"+Alt\";\n      }\n\n      if (event.shiftKey) {\n        name += \"+Shift\";\n      }\n\n      const handler = this.constructor.keys[name];\n\n      if (handler) {\n        return this.withEvent(event, handler);\n      }\n    }\n  },\n\n  // Handle paste event to work around beforeinput.insertFromPaste browser bugs.\n  // Safe to remove each condition once fixed upstream.\n  paste(event) {\n    var _event$clipboardData;\n\n    // https://bugs.webkit.org/show_bug.cgi?id=194921\n    let paste;\n    const href = (_event$clipboardData = event.clipboardData) === null || _event$clipboardData === void 0 ? void 0 : _event$clipboardData.getData(\"URL\");\n\n    if (pasteEventHasFilesOnly(event)) {\n      event.preventDefault();\n      return this.attachFiles(event.clipboardData.files); // https://bugs.chromium.org/p/chromium/issues/detail?id=934448\n    } else if (pasteEventHasPlainTextOnly(event)) {\n      var _this$delegate9, _this$responder6, _this$delegate10;\n\n      event.preventDefault();\n      paste = {\n        type: \"text/plain\",\n        string: event.clipboardData.getData(\"text/plain\")\n      };\n      (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : _this$delegate9.inputControllerWillPaste(paste);\n      (_this$responder6 = this.responder) === null || _this$responder6 === void 0 ? void 0 : _this$responder6.insertString(paste.string);\n      this.render();\n      return (_this$delegate10 = this.delegate) === null || _this$delegate10 === void 0 ? void 0 : _this$delegate10.inputControllerDidPaste(paste); // https://bugs.webkit.org/show_bug.cgi?id=196702\n    } else if (href) {\n      var _this$delegate11, _this$responder7, _this$delegate12;\n\n      event.preventDefault();\n      paste = {\n        type: \"text/html\",\n        html: this.createLinkHTML(href)\n      };\n      (_this$delegate11 = this.delegate) === null || _this$delegate11 === void 0 ? void 0 : _this$delegate11.inputControllerWillPaste(paste);\n      (_this$responder7 = this.responder) === null || _this$responder7 === void 0 ? void 0 : _this$responder7.insertHTML(paste.html);\n      this.render();\n      return (_this$delegate12 = this.delegate) === null || _this$delegate12 === void 0 ? void 0 : _this$delegate12.inputControllerDidPaste(paste);\n    }\n  },\n\n  beforeinput(event) {\n    const handler = this.constructor.inputTypes[event.inputType];\n\n    if (handler) {\n      this.withEvent(event, handler);\n      return this.scheduleRender();\n    }\n  },\n\n  input(event) {\n    return selectionChangeObserver.reset();\n  },\n\n  dragstart(event) {\n    var _this$responder8;\n\n    if ((_this$responder8 = this.responder) !== null && _this$responder8 !== void 0 && _this$responder8.selectionContainsAttachments()) {\n      var _this$responder9;\n\n      event.dataTransfer.setData(\"application/x-trix-dragging\", true);\n      this.dragging = {\n        range: (_this$responder9 = this.responder) === null || _this$responder9 === void 0 ? void 0 : _this$responder9.getSelectedRange(),\n        point: pointFromEvent(event)\n      };\n    }\n  },\n\n  dragenter(event) {\n    if (dragEventHasFiles(event)) {\n      event.preventDefault();\n    }\n  },\n\n  dragover(event) {\n    if (this.dragging) {\n      event.preventDefault();\n      const point = pointFromEvent(event);\n\n      if (!objectsAreEqual(point, this.dragging.point)) {\n        var _this$responder10;\n\n        this.dragging.point = point;\n        return (_this$responder10 = this.responder) === null || _this$responder10 === void 0 ? void 0 : _this$responder10.setLocationRangeFromPointRange(point);\n      }\n    } else if (dragEventHasFiles(event)) {\n      event.preventDefault();\n    }\n  },\n\n  drop(event) {\n    if (this.dragging) {\n      var _this$delegate13, _this$responder11;\n\n      event.preventDefault();\n      (_this$delegate13 = this.delegate) === null || _this$delegate13 === void 0 ? void 0 : _this$delegate13.inputControllerWillMoveText();\n      (_this$responder11 = this.responder) === null || _this$responder11 === void 0 ? void 0 : _this$responder11.moveTextFromRange(this.dragging.range);\n      this.dragging = null;\n      return this.scheduleRender();\n    } else if (dragEventHasFiles(event)) {\n      var _this$responder12;\n\n      event.preventDefault();\n      const point = pointFromEvent(event);\n      (_this$responder12 = this.responder) === null || _this$responder12 === void 0 ? void 0 : _this$responder12.setLocationRangeFromPointRange(point);\n      return this.attachFiles(event.dataTransfer.files);\n    }\n  },\n\n  dragend() {\n    if (this.dragging) {\n      var _this$responder13;\n\n      (_this$responder13 = this.responder) === null || _this$responder13 === void 0 ? void 0 : _this$responder13.setSelectedRange(this.dragging.range);\n      this.dragging = null;\n    }\n  },\n\n  compositionend(event) {\n    if (this.composing) {\n      this.composing = false;\n      return this.scheduleRender();\n    }\n  }\n\n});\n\n_defineProperty(Level2InputController, \"keys\", {\n  ArrowLeft() {\n    var _this$responder14;\n\n    if ((_this$responder14 = this.responder) !== null && _this$responder14 !== void 0 && _this$responder14.shouldManageMovingCursorInDirection(\"backward\")) {\n      var _this$responder15;\n\n      this.event.preventDefault();\n      return (_this$responder15 = this.responder) === null || _this$responder15 === void 0 ? void 0 : _this$responder15.moveCursorInDirection(\"backward\");\n    }\n  },\n\n  ArrowRight() {\n    var _this$responder16;\n\n    if ((_this$responder16 = this.responder) !== null && _this$responder16 !== void 0 && _this$responder16.shouldManageMovingCursorInDirection(\"forward\")) {\n      var _this$responder17;\n\n      this.event.preventDefault();\n      return (_this$responder17 = this.responder) === null || _this$responder17 === void 0 ? void 0 : _this$responder17.moveCursorInDirection(\"forward\");\n    }\n  },\n\n  Backspace() {\n    var _this$responder18;\n\n    if ((_this$responder18 = this.responder) !== null && _this$responder18 !== void 0 && _this$responder18.shouldManageDeletingInDirection(\"backward\")) {\n      var _this$delegate14, _this$responder19;\n\n      this.event.preventDefault();\n      (_this$delegate14 = this.delegate) === null || _this$delegate14 === void 0 ? void 0 : _this$delegate14.inputControllerWillPerformTyping();\n      (_this$responder19 = this.responder) === null || _this$responder19 === void 0 ? void 0 : _this$responder19.deleteInDirection(\"backward\");\n      return this.render();\n    }\n  },\n\n  Tab() {\n    var _this$responder20;\n\n    if ((_this$responder20 = this.responder) !== null && _this$responder20 !== void 0 && _this$responder20.canIncreaseNestingLevel()) {\n      var _this$responder21;\n\n      this.event.preventDefault();\n      (_this$responder21 = this.responder) === null || _this$responder21 === void 0 ? void 0 : _this$responder21.increaseNestingLevel();\n      return this.render();\n    }\n  },\n\n  \"Tab+Shift\"() {\n    var _this$responder22;\n\n    if ((_this$responder22 = this.responder) !== null && _this$responder22 !== void 0 && _this$responder22.canDecreaseNestingLevel()) {\n      var _this$responder23;\n\n      this.event.preventDefault();\n      (_this$responder23 = this.responder) === null || _this$responder23 === void 0 ? void 0 : _this$responder23.decreaseNestingLevel();\n      return this.render();\n    }\n  }\n\n});\n\n_defineProperty(Level2InputController, \"inputTypes\", {\n  deleteByComposition() {\n    return this.deleteInDirection(\"backward\", {\n      recordUndoEntry: false\n    });\n  },\n\n  deleteByCut() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteByDrag() {\n    this.event.preventDefault();\n    return this.withTargetDOMRange(function () {\n      var _this$responder24;\n\n      this.deleteByDragRange = (_this$responder24 = this.responder) === null || _this$responder24 === void 0 ? void 0 : _this$responder24.getSelectedRange();\n    });\n  },\n\n  deleteCompositionText() {\n    return this.deleteInDirection(\"backward\", {\n      recordUndoEntry: false\n    });\n  },\n\n  deleteContent() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteContentBackward() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteContentForward() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  deleteEntireSoftLine() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  deleteHardLineBackward() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteHardLineForward() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  deleteSoftLineBackward() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteSoftLineForward() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  deleteWordBackward() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteWordForward() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  formatBackColor() {\n    return this.activateAttributeIfSupported(\"backgroundColor\", this.event.data);\n  },\n\n  formatBold() {\n    return this.toggleAttributeIfSupported(\"bold\");\n  },\n\n  formatFontColor() {\n    return this.activateAttributeIfSupported(\"color\", this.event.data);\n  },\n\n  formatFontName() {\n    return this.activateAttributeIfSupported(\"font\", this.event.data);\n  },\n\n  formatIndent() {\n    var _this$responder25;\n\n    if ((_this$responder25 = this.responder) !== null && _this$responder25 !== void 0 && _this$responder25.canIncreaseNestingLevel()) {\n      return this.withTargetDOMRange(function () {\n        var _this$responder26;\n\n        return (_this$responder26 = this.responder) === null || _this$responder26 === void 0 ? void 0 : _this$responder26.increaseNestingLevel();\n      });\n    }\n  },\n\n  formatItalic() {\n    return this.toggleAttributeIfSupported(\"italic\");\n  },\n\n  formatJustifyCenter() {\n    return this.toggleAttributeIfSupported(\"justifyCenter\");\n  },\n\n  formatJustifyFull() {\n    return this.toggleAttributeIfSupported(\"justifyFull\");\n  },\n\n  formatJustifyLeft() {\n    return this.toggleAttributeIfSupported(\"justifyLeft\");\n  },\n\n  formatJustifyRight() {\n    return this.toggleAttributeIfSupported(\"justifyRight\");\n  },\n\n  formatOutdent() {\n    var _this$responder27;\n\n    if ((_this$responder27 = this.responder) !== null && _this$responder27 !== void 0 && _this$responder27.canDecreaseNestingLevel()) {\n      return this.withTargetDOMRange(function () {\n        var _this$responder28;\n\n        return (_this$responder28 = this.responder) === null || _this$responder28 === void 0 ? void 0 : _this$responder28.decreaseNestingLevel();\n      });\n    }\n  },\n\n  formatRemove() {\n    this.withTargetDOMRange(function () {\n      for (const attributeName in (_this$responder29 = this.responder) === null || _this$responder29 === void 0 ? void 0 : _this$responder29.getCurrentAttributes()) {\n        var _this$responder29, _this$responder30;\n\n        (_this$responder30 = this.responder) === null || _this$responder30 === void 0 ? void 0 : _this$responder30.removeCurrentAttribute(attributeName);\n      }\n    });\n  },\n\n  formatSetBlockTextDirection() {\n    return this.activateAttributeIfSupported(\"blockDir\", this.event.data);\n  },\n\n  formatSetInlineTextDirection() {\n    return this.activateAttributeIfSupported(\"textDir\", this.event.data);\n  },\n\n  formatStrikeThrough() {\n    return this.toggleAttributeIfSupported(\"strike\");\n  },\n\n  formatSubscript() {\n    return this.toggleAttributeIfSupported(\"sub\");\n  },\n\n  formatSuperscript() {\n    return this.toggleAttributeIfSupported(\"sup\");\n  },\n\n  formatUnderline() {\n    return this.toggleAttributeIfSupported(\"underline\");\n  },\n\n  historyRedo() {\n    var _this$delegate15;\n\n    return (_this$delegate15 = this.delegate) === null || _this$delegate15 === void 0 ? void 0 : _this$delegate15.inputControllerWillPerformRedo();\n  },\n\n  historyUndo() {\n    var _this$delegate16;\n\n    return (_this$delegate16 = this.delegate) === null || _this$delegate16 === void 0 ? void 0 : _this$delegate16.inputControllerWillPerformUndo();\n  },\n\n  insertCompositionText() {\n    this.composing = true;\n    return this.insertString(this.event.data);\n  },\n\n  insertFromComposition() {\n    this.composing = false;\n    return this.insertString(this.event.data);\n  },\n\n  insertFromDrop() {\n    const range = this.deleteByDragRange;\n\n    if (range) {\n      var _this$delegate17;\n\n      this.deleteByDragRange = null;\n      (_this$delegate17 = this.delegate) === null || _this$delegate17 === void 0 ? void 0 : _this$delegate17.inputControllerWillMoveText();\n      return this.withTargetDOMRange(function () {\n        var _this$responder31;\n\n        return (_this$responder31 = this.responder) === null || _this$responder31 === void 0 ? void 0 : _this$responder31.moveTextFromRange(range);\n      });\n    }\n  },\n\n  insertFromPaste() {\n    var _dataTransfer$files;\n\n    const {\n      dataTransfer\n    } = this.event;\n    const paste = {\n      dataTransfer\n    };\n    const href = dataTransfer.getData(\"URL\");\n    const html = dataTransfer.getData(\"text/html\");\n\n    if (href) {\n      var _this$delegate18;\n\n      let string;\n      this.event.preventDefault();\n      paste.type = \"text/html\";\n      const name = dataTransfer.getData(\"public.url-name\");\n\n      if (name) {\n        string = squishBreakableWhitespace(name).trim();\n      } else {\n        string = href;\n      }\n\n      paste.html = this.createLinkHTML(href, string);\n      (_this$delegate18 = this.delegate) === null || _this$delegate18 === void 0 ? void 0 : _this$delegate18.inputControllerWillPaste(paste);\n      this.withTargetDOMRange(function () {\n        var _this$responder32;\n\n        return (_this$responder32 = this.responder) === null || _this$responder32 === void 0 ? void 0 : _this$responder32.insertHTML(paste.html);\n      });\n\n      this.afterRender = () => {\n        var _this$delegate19;\n\n        return (_this$delegate19 = this.delegate) === null || _this$delegate19 === void 0 ? void 0 : _this$delegate19.inputControllerDidPaste(paste);\n      };\n    } else if (dataTransferIsPlainText(dataTransfer)) {\n      var _this$delegate20;\n\n      paste.type = \"text/plain\";\n      paste.string = dataTransfer.getData(\"text/plain\");\n      (_this$delegate20 = this.delegate) === null || _this$delegate20 === void 0 ? void 0 : _this$delegate20.inputControllerWillPaste(paste);\n      this.withTargetDOMRange(function () {\n        var _this$responder33;\n\n        return (_this$responder33 = this.responder) === null || _this$responder33 === void 0 ? void 0 : _this$responder33.insertString(paste.string);\n      });\n\n      this.afterRender = () => {\n        var _this$delegate21;\n\n        return (_this$delegate21 = this.delegate) === null || _this$delegate21 === void 0 ? void 0 : _this$delegate21.inputControllerDidPaste(paste);\n      };\n    } else if (html) {\n      var _this$delegate22;\n\n      this.event.preventDefault();\n      paste.type = \"text/html\";\n      paste.html = html;\n      (_this$delegate22 = this.delegate) === null || _this$delegate22 === void 0 ? void 0 : _this$delegate22.inputControllerWillPaste(paste);\n      this.withTargetDOMRange(function () {\n        var _this$responder34;\n\n        return (_this$responder34 = this.responder) === null || _this$responder34 === void 0 ? void 0 : _this$responder34.insertHTML(paste.html);\n      });\n\n      this.afterRender = () => {\n        var _this$delegate23;\n\n        return (_this$delegate23 = this.delegate) === null || _this$delegate23 === void 0 ? void 0 : _this$delegate23.inputControllerDidPaste(paste);\n      };\n    } else if ((_dataTransfer$files = dataTransfer.files) !== null && _dataTransfer$files !== void 0 && _dataTransfer$files.length) {\n      var _this$delegate24;\n\n      paste.type = \"File\";\n      paste.file = dataTransfer.files[0];\n      (_this$delegate24 = this.delegate) === null || _this$delegate24 === void 0 ? void 0 : _this$delegate24.inputControllerWillPaste(paste);\n      this.withTargetDOMRange(function () {\n        var _this$responder35;\n\n        return (_this$responder35 = this.responder) === null || _this$responder35 === void 0 ? void 0 : _this$responder35.insertFile(paste.file);\n      });\n\n      this.afterRender = () => {\n        var _this$delegate25;\n\n        return (_this$delegate25 = this.delegate) === null || _this$delegate25 === void 0 ? void 0 : _this$delegate25.inputControllerDidPaste(paste);\n      };\n    }\n  },\n\n  insertFromYank() {\n    return this.insertString(this.event.data);\n  },\n\n  insertLineBreak() {\n    return this.insertString(\"\\n\");\n  },\n\n  insertLink() {\n    return this.activateAttributeIfSupported(\"href\", this.event.data);\n  },\n\n  insertOrderedList() {\n    return this.toggleAttributeIfSupported(\"number\");\n  },\n\n  insertParagraph() {\n    var _this$delegate26;\n\n    (_this$delegate26 = this.delegate) === null || _this$delegate26 === void 0 ? void 0 : _this$delegate26.inputControllerWillPerformTyping();\n    return this.withTargetDOMRange(function () {\n      var _this$responder36;\n\n      return (_this$responder36 = this.responder) === null || _this$responder36 === void 0 ? void 0 : _this$responder36.insertLineBreak();\n    });\n  },\n\n  insertReplacementText() {\n    return this.insertString(this.event.dataTransfer.getData(\"text/plain\"), {\n      updatePosition: false\n    });\n  },\n\n  insertText() {\n    var _this$event$dataTrans;\n\n    return this.insertString(this.event.data || ((_this$event$dataTrans = this.event.dataTransfer) === null || _this$event$dataTrans === void 0 ? void 0 : _this$event$dataTrans.getData(\"text/plain\")));\n  },\n\n  insertTranspose() {\n    return this.insertString(this.event.data);\n  },\n\n  insertUnorderedList() {\n    return this.toggleAttributeIfSupported(\"bullet\");\n  }\n\n});\n\nconst staticRangeToRange = function (staticRange) {\n  const range = document.createRange();\n  range.setStart(staticRange.startContainer, staticRange.startOffset);\n  range.setEnd(staticRange.endContainer, staticRange.endOffset);\n  return range;\n}; // Event helpers\n\n\nconst dragEventHasFiles = event => {\n  var _event$dataTransfer;\n\n  return Array.from(((_event$dataTransfer = event.dataTransfer) === null || _event$dataTransfer === void 0 ? void 0 : _event$dataTransfer.types) || []).includes(\"Files\");\n};\n\nconst pasteEventHasFilesOnly = function (event) {\n  const clipboard = event.clipboardData;\n\n  if (clipboard) {\n    return clipboard.types.includes(\"Files\") && clipboard.types.length === 1 && clipboard.files.length >= 1;\n  }\n};\n\nconst pasteEventHasPlainTextOnly = function (event) {\n  const clipboard = event.clipboardData;\n\n  if (clipboard) {\n    return clipboard.types.includes(\"text/plain\") && clipboard.types.length === 1;\n  }\n};\n\nconst keyboardCommandFromKeyEvent = function (event) {\n  const command = [];\n\n  if (event.altKey) {\n    command.push(\"alt\");\n  }\n\n  if (event.shiftKey) {\n    command.push(\"shift\");\n  }\n\n  command.push(event.key);\n  return command;\n};\n\nconst pointFromEvent = event => ({\n  x: event.clientX,\n  y: event.clientY\n});\n\nconst {\n  lang,\n  css,\n  keyNames\n} = config;\n\nconst undoable = function (fn) {\n  return function () {\n    const commands = fn.apply(this, arguments);\n    commands.do();\n\n    if (!this.undos) {\n      this.undos = [];\n    }\n\n    this.undos.push(commands.undo);\n  };\n};\n\nclass AttachmentEditorController extends BasicObject {\n  constructor(attachmentPiece, _element, container) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    super(...arguments);\n\n    _defineProperty(this, \"makeElementMutable\", undoable(() => {\n      return {\n        do: () => {\n          this.element.dataset.trixMutable = true;\n        },\n        undo: () => delete this.element.dataset.trixMutable\n      };\n    }));\n\n    _defineProperty(this, \"addToolbar\", undoable(() => {\n      // <div class=\"#{css.attachmentMetadataContainer}\" data-trix-mutable=\"true\">\n      //   <div class=\"trix-button-row\">\n      //     <span class=\"trix-button-group trix-button-group--actions\">\n      //       <button type=\"button\" class=\"trix-button trix-button--remove\" title=\"#{lang.remove}\" data-trix-action=\"remove\">#{lang.remove}</button>\n      //     </span>\n      //   </div>\n      // </div>\n      const element = makeElement({\n        tagName: \"div\",\n        className: css.attachmentToolbar,\n        data: {\n          trixMutable: true\n        },\n        childNodes: makeElement({\n          tagName: \"div\",\n          className: \"trix-button-row\",\n          childNodes: makeElement({\n            tagName: \"span\",\n            className: \"trix-button-group trix-button-group--actions\",\n            childNodes: makeElement({\n              tagName: \"button\",\n              className: \"trix-button trix-button--remove\",\n              textContent: lang.remove,\n              attributes: {\n                title: lang.remove\n              },\n              data: {\n                trixAction: \"remove\"\n              }\n            })\n          })\n        })\n      });\n\n      if (this.attachment.isPreviewable()) {\n        // <div class=\"#{css.attachmentMetadataContainer}\">\n        //   <span class=\"#{css.attachmentMetadata}\">\n        //     <span class=\"#{css.attachmentName}\" title=\"#{name}\">#{name}</span>\n        //     <span class=\"#{css.attachmentSize}\">#{size}</span>\n        //   </span>\n        // </div>\n        element.appendChild(makeElement({\n          tagName: \"div\",\n          className: css.attachmentMetadataContainer,\n          childNodes: makeElement({\n            tagName: \"span\",\n            className: css.attachmentMetadata,\n            childNodes: [makeElement({\n              tagName: \"span\",\n              className: css.attachmentName,\n              textContent: this.attachment.getFilename(),\n              attributes: {\n                title: this.attachment.getFilename()\n              }\n            }), makeElement({\n              tagName: \"span\",\n              className: css.attachmentSize,\n              textContent: this.attachment.getFormattedFilesize()\n            })]\n          })\n        }));\n      }\n\n      handleEvent(\"click\", {\n        onElement: element,\n        withCallback: this.didClickToolbar\n      });\n      handleEvent(\"click\", {\n        onElement: element,\n        matchingSelector: \"[data-trix-action]\",\n        withCallback: this.didClickActionButton\n      });\n      return {\n        do: () => this.element.appendChild(element),\n        undo: () => removeNode(element)\n      };\n    }));\n\n    _defineProperty(this, \"installCaptionEditor\", undoable(() => {\n      const textarea = makeElement({\n        tagName: \"textarea\",\n        className: css.attachmentCaptionEditor,\n        attributes: {\n          placeholder: lang.captionPlaceholder\n        },\n        data: {\n          trixMutable: true\n        }\n      });\n      textarea.value = this.attachmentPiece.getCaption();\n      const textareaClone = textarea.cloneNode();\n      textareaClone.classList.add(\"trix-autoresize-clone\");\n      textareaClone.tabIndex = -1;\n\n      const autoresize = function () {\n        textareaClone.value = textarea.value;\n        textarea.style.height = textareaClone.scrollHeight + \"px\";\n      };\n\n      handleEvent(\"input\", {\n        onElement: textarea,\n        withCallback: autoresize\n      });\n      handleEvent(\"input\", {\n        onElement: textarea,\n        withCallback: this.didInputCaption\n      });\n      handleEvent(\"keydown\", {\n        onElement: textarea,\n        withCallback: this.didKeyDownCaption\n      });\n      handleEvent(\"change\", {\n        onElement: textarea,\n        withCallback: this.didChangeCaption\n      });\n      handleEvent(\"blur\", {\n        onElement: textarea,\n        withCallback: this.didBlurCaption\n      });\n      const figcaption = this.element.querySelector(\"figcaption\");\n      const editingFigcaption = figcaption.cloneNode();\n      return {\n        do: () => {\n          figcaption.style.display = \"none\";\n          editingFigcaption.appendChild(textarea);\n          editingFigcaption.appendChild(textareaClone);\n          editingFigcaption.classList.add(\"\".concat(css.attachmentCaption, \"--editing\"));\n          figcaption.parentElement.insertBefore(editingFigcaption, figcaption);\n          autoresize();\n\n          if (this.options.editCaption) {\n            return defer(() => textarea.focus());\n          }\n        },\n\n        undo() {\n          removeNode(editingFigcaption);\n          figcaption.style.display = null;\n        }\n\n      };\n    }));\n\n    this.didClickToolbar = this.didClickToolbar.bind(this);\n    this.didClickActionButton = this.didClickActionButton.bind(this);\n    this.didKeyDownCaption = this.didKeyDownCaption.bind(this);\n    this.didInputCaption = this.didInputCaption.bind(this);\n    this.didChangeCaption = this.didChangeCaption.bind(this);\n    this.didBlurCaption = this.didBlurCaption.bind(this);\n    this.attachmentPiece = attachmentPiece;\n    this.element = _element;\n    this.container = container;\n    this.options = options;\n    this.attachment = this.attachmentPiece.attachment;\n\n    if (tagName(this.element) === \"a\") {\n      this.element = this.element.firstChild;\n    }\n\n    this.install();\n  }\n\n  install() {\n    this.makeElementMutable();\n    this.addToolbar();\n\n    if (this.attachment.isPreviewable()) {\n      this.installCaptionEditor();\n    }\n  }\n\n  uninstall() {\n    var _this$delegate;\n\n    let undo = this.undos.pop();\n    this.savePendingCaption();\n\n    while (undo) {\n      undo();\n      undo = this.undos.pop();\n    }\n\n    (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : _this$delegate.didUninstallAttachmentEditor(this);\n  } // Private\n\n\n  savePendingCaption() {\n    if (this.pendingCaption) {\n      const caption = this.pendingCaption;\n      this.pendingCaption = null;\n\n      if (caption) {\n        var _this$delegate2, _this$delegate2$attac;\n\n        (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$attac = _this$delegate2.attachmentEditorDidRequestUpdatingAttributesForAttachment) === null || _this$delegate2$attac === void 0 ? void 0 : _this$delegate2$attac.call(_this$delegate2, {\n          caption\n        }, this.attachment);\n      } else {\n        var _this$delegate3, _this$delegate3$attac;\n\n        (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : (_this$delegate3$attac = _this$delegate3.attachmentEditorDidRequestRemovingAttributeForAttachment) === null || _this$delegate3$attac === void 0 ? void 0 : _this$delegate3$attac.call(_this$delegate3, \"caption\", this.attachment);\n      }\n    }\n  } // Installing and uninstalling\n\n\n  // Event handlers\n  didClickToolbar(event) {\n    event.preventDefault();\n    return event.stopPropagation();\n  }\n\n  didClickActionButton(event) {\n    var _this$delegate4;\n\n    const action = event.target.getAttribute(\"data-trix-action\");\n\n    switch (action) {\n      case \"remove\":\n        return (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.attachmentEditorDidRequestRemovalOfAttachment(this.attachment);\n    }\n  }\n\n  didKeyDownCaption(event) {\n    if (keyNames[event.keyCode] === \"return\") {\n      var _this$delegate5, _this$delegate5$attac;\n\n      event.preventDefault();\n      this.savePendingCaption();\n      return (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : (_this$delegate5$attac = _this$delegate5.attachmentEditorDidRequestDeselectingAttachment) === null || _this$delegate5$attac === void 0 ? void 0 : _this$delegate5$attac.call(_this$delegate5, this.attachment);\n    }\n  }\n\n  didInputCaption(event) {\n    this.pendingCaption = event.target.value.replace(/\\s/g, \" \").trim();\n  }\n\n  didChangeCaption(event) {\n    return this.savePendingCaption();\n  }\n\n  didBlurCaption(event) {\n    return this.savePendingCaption();\n  }\n\n}\n\nclass CompositionController extends BasicObject {\n  constructor(element, composition) {\n    super(...arguments);\n    this.didFocus = this.didFocus.bind(this);\n    this.didBlur = this.didBlur.bind(this);\n    this.didClickAttachment = this.didClickAttachment.bind(this);\n    this.element = element;\n    this.composition = composition;\n    this.documentView = new DocumentView(this.composition.document, {\n      element: this.element\n    });\n    handleEvent(\"focus\", {\n      onElement: this.element,\n      withCallback: this.didFocus\n    });\n    handleEvent(\"blur\", {\n      onElement: this.element,\n      withCallback: this.didBlur\n    });\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"a[contenteditable=false]\",\n      preventDefault: true\n    });\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: attachmentSelector,\n      withCallback: this.didClickAttachment\n    });\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"a\".concat(attachmentSelector),\n      preventDefault: true\n    });\n  }\n\n  didFocus(event) {\n    var _this$blurPromise;\n\n    const perform = () => {\n      if (!this.focused) {\n        var _this$delegate, _this$delegate$compos;\n\n        this.focused = true;\n        return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$compos = _this$delegate.compositionControllerDidFocus) === null || _this$delegate$compos === void 0 ? void 0 : _this$delegate$compos.call(_this$delegate);\n      }\n    };\n\n    return ((_this$blurPromise = this.blurPromise) === null || _this$blurPromise === void 0 ? void 0 : _this$blurPromise.then(perform)) || perform();\n  }\n\n  didBlur(event) {\n    this.blurPromise = new Promise(resolve => {\n      return defer(() => {\n        if (!innerElementIsActive(this.element)) {\n          var _this$delegate2, _this$delegate2$compo;\n\n          this.focused = null;\n          (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$compo = _this$delegate2.compositionControllerDidBlur) === null || _this$delegate2$compo === void 0 ? void 0 : _this$delegate2$compo.call(_this$delegate2);\n        }\n\n        this.blurPromise = null;\n        return resolve();\n      });\n    });\n  }\n\n  didClickAttachment(event, target) {\n    var _this$delegate3, _this$delegate3$compo;\n\n    const attachment = this.findAttachmentForElement(target);\n    const editCaption = !!findClosestElementFromNode(event.target, {\n      matchingSelector: \"figcaption\"\n    });\n    return (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : (_this$delegate3$compo = _this$delegate3.compositionControllerDidSelectAttachment) === null || _this$delegate3$compo === void 0 ? void 0 : _this$delegate3$compo.call(_this$delegate3, attachment, {\n      editCaption\n    });\n  }\n\n  getSerializableElement() {\n    if (this.isEditingAttachment()) {\n      return this.documentView.shadowElement;\n    } else {\n      return this.element;\n    }\n  }\n\n  render() {\n    var _this$delegate6, _this$delegate6$compo;\n\n    if (this.revision !== this.composition.revision) {\n      this.documentView.setDocument(this.composition.document);\n      this.documentView.render();\n      this.revision = this.composition.revision;\n    }\n\n    if (this.canSyncDocumentView() && !this.documentView.isSynced()) {\n      var _this$delegate4, _this$delegate4$compo, _this$delegate5, _this$delegate5$compo;\n\n      (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : (_this$delegate4$compo = _this$delegate4.compositionControllerWillSyncDocumentView) === null || _this$delegate4$compo === void 0 ? void 0 : _this$delegate4$compo.call(_this$delegate4);\n      this.documentView.sync();\n      (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : (_this$delegate5$compo = _this$delegate5.compositionControllerDidSyncDocumentView) === null || _this$delegate5$compo === void 0 ? void 0 : _this$delegate5$compo.call(_this$delegate5);\n    }\n\n    return (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : (_this$delegate6$compo = _this$delegate6.compositionControllerDidRender) === null || _this$delegate6$compo === void 0 ? void 0 : _this$delegate6$compo.call(_this$delegate6);\n  }\n\n  rerenderViewForObject(object) {\n    this.invalidateViewForObject(object);\n    return this.render();\n  }\n\n  invalidateViewForObject(object) {\n    return this.documentView.invalidateViewForObject(object);\n  }\n\n  isViewCachingEnabled() {\n    return this.documentView.isViewCachingEnabled();\n  }\n\n  enableViewCaching() {\n    return this.documentView.enableViewCaching();\n  }\n\n  disableViewCaching() {\n    return this.documentView.disableViewCaching();\n  }\n\n  refreshViewCache() {\n    return this.documentView.garbageCollectCachedViews();\n  } // Attachment editor management\n\n\n  isEditingAttachment() {\n    return !!this.attachmentEditor;\n  }\n\n  installAttachmentEditorForAttachment(attachment, options) {\n    var _this$attachmentEdito;\n\n    if (((_this$attachmentEdito = this.attachmentEditor) === null || _this$attachmentEdito === void 0 ? void 0 : _this$attachmentEdito.attachment) === attachment) return;\n    const element = this.documentView.findElementForObject(attachment);\n    if (!element) return;\n    this.uninstallAttachmentEditor();\n    const attachmentPiece = this.composition.document.getAttachmentPieceForAttachment(attachment);\n    this.attachmentEditor = new AttachmentEditorController(attachmentPiece, element, this.element, options);\n    this.attachmentEditor.delegate = this;\n  }\n\n  uninstallAttachmentEditor() {\n    var _this$attachmentEdito2;\n\n    return (_this$attachmentEdito2 = this.attachmentEditor) === null || _this$attachmentEdito2 === void 0 ? void 0 : _this$attachmentEdito2.uninstall();\n  } // Attachment controller delegate\n\n\n  didUninstallAttachmentEditor() {\n    this.attachmentEditor = null;\n    return this.render();\n  }\n\n  attachmentEditorDidRequestUpdatingAttributesForAttachment(attributes, attachment) {\n    var _this$delegate7, _this$delegate7$compo;\n\n    (_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : (_this$delegate7$compo = _this$delegate7.compositionControllerWillUpdateAttachment) === null || _this$delegate7$compo === void 0 ? void 0 : _this$delegate7$compo.call(_this$delegate7, attachment);\n    return this.composition.updateAttributesForAttachment(attributes, attachment);\n  }\n\n  attachmentEditorDidRequestRemovingAttributeForAttachment(attribute, attachment) {\n    var _this$delegate8, _this$delegate8$compo;\n\n    (_this$delegate8 = this.delegate) === null || _this$delegate8 === void 0 ? void 0 : (_this$delegate8$compo = _this$delegate8.compositionControllerWillUpdateAttachment) === null || _this$delegate8$compo === void 0 ? void 0 : _this$delegate8$compo.call(_this$delegate8, attachment);\n    return this.composition.removeAttributeForAttachment(attribute, attachment);\n  }\n\n  attachmentEditorDidRequestRemovalOfAttachment(attachment) {\n    var _this$delegate9, _this$delegate9$compo;\n\n    return (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : (_this$delegate9$compo = _this$delegate9.compositionControllerDidRequestRemovalOfAttachment) === null || _this$delegate9$compo === void 0 ? void 0 : _this$delegate9$compo.call(_this$delegate9, attachment);\n  }\n\n  attachmentEditorDidRequestDeselectingAttachment(attachment) {\n    var _this$delegate10, _this$delegate10$comp;\n\n    return (_this$delegate10 = this.delegate) === null || _this$delegate10 === void 0 ? void 0 : (_this$delegate10$comp = _this$delegate10.compositionControllerDidRequestDeselectingAttachment) === null || _this$delegate10$comp === void 0 ? void 0 : _this$delegate10$comp.call(_this$delegate10, attachment);\n  } // Private\n\n\n  canSyncDocumentView() {\n    return !this.isEditingAttachment();\n  }\n\n  findAttachmentForElement(element) {\n    return this.composition.document.getAttachmentById(parseInt(element.dataset.trixId, 10));\n  }\n\n}\n\nconst attributeButtonSelector = \"[data-trix-attribute]\";\nconst actionButtonSelector = \"[data-trix-action]\";\nconst toolbarButtonSelector = \"\".concat(attributeButtonSelector, \", \").concat(actionButtonSelector);\nconst dialogSelector = \"[data-trix-dialog]\";\nconst activeDialogSelector = \"\".concat(dialogSelector, \"[data-trix-active]\");\nconst dialogButtonSelector = \"\".concat(dialogSelector, \" [data-trix-method]\");\nconst dialogInputSelector = \"\".concat(dialogSelector, \" [data-trix-input]\");\n\nconst getInputForDialog = (element, attributeName) => {\n  if (!attributeName) {\n    attributeName = getAttributeName(element);\n  }\n\n  return element.querySelector(\"[data-trix-input][name='\".concat(attributeName, \"']\"));\n};\n\nconst getActionName = element => element.getAttribute(\"data-trix-action\");\n\nconst getAttributeName = element => {\n  return element.getAttribute(\"data-trix-attribute\") || element.getAttribute(\"data-trix-dialog-attribute\");\n};\n\nconst getDialogName = element => element.getAttribute(\"data-trix-dialog\");\n\nclass ToolbarController extends BasicObject {\n  constructor(element) {\n    super(element);\n    this.didClickActionButton = this.didClickActionButton.bind(this);\n    this.didClickAttributeButton = this.didClickAttributeButton.bind(this);\n    this.didClickDialogButton = this.didClickDialogButton.bind(this);\n    this.didKeyDownDialogInput = this.didKeyDownDialogInput.bind(this);\n    this.element = element;\n    this.attributes = {};\n    this.actions = {};\n    this.resetDialogInputs();\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: actionButtonSelector,\n      withCallback: this.didClickActionButton\n    });\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: attributeButtonSelector,\n      withCallback: this.didClickAttributeButton\n    });\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: toolbarButtonSelector,\n      preventDefault: true\n    });\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: dialogButtonSelector,\n      withCallback: this.didClickDialogButton\n    });\n    handleEvent(\"keydown\", {\n      onElement: this.element,\n      matchingSelector: dialogInputSelector,\n      withCallback: this.didKeyDownDialogInput\n    });\n  } // Event handlers\n\n\n  didClickActionButton(event, element) {\n    var _this$delegate;\n\n    (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : _this$delegate.toolbarDidClickButton();\n    event.preventDefault();\n    const actionName = getActionName(element);\n\n    if (this.getDialog(actionName)) {\n      return this.toggleDialog(actionName);\n    } else {\n      var _this$delegate2;\n\n      return (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : _this$delegate2.toolbarDidInvokeAction(actionName);\n    }\n  }\n\n  didClickAttributeButton(event, element) {\n    var _this$delegate3;\n\n    (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : _this$delegate3.toolbarDidClickButton();\n    event.preventDefault();\n    const attributeName = getAttributeName(element);\n\n    if (this.getDialog(attributeName)) {\n      this.toggleDialog(attributeName);\n    } else {\n      var _this$delegate4;\n\n      (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.toolbarDidToggleAttribute(attributeName);\n    }\n\n    return this.refreshAttributeButtons();\n  }\n\n  didClickDialogButton(event, element) {\n    const dialogElement = findClosestElementFromNode(element, {\n      matchingSelector: dialogSelector\n    });\n    const method = element.getAttribute(\"data-trix-method\");\n    return this[method].call(this, dialogElement);\n  }\n\n  didKeyDownDialogInput(event, element) {\n    if (event.keyCode === 13) {\n      // Enter key\n      event.preventDefault();\n      const attribute = element.getAttribute(\"name\");\n      const dialog = this.getDialog(attribute);\n      this.setAttribute(dialog);\n    }\n\n    if (event.keyCode === 27) {\n      // Escape key\n      event.preventDefault();\n      return this.hideDialog();\n    }\n  } // Action buttons\n\n\n  updateActions(actions) {\n    this.actions = actions;\n    return this.refreshActionButtons();\n  }\n\n  refreshActionButtons() {\n    return this.eachActionButton((element, actionName) => {\n      element.disabled = this.actions[actionName] === false;\n    });\n  }\n\n  eachActionButton(callback) {\n    return Array.from(this.element.querySelectorAll(actionButtonSelector)).map(element => callback(element, getActionName(element)));\n  } // Attribute buttons\n\n\n  updateAttributes(attributes) {\n    this.attributes = attributes;\n    return this.refreshAttributeButtons();\n  }\n\n  refreshAttributeButtons() {\n    return this.eachAttributeButton((element, attributeName) => {\n      element.disabled = this.attributes[attributeName] === false;\n\n      if (this.attributes[attributeName] || this.dialogIsVisible(attributeName)) {\n        element.setAttribute(\"data-trix-active\", \"\");\n        return element.classList.add(\"trix-active\");\n      } else {\n        element.removeAttribute(\"data-trix-active\");\n        return element.classList.remove(\"trix-active\");\n      }\n    });\n  }\n\n  eachAttributeButton(callback) {\n    return Array.from(this.element.querySelectorAll(attributeButtonSelector)).map(element => callback(element, getAttributeName(element)));\n  }\n\n  applyKeyboardCommand(keys) {\n    const keyString = JSON.stringify(keys.sort());\n\n    for (const button of Array.from(this.element.querySelectorAll(\"[data-trix-key]\"))) {\n      const buttonKeys = button.getAttribute(\"data-trix-key\").split(\"+\");\n      const buttonKeyString = JSON.stringify(buttonKeys.sort());\n\n      if (buttonKeyString === keyString) {\n        triggerEvent(\"mousedown\", {\n          onElement: button\n        });\n        return true;\n      }\n    }\n\n    return false;\n  } // Dialogs\n\n\n  dialogIsVisible(dialogName) {\n    const element = this.getDialog(dialogName);\n\n    if (element) {\n      return element.hasAttribute(\"data-trix-active\");\n    }\n  }\n\n  toggleDialog(dialogName) {\n    if (this.dialogIsVisible(dialogName)) {\n      return this.hideDialog();\n    } else {\n      return this.showDialog(dialogName);\n    }\n  }\n\n  showDialog(dialogName) {\n    var _this$delegate5, _this$delegate6;\n\n    this.hideDialog();\n    (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : _this$delegate5.toolbarWillShowDialog();\n    const element = this.getDialog(dialogName);\n    element.setAttribute(\"data-trix-active\", \"\");\n    element.classList.add(\"trix-active\");\n    Array.from(element.querySelectorAll(\"input[disabled]\")).forEach(disabledInput => {\n      disabledInput.removeAttribute(\"disabled\");\n    });\n    const attributeName = getAttributeName(element);\n\n    if (attributeName) {\n      const input = getInputForDialog(element, dialogName);\n\n      if (input) {\n        input.value = this.attributes[attributeName] || \"\";\n        input.select();\n      }\n    }\n\n    return (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : _this$delegate6.toolbarDidShowDialog(dialogName);\n  }\n\n  setAttribute(dialogElement) {\n    const attributeName = getAttributeName(dialogElement);\n    const input = getInputForDialog(dialogElement, attributeName);\n\n    if (input.willValidate && !input.checkValidity()) {\n      input.setAttribute(\"data-trix-validate\", \"\");\n      input.classList.add(\"trix-validate\");\n      return input.focus();\n    } else {\n      var _this$delegate7;\n\n      (_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : _this$delegate7.toolbarDidUpdateAttribute(attributeName, input.value);\n      return this.hideDialog();\n    }\n  }\n\n  removeAttribute(dialogElement) {\n    var _this$delegate8;\n\n    const attributeName = getAttributeName(dialogElement);\n    (_this$delegate8 = this.delegate) === null || _this$delegate8 === void 0 ? void 0 : _this$delegate8.toolbarDidRemoveAttribute(attributeName);\n    return this.hideDialog();\n  }\n\n  hideDialog() {\n    const element = this.element.querySelector(activeDialogSelector);\n\n    if (element) {\n      var _this$delegate9;\n\n      element.removeAttribute(\"data-trix-active\");\n      element.classList.remove(\"trix-active\");\n      this.resetDialogInputs();\n      return (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : _this$delegate9.toolbarDidHideDialog(getDialogName(element));\n    }\n  }\n\n  resetDialogInputs() {\n    Array.from(this.element.querySelectorAll(dialogInputSelector)).forEach(input => {\n      input.setAttribute(\"disabled\", \"disabled\");\n      input.removeAttribute(\"data-trix-validate\");\n      input.classList.remove(\"trix-validate\");\n    });\n  }\n\n  getDialog(dialogName) {\n    return this.element.querySelector(\"[data-trix-dialog=\".concat(dialogName, \"]\"));\n  }\n\n}\n\nconst snapshotsAreEqual = (a, b) => rangesAreEqual(a.selectedRange, b.selectedRange) && a.document.isEqualTo(b.document);\n\nclass EditorController extends Controller {\n  constructor(_ref) {\n    let {\n      editorElement,\n      document,\n      html\n    } = _ref;\n    super(...arguments);\n    this.editorElement = editorElement;\n    this.selectionManager = new SelectionManager(this.editorElement);\n    this.selectionManager.delegate = this;\n    this.composition = new Composition();\n    this.composition.delegate = this;\n    this.attachmentManager = new AttachmentManager(this.composition.getAttachments());\n    this.attachmentManager.delegate = this;\n    this.inputController = config.input.getLevel() === 2 ? new Level2InputController(this.editorElement) : new Level0InputController(this.editorElement);\n    this.inputController.delegate = this;\n    this.inputController.responder = this.composition;\n    this.compositionController = new CompositionController(this.editorElement, this.composition);\n    this.compositionController.delegate = this;\n    this.toolbarController = new ToolbarController(this.editorElement.toolbarElement);\n    this.toolbarController.delegate = this;\n    this.editor = new Editor(this.composition, this.selectionManager, this.editorElement);\n\n    if (document) {\n      this.editor.loadDocument(document);\n    } else {\n      this.editor.loadHTML(html);\n    }\n  }\n\n  registerSelectionManager() {\n    return selectionChangeObserver.registerSelectionManager(this.selectionManager);\n  }\n\n  unregisterSelectionManager() {\n    return selectionChangeObserver.unregisterSelectionManager(this.selectionManager);\n  }\n\n  render() {\n    return this.compositionController.render();\n  }\n\n  reparse() {\n    return this.composition.replaceHTML(this.editorElement.innerHTML);\n  } // Composition delegate\n\n\n  compositionDidChangeDocument(document) {\n    this.notifyEditorElement(\"document-change\");\n\n    if (!this.handlingInput) {\n      return this.render();\n    }\n  }\n\n  compositionDidChangeCurrentAttributes(currentAttributes) {\n    this.currentAttributes = currentAttributes;\n    this.toolbarController.updateAttributes(this.currentAttributes);\n    this.updateCurrentActions();\n    return this.notifyEditorElement(\"attributes-change\", {\n      attributes: this.currentAttributes\n    });\n  }\n\n  compositionDidPerformInsertionAtRange(range) {\n    if (this.pasting) {\n      this.pastedRange = range;\n    }\n  }\n\n  compositionShouldAcceptFile(file) {\n    return this.notifyEditorElement(\"file-accept\", {\n      file\n    });\n  }\n\n  compositionDidAddAttachment(attachment) {\n    const managedAttachment = this.attachmentManager.manageAttachment(attachment);\n    return this.notifyEditorElement(\"attachment-add\", {\n      attachment: managedAttachment\n    });\n  }\n\n  compositionDidEditAttachment(attachment) {\n    this.compositionController.rerenderViewForObject(attachment);\n    const managedAttachment = this.attachmentManager.manageAttachment(attachment);\n    this.notifyEditorElement(\"attachment-edit\", {\n      attachment: managedAttachment\n    });\n    return this.notifyEditorElement(\"change\");\n  }\n\n  compositionDidChangeAttachmentPreviewURL(attachment) {\n    this.compositionController.invalidateViewForObject(attachment);\n    return this.notifyEditorElement(\"change\");\n  }\n\n  compositionDidRemoveAttachment(attachment) {\n    const managedAttachment = this.attachmentManager.unmanageAttachment(attachment);\n    return this.notifyEditorElement(\"attachment-remove\", {\n      attachment: managedAttachment\n    });\n  }\n\n  compositionDidStartEditingAttachment(attachment, options) {\n    this.attachmentLocationRange = this.composition.document.getLocationRangeOfAttachment(attachment);\n    this.compositionController.installAttachmentEditorForAttachment(attachment, options);\n    return this.selectionManager.setLocationRange(this.attachmentLocationRange);\n  }\n\n  compositionDidStopEditingAttachment(attachment) {\n    this.compositionController.uninstallAttachmentEditor();\n    this.attachmentLocationRange = null;\n  }\n\n  compositionDidRequestChangingSelectionToLocationRange(locationRange) {\n    if (this.loadingSnapshot && !this.isFocused()) return;\n    this.requestedLocationRange = locationRange;\n    this.compositionRevisionWhenLocationRangeRequested = this.composition.revision;\n\n    if (!this.handlingInput) {\n      return this.render();\n    }\n  }\n\n  compositionWillLoadSnapshot() {\n    this.loadingSnapshot = true;\n  }\n\n  compositionDidLoadSnapshot() {\n    this.compositionController.refreshViewCache();\n    this.render();\n    this.loadingSnapshot = false;\n  }\n\n  getSelectionManager() {\n    return this.selectionManager;\n  } // Attachment manager delegate\n\n\n  attachmentManagerDidRequestRemovalOfAttachment(attachment) {\n    return this.removeAttachment(attachment);\n  } // Document controller delegate\n\n\n  compositionControllerWillSyncDocumentView() {\n    this.inputController.editorWillSyncDocumentView();\n    this.selectionManager.lock();\n    return this.selectionManager.clearSelection();\n  }\n\n  compositionControllerDidSyncDocumentView() {\n    this.inputController.editorDidSyncDocumentView();\n    this.selectionManager.unlock();\n    this.updateCurrentActions();\n    return this.notifyEditorElement(\"sync\");\n  }\n\n  compositionControllerDidRender() {\n    if (this.requestedLocationRange) {\n      if (this.compositionRevisionWhenLocationRangeRequested === this.composition.revision) {\n        this.selectionManager.setLocationRange(this.requestedLocationRange);\n      }\n\n      this.requestedLocationRange = null;\n      this.compositionRevisionWhenLocationRangeRequested = null;\n    }\n\n    if (this.renderedCompositionRevision !== this.composition.revision) {\n      this.runEditorFilters();\n      this.composition.updateCurrentAttributes();\n      this.notifyEditorElement(\"render\");\n    }\n\n    this.renderedCompositionRevision = this.composition.revision;\n  }\n\n  compositionControllerDidFocus() {\n    if (this.isFocusedInvisibly()) {\n      this.setLocationRange({\n        index: 0,\n        offset: 0\n      });\n    }\n\n    this.toolbarController.hideDialog();\n    return this.notifyEditorElement(\"focus\");\n  }\n\n  compositionControllerDidBlur() {\n    return this.notifyEditorElement(\"blur\");\n  }\n\n  compositionControllerDidSelectAttachment(attachment, options) {\n    this.toolbarController.hideDialog();\n    return this.composition.editAttachment(attachment, options);\n  }\n\n  compositionControllerDidRequestDeselectingAttachment(attachment) {\n    const locationRange = this.attachmentLocationRange || this.composition.document.getLocationRangeOfAttachment(attachment);\n    return this.selectionManager.setLocationRange(locationRange[1]);\n  }\n\n  compositionControllerWillUpdateAttachment(attachment) {\n    return this.editor.recordUndoEntry(\"Edit Attachment\", {\n      context: attachment.id,\n      consolidatable: true\n    });\n  }\n\n  compositionControllerDidRequestRemovalOfAttachment(attachment) {\n    return this.removeAttachment(attachment);\n  } // Input controller delegate\n\n\n  inputControllerWillHandleInput() {\n    this.handlingInput = true;\n    this.requestedRender = false;\n  }\n\n  inputControllerDidRequestRender() {\n    this.requestedRender = true;\n  }\n\n  inputControllerDidHandleInput() {\n    this.handlingInput = false;\n\n    if (this.requestedRender) {\n      this.requestedRender = false;\n      return this.render();\n    }\n  }\n\n  inputControllerDidAllowUnhandledInput() {\n    return this.notifyEditorElement(\"change\");\n  }\n\n  inputControllerDidRequestReparse() {\n    return this.reparse();\n  }\n\n  inputControllerWillPerformTyping() {\n    return this.recordTypingUndoEntry();\n  }\n\n  inputControllerWillPerformFormatting(attributeName) {\n    return this.recordFormattingUndoEntry(attributeName);\n  }\n\n  inputControllerWillCutText() {\n    return this.editor.recordUndoEntry(\"Cut\");\n  }\n\n  inputControllerWillPaste(paste) {\n    this.editor.recordUndoEntry(\"Paste\");\n    this.pasting = true;\n    return this.notifyEditorElement(\"before-paste\", {\n      paste\n    });\n  }\n\n  inputControllerDidPaste(paste) {\n    paste.range = this.pastedRange;\n    this.pastedRange = null;\n    this.pasting = null;\n    return this.notifyEditorElement(\"paste\", {\n      paste\n    });\n  }\n\n  inputControllerWillMoveText() {\n    return this.editor.recordUndoEntry(\"Move\");\n  }\n\n  inputControllerWillAttachFiles() {\n    return this.editor.recordUndoEntry(\"Drop Files\");\n  }\n\n  inputControllerWillPerformUndo() {\n    return this.editor.undo();\n  }\n\n  inputControllerWillPerformRedo() {\n    return this.editor.redo();\n  }\n\n  inputControllerDidReceiveKeyboardCommand(keys) {\n    return this.toolbarController.applyKeyboardCommand(keys);\n  }\n\n  inputControllerDidStartDrag() {\n    this.locationRangeBeforeDrag = this.selectionManager.getLocationRange();\n  }\n\n  inputControllerDidReceiveDragOverPoint(point) {\n    return this.selectionManager.setLocationRangeFromPointRange(point);\n  }\n\n  inputControllerDidCancelDrag() {\n    this.selectionManager.setLocationRange(this.locationRangeBeforeDrag);\n    this.locationRangeBeforeDrag = null;\n  } // Selection manager delegate\n\n\n  locationRangeDidChange(locationRange) {\n    this.composition.updateCurrentAttributes();\n    this.updateCurrentActions();\n\n    if (this.attachmentLocationRange && !rangesAreEqual(this.attachmentLocationRange, locationRange)) {\n      this.composition.stopEditingAttachment();\n    }\n\n    return this.notifyEditorElement(\"selection-change\");\n  } // Toolbar controller delegate\n\n\n  toolbarDidClickButton() {\n    if (!this.getLocationRange()) {\n      return this.setLocationRange({\n        index: 0,\n        offset: 0\n      });\n    }\n  }\n\n  toolbarDidInvokeAction(actionName) {\n    return this.invokeAction(actionName);\n  }\n\n  toolbarDidToggleAttribute(attributeName) {\n    this.recordFormattingUndoEntry(attributeName);\n    this.composition.toggleCurrentAttribute(attributeName);\n    this.render();\n\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus();\n    }\n  }\n\n  toolbarDidUpdateAttribute(attributeName, value) {\n    this.recordFormattingUndoEntry(attributeName);\n    this.composition.setCurrentAttribute(attributeName, value);\n    this.render();\n\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus();\n    }\n  }\n\n  toolbarDidRemoveAttribute(attributeName) {\n    this.recordFormattingUndoEntry(attributeName);\n    this.composition.removeCurrentAttribute(attributeName);\n    this.render();\n\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus();\n    }\n  }\n\n  toolbarWillShowDialog(dialogElement) {\n    this.composition.expandSelectionForEditing();\n    return this.freezeSelection();\n  }\n\n  toolbarDidShowDialog(dialogName) {\n    return this.notifyEditorElement(\"toolbar-dialog-show\", {\n      dialogName\n    });\n  }\n\n  toolbarDidHideDialog(dialogName) {\n    this.thawSelection();\n    this.editorElement.focus();\n    return this.notifyEditorElement(\"toolbar-dialog-hide\", {\n      dialogName\n    });\n  } // Selection\n\n\n  freezeSelection() {\n    if (!this.selectionFrozen) {\n      this.selectionManager.lock();\n      this.composition.freezeSelection();\n      this.selectionFrozen = true;\n      return this.render();\n    }\n  }\n\n  thawSelection() {\n    if (this.selectionFrozen) {\n      this.composition.thawSelection();\n      this.selectionManager.unlock();\n      this.selectionFrozen = false;\n      return this.render();\n    }\n  }\n\n  canInvokeAction(actionName) {\n    if (this.actionIsExternal(actionName)) {\n      return true;\n    } else {\n      var _this$actions$actionN, _this$actions$actionN2;\n\n      return !!((_this$actions$actionN = this.actions[actionName]) !== null && _this$actions$actionN !== void 0 && (_this$actions$actionN2 = _this$actions$actionN.test) !== null && _this$actions$actionN2 !== void 0 && _this$actions$actionN2.call(this));\n    }\n  }\n\n  invokeAction(actionName) {\n    if (this.actionIsExternal(actionName)) {\n      return this.notifyEditorElement(\"action-invoke\", {\n        actionName\n      });\n    } else {\n      var _this$actions$actionN3, _this$actions$actionN4;\n\n      return (_this$actions$actionN3 = this.actions[actionName]) === null || _this$actions$actionN3 === void 0 ? void 0 : (_this$actions$actionN4 = _this$actions$actionN3.perform) === null || _this$actions$actionN4 === void 0 ? void 0 : _this$actions$actionN4.call(this);\n    }\n  }\n\n  actionIsExternal(actionName) {\n    return /^x-./.test(actionName);\n  }\n\n  getCurrentActions() {\n    const result = {};\n\n    for (const actionName in this.actions) {\n      result[actionName] = this.canInvokeAction(actionName);\n    }\n\n    return result;\n  }\n\n  updateCurrentActions() {\n    const currentActions = this.getCurrentActions();\n\n    if (!objectsAreEqual(currentActions, this.currentActions)) {\n      this.currentActions = currentActions;\n      this.toolbarController.updateActions(this.currentActions);\n      return this.notifyEditorElement(\"actions-change\", {\n        actions: this.currentActions\n      });\n    }\n  } // Editor filters\n\n\n  runEditorFilters() {\n    let snapshot = this.composition.getSnapshot();\n    Array.from(this.editor.filters).forEach(filter => {\n      const {\n        document,\n        selectedRange\n      } = snapshot;\n      snapshot = filter.call(this.editor, snapshot) || {};\n\n      if (!snapshot.document) {\n        snapshot.document = document;\n      }\n\n      if (!snapshot.selectedRange) {\n        snapshot.selectedRange = selectedRange;\n      }\n    });\n\n    if (!snapshotsAreEqual(snapshot, this.composition.getSnapshot())) {\n      return this.composition.loadSnapshot(snapshot);\n    }\n  } // Private\n\n\n  updateInputElement() {\n    const element = this.compositionController.getSerializableElement();\n    const value = serializeToContentType(element, \"text/html\");\n    return this.editorElement.setInputElementValue(value);\n  }\n\n  notifyEditorElement(message, data) {\n    switch (message) {\n      case \"document-change\":\n        this.documentChangedSinceLastRender = true;\n        break;\n\n      case \"render\":\n        if (this.documentChangedSinceLastRender) {\n          this.documentChangedSinceLastRender = false;\n          this.notifyEditorElement(\"change\");\n        }\n\n        break;\n\n      case \"change\":\n      case \"attachment-add\":\n      case \"attachment-edit\":\n      case \"attachment-remove\":\n        this.updateInputElement();\n        break;\n    }\n\n    return this.editorElement.notify(message, data);\n  }\n\n  removeAttachment(attachment) {\n    this.editor.recordUndoEntry(\"Delete Attachment\");\n    this.composition.removeAttachment(attachment);\n    return this.render();\n  }\n\n  recordFormattingUndoEntry(attributeName) {\n    const blockConfig = getBlockConfig(attributeName);\n    const locationRange = this.selectionManager.getLocationRange();\n\n    if (blockConfig || !rangeIsCollapsed(locationRange)) {\n      return this.editor.recordUndoEntry(\"Formatting\", {\n        context: this.getUndoContext(),\n        consolidatable: true\n      });\n    }\n  }\n\n  recordTypingUndoEntry() {\n    return this.editor.recordUndoEntry(\"Typing\", {\n      context: this.getUndoContext(this.currentAttributes),\n      consolidatable: true\n    });\n  }\n\n  getUndoContext() {\n    for (var _len = arguments.length, context = new Array(_len), _key = 0; _key < _len; _key++) {\n      context[_key] = arguments[_key];\n    }\n\n    return [this.getLocationContext(), this.getTimeContext(), ...Array.from(context)];\n  }\n\n  getLocationContext() {\n    const locationRange = this.selectionManager.getLocationRange();\n\n    if (rangeIsCollapsed(locationRange)) {\n      return locationRange[0].index;\n    } else {\n      return locationRange;\n    }\n  }\n\n  getTimeContext() {\n    if (config.undoInterval > 0) {\n      return Math.floor(new Date().getTime() / config.undoInterval);\n    } else {\n      return 0;\n    }\n  }\n\n  isFocused() {\n    var _this$editorElement$o;\n\n    return this.editorElement === ((_this$editorElement$o = this.editorElement.ownerDocument) === null || _this$editorElement$o === void 0 ? void 0 : _this$editorElement$o.activeElement);\n  } // Detect \"Cursor disappears sporadically\" Firefox bug.\n  // - https://bugzilla.mozilla.org/show_bug.cgi?id=226301\n\n\n  isFocusedInvisibly() {\n    return this.isFocused() && !this.getLocationRange();\n  }\n\n  get actions() {\n    return this.constructor.actions;\n  }\n\n}\n\n_defineProperty(EditorController, \"actions\", {\n  undo: {\n    test() {\n      return this.editor.canUndo();\n    },\n\n    perform() {\n      return this.editor.undo();\n    }\n\n  },\n  redo: {\n    test() {\n      return this.editor.canRedo();\n    },\n\n    perform() {\n      return this.editor.redo();\n    }\n\n  },\n  link: {\n    test() {\n      return this.editor.canActivateAttribute(\"href\");\n    }\n\n  },\n  increaseNestingLevel: {\n    test() {\n      return this.editor.canIncreaseNestingLevel();\n    },\n\n    perform() {\n      return this.editor.increaseNestingLevel() && this.render();\n    }\n\n  },\n  decreaseNestingLevel: {\n    test() {\n      return this.editor.canDecreaseNestingLevel();\n    },\n\n    perform() {\n      return this.editor.decreaseNestingLevel() && this.render();\n    }\n\n  },\n  attachFiles: {\n    test() {\n      return true;\n    },\n\n    perform() {\n      return config.input.pickFiles(this.editor.insertFiles);\n    }\n\n  }\n});\n\nEditorController.proxyMethod(\"getSelectionManager().setLocationRange\");\nEditorController.proxyMethod(\"getSelectionManager().getLocationRange\");\n\ninstallDefaultCSSForTagName(\"trix-toolbar\", \"%t {\\n  display: block;\\n}\\n\\n%t {\\n  white-space: nowrap;\\n}\\n\\n%t [data-trix-dialog] {\\n  display: none;\\n}\\n\\n%t [data-trix-dialog][data-trix-active] {\\n  display: block;\\n}\\n\\n%t [data-trix-dialog] [data-trix-validate]:invalid {\\n  background-color: #ffdddd;\\n}\");\nclass TrixToolbarElement extends HTMLElement {\n  // Element lifecycle\n  connectedCallback() {\n    if (this.innerHTML === \"\") {\n      this.innerHTML = config.toolbar.getDefaultHTML();\n    }\n  }\n\n}\nwindow.customElements.define(\"trix-toolbar\", TrixToolbarElement);\n\nlet id = 0; // Contenteditable support helpers\n\nconst autofocus = function (element) {\n  if (!document.querySelector(\":focus\")) {\n    if (element.hasAttribute(\"autofocus\") && document.querySelector(\"[autofocus]\") === element) {\n      return element.focus();\n    }\n  }\n};\n\nconst makeEditable = function (element) {\n  if (element.hasAttribute(\"contenteditable\")) {\n    return;\n  }\n\n  element.setAttribute(\"contenteditable\", \"\");\n  return handleEventOnce(\"focus\", {\n    onElement: element,\n\n    withCallback() {\n      return configureContentEditable(element);\n    }\n\n  });\n};\n\nconst configureContentEditable = function (element) {\n  disableObjectResizing(element);\n  return setDefaultParagraphSeparator(element);\n};\n\nconst disableObjectResizing = function (element) {\n  var _document$queryComman, _document;\n\n  if ((_document$queryComman = (_document = document).queryCommandSupported) !== null && _document$queryComman !== void 0 && _document$queryComman.call(_document, \"enableObjectResizing\")) {\n    document.execCommand(\"enableObjectResizing\", false, false);\n    return handleEvent(\"mscontrolselect\", {\n      onElement: element,\n      preventDefault: true\n    });\n  }\n};\n\nconst setDefaultParagraphSeparator = function (element) {\n  var _document$queryComman2, _document2;\n\n  if ((_document$queryComman2 = (_document2 = document).queryCommandSupported) !== null && _document$queryComman2 !== void 0 && _document$queryComman2.call(_document2, \"DefaultParagraphSeparator\")) {\n    const {\n      tagName\n    } = config.blockAttributes.default;\n\n    if ([\"div\", \"p\"].includes(tagName)) {\n      return document.execCommand(\"DefaultParagraphSeparator\", false, tagName);\n    }\n  }\n}; // Accessibility helpers\n\n\nconst addAccessibilityRole = function (element) {\n  if (element.hasAttribute(\"role\")) {\n    return;\n  }\n\n  return element.setAttribute(\"role\", \"textbox\");\n};\n\nconst ensureAriaLabel = function (element) {\n  if (element.hasAttribute(\"aria-label\") || element.hasAttribute(\"aria-labelledby\")) {\n    return;\n  }\n\n  const update = function () {\n    const texts = Array.from(element.labels).map(label => {\n      if (!label.contains(element)) return label.textContent;\n    }).filter(text => text);\n    const text = texts.join(\" \");\n\n    if (text) {\n      return element.setAttribute(\"aria-label\", text);\n    } else {\n      return element.removeAttribute(\"aria-label\");\n    }\n  };\n\n  update();\n  return handleEvent(\"focus\", {\n    onElement: element,\n    withCallback: update\n  });\n}; // Style\n\n\nconst cursorTargetStyles = function () {\n  if (config.browser.forcesObjectResizing) {\n    return {\n      display: \"inline\",\n      width: \"auto\"\n    };\n  } else {\n    return {\n      display: \"inline-block\",\n      width: \"1px\"\n    };\n  }\n}();\n\ninstallDefaultCSSForTagName(\"trix-editor\", \"%t {\\n    display: block;\\n}\\n\\n%t:empty:not(:focus)::before {\\n    content: attr(placeholder);\\n    color: graytext;\\n    cursor: text;\\n    pointer-events: none;\\n    white-space: pre-line;\\n}\\n\\n%t a[contenteditable=false] {\\n    cursor: text;\\n}\\n\\n%t img {\\n    max-width: 100%;\\n    height: auto;\\n}\\n\\n%t \".concat(attachmentSelector, \" figcaption textarea {\\n    resize: none;\\n}\\n\\n%t \").concat(attachmentSelector, \" figcaption textarea.trix-autoresize-clone {\\n    position: absolute;\\n    left: -9999px;\\n    max-height: 0px;\\n}\\n\\n%t \").concat(attachmentSelector, \" figcaption[data-trix-placeholder]:empty::before {\\n    content: attr(data-trix-placeholder);\\n    color: graytext;\\n}\\n\\n%t [data-trix-cursor-target] {\\n    display: \").concat(cursorTargetStyles.display, \" !important;\\n    width: \").concat(cursorTargetStyles.width, \" !important;\\n    padding: 0 !important;\\n    margin: 0 !important;\\n    border: none !important;\\n}\\n\\n%t [data-trix-cursor-target=left] {\\n    vertical-align: top !important;\\n    margin-left: -1px !important;\\n}\\n\\n%t [data-trix-cursor-target=right] {\\n    vertical-align: bottom !important;\\n    margin-right: -1px !important;\\n}\"));\nclass TrixEditorElement extends HTMLElement {\n  // Properties\n  get trixId() {\n    if (this.hasAttribute(\"trix-id\")) {\n      return this.getAttribute(\"trix-id\");\n    } else {\n      this.setAttribute(\"trix-id\", ++id);\n      return this.trixId;\n    }\n  }\n\n  get labels() {\n    const labels = [];\n\n    if (this.id && this.ownerDocument) {\n      labels.push(...Array.from(this.ownerDocument.querySelectorAll(\"label[for='\".concat(this.id, \"']\")) || []));\n    }\n\n    const label = findClosestElementFromNode(this, {\n      matchingSelector: \"label\"\n    });\n\n    if (label) {\n      if ([this, null].includes(label.control)) {\n        labels.push(label);\n      }\n    }\n\n    return labels;\n  }\n\n  get toolbarElement() {\n    if (this.hasAttribute(\"toolbar\")) {\n      var _this$ownerDocument;\n\n      return (_this$ownerDocument = this.ownerDocument) === null || _this$ownerDocument === void 0 ? void 0 : _this$ownerDocument.getElementById(this.getAttribute(\"toolbar\"));\n    } else if (this.parentNode) {\n      const toolbarId = \"trix-toolbar-\".concat(this.trixId);\n      this.setAttribute(\"toolbar\", toolbarId);\n      const element = makeElement(\"trix-toolbar\", {\n        id: toolbarId\n      });\n      this.parentNode.insertBefore(element, this);\n      return element;\n    } else {\n      return undefined;\n    }\n  }\n\n  get form() {\n    var _this$inputElement;\n\n    return (_this$inputElement = this.inputElement) === null || _this$inputElement === void 0 ? void 0 : _this$inputElement.form;\n  }\n\n  get inputElement() {\n    if (this.hasAttribute(\"input\")) {\n      var _this$ownerDocument2;\n\n      return (_this$ownerDocument2 = this.ownerDocument) === null || _this$ownerDocument2 === void 0 ? void 0 : _this$ownerDocument2.getElementById(this.getAttribute(\"input\"));\n    } else if (this.parentNode) {\n      const inputId = \"trix-input-\".concat(this.trixId);\n      this.setAttribute(\"input\", inputId);\n      const element = makeElement(\"input\", {\n        type: \"hidden\",\n        id: inputId\n      });\n      this.parentNode.insertBefore(element, this.nextElementSibling);\n      return element;\n    } else {\n      return undefined;\n    }\n  }\n\n  get editor() {\n    var _this$editorControlle;\n\n    return (_this$editorControlle = this.editorController) === null || _this$editorControlle === void 0 ? void 0 : _this$editorControlle.editor;\n  }\n\n  get name() {\n    var _this$inputElement2;\n\n    return (_this$inputElement2 = this.inputElement) === null || _this$inputElement2 === void 0 ? void 0 : _this$inputElement2.name;\n  }\n\n  get value() {\n    var _this$inputElement3;\n\n    return (_this$inputElement3 = this.inputElement) === null || _this$inputElement3 === void 0 ? void 0 : _this$inputElement3.value;\n  }\n\n  set value(defaultValue) {\n    var _this$editor;\n\n    this.defaultValue = defaultValue;\n    (_this$editor = this.editor) === null || _this$editor === void 0 ? void 0 : _this$editor.loadHTML(this.defaultValue);\n  } // Controller delegate methods\n\n\n  notify(message, data) {\n    if (this.editorController) {\n      return triggerEvent(\"trix-\".concat(message), {\n        onElement: this,\n        attributes: data\n      });\n    }\n  }\n\n  setInputElementValue(value) {\n    if (this.inputElement) {\n      this.inputElement.value = value;\n    }\n  } // Element lifecycle\n\n\n  connectedCallback() {\n    if (!this.hasAttribute(\"data-trix-internal\")) {\n      makeEditable(this);\n      addAccessibilityRole(this);\n      ensureAriaLabel(this);\n\n      if (!this.editorController) {\n        triggerEvent(\"trix-before-initialize\", {\n          onElement: this\n        });\n        this.editorController = new EditorController({\n          editorElement: this,\n          html: this.defaultValue = this.value\n        });\n        requestAnimationFrame(() => triggerEvent(\"trix-initialize\", {\n          onElement: this\n        }));\n      }\n\n      this.editorController.registerSelectionManager();\n      this.registerResetListener();\n      this.registerClickListener();\n      autofocus(this);\n    }\n  }\n\n  disconnectedCallback() {\n    var _this$editorControlle2;\n\n    (_this$editorControlle2 = this.editorController) === null || _this$editorControlle2 === void 0 ? void 0 : _this$editorControlle2.unregisterSelectionManager();\n    this.unregisterResetListener();\n    return this.unregisterClickListener();\n  } // Form support\n\n\n  registerResetListener() {\n    this.resetListener = this.resetBubbled.bind(this);\n    return window.addEventListener(\"reset\", this.resetListener, false);\n  }\n\n  unregisterResetListener() {\n    return window.removeEventListener(\"reset\", this.resetListener, false);\n  }\n\n  registerClickListener() {\n    this.clickListener = this.clickBubbled.bind(this);\n    return window.addEventListener(\"click\", this.clickListener, false);\n  }\n\n  unregisterClickListener() {\n    return window.removeEventListener(\"click\", this.clickListener, false);\n  }\n\n  resetBubbled(event) {\n    if (event.defaultPrevented) return;\n    if (event.target !== this.form) return;\n    return this.reset();\n  }\n\n  clickBubbled(event) {\n    if (event.defaultPrevented) return;\n    if (this.contains(event.target)) return;\n    const label = findClosestElementFromNode(event.target, {\n      matchingSelector: \"label\"\n    });\n    if (!label) return;\n    if (!Array.from(this.labels).includes(label)) return;\n    return this.focus();\n  }\n\n  reset() {\n    this.value = this.defaultValue;\n  }\n\n}\nwindow.customElements.define(\"trix-editor\", TrixEditorElement);\n\nexport { Trix as default };\n","<template>\r\n  <div class=\"wysiwyg\">\r\n    <input :id=\"inputId\" type=\"hidden\" :name=\"name\" :value=\"value\" ref=\"input\">\r\n\r\n    <trix-editor ref=\"trix\" :input=\"inputId\"></trix-editor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport Trix from 'trix'\r\n\r\nVue.config.ignoredElements = ['trix-editor']\r\n\r\nlet { lang } = Trix.config\r\n\r\nTrix.config.toolbar = {\r\n  getDefaultHTML: () => `\r\n    <div class=\"trix-button-row\">\r\n      <span class=\"trix-button-group trix-button-group--text-tools\" data-trix-button-group=\"text-tools\">\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bold\" data-trix-attribute=\"bold\" data-trix-key=\"b\" title=\"${lang.bold}\" tabindex=\"-1\">${lang.bold}</button>\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-italic\" data-trix-attribute=\"italic\" data-trix-key=\"i\" title=\"${lang.italic}\" tabindex=\"-1\">${lang.italic}</button>\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-strike\" data-trix-attribute=\"strike\" title=\"#{lang.strike}\" tabindex=\"-1\">${lang.strike}</button>\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-link\" data-trix-attribute=\"href\" data-trix-action=\"link\" data-trix-key=\"k\" title=\"${lang.link}\" tabindex=\"-1\">${lang.link}</button>\r\n      </span>\r\n      <span class=\"trix-button-group trix-button-group--history-tools\" data-trix-button-group=\"history-tools\">\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-undo\" data-trix-action=\"undo\" data-trix-key=\"z\" title=\"${lang.undo}\" tabindex=\"-1\">${lang.undo}</button>\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-redo\" data-trix-action=\"redo\" data-trix-key=\"shift+z\" title=\"${lang.redo}\" tabindex=\"-1\">${lang.redo}</button>\r\n      </span>\r\n    </div>\r\n    <div class=\"trix-dialogs\" data-trix-dialogs>\r\n      <div class=\"trix-dialog trix-dialog--link\" data-trix-dialog=\"href\" data-trix-dialog-attribute=\"href\">\r\n        <div class=\"trix-dialog__link-fields\">\r\n          <input type=\"url\" name=\"href\" class=\"trix-input trix-input--dialog\" placeholder=\"${lang.urlPlaceholder}\" required data-trix-input>\r\n          <div class=\"trix-button-group\">\r\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.link}\" data-trix-method=\"setAttribute\">\r\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.unlink}\" data-trix-method=\"removeAttribute\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `\r\n}\r\n\r\nfunction makeid() {\r\n  let text = \"\"\r\n  const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"\r\n\r\n  for (let i = 0; i < 5; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length))\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\nexport default {\r\n  name: 'nzWysiwyg',\r\n\r\n  props: {\r\n    name: String,\r\n    value: String\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      inputId: makeid()\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.$refs.trix.addEventListener('trix-change', this.onInput)\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.$refs.trix.removeEventListener('trix-change', this.onInput)\r\n  },\r\n\r\n  methods: {\r\n    onInput(e) {\r\n      this.$emit('input', e.target.innerHTML)\r\n    },\r\n\r\n    focus() {\r\n      this.$refs.trix.focus()\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wysiwyg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wysiwyg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Wysiwyg.vue?vue&type=template&id=95efe7ba&\"\nimport script from \"./Wysiwyg.vue?vue&type=script&lang=js&\"\nexport * from \"./Wysiwyg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","Errors","errors","arguments","undefined","this","record","field","hasError","hasOwnProperty","keys","filter","e","startsWith","get","_this","forEach","assign","obj","_typeof","Symbol","iterator","constructor","_Errors","_Errors2","__esModule","default","_util","Form","data","options","processing","successful","withData","withOptions","withErrors","isArray","reduce","carry","element","setInitialValues","guardAgainstReservedFieldName","__options","resetOnSuccess","onSuccess","onFail","windowAxios","window","axios","__http","http","Error","property","initial","fields","filtered","merge","clear","values","_this2","_defineProperty","url","submit","requestType","_this3","__validateRequestType","Promise","resolve","reject","hasFiles","objectToFormData","then","response","catch","error","hasFilesDeep","object","Array","_key","isFile","reset","has","first","requestTypes","indexOf","join","_Form","_interopRequireDefault","fieldName","reservedFieldNames","formData","FormData","parent","append","appendToFormData","getKey","Date","toISOString","File","name","_objects","_formData","_fieldNameValidation","FileList","cloneDeep","clone","_clone","toString","call","a","b","castPath","toKey","module","path","index","isKey","stringToPath","isSymbol","reIsDeepProp","reIsPlainProp","type","test","memoize","func","result","cache","size","memoizeCapped","rePropName","reEscapeChar","string","charCodeAt","push","replace","match","number","quote","subString","baseGet","defaultValue","array","MapCache","resolver","memoized","args","apply","set","Cache","defaultTranslations","_keys","components","NzWysiwyg","action","method","types","announcement","title","message","redirectUrl","cancelUrl","form","computed","supportedLocales","isEdit","methods","onSuccessfulSubmit","setTimeout","onFailedSubmit","duration","newForm","focusOnTranslation","attribute","_first","_vm","_c","_self","staticClass","on","$event","preventDefault","attrs","trans","_l","locale","ref","refInFor","model","callback","$$v","$set","expression","_v","_s","version","attachmentSelector","attributes","tagName","parse","nestable","heading1","terminal","breakOnReturn","group","code","text","plaintext","bulletList","bullet","listAttribute","tagName$1","parentNode","numberList","attachmentGallery","exclusive","_element$tagName","toLowerCase","browser$1","composesExistingText","navigator","userAgent","forcesObjectResizing","supportsInputEvents","InputEvent","lang$1","attachFiles","bold","bullets","byte","bytes","captionPlaceholder","indent","italic","link","numbers","outdent","redo","remove","strike","undo","unlink","urlPlaceholder","GB","KB","MB","PB","TB","sizes","fileSize","prefix","precision","formatter","concat","base","exp","Math","floor","log","withoutInsignificantZeros","pow","toFixed","ZERO_WIDTH_SPACE","NON_BREAKING_SPACE","extend","properties","html","document","documentElement","matches","handleEvent","eventName","onElement","matchingSelector","withCallback","inPhase","times","selector","useCapture","handler","event","destroy","findClosestElementFromNode","removeEventListener","addEventListener","triggerEvent","bubbles","cancelable","createEvent","initEvent","dispatchEvent","elementMatchesSelector","nodeType","node","untilNode","Node","ELEMENT_NODE","closest","innerElementIsActive","activeElement","elementContainsNode","findChildIndexOfNode","_node","childIndex","previousSibling","removeNode","_node$parentNode","removeChild","walkTree","tree","onlyNodesOfType","usingFilter","expandEntityReferences","whatToShow","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","SHOW_COMMENT","SHOW_ALL","createTreeWalker","makeElement","tag","createElement","editable","contenteditable","setAttribute","style","dataset","className","split","classList","add","textContent","childNodes","childNode","appendChild","blockTagNames","getBlockTagNames","attributes$1","nodeIsBlockContainer","nodeIsBlockStartComment","firstChild","nodeProbablyIsBlockContainer","includes","nodeIsBlockStart","strict","nodeIsCommentNode","COMMENT_NODE","nodeIsCursorTarget","nodeIsTextNode","trixCursorTarget","nodeIsAttachmentElement","nodeIsEmptyTextNode","TEXT_NODE","textAttributes","inheritable","parser","getComputedStyle","fontWeight","fontStyle","href","groupTagName","getAttribute","frozen","backgroundColor","config","attachments","preview","presentation","caption","file","blockAttributes","browser","css","attachment","attachmentCaption","attachmentCaptionEditor","attachmentMetadata","attachmentMetadataContainer","attachmentName","attachmentProgress","attachmentSize","attachmentToolbar","input","level2Enabled","getLevel","pickFiles","multiple","hidden","id","fileInputId","files","getElementById","body","click","keyNames","lang","toolbar","getDefaultHTML","undoInterval","_AwaitValue","wrapped","_AsyncGenerator","gen","front","back","resume","arg","wrappedAwait","settle","done","err","next","_invoke","request","return","asyncIterator","throw","BasicObject","static","toMethod","toProperty","optional","parseProxyMethodExpression","subject","_this$toMethod","_object","proxyMethodExpressionPattern","Function","RegExp","_Array$from","_$codePointAt$1","_String$fromCodePoint","UTF16String","fromUCS2String","ucs2String","ucs2decode","codepoints","ucs2encode","super","ucs2Length","offsetToUCS2Offset","offset","slice","max","offsetFromUCS2Offset","ucs2Offset","fromCodepoints","charAt","isEqualTo","box","toJSON","getCacheKey","hasArrayFrom","from","hasStringCodePointAt$1","codePointAt","hasStringFromCodePoint","String","fromCodePoint","map","char","output","counter","extra","fromCharCode","id$1","TrixObject","jsonString","fromJSON","JSON","hasSameConstructorAs","inspect","parts","contents","contentsForInspection","toJSONString","stringify","toUTF16String","arraysAreEqual","spliceArray","_len","splice","RTL_PATTERN","getDirection","dir","dirName","supportsDirName","supportsDirSelector","trim","allAttributeNames","blockAttributeNames","textAttributeNames","listAttributeNames","getAllAttributeNames","getTextAttributeNames","getBlockAttributeNames","getBlockConfig","attributeName","getTextConfig","installDefaultCSSForTagName","defaultCSS","insertStyleElementForTagName","nonce","getCSPNonce","head","insertBefore","getMetaElement","querySelector","testTransferData","dataTransferIsPlainText","dataTransfer","getData","DOMParser","parseFromString","keyEventIsKeyboardCommand","platform","metaKey","ctrlKey","defer","fn","copyObject","objectsAreEqual","normalizeRange","range","copyValue","rangeIsCollapsed","start","end","rangeValuesAreEqual","rangesAreEqual","leftRange","rightRange","leftStart","leftEnd","rightStart","rightEnd","left","right","domRangesAreEqual","startContainer","startOffset","endContainer","endOffset","selectionChangeObserver","update","bind","run","selectionManagers","started","stop","registerSelectionManager","selectionManager","unregisterSelectionManager","s","notifySelectionManagersOfSelectionChange","selectionDidChange","domRange","getDOMRange","requestAnimationFrame","getDOMSelection","selection","getSelection","rangeCount","_getDOMSelection","getRangeAt","domRangeIsPrivate","setDOMRange","removeAllRanges","addRange","nodeIsPrivate","getPrototypeOf","normalizeSpaces","breakableWhitespacePattern","squishBreakableWhitespace","source","utf16StringDifferences","diffA","utf16StringDifference","utf16String","diffB","leftIndex","rightIndexA","rightIndexB","Hash","objects","hash","getKeys","getKeysCommonToHash","copy","unbox","toArray","isEmpty","toObject","keyToRemove","sort","Operation","isPerforming","performing","hasPerformed","performed","hasSucceeded","succeeded","hasFailed","getPromise","promise","perform","release","_this$promise","_this$promise$cancel","cancel","proxyMethod","ImagePreloadOperation","image","Image","onload","width","naturalWidth","height","naturalHeight","onerror","src","Attachment","attributesForFile","setFile","filename","filesize","contentType","attachmentJSON","releaseFile","didChangeAttributes","hasAttribute","getAttributes","setAttributes","newAttributes","_this$previewDelegate","_this$previewDelegate2","_this$delegate","_this$delegate$attach","previewDelegate","attachmentDidChangeAttributes","delegate","isPreviewable","preloadURL","isPending","getURL","getHref","previewablePattern","getContentType","getType","hasContent","getFilename","getFilesize","getFormattedFilesize","getExtension","_this$getFilename$mat","getContent","getWidth","getHeight","getFile","preloadFile","releasePreloadedFile","getUploadProgress","uploadProgress","setUploadProgress","_this$uploadProgressD","_this$uploadProgressD2","uploadProgressDelegate","attachmentDidChangeUploadProgress","getPreviewURL","previewURL","preloadingURL","setPreviewURL","_this$previewDelegate3","_this$previewDelegate4","_this$delegate2","_this$delegate2$attac","attachmentDidChangePreviewURL","preload","fileObjectURL","URL","createObjectURL","revokeObjectURL","_ref","ManagedAttachment","attachmentManager","requestRemovalOfAttachment","AttachmentManager","managedAttachments","manageAttachment","getAttachments","attachmentIsManaged","attachmentManagerDidRequestRemovalOfAttachment","unmanageAttachment","managedAttachment","Piece","pieceJSON","copyWithAttributes","getValue","copyWithAdditionalAttributes","copyWithoutAttribute","getAttributesHash","hasSameStringValueAsPiece","piece","hasSameAttributesAsPiece","isBlockBreak","isSerializable","canBeGrouped","canBeGroupedWith","getLength","canBeConsolidatedWith","AttachmentPiece","ensureAttachmentExclusivelyHasAttribute","removeProhibitedAttributes","permittedAttributes","getCaption","_piece$attachment","json","toConsole","registerType","StringPiece","normalizeNewlines","consolidateWith","splitAtOffset","SplittableList","eachObject","insertObjectAtIndex","insertSplittableListAtIndex","splittableList","insertSplittableListAtPosition","position","splitObjectAtPosition","editObjectAtIndex","replaceObjectAtIndex","removeObjectAtIndex","getObjectAtIndex","getSplittableListInRange","rightIndex","splitObjectsAtRange","selectSplittableList","removeObjectsInRange","transformObjectsInRange","transform","transformedObjects","rightOuterIndex","leftInnerIndex","startOfRange","endOfRange","getObjectAtPosition","findIndexAndOffsetAtPosition","splitIndex","splitOffset","leftObject","rightObject","consolidate","pendingObject","_pendingObject$canBeC","_pendingObject","consolidateFromIndexToIndex","startIndex","endIndex","objectsInRange","consolidatedInRange","currentPosition","nextPosition","findPositionAtIndexAndOffset","currentIndex","getEndPosition","endPosition","objectArraysAreEqual","Text","textJSON","pieces","notEmpty","pieceList","copyWithPieceList","copyUsingObjectMap","objectMap","getPieces","find","appendText","insertTextAtPosition","removeTextAtRange","replaceTextAtRange","moveTextFromRangeToPosition","getTextAtRange","addAttributeAtRange","addAttributesAtRange","removeAttributeAtRange","setAttributesAtRange","getAttributesAtPosition","_this$pieceList$getOb","getCommonAttributes","fromCommonAttributesOfObjects","getCommonAttributesAtRange","getExpandedRangeForAttributeAtOffset","getStringAtRange","getStringAtPosition","startsWithString","endsWithString","getAttachmentPieces","getAttachmentAndPositionById","attachmentId","getAttachmentById","getRangeOfAttachment","attachmentAndPosition","updateAttributesForAttachment","_text$pieceList","eachPiece","getPieceAtPosition","toSerializableText","isRTL","Block","blockJSON","applyBlockBreakToText","block","copyWithText","copyWithoutText","copyWithoutAttributes","mappedText","addAttribute","expandAttribute","removeAttribute","removeLastValue","removeLastAttribute","getLastAttribute","getLastElement","getAttributeLevel","getAttributeAtLevel","level","hasAttributes","getLastNestableAttribute","getNestableAttributes","getNestingLevel","decreaseNestingLevel","increaseNestingLevel","lastIndexOf","getListItemAttributes","isListItem","_getBlockConfig","isTerminalBlock","_getBlockConfig2","breaksOnReturn","_getBlockConfig3","findLineBreakInDirectionFromPosition","direction","newlineText","textForStringWithAttributes","getTextWithoutBlockBreak","getBlockBreakPosition","textEndsInBlockBreak","depth","otherBlock","otherAttributes","otherAttribute","getListAttributeNames","unmarkExistingInnerBlockBreaksInText","addBlockBreakToText","modified","innerPieces","lastPiece","unmarkBlockBreakPiece","blockBreakText","blockBreak","ObjectMap","Document","documentJSON","blocks","blockList","getBlockAtIndex","consolidateBlocks","copyUsingObjectsFromDocument","sourceDocument","getObjects","getBlocks","copyWithBaseBlockAttributes","replaceBlock","oldBlock","newBlock","insertDocumentAtRange","locationFromPosition","getBlockAtPosition","mergeDocumentAtRange","formattedDocument","startPosition","startLocation","baseBlockAttributes","getBaseBlockAttributes","trailingBlockAttributes","leadingBlockAttributes","blockCount","getBlockCount","firstBlock","firstText","insertTextAtRange","leftPosition","rightPosition","leftLocation","rightLocation","locationRangeFromRange","leftOffset","leftBlock","rightOffset","rightBlock","leftText","rightText","affectedBlockCount","getDocumentAtRange","movingRightward","eachBlockAtRange","textRange","eachBlock","getTextAtIndex","removeAttributeForAttachment","insertBlockBreakAtRange","applyBlockAttributeAtRange","expanded","expandRangeToLineBreaksAndSplitBlocks","blockConfig","removeLastListAttributeAtRange","exceptAttributeName","converted","convertLineBreaksToBlockBreaksInRange","removeBlockAttributesAtRange","removeLastTerminalAttributeAtRange","consolidateBlocksAtRange","lastAttributeName","endLocation","startBlock","positionFromLocation","endBlock","_this$getBlockAtIndex","getTextAtPosition","getCharacterAtPosition","getEditCount","editCount","getCommonAttributesAtPosition","attributesForBlock","commonAttributes","attributesLeft","inheritableAttributes","getRangeOfCommonAttributeAtPosition","blockIndex","lastAttributeIndex","min","attachmentPieces","iterable","getLocationRangeOfAttachment","getAttachmentPieceForAttachment","findRangesForBlockAttribute","ranges","findRangesForTextAttribute","withValue","location","locationRangeFromPosition","rangeFromLocationRange","locationRange","getTexts","toSerializableDocument","DEFAULT_ALLOWED_ATTRIBUTES","DEFAULT_FORBIDDEN_PROTOCOLS","DEFAULT_FORBIDDEN_ELEMENTS","HTMLSanitizer","sanitizer","sanitize","allowedAttributes","forbiddenProtocols","forbiddenElements","createBodyElementForHTML","sanitizeElements","normalizeListElementNesting","getHTML","innerHTML","getBody","walker","nodesToRemove","nextNode","currentNode","elementIsRemovable","sanitizeElement","protocol","querySelectorAll","listElement","previousElement","previousElementSibling","elementIsForbidden","elementIsntSerializable","doc","implementation","createHTMLDocument","pieceForString","parseTrixDataAttribute","HTMLParser","referenceElement","blockElements","processedElements","getDocument","createHiddenContainer","containerElement","nodeFilter","processNode","translateBlockElementMarginsToNewlines","removeHiddenContainer","cloneNode","display","nextSibling","isInsignificantTextNode","appendBlockForTextNode","processTextNode","appendBlockForElement","processElement","currentBlockElement","isBlockElement","appendStringWithAttributes","_this$currentBlock","getBlockAttributes","currentBlock","appendBlockForAttributesWithElement","elementIsBlockElement","currentBlockContainsElement","firstElementChild","parentBlockElement","findParentBlockElement","appendEmptyBlock","parentElement","_node$previousSibling","elementCanDisplayPreformattedText","stringEndsWithWhitespace","leftTrimBreakableWhitespace","getTextAttributes","appendAttachmentWithAttributes","isExtraBR","dimensions","parseInt","getImageDimensions","blockForAttributes","appendPiece","pieceForAttachment","appendStringToTextAtIndex","prependStringToTextAtIndex","unshift","configAttr","attributeInheritedFromBlock","blockElement","findBlockElementAncestors","styleProperty","attrConfig","_attrConfig$test","reverse","ancestors","stringIsAllBreakableWhitespace","nodeEndsWithNonWhitespace","lastChild","defaultMargin","getMarginOfDefaultBlockElement","margin","getMarginOfBlockElementAtIndex","top","bottom","getBlockElementMargin","whiteSpace","marginTop","marginBottom","FILTER_REJECT","FILTER_ACCEPT","LineBreakInsertion","composition","selectedRange","getSelectedRange","previousCharacter","nextCharacter","shouldInsertBlockBreak","shouldBreakFormattedBlock","shouldDecreaseListLevel","shouldPrependListItem","shouldRemoveLastBlockAttribute","Composition","currentAttributes","revision","setDocument","_this$delegate$compos","refreshAttachments","compositionDidChangeDocument","getSnapshot","loadSnapshot","_this$delegate2$compo","_this$delegate3","_this$delegate3$compo","compositionWillLoadSnapshot","setSelection","compositionDidLoadSnapshot","insertText","updatePosition","notifyDelegateOfInsertionAtRange","insertBlock","insertDocument","insertString","getCurrentTextAttributes","insertBlockBreak","insertLineBreak","insertion","decreaseListLevel","removeLastBlockAttribute","breakFormattedBlock","insertHTML","replaceHTML","getLocationRange","insertFile","insertFiles","_this$delegate4","compositionShouldAcceptFile","attachmentForFile","insertAttachments","insertAttachment","_config$attachments$t","attachmentText","textForAttachmentWithAttributes","shouldManageDeletingInDirection","shouldManageMovingCursorInDirection","deleteInDirection","deletingIntoPreviousBlock","selectionSpansBlocks","selectionIsCollapsed","canDecreaseBlockAttributeLevel","getBlock","decreaseBlockAttributeLevel","getExpandedRangeInDirection","getAttachmentAtRange","editAttachment","moveTextFromRange","removeAttachment","stopEditingAttachment","removeCurrentAttribute","insertPlaceholder","placeholderPosition","getPosition","selectPlaceholder","setSelectedRange","forgetPlaceholder","hasCurrentAttribute","toggleCurrentAttribute","setCurrentAttribute","canSetCurrentAttribute","canSetCurrentBlockAttribute","canSetCurrentTextAttribute","getSelectedDocument","setBlockAttribute","setTextAttribute","notifyDelegateOfCurrentAttributesChange","removeBlockAttribute","updateCurrentAttributes","removeTextAttribute","canDecreaseNestingLevel","_this$getBlock","canIncreaseNestingLevel","previousBlock","getPreviousBlock","arrayStartsWith","_this$getBlock2","_this$getBlock3","attributeLevel","ignoreLock","getCurrentAttributes","freezeSelection","thawSelection","hasFrozenSelection","_this$delegate5","compositionDidRequestChangingSelectionToLocationRange","getSelectionManager","setLocationRange","targetLocationRange","withTargetLocationRange","withTargetRange","withTargetDOMRange","createLocationRangeFromDOMRange","translateUTF16PositionFromOffset","editingAttachment","moveCursorInDirection","canEditAttachment","expandSelectionInDirection","expandSelectionForEditing","expandSelectionAroundCommonAttribute","selectionContainsAttachments","_this$getSelectedAtta","getSelectedAttachments","selectionIsInCursorTarget","positionIsCursorTarget","locationIsCursorTarget","positionIsBlockBreak","_this$document$getPie","_this$getSelectedDocu","added","removed","oldArray","newArray","existingValues","Set","currentValues","summarizeArrayChange","_this$delegate6","_this$delegate6$compo","compositionDidRemoveAttachment","_this$delegate7","_this$delegate7$compo","compositionDidAddAttachment","_this$delegate8","_this$delegate8$compo","compositionDidEditAttachment","_this$delegate9","_this$delegate9$compo","compositionDidChangeAttachmentPreviewURL","_this$delegate10","_this$delegate10$comp","compositionDidStartEditingAttachment","_this$delegate11","_this$delegate11$comp","compositionDidStopEditingAttachment","newDocument","_this$delegate12","_this$delegate12$comp","compositionDidChangeCurrentAttributes","_this$delegate13","_this$delegate13$comp","compositionDidPerformInsertionAtRange","utf16string","utf16position","UndoManager","undoEntries","redoEntries","recordUndoEntry","description","context","consolidatable","previousEntry","entryHasDescriptionAndContext","undoEntry","createEntry","pop","redoEntry","snapshot","canUndo","canRedo","entry","BLOCK_ATTRIBUTE_NAME","Filter","applyBlockAttribute","findRangesOfBlocks","findRangesOfPieces","moveSelectedRangeForward","DEFAULT_FILTERS","Editor","undoManager","filters","loadDocument","loadHTML","loadJSON","getClientRectAtPosition","getClientRectAtLocationRange","activateAttribute","attributeIsActive","canActivateAttribute","deactivateAttribute","LocationMapper","findLocationFromContainerAndOffset","container","foundBlock","attachmentElement","findAttachmentElementParentForNode","rejectAttachmentContents","nodeLength","findContainerAndOffsetFromLocation","nodeOffset","findNodeAndOffsetFromLocation","getSignificantNodesForIndex","nodes","acceptSignificantNodes","recordingNodes","rejectEmptyTextNodes","PointMapper","createDOMRangeFromPoint","x","y","caretPositionFromPoint","offsetNode","createRange","setStart","caretRangeFromPoint","createTextRange","originalDOMRange","moveToPoint","select","getClientRectsForDOMRange","getClientRects","SelectionManager","didMouseDown","locationMapper","pointMapper","lockCount","currentLocationRange","lockedLocationRange","createDOMRangeFromLocationRange","updateCurrentLocationRange","setLocationRangeFromPointRange","pointRange","getLocationAtPoint","lock","unlock","clearSelection","_getDOMRange","collapsed","selectionIsExpanded","domRangeWithinElement","pauseTemporarily","resumeHandlers","paused","clearTimeout","resumeTimeout","_this$delegate$locati","locationRangeDidChange","rangeStart","rangeEnd","setEnd","point","_this$createLocationR","models","Cocument","Trix","VERSION","ObjectGroup","ungroupedObjects","asTree","_object$canBeGrouped2","_object$canBeGrouped","_group$canBeGroupedWi","_group","groupObjects","getDepth","ElementStore","elements","trixStoreKey","ObjectView","childViews","rootView","getNodes","createNodes","invalidate","_this$parentView","parentView","invalidateViewForObject","_this$findViewForObje","findViewForObject","findOrCreateCachedChildView","viewClass","view","getCachedViewForObject","recordChildView","createChildView","cacheViewForObject","ObjectGroupView","getAllChildViews","views","childView","findElement","findElementForObject","getViewCache","isViewCachingEnabled","viewCache","shouldCacheViews","enableViewCaching","disableViewCaching","_this$getViewCache","garbageCollectCachedViews","objectKeys","objectGroup","getChildViews","createContainerElement","css$2","AttachmentView","attachmentPiece","createContentNodes","innerElement","figure","getClassName","tabindex","createCaptionElement","progressElement","class","trixMutable","createCursorTarget","figcaption","captionConfig","getCaptionConfig","nameElement","createTextNode","sizeElement","names","extension","trixAttachment","trixContentType","trixId","trixAttributes","trixSerialize","htmlContainsTagName","findProgressElement","_this$findElement","div","PreviewableAttachmentView","refresh","updateAttributesForImage","serializedAttributes","storeKey","PieceView","textConfig","createAttachmentNodes","createStringNodes","_element","findInnerElement","_this$textConfig","substring","preserveSpaces","styles","pendingElement","isLast","isFirst","followsWhitespace","TextView","lastIndex","endsWithWhitespace","previousPiece","css$1","BlockView","createComment","textView","shouldAddExtraNewlineElement","DocumentView","render","sync","elementStore","shadowElement","isSynced","elementsHaveEqualHTML","fragment","createDocumentFragmentForSync","didSync","findStoredElements","createDocumentFragment","storedElement","replaceChild","otherElement","ignoreSpaces","unserializableAttributeNames","serializedAttributesAttribute","serializedAttributesSelector","blockCommentPattern","serializers","serializable","HTMLElement","el","mutableAttributeName","mutableSelector","childList","characterData","characterDataOldValue","subtree","MutationObserver","didMutate","observer","observe","disconnect","mutations","_this$delegate$elemen","findSignificantMutations","elementDidMutate","getMutationSummary","mutation","mutationIsSignificant","nodeIsMutable","nodesModifiedByMutation","nodeIsSignificant","addedNodes","removedNodes","getTextMutationSummary","additions","deletions","getTextChangesFromCharacterData","textChanges","getTextChangesFromChildList","addition","summary","textAdded","deleted","textDeleted","getMutationsByType","textRemoved","getTextForNodes","characterMutations","startMutation","endMutation","summarized","oldString","newString","summarizeStringChange","oldValue","Controller","FileVerificationOperation","reader","FileReader","abort","readAsArrayBuffer","InputController","mutationObserver","events","handlerFor","mutationSummary","editorWillSyncDocumentView","editorDidSyncDocumentView","requestRender","_this$delegate$inputC","inputControllerDidRequestRender","requestReparse","_this$delegate2$input","inputControllerDidRequestReparse","operations","all","handleInput","_this$responder","inputControllerWillAttachFiles","responder","defaultPrevented","inputControllerWillHandleInput","inputControllerDidHandleInput","createLinkHTML","outerHTML","_$codePointAt","keyNames$1","pastedFileCount","Level0InputController","resetInputSummary","setInputSummary","inputSummary","isComposing","inputControllerDidAllowUnhandledInput","mutationIsExpected","preferDocument","mutationAdditionMatchesSummary","mutationDeletionMatchesSummary","didDelete","unexpectedNewlineAddition","unexpectedNewlineDeletion","_this$compositionInpu","textChanged","composedEmptyString","compositionInput","getEndData","getCompositionInput","CompositionInput","isEnded","_this$responder2","serializeSelectionToDataTransfer","_this$responder3","setData","dataTransferIsWritable","canAcceptDataTransfer","Files","getPastedHTMLUsingHiddenElement","pageXOffset","pageYOffset","opacity","focus","keydown","didInput","keyName","keyCode","_context2","modifier","_context","character","inputControllerDidReceiveKeyboardCommand","keypress","altKey","stringFromKeyEvent","_this$responder9","inputControllerWillPerformTyping","textInput","toUpperCase","_this$responder10","dragenter","dragstart","_this$delegate5$input","draggedRange","inputControllerDidStartDrag","dragover","draggingPoint","clientX","clientY","_this$delegate6$input","inputControllerDidReceiveDragOverPoint","dragend","_this$delegate7$input","inputControllerDidCancelDrag","drop","_event$dataTransfer","_this$responder11","_this$responder12","inputControllerWillMoveText","_this$responder13","fromJSONString","cut","_this$responder14","clipboardData","inputControllerWillCutText","_this$responder15","paste","clipboard","testClipboardData","pasteEventIsCrippledSafariHTMLPaste","_this$responder16","inputControllerWillPaste","inputControllerDidPaste","_this$responder17","_this$delegate14","_this$responder18","_this$delegate15","_this$delegate16","_this$responder19","_this$delegate17","_clipboard$items","_clipboard$items$","_clipboard$items$$get","items","getAsFile","_this$delegate18","_this$responder20","_this$delegate19","extensionForFile","compositionstart","compositionupdate","compositionend","beforeinput","stopPropagation","backspace","_this$delegate20","delete","_this$delegate21","_this$delegate22","_this$responder21","tab","_this$responder22","_this$responder23","_this$responder24","_this$responder25","control","d","_this$delegate23","h","_this$delegate24","o","_this$delegate25","_this$responder26","shift","_this$delegate26","_this$responder27","_this$responder28","_this$responder29","alt","_this$delegate27","meta","_this$delegate28","_file$type","_file$type$match","hasStringCodePointAt","which","charCode","hasPasteboardFlavor","hasReadableDynamicData","isExternalHTMLPaste","isExternalRichTextPaste","inputController","isSignificant","_this$responder5","_this$responder4","canApplyToDocument","_this$responder6","_this$responder7","_this$responder8","_this$data$start","_this$data$end","Level2InputController","scheduledRender","composing","reparse","scheduleRender","_this$afterRender","cancelAnimationFrame","afterRender","toggleAttributeIfSupported","inputControllerWillPerformFormatting","activateAttributeIfSupported","getTargetDOMRange","minLength","_this$event$getTarget","_this$event","targetRanges","getTargetRanges","staticRangeToRange","withEvent","command","keyboardCommandFromKeyEvent","shiftKey","_event$clipboardData","pasteEventHasFilesOnly","pasteEventHasPlainTextOnly","inputTypes","inputType","dragging","pointFromEvent","dragEventHasFiles","ArrowLeft","ArrowRight","Backspace","Tab","deleteByComposition","deleteByCut","deleteByDrag","deleteByDragRange","deleteCompositionText","deleteContent","deleteContentBackward","deleteContentForward","deleteEntireSoftLine","deleteHardLineBackward","deleteHardLineForward","deleteSoftLineBackward","deleteSoftLineForward","deleteWordBackward","deleteWordForward","formatBackColor","formatBold","formatFontColor","formatFontName","formatIndent","formatItalic","formatJustifyCenter","formatJustifyFull","formatJustifyLeft","formatJustifyRight","formatOutdent","formatRemove","_this$responder30","formatSetBlockTextDirection","formatSetInlineTextDirection","formatStrikeThrough","formatSubscript","formatSuperscript","formatUnderline","historyRedo","inputControllerWillPerformRedo","historyUndo","inputControllerWillPerformUndo","insertCompositionText","insertFromComposition","insertFromDrop","_this$responder31","insertFromPaste","_dataTransfer$files","_this$responder32","_this$responder33","_this$responder34","_this$responder35","insertFromYank","insertLink","insertOrderedList","insertParagraph","_this$responder36","insertReplacementText","_this$event$dataTrans","insertTranspose","insertUnorderedList","staticRange","undoable","commands","do","undos","AttachmentEditorController","trixAction","didClickToolbar","didClickActionButton","textarea","placeholder","textareaClone","tabIndex","autoresize","scrollHeight","didInputCaption","didKeyDownCaption","didChangeCaption","didBlurCaption","editingFigcaption","editCaption","install","makeElementMutable","addToolbar","installCaptionEditor","uninstall","savePendingCaption","didUninstallAttachmentEditor","pendingCaption","_this$delegate3$attac","attachmentEditorDidRequestUpdatingAttributesForAttachment","attachmentEditorDidRequestRemovingAttributeForAttachment","attachmentEditorDidRequestRemovalOfAttachment","_this$delegate5$attac","attachmentEditorDidRequestDeselectingAttachment","CompositionController","didFocus","didBlur","didClickAttachment","documentView","_this$blurPromise","focused","compositionControllerDidFocus","blurPromise","compositionControllerDidBlur","findAttachmentForElement","compositionControllerDidSelectAttachment","getSerializableElement","isEditingAttachment","_this$delegate4$compo","_this$delegate5$compo","canSyncDocumentView","compositionControllerWillSyncDocumentView","compositionControllerDidSyncDocumentView","compositionControllerDidRender","rerenderViewForObject","refreshViewCache","attachmentEditor","installAttachmentEditorForAttachment","_this$attachmentEdito","uninstallAttachmentEditor","_this$attachmentEdito2","compositionControllerWillUpdateAttachment","compositionControllerDidRequestRemovalOfAttachment","compositionControllerDidRequestDeselectingAttachment","attributeButtonSelector","actionButtonSelector","toolbarButtonSelector","dialogSelector","activeDialogSelector","dialogButtonSelector","dialogInputSelector","getInputForDialog","getAttributeName","getActionName","ToolbarController","didClickAttributeButton","didClickDialogButton","didKeyDownDialogInput","actions","resetDialogInputs","toolbarDidClickButton","actionName","getDialog","toggleDialog","toolbarDidInvokeAction","toolbarDidToggleAttribute","refreshAttributeButtons","dialogElement","dialog","hideDialog","updateActions","refreshActionButtons","eachActionButton","disabled","updateAttributes","eachAttributeButton","dialogIsVisible","applyKeyboardCommand","keyString","button","buttonKeys","dialogName","showDialog","toolbarWillShowDialog","disabledInput","toolbarDidShowDialog","willValidate","checkValidity","toolbarDidUpdateAttribute","toolbarDidRemoveAttribute","toolbarDidHideDialog","getDialogName","EditorController","editorElement","compositionController","toolbarController","toolbarElement","editor","notifyEditorElement","handlingInput","updateCurrentActions","pasting","pastedRange","attachmentLocationRange","loadingSnapshot","isFocused","requestedLocationRange","compositionRevisionWhenLocationRangeRequested","renderedCompositionRevision","runEditorFilters","isFocusedInvisibly","requestedRender","recordTypingUndoEntry","recordFormattingUndoEntry","locationRangeBeforeDrag","invokeAction","selectionFrozen","canInvokeAction","actionIsExternal","_this$actions$actionN","_this$actions$actionN2","_this$actions$actionN3","_this$actions$actionN4","getCurrentActions","currentActions","updateInputElement","serializer","serializeToContentType","setInputElementValue","documentChangedSinceLastRender","notify","getUndoContext","getLocationContext","getTimeContext","getTime","_this$editorElement$o","ownerDocument","TrixToolbarElement","connectedCallback","customElements","define","makeEditable","handleEventOnce","configureContentEditable","disableObjectResizing","setDefaultParagraphSeparator","_document$queryComman","_document","queryCommandSupported","execCommand","_document$queryComman2","_document2","cursorTargetStyles","TrixEditorElement","labels","label","_this$ownerDocument","toolbarId","_this$inputElement","inputElement","_this$ownerDocument2","inputId","nextElementSibling","_this$editorControlle","editorController","_this$inputElement2","_this$inputElement3","_this$editor","addAccessibilityRole","texts","contains","ensureAriaLabel","registerResetListener","registerClickListener","autofocus","disconnectedCallback","_this$editorControlle2","unregisterResetListener","unregisterClickListener","resetListener","resetBubbled","clickListener","clickBubbled","Vue","makeid","mounted","beforeDestroy","onInput","domProps"],"sourceRoot":""}