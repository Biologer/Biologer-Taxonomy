"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[966],{1994:(t,n,e)=>{e.r(n),e.d(n,{default:()=>s});const a={name:"nzSidebar",props:{active:Boolean,hasUnreadNotifications:Boolean},data:function(){return{activeTab:"notifications",notifications:[],currentPage:1,hasMoreToLoad:this.hasUnreadNotifications,loading:!1}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress),this.hasUnreadNotifications&&this.load()},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("keyup",this.keyPress)},methods:{hide:function(){this.$emit("close")},keyPress:function(t){27===t.keyCode&&this.hide()},load:function(){var t=this;if(!this.loading){this.loading=!0;var n=this.currentPage;axios.get(route("api.my.unread-notifications.index",{page:n})).then((function(n){t.notifications=t.notifications.concat(n.data.data),t.hasMoreToLoad=t.page<n.data.meta.last_page})).finally((function(){t.loading=!1}))}},loadMore:function(){!this.loading&&this.hasMoreToLoad&&(this.currentPage++,this.load())},markNotificationAsRead:function(t,n){var e=this;axios.post(route("api.my.read-notifications-batch.store"),{notifications_ids:[t]}).then((function(a){e.notifications=e.notifications.filter((function(n){return n.id!==t})),e.$emit("update:has-unread-notifications",a.data.meta.has_unread),n&&n()}))},markAllNotificationsAsRead:function(){var t=this;this.hasUnreadNotifications&&axios.post(route("api.my.read-notifications-batch.store"),{all:!0}).then((function(){t.notifications=[],t.$emit("update:has-unread-notifications",!1)}))}}};const s={name:"nzDashboardNavbar",components:{NzSidebar:(0,e(1900).Z)(a,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"sidebar",class:{"is-active":t.active}},[e("div",{staticClass:"sidebar-header"},[e("h3",{staticClass:"title is-size-5"},[t._v(t._s(t.trans("notifications.title")))])]),t._v(" "),e("div",{staticClass:"sidebar-body"},[t.hasUnreadNotifications?[t.notifications.length?e("transition-group",{attrs:{name:"notification-list"}},t._l(t.notifications,(function(n){return e("nz-notification",{key:"notification-"+n.id,staticClass:"sidebar-block",attrs:{notification:n},on:{"mark-read":t.markNotificationAsRead}})})),1):t._e(),t._v(" "),e("div",{staticClass:"sidebar-block justify-center py-8"},[e("button",{staticClass:"button is-primary",class:{"is-loading":t.loading},attrs:{type:"button",disabled:!t.hasMoreToLoad},on:{click:t.loadMore}},[t._v("\n          "+t._s(t.trans("notifications.load_more"))+"\n        ")])])]:e("div",{staticClass:"sidebar-block justify-center py-8"},[t._v("\n      "+t._s(t.trans("notifications.no_new_notifications"))+"\n    ")])],2),t._v(" "),e("footer",{staticClass:"sidebar-footer"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.hide}},[t._v(t._s(t.trans("buttons.close")))]),t._v(" "),t.notifications.length?e("button",{staticClass:"button is-text",attrs:{type:"button"},on:{click:t.markAllNotificationsAsRead}},[t._v("\n      "+t._s(t.trans("notifications.mark_all_as_read"))+"\n    ")]):t._e()])])}),[],!1,null,null,null).exports},props:{hasUnread:Boolean},data:function(){return{active:!1,showSidebar:!1,hasUnreadNotifications:this.hasUnread}},methods:{toggle:function(){this.active=!this.active},toggleSidebar:function(){this.showSidebar=!this.showSidebar}}}},2595:(t,n,e)=>{e.r(n),e.d(n,{default:()=>s});const a={name:"nzAnnouncement",props:{announcement:Object},data:function(){return{newAnnouncement:this.announcement}},computed:{link:function(){return route("announcements.show",{announcement:this.newAnnouncement.id})}},methods:{sendRequestToMarkAsRead:function(){return axios.post("/api/read-announcements",{announcement_id:this.newAnnouncement.id})},markAsRead:function(){var t=this;this.sendRequestToMarkAsRead().then((function(){t.newAnnouncement=null}))}}};const s=(0,e(1900).Z)(a,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.newAnnouncement?e("article",{staticClass:"message is-info shadow"},[e("div",{staticClass:"message-body flex justify-between"},[e("div",{},[t._v("\n      "+t._s(t.newAnnouncement.title)+"\n    ")]),t._v(" "),e("div",{staticClass:"message-actions"},[e("a",{attrs:{href:t.link}},[t._v("Read more")]),t._v(" "),e("b-icon",{staticClass:"is-clickable",attrs:{icon:"check",title:"Mark as read"},nativeOn:{click:function(n){return t.markAsRead.apply(null,arguments)}}})],1)])]):t._e()}),[],!1,null,null,null).exports},5314:(t,n,e)=>{e.r(n),e.d(n,{default:()=>c});const a={name:"nzDeleteAccounModal",props:{action:String,csrfToken:String}};var s=e(1900);const i=(0,s.Z)(a,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("form",{staticClass:"modal-card",attrs:{action:t.action,method:"POST"}},[e("header",{staticClass:"modal-card-head"},[e("h3",{staticClass:"modal-card-title"},[t._v(t._s(t.trans("navigation.preferences.delete_account")))])]),t._v(" "),e("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrfToken}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"_method",value:"DELETE"}}),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("p",[t._v(t._s(t.trans("This action is irreversible, once an account is deleted it cannot be restored.")))]),t._v(" "),e("p",[t._v(t._s(t.trans("Are you sure you want to delete your account?")))]),t._v(" "),e("b-field",{staticClass:"mt-8"},[e("b-checkbox",{attrs:{name:"delete_observations"}},[t._v(t._s(t.trans("labels.preferences.account.delete_observations")))])],1)],1),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(n){return t.$parent.close()}}},[t._v(t._s(t.trans("buttons.cancel")))]),t._v(" "),e("button",{staticClass:"button is-danger",attrs:{type:"submit"}},[t._v(t._s(t.trans("labels.preferences.account.delete_account")))])])])}),[],!1,null,null,null).exports,o={name:"nzDeleteAccountButton",props:{action:String,csrfToken:String},methods:{openModal:function(){this.$buefy.modal.open({parent:this,component:i,hasModalCard:!0,props:{action:this.action,csrfToken:this.csrfToken}})}}};const c=(0,s.Z)(o,(function(){var t=this,n=t.$createElement;return(t._self._c||n)("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.openModal}},[t._v("\n  "+t._s(t.trans("labels.preferences.account.delete_account"))+"\n")])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=3d564e5d90b9275b.js.map