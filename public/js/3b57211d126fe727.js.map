{"version":3,"file":"js/3b57211d126fe727.js","mappings":"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","sources":["webpack:///./node_modules/form-backend-validation/dist/Errors.js","webpack:///./node_modules/form-backend-validation/dist/Form.js","webpack:///./node_modules/form-backend-validation/dist/index.js","webpack:///./node_modules/form-backend-validation/dist/util/fieldNameValidation.js","webpack:///./node_modules/form-backend-validation/dist/util/formData.js","webpack:///./node_modules/form-backend-validation/dist/util/index.js","webpack:///./node_modules/form-backend-validation/dist/util/objects.js","webpack:///./node_modules/lodash/_baseFindIndex.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/_baseGet.js","webpack:///./node_modules/lodash/_baseHasIn.js","webpack:///./node_modules/lodash/_baseIsMatch.js","webpack:///./node_modules/lodash/_baseIteratee.js","webpack:///./node_modules/lodash/_baseMatches.js","webpack:///./node_modules/lodash/_baseMatchesProperty.js","webpack:///./node_modules/lodash/_basePick.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./node_modules/lodash/_baseProperty.js","webpack:///./node_modules/lodash/_basePropertyDeep.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_castPath.js","webpack:///./node_modules/lodash/_createFind.js","webpack:///./node_modules/lodash/_flatRest.js","webpack:///./node_modules/lodash/_getMatchData.js","webpack:///./node_modules/lodash/_hasPath.js","webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/lodash/_isKey.js","webpack:///./node_modules/lodash/_isStrictComparable.js","webpack:///./node_modules/lodash/_matchesStrictComparable.js","webpack:///./node_modules/lodash/_memoizeCapped.js","webpack:///./node_modules/lodash/_stringToPath.js","webpack:///./node_modules/lodash/_toKey.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/find.js","webpack:///./node_modules/lodash/findIndex.js","webpack:///./node_modules/lodash/first.js","webpack:///./node_modules/lodash/flatten.js","webpack:///./node_modules/lodash/get.js","webpack:///./node_modules/lodash/hasIn.js","webpack:///./node_modules/lodash/head.js","webpack:///./node_modules/lodash/memoize.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/lodash/pick.js","webpack:///./node_modules/lodash/property.js","webpack:///./node_modules/lodash/toInteger.js","webpack:///./resources/js/components/forms/TaxonForm.vue","webpack:///./resources/js/mixins/FormMixin.js","webpack:///resources/js/components/forms/TaxonForm.vue","webpack:///./resources/js/components/forms/TaxonForm.vue?2a6a","webpack:///./resources/js/components/forms/TaxonForm.vue?4200","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue","webpack:///resources/js/components/inputs/TaxonAutocomplete.vue","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?1a78","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?fd87","webpack:///./resources/js/components/inputs/Wysiwyg.vue","webpack:///./node_modules/trix/dist/trix.js","webpack:///resources/js/components/inputs/Wysiwyg.vue","webpack:///./resources/js/components/inputs/Wysiwyg.vue?36a0","webpack:///./resources/js/components/inputs/Wysiwyg.vue?709b"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Errors = function () {\n    /**\n     * Create a new Errors instance.\n     */\n    function Errors() {\n        var errors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Errors);\n\n        this.record(errors);\n    }\n\n    /**\n     * Get all the errors.\n     *\n     * @return {object}\n     */\n\n\n    _createClass(Errors, [{\n        key: \"all\",\n        value: function all() {\n            return this.errors;\n        }\n\n        /**\n         * Determine if any errors exists for the given field or object.\n         *\n         * @param {string} field\n         */\n\n    }, {\n        key: \"has\",\n        value: function has(field) {\n            var hasError = this.errors.hasOwnProperty(field);\n\n            if (!hasError) {\n                var errors = Object.keys(this.errors).filter(function (e) {\n                    return e.startsWith(field + \".\") || e.startsWith(field + \"[\");\n                });\n\n                hasError = errors.length > 0;\n            }\n\n            return hasError;\n        }\n    }, {\n        key: \"first\",\n        value: function first(field) {\n            return this.get(field)[0];\n        }\n    }, {\n        key: \"get\",\n        value: function get(field) {\n            return this.errors[field] || [];\n        }\n\n        /**\n         * Determine if we have any errors.\n         * Or return errors for the given keys.\n         *\n         * @param {array} keys\n         */\n\n    }, {\n        key: \"any\",\n        value: function any() {\n            var _this = this;\n\n            var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n            if (keys.length === 0) {\n                return Object.keys(this.errors).length > 0;\n            }\n\n            var errors = {};\n\n            keys.forEach(function (key) {\n                return errors[key] = _this.get(key);\n            });\n\n            return errors;\n        }\n\n        /**\n         * Record the new errors.\n         *\n         * @param {object} errors\n         */\n\n    }, {\n        key: \"record\",\n        value: function record() {\n            var errors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            this.errors = errors;\n        }\n\n        /**\n         * Clear a specific field, object or all error fields.\n         *\n         * @param {string|null} field\n         */\n\n    }, {\n        key: \"clear\",\n        value: function clear(field) {\n            if (!field) {\n                this.errors = {};\n\n                return;\n            }\n\n            var errors = Object.assign({}, this.errors);\n\n            Object.keys(errors).filter(function (e) {\n                return e === field || e.startsWith(field + \".\") || e.startsWith(field + \"[\");\n            }).forEach(function (e) {\n                return delete errors[e];\n            });\n\n            this.errors = errors;\n        }\n    }]);\n\n    return Errors;\n}();\n\nexports.default = Errors;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Errors = require('./Errors');\n\nvar _Errors2 = _interopRequireDefault(_Errors);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Form = function () {\n    /**\n     * Create a new Form instance.\n     *\n     * @param {object} data\n     * @param {object} options\n     */\n    function Form() {\n        var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, Form);\n\n        this.processing = false;\n        this.successful = false;\n\n        this.withData(data).withOptions(options).withErrors({});\n    }\n\n    _createClass(Form, [{\n        key: 'withData',\n        value: function withData(data) {\n            if ((0, _util.isArray)(data)) {\n                data = data.reduce(function (carry, element) {\n                    carry[element] = '';\n                    return carry;\n                }, {});\n            }\n\n            this.setInitialValues(data);\n\n            this.errors = new _Errors2.default();\n            this.processing = false;\n            this.successful = false;\n\n            for (var field in data) {\n                (0, _util.guardAgainstReservedFieldName)(field);\n\n                this[field] = data[field];\n            }\n\n            return this;\n        }\n    }, {\n        key: 'withErrors',\n        value: function withErrors(errors) {\n            this.errors = new _Errors2.default(errors);\n\n            return this;\n        }\n    }, {\n        key: 'withOptions',\n        value: function withOptions(options) {\n            this.__options = {\n                resetOnSuccess: true\n            };\n\n            if (options.hasOwnProperty('resetOnSuccess')) {\n                this.__options.resetOnSuccess = options.resetOnSuccess;\n            }\n\n            if (options.hasOwnProperty('onSuccess')) {\n                this.onSuccess = options.onSuccess;\n            }\n\n            if (options.hasOwnProperty('onFail')) {\n                this.onFail = options.onFail;\n            }\n\n            var windowAxios = typeof window === 'undefined' ? false : window.axios;\n\n            this.__http = options.http || windowAxios || require('axios');\n\n            if (!this.__http) {\n                throw new Error('No http library provided. Either pass an http option, or install axios.');\n            }\n\n            return this;\n        }\n\n        /**\n         * Fetch all relevant data for the form.\n         */\n\n    }, {\n        key: 'data',\n        value: function data() {\n            var data = {};\n\n            for (var property in this.initial) {\n                data[property] = this[property];\n            }\n\n            return data;\n        }\n\n        /**\n         * Fetch specific data for the form.\n         *\n         * @param {array} fields\n         * @return {object}\n         */\n\n    }, {\n        key: 'only',\n        value: function only(fields) {\n            var _this = this;\n\n            return fields.reduce(function (filtered, field) {\n                filtered[field] = _this[field];\n                return filtered;\n            }, {});\n        }\n\n        /**\n         * Reset the form fields.\n         */\n\n    }, {\n        key: 'reset',\n        value: function reset() {\n            (0, _util.merge)(this, this.initial);\n\n            this.errors.clear();\n        }\n    }, {\n        key: 'setInitialValues',\n        value: function setInitialValues(values) {\n            this.initial = {};\n\n            (0, _util.merge)(this.initial, values);\n        }\n    }, {\n        key: 'populate',\n        value: function populate(data) {\n            var _this2 = this;\n\n            Object.keys(data).forEach(function (field) {\n                (0, _util.guardAgainstReservedFieldName)(field);\n\n                if (_this2.hasOwnProperty(field)) {\n                    (0, _util.merge)(_this2, _defineProperty({}, field, data[field]));\n                }\n            });\n\n            return this;\n        }\n\n        /**\n         * Clear the form fields.\n         */\n\n    }, {\n        key: 'clear',\n        value: function clear() {\n            for (var field in this.initial) {\n                this[field] = '';\n            }\n\n            this.errors.clear();\n        }\n\n        /**\n         * Send a POST request to the given URL.\n         *\n         * @param {string} url\n         */\n\n    }, {\n        key: 'post',\n        value: function post(url) {\n            return this.submit('post', url);\n        }\n\n        /**\n         * Send a PUT request to the given URL.\n         *\n         * @param {string} url\n         */\n\n    }, {\n        key: 'put',\n        value: function put(url) {\n            return this.submit('put', url);\n        }\n\n        /**\n         * Send a PATCH request to the given URL.\n         *\n         * @param {string} url\n         */\n\n    }, {\n        key: 'patch',\n        value: function patch(url) {\n            return this.submit('patch', url);\n        }\n\n        /**\n         * Send a DELETE request to the given URL.\n         *\n         * @param {string} url\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(url) {\n            return this.submit('delete', url);\n        }\n\n        /**\n         * Submit the form.\n         *\n         * @param {string} requestType\n         * @param {string} url\n         */\n\n    }, {\n        key: 'submit',\n        value: function submit(requestType, url) {\n            var _this3 = this;\n\n            this.__validateRequestType(requestType);\n            this.errors.clear();\n            this.processing = true;\n            this.successful = false;\n\n            return new Promise(function (resolve, reject) {\n                _this3.__http[requestType](url, _this3.hasFiles() ? (0, _util.objectToFormData)(_this3.data()) : _this3.data()).then(function (response) {\n                    _this3.processing = false;\n                    _this3.onSuccess(response.data);\n\n                    resolve(response.data);\n                }).catch(function (error) {\n                    _this3.processing = false;\n                    _this3.onFail(error);\n\n                    reject(error);\n                });\n            });\n        }\n\n        /**\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'hasFiles',\n        value: function hasFiles() {\n            for (var property in this.initial) {\n                if (this.hasFilesDeep(this[property])) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    }, {\n        key: 'hasFilesDeep',\n\n\n        /**\n         * @param {Object|Array} object\n         * @returns {boolean}\n         */\n        value: function hasFilesDeep(object) {\n            if (object === null) {\n                return false;\n            }\n\n            if ((typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object') {\n                for (var key in object) {\n                    if (object.hasOwnProperty(key)) {\n                        if (this.hasFilesDeep(object[key])) {\n                            return true;\n                        }\n                    }\n                }\n            }\n\n            if (Array.isArray(object)) {\n                for (var _key in object) {\n                    if (object.hasOwnProperty(_key)) {\n                        return this.hasFilesDeep(object[_key]);\n                    }\n                }\n            }\n\n            return (0, _util.isFile)(object);\n        }\n\n        /**\n         * Handle a successful form submission.\n         *\n         * @param {object} data\n         */\n\n    }, {\n        key: 'onSuccess',\n        value: function onSuccess(data) {\n            this.successful = true;\n\n            if (this.__options.resetOnSuccess) {\n                this.reset();\n            }\n        }\n\n        /**\n         * Handle a failed form submission.\n         *\n         * @param {object} data\n         */\n\n    }, {\n        key: 'onFail',\n        value: function onFail(error) {\n            this.successful = false;\n\n            if (error.response && error.response.data.errors) {\n                this.errors.record(error.response.data.errors);\n            }\n        }\n\n        /**\n         * Get the error message(s) for the given field.\n         *\n         * @param field\n         */\n\n    }, {\n        key: 'hasError',\n        value: function hasError(field) {\n            return this.errors.has(field);\n        }\n\n        /**\n         * Get the first error message for the given field.\n         *\n         * @param {string} field\n         * @return {string}\n         */\n\n    }, {\n        key: 'getError',\n        value: function getError(field) {\n            return this.errors.first(field);\n        }\n\n        /**\n         * Get the error messages for the given field.\n         *\n         * @param {string} field\n         * @return {array}\n         */\n\n    }, {\n        key: 'getErrors',\n        value: function getErrors(field) {\n            return this.errors.get(field);\n        }\n    }, {\n        key: '__validateRequestType',\n        value: function __validateRequestType(requestType) {\n            var requestTypes = ['get', 'delete', 'head', 'post', 'put', 'patch'];\n\n            if (requestTypes.indexOf(requestType) === -1) {\n                throw new Error('`' + requestType + '` is not a valid request type, ' + ('must be one of: `' + requestTypes.join('`, `') + '`.'));\n            }\n        }\n    }], [{\n        key: 'create',\n        value: function create() {\n            var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            return new Form().withData(data);\n        }\n    }]);\n\n    return Form;\n}();\n\nexports.default = Form;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Form = require('./Form');\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Form).default;\n  }\n});\nObject.defineProperty(exports, 'Form', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Form).default;\n  }\n});\n\nvar _Errors = require('./Errors');\n\nObject.defineProperty(exports, 'Errors', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Errors).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.guardAgainstReservedFieldName = guardAgainstReservedFieldName;\nvar reservedFieldNames = exports.reservedFieldNames = ['__http', '__options', '__validateRequestType', 'clear', 'data', 'delete', 'errors', 'getError', 'getErrors', 'hasError', 'initial', 'onFail', 'only', 'onSuccess', 'patch', 'populate', 'post', 'processing', 'successful', 'put', 'reset', 'submit', 'withData', 'withErrors', 'withOptions'];\n\nfunction guardAgainstReservedFieldName(fieldName) {\n    if (reservedFieldNames.indexOf(fieldName) !== -1) {\n        throw new Error('Field name ' + fieldName + ' isn\\'t allowed to be used in a Form or Errors instance.');\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.objectToFormData = objectToFormData;\nfunction objectToFormData(object) {\n    var formData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new FormData();\n    var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (object === null || object === 'undefined' || object.length === 0) {\n        return formData.append(parent, object);\n    }\n\n    for (var property in object) {\n        if (object.hasOwnProperty(property)) {\n            appendToFormData(formData, getKey(parent, property), object[property]);\n        }\n    }\n\n    return formData;\n}\n\nfunction getKey(parent, property) {\n    return parent ? parent + '[' + property + ']' : property;\n}\n\nfunction appendToFormData(formData, key, value) {\n    if (value instanceof Date) {\n        return formData.append(key, value.toISOString());\n    }\n\n    if (value instanceof File) {\n        return formData.append(key, value, value.name);\n    }\n\n    if (typeof value === \"boolean\") {\n        return formData.append(key, value ? '1' : '0');\n    }\n\n    if (value === null) {\n        return formData.append(key, '');\n    }\n\n    if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object') {\n        return formData.append(key, value);\n    }\n\n    objectToFormData(value, formData, key);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _objects = require('./objects');\n\nObject.keys(_objects).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _objects[key];\n    }\n  });\n});\n\nvar _formData = require('./formData');\n\nObject.keys(_formData).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _formData[key];\n    }\n  });\n});\n\nvar _fieldNameValidation = require('./fieldNameValidation');\n\nObject.keys(_fieldNameValidation).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _fieldNameValidation[key];\n    }\n  });\n});","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.isArray = isArray;\nexports.isFile = isFile;\nexports.merge = merge;\nexports.cloneDeep = cloneDeep;\nfunction isArray(object) {\n    return Object.prototype.toString.call(object) === '[object Array]';\n}\n\nfunction isFile(object) {\n    return object instanceof File || object instanceof FileList;\n}\n\nfunction merge(a, b) {\n    for (var key in b) {\n        a[key] = cloneDeep(b[key]);\n    }\n}\n\nfunction cloneDeep(object) {\n    if (object === null) {\n        return null;\n    }\n\n    if (isFile(object)) {\n        return object;\n    }\n\n    if (Array.isArray(object)) {\n        var clone = [];\n\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                clone[key] = cloneDeep(object[key]);\n            }\n        }\n\n        return clone;\n    }\n\n    if ((typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object') {\n        var _clone = {};\n\n        for (var _key in object) {\n            if (object.hasOwnProperty(_key)) {\n                _clone[_key] = cloneDeep(object[_key]);\n            }\n        }\n\n        return _clone;\n    }\n\n    return object;\n}","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nmodule.exports = findIndex;\n","module.exports = require('./head');\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nmodule.exports = head;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('form',{attrs:{\"action\":_vm.action,\"method\":\"POST\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitWithRedirect.apply(null, arguments)}}},[_c('div',[_c('b-field',{attrs:{\"label\":_vm.trans('labels.countries')}},[_c('div',{staticClass:\"block\"},_vm._l((_vm.countries),function(country){return _c('b-checkbox',{key:country.id,attrs:{\"native-value\":country.id},model:{value:(_vm.form.countries_ids),callback:function ($$v) {_vm.$set(_vm.form, \"countries_ids\", $$v)},expression:\"form.countries_ids\"}},[_vm._v(\"\\n          \"+_vm._s(country.name)+\"\\n        \")])}),1)])],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-4\"},[_c('nz-taxon-autocomplete',{attrs:{\"label\":_vm.trans('labels.taxa.parent'),\"error\":_vm.form.errors.has('parent_id'),\"message\":_vm.form.errors.first('parent_id'),\"taxon\":_vm.taxon.parent || null,\"except\":_vm.taxon.id,\"placeholder\":_vm.trans('labels.taxa.search_for_taxon'),\"autofocus\":\"\"},on:{\"select\":_vm.onTaxonSelect},model:{value:(_vm.parentName),callback:function ($$v) {_vm.parentName=$$v},expression:\"parentName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column is-5\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.taxa.name'),\"type\":_vm.form.errors.has('name') ? 'is-danger' : '',\"message\":_vm.form.errors.has('name') ? _vm.form.errors.first('name') : ''}},[_c('b-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column is-3\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.taxa.rank'),\"type\":_vm.form.errors.has('rank') ? 'is-danger' : '',\"message\":_vm.form.errors.has('rank') ? _vm.form.errors.first('rank') : ''}},[_c('b-select',{attrs:{\"expanded\":\"\"},model:{value:(_vm.form.rank),callback:function ($$v) {_vm.$set(_vm.form, \"rank\", $$v)},expression:\"form.rank\"}},_vm._l((_vm.rankOptions),function(rank,index){return _c('option',{key:index,domProps:{\"value\":rank.value,\"textContent\":_vm._s(rank.label)}})}),0)],1)],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.author'),\"type\":_vm.form.errors.has('author') ? 'is-danger' : '',\"message\":_vm.form.errors.has('author') ? _vm.form.errors.first('author') : ''}},[_c('b-input',{model:{value:(_vm.form.author),callback:function ($$v) {_vm.$set(_vm.form, \"author\", $$v)},expression:\"form.author\"}})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.native_name')}},[_c('b-tabs',{staticClass:\"block\",attrs:{\"size\":\"is-small\"},on:{\"change\":(index) => _vm.focusOnTranslation(index, 'native_name')}},_vm._l((_vm.supportedLocales),function(data,locale){return _c('b-tab-item',{key:locale,attrs:{\"label\":_vm.trans('languages.' + data.name)}},[_c('b-input',{ref:`native_name-${locale}`,refInFor:true,model:{value:(_vm.form.native_name[locale]),callback:function ($$v) {_vm.$set(_vm.form.native_name, locale, $$v)},expression:\"form.native_name[locale]\"}})],1)}),1)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.description')}},[_c('b-tabs',{staticClass:\"block\",attrs:{\"size\":\"is-small\"},on:{\"change\":(index) => _vm.focusOnTranslation(index, 'description')}},_vm._l((_vm.supportedLocales),function(data,locale){return _c('b-tab-item',{key:locale,attrs:{\"label\":_vm.trans('languages.' + data.name)}},[_c('nz-wysiwyg',{ref:`description-${locale}`,refInFor:true,model:{value:(_vm.form.description[locale]),callback:function ($$v) {_vm.$set(_vm.form.description, locale, $$v)},expression:\"form.description[locale]\"}})],1)}),1)],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-half\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.fe_old_id'),\"type\":_vm.form.errors.has('fe_old_id') ? 'is-danger' : '',\"message\":_vm.form.errors.has('fe_old_id') ? _vm.form.errors.first('fe_old_id') : ''}},[_c('b-input',{model:{value:(_vm.form.fe_old_id),callback:function ($$v) {_vm.$set(_vm.form, \"fe_old_id\", $$v)},expression:\"form.fe_old_id\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column is-half\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.fe_id'),\"type\":_vm.form.errors.has('fe_id') ? 'is-danger' : '',\"message\":_vm.form.errors.has('fe_id') ? _vm.form.errors.first('fe_id') : ''}},[_c('b-input',{model:{value:(_vm.form.fe_id),callback:function ($$v) {_vm.$set(_vm.form, \"fe_id\", $$v)},expression:\"form.fe_id\"}})],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.restricted')}},[_c('div',{staticClass:\"field\"},[_c('b-switch',{model:{value:(_vm.form.restricted),callback:function ($$v) {_vm.$set(_vm.form, \"restricted\", $$v)},expression:\"form.restricted\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.form.restricted ? _vm.trans('Yes') : _vm.trans('No'))+\"\\n          \")])],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.allochthonous')}},[_c('b-switch',{model:{value:(_vm.form.allochthonous),callback:function ($$v) {_vm.$set(_vm.form, \"allochthonous\", $$v)},expression:\"form.allochthonous\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.form.allochthonous ? _vm.trans('Yes') : _vm.trans('No'))+\"\\n        \")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.invasive')}},[_c('b-switch',{model:{value:(_vm.form.invasive),callback:function ($$v) {_vm.$set(_vm.form, \"invasive\", $$v)},expression:\"form.invasive\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.form.invasive ? _vm.trans('Yes') : _vm.trans('No'))+\"\\n        \")])],1)],1)]),_vm._v(\" \"),(_vm.stages.length)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.stages')}},[_c('div',{staticClass:\"block\"},_vm._l((_vm.stages),function(stage){return _c('b-checkbox',{key:stage.id,attrs:{\"native-value\":stage.id},model:{value:(_vm.form.stages_ids),callback:function ($$v) {_vm.$set(_vm.form, \"stages_ids\", $$v)},expression:\"form.stages_ids\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.trans('stages.' + stage.name))+\"\\n      \")])}),1)]):_vm._e(),_vm._v(\" \"),(_vm.conservationLegislations.length)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.conservation_legislations')}},[_c('div',{staticClass:\"block\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},_vm._l((_vm.conservationLegislations),function(conservationLegislation){return _c('div',{key:conservationLegislation.id,staticClass:\"column is-half\"},[_c('b-tooltip',{attrs:{\"label\":conservationLegislation.description,\"multilined\":\"\"}},[_c('b-checkbox',{attrs:{\"native-value\":conservationLegislation.id},model:{value:(_vm.form.conservation_legislations_ids),callback:function ($$v) {_vm.$set(_vm.form, \"conservation_legislations_ids\", $$v)},expression:\"form.conservation_legislations_ids\"}},[_vm._v(\"\\n              \"+_vm._s(conservationLegislation.name)+\"\\n            \")])],1)],1)}),0)])]):_vm._e(),_vm._v(\" \"),(_vm.conservationDocuments.length)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.conservation_documents')}},[_c('div',{staticClass:\"block\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},_vm._l((_vm.conservationDocuments),function(conservationDocument){return _c('div',{key:conservationDocument.id,staticClass:\"column is-half\"},[_c('b-tooltip',{attrs:{\"label\":conservationDocument.description,\"multilined\":\"\"}},[_c('b-checkbox',{attrs:{\"native-value\":conservationDocument.id},model:{value:(_vm.form.conservation_documents_ids),callback:function ($$v) {_vm.$set(_vm.form, \"conservation_documents_ids\", $$v)},expression:\"form.conservation_documents_ids\"}},[_vm._v(\"\\n              \"+_vm._s(conservationDocument.name)+\"\\n            \")])],1)],1)}),0)])]):_vm._e(),_vm._v(\" \"),(_vm.redLists.length)?_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.trans('labels.taxa.red_lists')))]),_vm._v(\" \"),_vm._l((_vm.form.red_lists_data),function(addedRedList,index){return _c('b-field',{key:index,attrs:{\"grouped\":\"\"}},[_c('div',{staticClass:\"control is-expanded\"},[_c('span',{domProps:{\"textContent\":_vm._s(_vm.getRedListName(addedRedList.red_list_id))}})]),_vm._v(\" \"),_c('b-select',{model:{value:(addedRedList.category),callback:function ($$v) {_vm.$set(addedRedList, \"category\", $$v)},expression:\"addedRedList.category\"}},_vm._l((_vm.redListCategories),function(category){return _c('option',{key:category,domProps:{\"value\":category,\"textContent\":_vm._s(category)}})}),0),_vm._v(\" \"),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button has-text-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeRedList(index)}}},[_vm._v(\"×\")])])],1)}),_vm._v(\" \"),(_vm.availableRedLists.length)?_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-select',{attrs:{\"expanded\":\"\"},model:{value:(_vm.chosenRedList),callback:function ($$v) {_vm.chosenRedList=$$v},expression:\"chosenRedList\"}},_vm._l((_vm.availableRedLists),function(option){return _c('option',{key:option.id,domProps:{\"value\":option,\"textContent\":_vm._s(option.name)}})}),0),_vm._v(\" \"),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addRedList}},[_vm._v(_vm._s(_vm.trans('labels.taxa.add_red_list')))])])],1):_vm._e()],2):_vm._e(),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.atlas_codes')}},[_c('b-checkbox',{model:{value:(_vm.form.uses_atlas_codes),callback:function ($$v) {_vm.$set(_vm.form, \"uses_atlas_codes\", $$v)},expression:\"form.uses_atlas_codes\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.trans('labels.taxa.uses_atlas_codes'))+\"\\n    \")])],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('label',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.trans(\"labels.taxa.synonyms\")))]),_vm._v(\" \"),(_vm.taxon.id != null)?_c('div',[(_vm.synonyms.length > 0)?_c('div',_vm._l((_vm.synonyms),function(synonym,index){return _c('b-field',{key:index},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-half\"},[_c('p',[_vm._v(_vm._s(synonym.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.taxa.remove_synonym')}),expression:\"{content: trans('labels.taxa.remove_synonym')}\"}],staticClass:\"delete\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeSynonym(index, synonym.id)}}})])])])}),1):_vm._e()]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.synonymNames),function(synonym,index){return _c('b-field',{key:index},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-half\"},[_c('p',[_vm._v(_vm._s(synonym))])]),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.taxa.remove_synonym')}),expression:\"{content: trans('labels.taxa.remove_synonym')}\"}],staticClass:\"delete\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeSynonym(index, 0)}}})])])])}),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-input',{attrs:{\"maxlength\":\"100\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.preventDefault();return _vm.addSynonym.apply(null, arguments)}},model:{value:(_vm.synonym_name),callback:function ($$v) {_vm.synonym_name=$$v},expression:\"synonym_name\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"button is-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addSynonym}},[_vm._v(\"\\n                \"+_vm._s(_vm.trans(\"labels.taxa.add_synonym\"))+\"\\n            \")])])]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary\",class:{\n        'is-loading': _vm.form.processing\n    },attrs:{\"type\":\"submit\"},on:{\"click\":_vm.submitWithRedirect}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('buttons.save'))+\"\\n  \")]),_vm._v(\" \"),_c('a',{staticClass:\"button is-text\",attrs:{\"href\":_vm.cancelUrl},on:{\"click\":_vm.onCancel}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Form from 'form-backend-validation'\r\nimport _pick from 'lodash/pick'\r\nimport _get from 'lodash/get'\r\nimport _isEqual from 'lodash/isEqual'\r\n\r\n\r\nexport default {\r\n  name: 'nzFieldObservationForm',\r\n\r\n  props: {\r\n    action: {\r\n      type: String,\r\n      required: true\r\n    },\r\n\r\n    method: {\r\n      type: String,\r\n      default: 'POST'\r\n    },\r\n\r\n    redirectUrl: String,\r\n    cancelUrl: String,\r\n\r\n    submitMore: Boolean,\r\n    shouldConfirmSubmit: Boolean,\r\n    confirmSubmitMessage: {\r\n      type: String,\r\n      default() {\r\n        return this.trans('You are about to submit')\r\n      }\r\n    },\r\n    shouldAskReason: Boolean,\r\n    shouldConfirmCancel: Boolean,\r\n    submitOnlyDirty: Boolean,\r\n    submitOnlyDirtyMessage: {\r\n      type: String,\r\n      default() {\r\n        return this.trans('There are no changes, the data will not be saved.')\r\n      }\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      form: this.newForm(),\r\n      keepAfterSubmit: [],\r\n      submittingWithRedirect: false,\r\n      submittingWithoutRedirect: false,\r\n      confirmingSubmit: false,\r\n      confirmingCancel: false,\r\n      locale: window.App.locale\r\n    }\r\n  },\r\n\r\n  created() {\r\n    document.addEventListener('keyup', this.registerKeyListener)\r\n  },\r\n\r\n  beforeDestroy() {\r\n    document.removeEventListener('keyup', this.registerKeyListener)\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Create new form instance.\r\n     *\r\n     * @param  {Object} data default form data\r\n     * @return {Form}\r\n     */\r\n    newForm(data = {}) {\r\n      return new Form(data, {\r\n        resetOnSuccess: false\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Keyboard shortcuts.\r\n     *\r\n     * @param {Event} e\r\n     */\r\n    registerKeyListener(e) {\r\n      const enter = 13 === (e.which || e.keyCode)\r\n\r\n      if (e.ctrlKey && e.shiftKey && enter) {\r\n        this.submitMore && this.submitWithoutRedirect()\r\n      } else if (e.ctrlKey && enter) {\r\n        this.submitWithRedirect()\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Confirm submit.\r\n     *\r\n     * @param {Function} onConfirm\r\n     */\r\n    confirmSubmit(onConfirm) {\r\n      if (this.confirmingSubmit) return\r\n\r\n      this.confirmingSubmit = true\r\n\r\n      const options = {\r\n        message: this.confirmSubmitMessage,\r\n        confirmText: this.trans('buttons.save'),\r\n        cancelText: this.trans('buttons.cancel'),\r\n        onConfirm,\r\n        onCancel: () => { this.confirmingSubmit = false }\r\n      }\r\n\r\n      if (!this.shouldAskReason) {\r\n        return this.$buefy.dialog.confirm(options)\r\n      }\r\n\r\n      return this.promptForReason(options)\r\n    },\r\n\r\n    /**\r\n     * Prompt the user for reason of change.\r\n     *\r\n     * @param  {Object} options\r\n     * @return {Vue}\r\n     */\r\n    promptForReason(options) {\r\n      const dialog = this.$buefy.dialog.prompt({\r\n        ...options,\r\n        inputAttrs: {\r\n            placeholder: this.trans('Reason'),\r\n            required: true,\r\n            maxlength: 255\r\n        }\r\n      })\r\n\r\n      // Custom localized validation for the prompt input.\r\n      dialog.$nextTick(() => {\r\n        dialog.$refs.input.addEventListener('invalid', (e) => {\r\n          e.target.setCustomValidity('')\r\n\r\n          if (!e.target.validity.valid) {\r\n            e.target.setCustomValidity(this.trans('This field is required and can contain max 255 chars.'))\r\n          }\r\n        })\r\n\r\n        dialog.$refs.input.addEventListener('input', (e) => {\r\n          dialog.validationMessage = null\r\n        })\r\n      })\r\n\r\n      return dialog\r\n    },\r\n\r\n    /**\r\n     * Notify the user there are no changes.\r\n     */\r\n    notifyNoChanges() {\r\n      this.$buefy.toast.open({\r\n        message: this.submitOnlyDirtyMessage,\r\n        type: 'is-info'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Notify the user there are no changes and redirect.\r\n     */\r\n    notifyNoChangesAndRedirect() {\r\n      this.notifyNoChanges()\r\n\r\n      setTimeout(() => {\r\n        if (this.redirectUrl) {\r\n          window.location.href = this.redirectUrl\r\n        }\r\n      }, 500)\r\n    },\r\n\r\n    /**\r\n     * Submit the form with redirect.\r\n     */\r\n    submitWithRedirect() {\r\n      if (this.form.processing) return\r\n\r\n      if (this.submitOnlyDirty && !this.isDirty()) return this.notifyNoChangesAndRedirect()\r\n\r\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithRedirect)\r\n\r\n      this.performSubmitWithRedirect()\r\n    },\r\n\r\n    /**\r\n     * Submit the form with redirect.\r\n     */\r\n    performSubmitWithRedirect(reason = null) {\r\n      this.submittingWithRedirect = true\r\n      this.confirmingSubmit = false\r\n\r\n      if (this.shouldAskReason) {\r\n        this.form.reason = reason\r\n      }\r\n\r\n      this.form[this.method.toLowerCase()](this.action)\r\n          .then(this.onSuccessfulSubmitWithRedirect)\r\n          .catch(this.onFailedSubmit)\r\n    },\r\n\r\n    /**\r\n     * Handle successful form submit with redirect.\r\n     */\r\n    onSuccessfulSubmitWithRedirect() {\r\n      this.form.processing = true\r\n\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Saved successfully'),\r\n        type: 'is-success'\r\n      })\r\n\r\n      // We want to wait a bit before we send the user to redirect route\r\n      // so we can show the message that the action was successful.\r\n      setTimeout(() => {\r\n        this.form.processing = false\r\n        this.submittingWithRedirect = false\r\n\r\n        this.hookAfterSubmitWithRedirect()\r\n\r\n        if (this.redirectUrl) {\r\n          window.location.href = this.redirectUrl\r\n        }\r\n      }, 500)\r\n    },\r\n\r\n    /**\r\n     * Perform after submit with redirect is successful.\r\n     */\r\n    hookAfterSubmitWithRedirect() {},\r\n\r\n    /**\r\n     * Submit the form and stay to add more.\r\n     */\r\n    submitWithoutRedirect() {\r\n      if (this.form.processing) return\r\n\r\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\r\n\r\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirect)\r\n\r\n      this.performSubmitWithoutRedirect()\r\n    },\r\n\r\n    /**\r\n     * Submit the form and stay to add more.\r\n     */\r\n    performSubmitWithoutRedirect(reason = null) {\r\n      this.submittingWithoutRedirect = true\r\n      this.confirmingSubmit = false\r\n\r\n      if (this.shouldAskReason) {\r\n        this.form.reason = reason\r\n      }\r\n\r\n      this.form[this.method.toLowerCase()](this.action)\r\n          .then(this.onSuccessfulSubmitWithoutRedirect)\r\n          .catch(this.onFailedSubmit)\r\n    },\r\n\r\n    /**\r\n     * Handle successful form submit with no redirect.\r\n     */\r\n    onSuccessfulSubmitWithoutRedirect() {\r\n      this.submittingWithoutRedirect = false\r\n\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Saved successfully'),\r\n        type: 'is-success'\r\n      })\r\n\r\n      // Reset the form but remember some data.\r\n      const keep = _pick(this.form.data(), this.keepAfterSubmit)\r\n      this.form.reset()\r\n      this.form.populate(keep)\r\n\r\n      this.hookAfterSubmitWithoutRedirect()\r\n    },\r\n\r\n    /**\r\n     * Perform after submit without redirect is successful.\r\n     */\r\n    hookAfterSubmitWithoutRedirect() {},\r\n\r\n    /**\r\n     * Handle failed form submit.\r\n     *\r\n     * @param {Error} error\r\n     */\r\n    onFailedSubmit(error) {\r\n      this.submittingWithRedirect = false\r\n      this.submittingWithoutRedirect = false\r\n\r\n      this.$buefy.toast.open({\r\n        duration: 2500,\r\n        message: _get(error, 'response.data.message', error.message),\r\n        type: 'is-danger'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Check if form is changed.\r\n     *\r\n     * @return {Boolean}\r\n     */\r\n    isDirty() {\r\n      return ! _isEqual(this.form.data(), this.form.initial)\r\n    },\r\n\r\n    /**\r\n     * Confirmation dialog for canceling.\r\n     */\r\n    confirmCancel() {\r\n      if (this.confirmingCancel) return\r\n\r\n      this.confirmingCancel = true\r\n\r\n      this.$buefy.dialog.confirm({\r\n        message: this.trans('If you leave this page changes will not be saved.'),\r\n        onConfirm: () => {\r\n          this.confirmingCancel = false\r\n          window.location.href = this.cancelUrl\r\n        },\r\n        onCancel: () => { this.confirmingCancel = false },\r\n        cancelText: this.trans('buttons.stay_on_page'),\r\n        confirmText: this.trans('buttons.leave_page'),\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Handle cancel button/link.\r\n     *\r\n     * @param {Event} event\r\n     */\r\n    onCancel(event) {\r\n      if (this.shouldConfirmCancel && this.isDirty()) {\r\n        event.preventDefault()\r\n\r\n        this.confirmCancel()\r\n      }\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <form :action=\"action\" method=\"POST\" @submit.prevent=\"submitWithRedirect\">\r\n    <div>\r\n      <b-field :label=\"trans('labels.countries')\">\r\n        <div class=\"block\">\r\n          <b-checkbox\r\n            v-for=\"country in countries\"\r\n            :key=\"country.id\"\r\n            v-model=\"form.countries_ids\"\r\n            :native-value=\"country.id\"\r\n          >\r\n            {{ country.name }}\r\n          </b-checkbox>\r\n        </div>\r\n      </b-field>\r\n    </div>\r\n    <hr>\r\n    <div class=\"columns\">\r\n      <div class=\"column is-4\">\r\n        <nz-taxon-autocomplete\r\n          :label=\"trans('labels.taxa.parent')\"\r\n          v-model=\"parentName\"\r\n          @select=\"onTaxonSelect\"\r\n          :error=\"form.errors.has('parent_id')\"\r\n          :message=\"form.errors.first('parent_id')\"\r\n          :taxon=\"taxon.parent || null\"\r\n          :except=\"taxon.id\"\r\n          :placeholder=\"trans('labels.taxa.search_for_taxon')\"\r\n          autofocus\r\n        />\r\n      </div>\r\n\r\n\r\n      <div class=\"column is-5\">\r\n        <b-field\r\n          :label=\"trans('labels.taxa.name')\"\r\n          class=\"is-required\"\r\n          :type=\"form.errors.has('name') ? 'is-danger' : ''\"\r\n          :message=\"form.errors.has('name') ? form.errors.first('name') : ''\"\r\n        >\r\n          <b-input v-model=\"form.name\" />\r\n        </b-field>\r\n      </div>\r\n\r\n      <div class=\"column is-3\">\r\n        <b-field\r\n          :label=\"trans('labels.taxa.rank')\"\r\n          class=\"is-required\"\r\n          :type=\"form.errors.has('rank') ? 'is-danger' : ''\"\r\n          :message=\"form.errors.has('rank') ? form.errors.first('rank') : ''\"\r\n        >\r\n          <b-select v-model=\"form.rank\" expanded>\r\n            <option\r\n              v-for=\"(rank, index) in rankOptions\"\r\n              :value=\"rank.value\"\r\n              :key=\"index\"\r\n              v-text=\"rank.label\"\r\n            />\r\n          </b-select>\r\n        </b-field>\r\n      </div>\r\n    </div>\r\n\r\n    <b-field\r\n      :label=\"trans('labels.taxa.author')\"\r\n      :type=\"form.errors.has('author') ? 'is-danger' : ''\"\r\n      :message=\"form.errors.has('author') ? form.errors.first('author') : ''\"\r\n    >\r\n      <b-input v-model=\"form.author\" />\r\n    </b-field>\r\n\r\n    <hr>\r\n\r\n    <b-field :label=\"trans('labels.taxa.native_name')\">\r\n      <b-tabs size=\"is-small\" class=\"block\" @change=\"(index) => focusOnTranslation(index, 'native_name')\">\r\n        <b-tab-item :label=\"trans('languages.' + data.name)\" v-for=\"(data, locale) in supportedLocales\" :key=\"locale\">\r\n          <b-input v-model=\"form.native_name[locale]\" :ref=\"`native_name-${locale}`\" />\r\n        </b-tab-item>\r\n      </b-tabs>\r\n    </b-field>\r\n\r\n    <b-field :label=\"trans('labels.taxa.description')\">\r\n      <b-tabs size=\"is-small\" class=\"block\" @change=\"(index) => focusOnTranslation(index, 'description')\">\r\n        <b-tab-item :label=\"trans('languages.' + data.name)\" v-for=\"(data, locale) in supportedLocales\" :key=\"locale\">\r\n          <nz-wysiwyg v-model=\"form.description[locale]\" :ref=\"`description-${locale}`\" />\r\n        </b-tab-item>\r\n      </b-tabs>\r\n    </b-field>\r\n\r\n    <hr>\r\n\r\n    <div class=\"columns\">\r\n      <div class=\"column is-half\">\r\n        <b-field\r\n          :label=\"trans('labels.taxa.fe_old_id')\"\r\n          :type=\"form.errors.has('fe_old_id') ? 'is-danger' : ''\"\r\n          :message=\"form.errors.has('fe_old_id') ? form.errors.first('fe_old_id') : ''\"\r\n        >\r\n          <b-input v-model=\"form.fe_old_id\" />\r\n        </b-field>\r\n      </div>\r\n\r\n      <div class=\"column is-half\">\r\n        <b-field\r\n          :label=\"trans('labels.taxa.fe_id')\"\r\n          :type=\"form.errors.has('fe_id') ? 'is-danger' : ''\"\r\n          :message=\"form.errors.has('fe_id') ? form.errors.first('fe_id') : ''\"\r\n        >\r\n          <b-input v-model=\"form.fe_id\" />\r\n        </b-field>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <b-field :label=\"trans('labels.taxa.restricted')\">\r\n          <div class=\"field\">\r\n            <b-switch v-model=\"form.restricted\">\r\n              {{ form.restricted ? trans('Yes') : trans('No') }}\r\n            </b-switch>\r\n          </div>\r\n        </b-field>\r\n      </div>\r\n      <div class=\"column\">\r\n        <b-field :label=\"trans('labels.taxa.allochthonous')\">\r\n          <b-switch v-model=\"form.allochthonous\">\r\n            {{ form.allochthonous ? trans('Yes') : trans('No') }}\r\n          </b-switch>\r\n        </b-field>\r\n      </div>\r\n      <div class=\"column\">\r\n        <b-field :label=\"trans('labels.taxa.invasive')\">\r\n          <b-switch v-model=\"form.invasive\">\r\n            {{ form.invasive ? trans('Yes') : trans('No') }}\r\n          </b-switch>\r\n        </b-field>\r\n      </div>\r\n    </div>\r\n\r\n    <b-field :label=\"trans('labels.taxa.stages')\" v-if=\"stages.length\">\r\n      <div class=\"block\">\r\n        <b-checkbox\r\n          v-for=\"stage in stages\"\r\n          :key=\"stage.id\"\r\n          v-model=\"form.stages_ids\"\r\n          :native-value=\"stage.id\"\r\n        >\r\n          {{ trans('stages.' + stage.name) }}\r\n        </b-checkbox>\r\n      </div>\r\n    </b-field>\r\n\r\n    <b-field :label=\"trans('labels.taxa.conservation_legislations')\" v-if=\"conservationLegislations.length\">\r\n      <div class=\"block\">\r\n        <div class=\"columns is-multiline is-gapless\">\r\n          <div class=\"column is-half\" v-for=\"conservationLegislation in conservationLegislations\" :key=\"conservationLegislation.id\">\r\n            <b-tooltip :label=\"conservationLegislation.description\" multilined>\r\n              <b-checkbox\r\n                v-model=\"form.conservation_legislations_ids\"\r\n                :native-value=\"conservationLegislation.id\"\r\n              >\r\n                {{ conservationLegislation.name }}\r\n              </b-checkbox>\r\n            </b-tooltip>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </b-field>\r\n\r\n    <b-field :label=\"trans('labels.taxa.conservation_documents')\" v-if=\"conservationDocuments.length\">\r\n      <div class=\"block\">\r\n        <div class=\"columns is-multiline is-gapless\">\r\n          <div class=\"column is-half\" v-for=\"conservationDocument in conservationDocuments\" :key=\"conservationDocument.id\">\r\n            <b-tooltip :label=\"conservationDocument.description\" multilined>\r\n              <b-checkbox\r\n                v-model=\"form.conservation_documents_ids\"\r\n                :native-value=\"conservationDocument.id\"\r\n              >\r\n                {{ conservationDocument.name }}\r\n              </b-checkbox>\r\n            </b-tooltip>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </b-field>\r\n\r\n    <div class=\"field\" v-if=\"redLists.length\">\r\n      <label class=\"label\">{{ trans('labels.taxa.red_lists') }}</label>\r\n\r\n      <b-field v-for=\"(addedRedList, index) in form.red_lists_data\" :key=\"index\" grouped>\r\n        <div class=\"control is-expanded\">\r\n          <span v-text=\"getRedListName(addedRedList.red_list_id)\"></span>\r\n        </div>\r\n\r\n        <b-select v-model=\"addedRedList.category\">\r\n          <option v-for=\"category in redListCategories\" :value=\"category\" :key=\"category\" v-text=\"category\">\r\n          </option>\r\n        </b-select>\r\n\r\n        <div class=\"control\">\r\n          <button type=\"button\" class=\"button has-text-danger\" @click=\"removeRedList(index)\">&times;</button>\r\n        </div>\r\n      </b-field>\r\n\r\n      <b-field grouped v-if=\"availableRedLists.length\">\r\n        <b-select v-model=\"chosenRedList\" expanded>\r\n          <option v-for=\"option in availableRedLists\" :value=\"option\" :key=\"option.id\" v-text=\"option.name\">\r\n          </option>\r\n        </b-select>\r\n\r\n        <div class=\"control\">\r\n          <button type=\"button\" class=\"button\" @click=\"addRedList\">{{ trans('labels.taxa.add_red_list') }}</button>\r\n        </div>\r\n      </b-field>\r\n    </div>\r\n\r\n    <b-field :label=\"trans('labels.taxa.atlas_codes')\">\r\n      <b-checkbox v-model=\"form.uses_atlas_codes\">\r\n        {{ trans('labels.taxa.uses_atlas_codes') }}\r\n      </b-checkbox>\r\n    </b-field>\r\n\r\n      <hr>\r\n      <label class=\"label\">{{ trans(\"labels.taxa.synonyms\") }}</label>\r\n      <div v-if=\"taxon.id != null\">\r\n          <div v-if=\"synonyms.length > 0\">\r\n              <b-field v-for=\"(synonym, index) in synonyms\" :key=\"index\">\r\n                  <div class=\"columns\">\r\n                      <div class=\"column is-half\"><p>{{ synonym.name }}</p></div>\r\n                      <div class=\"column\">\r\n                          <button type=\"button\" class=\"delete\" @click=\"removeSynonym(index, synonym.id)\"\r\n                              v-tooltip=\"{content: trans('labels.taxa.remove_synonym')}\">\r\n                          </button>\r\n                      </div>\r\n                  </div>\r\n              </b-field>\r\n          </div>\r\n      </div>\r\n      <b-field v-for=\"(synonym, index) in synonymNames\" :key=\"index\">\r\n          <div class=\"columns\">\r\n              <div class=\"column is-half\"><p>{{ synonym }}</p></div>\r\n              <div class=\"column\">\r\n                <button type=\"button\" class=\"delete\" @click=\"removeSynonym(index, 0)\"\r\n                  v-tooltip=\"{content: trans('labels.taxa.remove_synonym')}\">\r\n                </button>\r\n              </div>\r\n          </div>\r\n      </b-field>\r\n\r\n      <div class=\"columns\">\r\n          <div class=\"column\">\r\n              <b-input maxlength=\"100\" v-model=\"synonym_name\" v-on:keydown.native.enter.prevent=\"addSynonym\"/>\r\n          </div>\r\n          <div class=\"column\">\r\n              <button type=\"button\" class=\"button is-primary\" @click=\"addSynonym\">\r\n                  {{ trans(\"labels.taxa.add_synonym\") }}\r\n              </button>\r\n          </div>\r\n      </div>\r\n\r\n      <hr>\r\n\r\n    <button\r\n      type=\"submit\"\r\n      class=\"button is-primary\"\r\n      :class=\"{\r\n          'is-loading': form.processing\r\n      }\"\r\n      @click=\"submitWithRedirect\"\r\n    >\r\n      {{ trans('buttons.save') }}\r\n    </button>\r\n\r\n    <a :href=\"cancelUrl\" class=\"button is-text\" @click=\"onCancel\">{{ trans('buttons.cancel') }}</a>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport Form from 'form-backend-validation'\r\nimport _keys from 'lodash/keys'\r\nimport _find from 'lodash/find'\r\nimport _first from 'lodash/first'\r\nimport _get from 'lodash/get'\r\nimport FormMixin from '@/mixins/FormMixin'\r\nimport NzWysiwyg from '@/components/inputs/Wysiwyg'\r\nimport NzTaxonAutocomplete from '@/components/inputs/TaxonAutocomplete'\r\n\r\nfunction defaultTranslations() {\r\n  const value = {}\r\n\r\n  _keys(window.App.supportedLocales).forEach(locale => {\r\n    value[locale] = null\r\n  })\r\n\r\n  return value\r\n}\r\n\r\nexport default {\r\n  name: 'nzTaxonForm',\r\n\r\n  mixins: [FormMixin],\r\n\r\n  components: {\r\n    NzWysiwyg,\r\n    NzTaxonAutocomplete\r\n  },\r\n\r\n  props: {\r\n    taxon: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          name: null,\r\n          parent_id: null,\r\n          rank: 'species',\r\n          rank_level: 10,\r\n          author: null,\r\n          fe_id: null,\r\n          fe_old_id: null,\r\n          conservation_legislations: [],\r\n          conservation_documents: [],\r\n          red_lists: [],\r\n          stages: [],\r\n          restricted: false,\r\n          allochthonous: false,\r\n          invasive: false,\r\n          uses_atlas_codes: false,\r\n          synonyms: [],\r\n          countries: [],\r\n          removedSynonyms: [],\r\n        }\r\n      }\r\n    },\r\n    ranks: Array,\r\n    conservationLegislations: Array,\r\n    conservationDocuments: Array,\r\n    redListCategories: Array,\r\n    redLists: {\r\n      type: Array,\r\n      default() { return [] }\r\n    },\r\n    stages: Array,\r\n    nativeNames: {\r\n      type: Object,\r\n      default: () => defaultTranslations()\r\n    },\r\n    descriptions: {\r\n      type: Object,\r\n      default: () => defaultTranslations()\r\n    },\r\n    synonymNames: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      }\r\n    },\r\n    countries: Array,\r\n    removedSynonyms: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      form: this.newForm(),\r\n      parentName: _get(this.taxon, 'parent.name'),\r\n      selectedParent: null,\r\n      chosenRedList: null,\r\n      synonym_name: null,\r\n      synonyms: this.taxon.synonyms,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    rankOptions() {\r\n      if (this.selectedParent) {\r\n        return this.ranks.filter((rank) => rank.level < this.selectedParent.rank_level)\r\n      }\r\n\r\n      return this.ranks\r\n    },\r\n\r\n    availableRedLists() {\r\n      const addedRedListIds = this.form.red_lists_data\r\n\r\n      return this.redLists.filter(redList => !_find(addedRedListIds, rl => redList.id == rl.red_list_id))\r\n    },\r\n\r\n    supportedLocales() {\r\n      return window.App.supportedLocales\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    selectedParent(value) {\r\n      if (this.shouldResetRank(value)) {\r\n        this.form.rank = null\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    newForm() {\r\n      return new Form({\r\n        ...this.taxon,\r\n        stages_ids: this.taxon.stages.map(stage => stage.id),\r\n        conservation_legislations_ids: this.taxon.conservation_legislations.map(conservationLegislation => conservationLegislation.id),\r\n        conservation_documents_ids: this.taxon.conservation_documents.map(conservationDocument => conservationDocument.id),\r\n        countries_ids: this.taxon.countries.map(country => country.id),\r\n        red_lists_data: this.taxon.red_lists.map(redList => {\r\n          return { red_list_id: redList.id, category: redList.pivot.category }\r\n        }),\r\n        native_name: this.nativeNames,\r\n        description: this.descriptions,\r\n        reason: null,\r\n        uses_atlas_codes: this.taxon.uses_atlas_codes,\r\n        synonyms: this.taxon.synonyms,\r\n        synonym_names: this.synonymNames,\r\n        removed_synonyms: this.removedSynonyms,\r\n      }, {\r\n        resetOnSuccess: false\r\n      })\r\n    },\r\n\r\n    removeSynonym(index, id) {\r\n      if (id === 0){\r\n        this.$delete(this.synonymNames, index);\r\n        return;\r\n      }\r\n      this.removedSynonyms.push(id);\r\n      this.$delete(this.synonyms, index);\r\n    },\r\n\r\n    addSynonym(){\r\n      if (!this.synonym_name) return;\r\n      this.synonymNames.push(this.synonym_name)\r\n      this.synonym_name = null;\r\n    },\r\n\r\n    /**\r\n     * Add field to the form.\r\n     */\r\n    addRedList() {\r\n      if (!this.chosenRedList) return\r\n\r\n      this.form.red_lists_data.push({\r\n        red_list_id: this.chosenRedList.id,\r\n        category: _first(this.redListCategories)\r\n      })\r\n\r\n      this.chosenRedList = null\r\n    },\r\n\r\n    /**\r\n     * Don't use the field any more.\r\n     *\r\n     * @param  {Object} field\r\n     */\r\n    removeRedList(index) {\r\n        this.form.red_lists_data.splice(index, 1)\r\n    },\r\n\r\n    getRedListName(id) {\r\n        return _find(this.redLists, { id }).name\r\n    },\r\n\r\n    /**\r\n     * Handle taxon being selected.\r\n     *\r\n     * @param {Object} taxon\r\n     */\r\n    onTaxonSelect(taxon) {\r\n      this.selectedParent = taxon\r\n      this.form.parent_id = taxon ? taxon.id : null\r\n\r\n      // Inherit parent's stages\r\n      if (taxon && taxon.stages.length) {\r\n        this.form.stages_ids = taxon.stages.map(stage => stage.id)\r\n      }\r\n    },\r\n\r\n    shouldResetRank(selectedParent) {\r\n      return selectedParent && this.getRankLevel(this.form.rank) >= selectedParent.rank_level\r\n    },\r\n\r\n    /**\r\n     * Get rank level.\r\n     * @param {Object} rank\r\n     * @return {Number}\r\n     */\r\n    getRankLevel(rank) {\r\n      return _get(_find(this.ranks, { value: rank }), 'level')\r\n    },\r\n\r\n    focusOnTranslation(index, attribute) {\r\n      const locales = _keys(this.supportedLocales)\r\n      const selector = `${attribute}-${locales[index]}`\r\n\r\n      setTimeout(() => {\r\n        _first(this.$refs[selector]).focus()\r\n      }, 500)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaxonForm.vue?vue&type=template&id=2ef0db2d&\"\nimport script from \"./TaxonForm.vue?vue&type=script&lang=js&\"\nexport * from \"./TaxonForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-field',{staticClass:\"nz-taxon-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[(_vm.haveThumbnail)?_c('img',{attrs:{\"width\":\"32\",\"src\":this.selected.thumbnail_url}}):_vm._e(),_vm._v(\" \"),_c('b-autocomplete',{ref:\"autocomplete\",class:[_vm.selected ? 'has-icon-success' : ''],attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"name\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus,\"check-infinite-scroll\":\"\"},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect,\"infinite-scroll\":_vm.loadMore},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.enterPressed.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"detault\",fn:function({ option }){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-left\"},[(option.thumbnail_url)?_c('img',{attrs:{\"width\":\"32\",\"src\":option.thumbnail_url}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(option.name)+_vm._s(option.native_name ? ` (${option.native_name})` : \"\")+\"\\n          \")])])]}}])})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-field\r\n    :label=\"label\"\r\n    class=\"nz-taxon-autocomplete\"\r\n    :type=\"error ? 'is-danger' : null\"\r\n    :message=\"message\"\r\n  >\r\n    <b-field grouped>\r\n      <img width=\"32\" :src=\"this.selected.thumbnail_url\" v-if=\"haveThumbnail\" />\r\n      <b-autocomplete\r\n        ref=\"autocomplete\"\r\n        :value=\"value\"\r\n        :data=\"data\"\r\n        field=\"name\"\r\n        :loading=\"loading\"\r\n        @input=\"onInput\"\r\n        @select=\"onSelect\"\r\n        :icon=\"icon\"\r\n        :placeholder=\"placeholder\"\r\n        expanded\r\n        :autofocus=\"autofocus\"\r\n        @keydown.native.enter=\"enterPressed\"\r\n        :class=\"[selected ? 'has-icon-success' : '']\"\r\n        check-infinite-scroll\r\n        @infinite-scroll=\"loadMore\"\r\n      >\r\n        <template #detault=\"{ option }\">\r\n          <div class=\"media\">\r\n            <div class=\"media-left\">\r\n              <img\r\n                width=\"32\"\r\n                :src=\"option.thumbnail_url\"\r\n                v-if=\"option.thumbnail_url\"\r\n              />\r\n            </div>\r\n            <div class=\"media-content\">\r\n              {{ option.name\r\n              }}{{ option.native_name ? ` (${option.native_name})` : \"\" }}\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </b-autocomplete>\r\n    </b-field>\r\n  </b-field>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport _debounce from \"lodash/debounce\";\r\nimport _get from \"lodash/get\";\r\n\r\nexport default {\r\n  name: \"nzTaxonAutocomplete\",\r\n\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      default: \"Taxon\",\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"Search for taxon...\",\r\n    },\r\n    taxon: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n    url: {\r\n      type: String,\r\n      default: () => route(\"api.taxa.index\"),\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    error: Boolean,\r\n    message: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n    except: {},\r\n    autofocus: Boolean\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      data: [],\r\n      selected: this.taxon || null,\r\n      loading: false,\r\n      page: 1,\r\n      isLastPage: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    haveThumbnail() {\r\n      return this.selected && this.selected.thumbnail_url\r\n    },\r\n\r\n    icon() {\r\n      return this.selected ? \"check\" : \"search\"\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    taxon(value) {\r\n      this.selected = value\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    fetchData: _debounce(function () {\r\n      if (!this.value || this.isLastPage) return\r\n\r\n      this.loading = true\r\n\r\n      let params = {\r\n        name: this.value,\r\n        limit: 20,\r\n        page: this.page\r\n      }\r\n\r\n      if (this.except) {\r\n        params.except = this.except\r\n      }\r\n\r\n      axios.get(this.url, { params }).then(\r\n        ({ data }) => {\r\n          data.data.forEach((item) => this.data.push(item));\r\n          this.isLastPage = data.meta.last_page <= this.page\r\n          this.loading = false\r\n        },\r\n        (response) => {\r\n          this.loading = false\r\n        }\r\n      );\r\n    }, 500),\r\n\r\n    onSelect(taxon) {\r\n      this.selected = taxon\r\n\r\n      this.$emit('select', taxon)\r\n    },\r\n\r\n    onInput(value) {\r\n      const currentValue = this.getValue(this.selected);\r\n      if (currentValue && currentValue !== value) {\r\n        this.onSelect(null)\r\n      }\r\n\r\n      this.$emit('input', value)\r\n\r\n      this.page = 1\r\n      this.data = []\r\n      this.isLastPage = false\r\n\r\n      this.fetchData()\r\n    },\r\n\r\n    focusOnInput() {\r\n      this.$el.querySelector('input').focus()\r\n    },\r\n\r\n    /**\r\n     * Return display text for the input.\r\n     * If object, get value from path, or else just the value.\r\n     */\r\n    getValue(option) {\r\n      if (!option) return\r\n\r\n      return typeof option === 'object' ? _get(option, 'name') : option\r\n    },\r\n\r\n    enterPressed() {\r\n      if (!this.$refs.autocomplete.isActive) {\r\n        this.$emit('name')\r\n      }\r\n    },\r\n\r\n    loadMore() {\r\n      if (this.isLastPage) return\r\n\r\n      this.page++\r\n\r\n      this.fetchData()\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaxonAutocomplete.vue?vue&type=template&id=10427632&\"\nimport script from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"wysiwyg\"},[_c('input',{ref:\"input\",attrs:{\"id\":_vm.inputId,\"type\":\"hidden\",\"name\":_vm.name},domProps:{\"value\":_vm.value}}),_vm._v(\" \"),_c('trix-editor',{ref:\"trix\",attrs:{\"input\":_vm.inputId}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\nTrix 2.0.0-alpha.1\nCopyright © 2022 Basecamp, LLC\n */\nvar name = \"trix\";\nvar version = \"2.0.0-alpha.1\";\nvar description = \"A rich text editor for everyday writing\";\nvar main = \"dist/trix.umd.js\";\nvar module = \"dist/trix.js\";\nvar style = \"dist/trix.css\";\nvar files = [\n\t\"dist/*.css\",\n\t\"dist/*.js\"\n];\nvar repository = {\n\ttype: \"git\",\n\turl: \"git+https://github.com/basecamp/trix.git\"\n};\nvar keywords = [\n\t\"rich text\",\n\t\"wysiwyg\",\n\t\"editor\"\n];\nvar author = \"Basecamp, LLC\";\nvar license = \"MIT\";\nvar bugs = {\n\turl: \"https://github.com/basecamp/trix/issues\"\n};\nvar homepage = \"https://trix-editor.org/\";\nvar devDependencies = {\n\t\"@babel/core\": \"^7.16.0\",\n\t\"@babel/preset-env\": \"^7.16.4\",\n\t\"@rollup/plugin-babel\": \"^5.3.0\",\n\t\"@rollup/plugin-json\": \"^4.1.0\",\n\t\"babel-eslint\": \"^10.1.0\",\n\teslint: \"^7.32.0\",\n\tesm: \"^3.2.25\",\n\tkarma: \"5.0.2\",\n\t\"karma-chrome-launcher\": \"3.1.0\",\n\t\"karma-qunit\": \"^4.1.2\",\n\t\"karma-sauce-launcher\": \"^4.3.6\",\n\t\"node-sass\": \"^7.0.1\",\n\tqunit: \"2.9.3\",\n\trangy: \"^1.3.0\",\n\trollup: \"^2.56.3\",\n\t\"rollup-plugin-commonjs\": \"^10.1.0\",\n\t\"rollup-plugin-includepaths\": \"^0.2.4\",\n\t\"rollup-plugin-node-resolve\": \"^5.2.0\",\n\t\"rollup-plugin-terser\": \"^7.0.2\",\n\tsvgo: \"^2.8.0\"\n};\nvar scripts = {\n\t\"build-css\": \"node-sass --functions=./assets/trix/stylesheets/functions assets/trix.scss dist/trix.css\",\n\t\"build-js\": \"rollup -c\",\n\t\"build-assets\": \"cp -f assets/*.html dist/\",\n\tbuild: \"yarn run build-js && yarn run build-css && yarn run build-assets\",\n\twatch: \"rollup -c -w\",\n\tlint: \"eslint .\",\n\tpretest: \"yarn run lint && yarn run build\",\n\ttest: \"karma start\",\n\tpostversion: \"git push && git push --tags\",\n\trelease: \"yarn test && npm adduser && yarn version && npm publish\"\n};\nvar dependencies = {\n};\nvar _package = {\n\tname: name,\n\tversion: version,\n\tdescription: description,\n\tmain: main,\n\tmodule: module,\n\tstyle: style,\n\tfiles: files,\n\trepository: repository,\n\tkeywords: keywords,\n\tauthor: author,\n\tlicense: license,\n\tbugs: bugs,\n\thomepage: homepage,\n\tdevDependencies: devDependencies,\n\tscripts: scripts,\n\tdependencies: dependencies\n};\n\nconst attachmentSelector = \"[data-trix-attachment]\";\nconst attachments = {\n  preview: {\n    presentation: \"gallery\",\n    caption: {\n      name: true,\n      size: true\n    }\n  },\n  file: {\n    caption: {\n      size: true\n    }\n  }\n};\n\nconst attributes = {\n  default: {\n    tagName: \"div\",\n    parse: false\n  },\n  quote: {\n    tagName: \"blockquote\",\n    nestable: true\n  },\n  heading1: {\n    tagName: \"h1\",\n    terminal: true,\n    breakOnReturn: true,\n    group: false\n  },\n  code: {\n    tagName: \"pre\",\n    terminal: true,\n    text: {\n      plaintext: true\n    }\n  },\n  bulletList: {\n    tagName: \"ul\",\n    parse: false\n  },\n  bullet: {\n    tagName: \"li\",\n    listAttribute: \"bulletList\",\n    group: false,\n    nestable: true,\n\n    test(element) {\n      return tagName$1(element.parentNode) === attributes[this.listAttribute].tagName;\n    }\n\n  },\n  numberList: {\n    tagName: \"ol\",\n    parse: false\n  },\n  number: {\n    tagName: \"li\",\n    listAttribute: \"numberList\",\n    group: false,\n    nestable: true,\n\n    test(element) {\n      return tagName$1(element.parentNode) === attributes[this.listAttribute].tagName;\n    }\n\n  },\n  attachmentGallery: {\n    tagName: \"div\",\n    exclusive: true,\n    terminal: true,\n    parse: false,\n    group: false\n  }\n};\n\nconst tagName$1 = element => {\n  var _element$tagName;\n\n  return element === null || element === void 0 ? void 0 : (_element$tagName = element.tagName) === null || _element$tagName === void 0 ? void 0 : _element$tagName.toLowerCase();\n};\n\nvar browser$1 = {\n  // Android emits composition events when moving the cursor through existing text\n  // Introduced in Chrome 65: https://bugs.chromium.org/p/chromium/issues/detail?id=764439#c9\n  composesExistingText: /Android.*Chrome/.test(navigator.userAgent),\n  // IE 11 activates resizing handles on editable elements that have \"layout\"\n  forcesObjectResizing: /Trident.*rv:11/.test(navigator.userAgent),\n  // https://www.w3.org/TR/input-events-1/ + https://www.w3.org/TR/input-events-2/\n  supportsInputEvents: function () {\n    if (typeof InputEvent === \"undefined\") {\n      return false;\n    }\n\n    for (const property of [\"data\", \"getTargetRanges\", \"inputType\"]) {\n      if (!(property in InputEvent.prototype)) {\n        return false;\n      }\n    }\n\n    return true;\n  }()\n};\n\nvar css$3 = {\n  attachment: \"attachment\",\n  attachmentCaption: \"attachment__caption\",\n  attachmentCaptionEditor: \"attachment__caption-editor\",\n  attachmentMetadata: \"attachment__metadata\",\n  attachmentMetadataContainer: \"attachment__metadata-container\",\n  attachmentName: \"attachment__name\",\n  attachmentProgress: \"attachment__progress\",\n  attachmentSize: \"attachment__size\",\n  attachmentToolbar: \"attachment__toolbar\",\n  attachmentGallery: \"attachment-gallery\"\n};\n\nvar lang$1 = {\n  attachFiles: \"Attach Files\",\n  bold: \"Bold\",\n  bullets: \"Bullets\",\n  byte: \"Byte\",\n  bytes: \"Bytes\",\n  captionPlaceholder: \"Add a caption…\",\n  code: \"Code\",\n  heading1: \"Heading\",\n  indent: \"Increase Level\",\n  italic: \"Italic\",\n  link: \"Link\",\n  numbers: \"Numbers\",\n  outdent: \"Decrease Level\",\n  quote: \"Quote\",\n  redo: \"Redo\",\n  remove: \"Remove\",\n  strike: \"Strikethrough\",\n  undo: \"Undo\",\n  unlink: \"Unlink\",\n  url: \"URL\",\n  urlPlaceholder: \"Enter a URL…\",\n  GB: \"GB\",\n  KB: \"KB\",\n  MB: \"MB\",\n  PB: \"PB\",\n  TB: \"TB\"\n};\n\n/* eslint-disable\n    no-case-declarations,\n*/\nconst sizes = [lang$1.bytes, lang$1.KB, lang$1.MB, lang$1.GB, lang$1.TB, lang$1.PB];\nvar fileSize = {\n  prefix: \"IEC\",\n  precision: 2,\n\n  formatter(number) {\n    switch (number) {\n      case 0:\n        return \"0 \".concat(lang$1.bytes);\n\n      case 1:\n        return \"1 \".concat(lang$1.byte);\n\n      default:\n        let base;\n\n        if (this.prefix === \"SI\") {\n          base = 1000;\n        } else if (this.prefix === \"IEC\") {\n          base = 1024;\n        }\n\n        const exp = Math.floor(Math.log(number) / Math.log(base));\n        const humanSize = number / Math.pow(base, exp);\n        const string = humanSize.toFixed(this.precision);\n        const withoutInsignificantZeros = string.replace(/0*$/, \"\").replace(/\\.$/, \"\");\n        return \"\".concat(withoutInsignificantZeros, \" \").concat(sizes[exp]);\n    }\n  }\n\n};\n\nconst ZERO_WIDTH_SPACE = \"\\uFEFF\";\nconst NON_BREAKING_SPACE = \"\\u00A0\";\nconst OBJECT_REPLACEMENT_CHARACTER = \"\\uFFFC\";\n\nconst extend = function (properties) {\n  for (const key in properties) {\n    const value = properties[key];\n    this[key] = value;\n  }\n\n  return this;\n};\n\nconst html = document.documentElement;\nconst match = html.matches;\nconst handleEvent = function (eventName) {\n  let {\n    onElement,\n    matchingSelector,\n    withCallback,\n    inPhase,\n    preventDefault,\n    times\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const element = onElement ? onElement : html;\n  const selector = matchingSelector;\n  const useCapture = inPhase === \"capturing\";\n\n  const handler = function (event) {\n    if (times != null && --times === 0) {\n      handler.destroy();\n    }\n\n    const target = findClosestElementFromNode(event.target, {\n      matchingSelector: selector\n    });\n\n    if (target != null) {\n      withCallback === null || withCallback === void 0 ? void 0 : withCallback.call(target, event, target);\n\n      if (preventDefault) {\n        event.preventDefault();\n      }\n    }\n  };\n\n  handler.destroy = () => element.removeEventListener(eventName, handler, useCapture);\n\n  element.addEventListener(eventName, handler, useCapture);\n  return handler;\n};\nconst handleEventOnce = function (eventName) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  options.times = 1;\n  return handleEvent(eventName, options);\n};\nconst triggerEvent = function (eventName) {\n  let {\n    onElement,\n    bubbles,\n    cancelable,\n    attributes\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const element = onElement != null ? onElement : html;\n  bubbles = bubbles !== false;\n  cancelable = cancelable !== false;\n  const event = document.createEvent(\"Events\");\n  event.initEvent(eventName, bubbles, cancelable);\n\n  if (attributes != null) {\n    extend.call(event, attributes);\n  }\n\n  return element.dispatchEvent(event);\n};\nconst elementMatchesSelector = function (element, selector) {\n  if ((element === null || element === void 0 ? void 0 : element.nodeType) === 1) {\n    return match.call(element, selector);\n  }\n};\nconst findClosestElementFromNode = function (node) {\n  let {\n    matchingSelector,\n    untilNode\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  while (node && node.nodeType !== Node.ELEMENT_NODE) {\n    node = node.parentNode;\n  }\n\n  if (node == null) {\n    return;\n  }\n\n  if (matchingSelector != null) {\n    if (node.closest && untilNode == null) {\n      return node.closest(matchingSelector);\n    } else {\n      while (node && node !== untilNode) {\n        if (elementMatchesSelector(node, matchingSelector)) {\n          return node;\n        }\n\n        node = node.parentNode;\n      }\n    }\n  } else {\n    return node;\n  }\n};\nconst findInnerElement = function (element) {\n  while ((_element = element) !== null && _element !== void 0 && _element.firstElementChild) {\n    var _element;\n\n    element = element.firstElementChild;\n  }\n\n  return element;\n};\nconst innerElementIsActive = element => document.activeElement !== element && elementContainsNode(element, document.activeElement);\nconst elementContainsNode = function (element, node) {\n  if (!element || !node) {\n    return;\n  }\n\n  while (node) {\n    if (node === element) {\n      return true;\n    }\n\n    node = node.parentNode;\n  }\n};\nconst findNodeFromContainerAndOffset = function (container, offset) {\n  if (!container) {\n    return;\n  }\n\n  if (container.nodeType === Node.TEXT_NODE) {\n    return container;\n  } else if (offset === 0) {\n    return container.firstChild != null ? container.firstChild : container;\n  } else {\n    return container.childNodes.item(offset - 1);\n  }\n};\nconst findElementFromContainerAndOffset = function (container, offset) {\n  const node = findNodeFromContainerAndOffset(container, offset);\n  return findClosestElementFromNode(node);\n};\nconst findChildIndexOfNode = function (node) {\n  var _node;\n\n  if (!((_node = node) !== null && _node !== void 0 && _node.parentNode)) {\n    return;\n  }\n\n  let childIndex = 0;\n  node = node.previousSibling;\n\n  while (node) {\n    childIndex++;\n    node = node.previousSibling;\n  }\n\n  return childIndex;\n};\nconst removeNode = node => {\n  var _node$parentNode;\n\n  return node === null || node === void 0 ? void 0 : (_node$parentNode = node.parentNode) === null || _node$parentNode === void 0 ? void 0 : _node$parentNode.removeChild(node);\n};\nconst walkTree = function (tree) {\n  let {\n    onlyNodesOfType,\n    usingFilter,\n    expandEntityReferences\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  const whatToShow = (() => {\n    switch (onlyNodesOfType) {\n      case \"element\":\n        return NodeFilter.SHOW_ELEMENT;\n\n      case \"text\":\n        return NodeFilter.SHOW_TEXT;\n\n      case \"comment\":\n        return NodeFilter.SHOW_COMMENT;\n\n      default:\n        return NodeFilter.SHOW_ALL;\n    }\n  })();\n\n  return document.createTreeWalker(tree, whatToShow, usingFilter != null ? usingFilter : null, expandEntityReferences === true);\n};\nconst tagName = element => {\n  var _element$tagName;\n\n  return element === null || element === void 0 ? void 0 : (_element$tagName = element.tagName) === null || _element$tagName === void 0 ? void 0 : _element$tagName.toLowerCase();\n};\nconst makeElement = function (tag) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let key, value;\n\n  if (typeof tag === \"object\") {\n    options = tag;\n    tag = options.tagName;\n  } else {\n    options = {\n      attributes: options\n    };\n  }\n\n  const element = document.createElement(tag);\n\n  if (options.editable != null) {\n    if (options.attributes == null) {\n      options.attributes = {};\n    }\n\n    options.attributes.contenteditable = options.editable;\n  }\n\n  if (options.attributes) {\n    for (key in options.attributes) {\n      value = options.attributes[key];\n      element.setAttribute(key, value);\n    }\n  }\n\n  if (options.style) {\n    for (key in options.style) {\n      value = options.style[key];\n      element.style[key] = value;\n    }\n  }\n\n  if (options.data) {\n    for (key in options.data) {\n      value = options.data[key];\n      element.dataset[key] = value;\n    }\n  }\n\n  if (options.className) {\n    options.className.split(\" \").forEach(className => {\n      element.classList.add(className);\n    });\n  }\n\n  if (options.textContent) {\n    element.textContent = options.textContent;\n  }\n\n  if (options.childNodes) {\n    [].concat(options.childNodes).forEach(childNode => {\n      element.appendChild(childNode);\n    });\n  }\n\n  return element;\n};\nlet blockTagNames = undefined;\nconst getBlockTagNames = function () {\n  if (blockTagNames != null) {\n    return blockTagNames;\n  }\n\n  blockTagNames = [];\n\n  for (const key in attributes) {\n    const attributes$1 = attributes[key];\n\n    if (attributes$1.tagName) {\n      blockTagNames.push(attributes$1.tagName);\n    }\n  }\n\n  return blockTagNames;\n};\nconst nodeIsBlockContainer = node => nodeIsBlockStartComment(node === null || node === void 0 ? void 0 : node.firstChild);\nconst nodeProbablyIsBlockContainer = function (node) {\n  return getBlockTagNames().includes(tagName(node)) && !getBlockTagNames().includes(tagName(node.firstChild));\n};\nconst nodeIsBlockStart = function (node) {\n  let {\n    strict\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    strict: true\n  };\n\n  if (strict) {\n    return nodeIsBlockStartComment(node);\n  } else {\n    return nodeIsBlockStartComment(node) || !nodeIsBlockStartComment(node.firstChild) && nodeProbablyIsBlockContainer(node);\n  }\n};\nconst nodeIsBlockStartComment = node => nodeIsCommentNode(node) && (node === null || node === void 0 ? void 0 : node.data) === \"block\";\nconst nodeIsCommentNode = node => (node === null || node === void 0 ? void 0 : node.nodeType) === Node.COMMENT_NODE;\nconst nodeIsCursorTarget = function (node) {\n  let {\n    name\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!node) {\n    return;\n  }\n\n  if (nodeIsTextNode(node)) {\n    if (node.data === ZERO_WIDTH_SPACE) {\n      if (name) {\n        return node.parentNode.dataset.trixCursorTarget === name;\n      } else {\n        return true;\n      }\n    }\n  } else {\n    return nodeIsCursorTarget(node.firstChild);\n  }\n};\nconst nodeIsAttachmentElement = node => elementMatchesSelector(node, attachmentSelector);\nconst nodeIsEmptyTextNode = node => nodeIsTextNode(node) && (node === null || node === void 0 ? void 0 : node.data) === \"\";\nconst nodeIsTextNode = node => (node === null || node === void 0 ? void 0 : node.nodeType) === Node.TEXT_NODE;\n\nconst input = {\n  level2Enabled: true,\n\n  getLevel() {\n    if (this.level2Enabled && browser$1.supportsInputEvents) {\n      return 2;\n    } else {\n      return 0;\n    }\n  },\n\n  pickFiles(callback) {\n    const input = makeElement(\"input\", {\n      type: \"file\",\n      multiple: true,\n      hidden: true,\n      id: this.fileInputId\n    });\n    input.addEventListener(\"change\", () => {\n      callback(input.files);\n      removeNode(input);\n    });\n    removeNode(document.getElementById(this.fileInputId));\n    document.body.appendChild(input);\n    input.click();\n  }\n\n};\n\nvar keyNames$2 = {\n  8: \"backspace\",\n  9: \"tab\",\n  13: \"return\",\n  27: \"escape\",\n  37: \"left\",\n  39: \"right\",\n  46: \"delete\",\n  68: \"d\",\n  72: \"h\",\n  79: \"o\"\n};\n\nvar textAttributes = {\n  bold: {\n    tagName: \"strong\",\n    inheritable: true,\n\n    parser(element) {\n      const style = window.getComputedStyle(element);\n      return style.fontWeight === \"bold\" || style.fontWeight >= 600;\n    }\n\n  },\n  italic: {\n    tagName: \"em\",\n    inheritable: true,\n\n    parser(element) {\n      const style = window.getComputedStyle(element);\n      return style.fontStyle === \"italic\";\n    }\n\n  },\n  href: {\n    groupTagName: \"a\",\n\n    parser(element) {\n      const matchingSelector = \"a:not(\".concat(attachmentSelector, \")\");\n      const link = element.closest(matchingSelector);\n\n      if (link) {\n        return link.getAttribute(\"href\");\n      }\n    }\n\n  },\n  strike: {\n    tagName: \"del\",\n    inheritable: true\n  },\n  frozen: {\n    style: {\n      backgroundColor: \"highlight\"\n    }\n  }\n};\n\nvar toolbar = {\n  getDefaultHTML() {\n    return \"<div class=\\\"trix-button-row\\\">\\n      <span class=\\\"trix-button-group trix-button-group--text-tools\\\" data-trix-button-group=\\\"text-tools\\\">\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-bold\\\" data-trix-attribute=\\\"bold\\\" data-trix-key=\\\"b\\\" title=\\\"\".concat(lang$1.bold, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.bold, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-italic\\\" data-trix-attribute=\\\"italic\\\" data-trix-key=\\\"i\\\" title=\\\"\").concat(lang$1.italic, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.italic, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-strike\\\" data-trix-attribute=\\\"strike\\\" title=\\\"\").concat(lang$1.strike, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.strike, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-link\\\" data-trix-attribute=\\\"href\\\" data-trix-action=\\\"link\\\" data-trix-key=\\\"k\\\" title=\\\"\").concat(lang$1.link, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.link, \"</button>\\n      </span>\\n\\n      <span class=\\\"trix-button-group trix-button-group--block-tools\\\" data-trix-button-group=\\\"block-tools\\\">\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-heading-1\\\" data-trix-attribute=\\\"heading1\\\" title=\\\"\").concat(lang$1.heading1, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.heading1, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-quote\\\" data-trix-attribute=\\\"quote\\\" title=\\\"\").concat(lang$1.quote, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.quote, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-code\\\" data-trix-attribute=\\\"code\\\" title=\\\"\").concat(lang$1.code, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.code, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-bullet-list\\\" data-trix-attribute=\\\"bullet\\\" title=\\\"\").concat(lang$1.bullets, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.bullets, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-number-list\\\" data-trix-attribute=\\\"number\\\" title=\\\"\").concat(lang$1.numbers, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.numbers, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-decrease-nesting-level\\\" data-trix-action=\\\"decreaseNestingLevel\\\" title=\\\"\").concat(lang$1.outdent, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.outdent, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-increase-nesting-level\\\" data-trix-action=\\\"increaseNestingLevel\\\" title=\\\"\").concat(lang$1.indent, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.indent, \"</button>\\n      </span>\\n\\n      <span class=\\\"trix-button-group trix-button-group--file-tools\\\" data-trix-button-group=\\\"file-tools\\\">\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-attach\\\" data-trix-action=\\\"attachFiles\\\" title=\\\"\").concat(lang$1.attachFiles, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.attachFiles, \"</button>\\n      </span>\\n\\n      <span class=\\\"trix-button-group-spacer\\\"></span>\\n\\n      <span class=\\\"trix-button-group trix-button-group--history-tools\\\" data-trix-button-group=\\\"history-tools\\\">\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-undo\\\" data-trix-action=\\\"undo\\\" data-trix-key=\\\"z\\\" title=\\\"\").concat(lang$1.undo, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.undo, \"</button>\\n        <button type=\\\"button\\\" class=\\\"trix-button trix-button--icon trix-button--icon-redo\\\" data-trix-action=\\\"redo\\\" data-trix-key=\\\"shift+z\\\" title=\\\"\").concat(lang$1.redo, \"\\\" tabindex=\\\"-1\\\">\").concat(lang$1.redo, \"</button>\\n      </span>\\n    </div>\\n\\n    <div class=\\\"trix-dialogs\\\" data-trix-dialogs>\\n      <div class=\\\"trix-dialog trix-dialog--link\\\" data-trix-dialog=\\\"href\\\" data-trix-dialog-attribute=\\\"href\\\">\\n        <div class=\\\"trix-dialog__link-fields\\\">\\n          <input type=\\\"url\\\" name=\\\"href\\\" class=\\\"trix-input trix-input--dialog\\\" placeholder=\\\"\").concat(lang$1.urlPlaceholder, \"\\\" aria-label=\\\"\").concat(lang$1.url, \"\\\" required data-trix-input>\\n          <div class=\\\"trix-button-group\\\">\\n            <input type=\\\"button\\\" class=\\\"trix-button trix-button--dialog\\\" value=\\\"\").concat(lang$1.link, \"\\\" data-trix-method=\\\"setAttribute\\\">\\n            <input type=\\\"button\\\" class=\\\"trix-button trix-button--dialog\\\" value=\\\"\").concat(lang$1.unlink, \"\\\" data-trix-method=\\\"removeAttribute\\\">\\n          </div>\\n        </div>\\n      </div>\\n    </div>\");\n  }\n\n};\n\nconst undoInterval = 5000;\n\nconst config = {\n  attachments,\n  blockAttributes: attributes,\n  browser: browser$1,\n  css: css$3,\n  fileSize,\n  input,\n  keyNames: keyNames$2,\n  lang: lang$1,\n  textAttributes,\n  toolbar,\n  undoInterval\n};\n\nfunction createMetadataMethodsForProperty(metadataMap, kind, property, decoratorFinishedRef) {\n  return {\n    getMetadata: function (key) {\n      assertNotFinished(decoratorFinishedRef, \"getMetadata\"), assertMetadataKey(key);\n      var metadataForKey = metadataMap[key];\n      if (void 0 !== metadataForKey) if (1 === kind) {\n        var pub = metadataForKey.public;\n        if (void 0 !== pub) return pub[property];\n      } else if (2 === kind) {\n        var priv = metadataForKey.private;\n        if (void 0 !== priv) return priv.get(property);\n      } else if (Object.hasOwnProperty.call(metadataForKey, \"constructor\")) return metadataForKey.constructor;\n    },\n    setMetadata: function (key, value) {\n      assertNotFinished(decoratorFinishedRef, \"setMetadata\"), assertMetadataKey(key);\n      var metadataForKey = metadataMap[key];\n\n      if (void 0 === metadataForKey && (metadataForKey = metadataMap[key] = {}), 1 === kind) {\n        var pub = metadataForKey.public;\n        void 0 === pub && (pub = metadataForKey.public = {}), pub[property] = value;\n      } else if (2 === kind) {\n        var priv = metadataForKey.priv;\n        void 0 === priv && (priv = metadataForKey.private = new Map()), priv.set(property, value);\n      } else metadataForKey.constructor = value;\n    }\n  };\n}\n\nfunction convertMetadataMapToFinal(obj, metadataMap) {\n  var parentMetadataMap = obj[Symbol.metadata || Symbol.for(\"Symbol.metadata\")],\n      metadataKeys = Object.getOwnPropertySymbols(metadataMap);\n\n  if (0 !== metadataKeys.length) {\n    for (var i = 0; i < metadataKeys.length; i++) {\n      var key = metadataKeys[i],\n          metaForKey = metadataMap[key],\n          parentMetaForKey = parentMetadataMap ? parentMetadataMap[key] : null,\n          pub = metaForKey.public,\n          parentPub = parentMetaForKey ? parentMetaForKey.public : null;\n      pub && parentPub && Object.setPrototypeOf(pub, parentPub);\n      var priv = metaForKey.private;\n\n      if (priv) {\n        var privArr = Array.from(priv.values()),\n            parentPriv = parentMetaForKey ? parentMetaForKey.private : null;\n        parentPriv && (privArr = privArr.concat(parentPriv)), metaForKey.private = privArr;\n      }\n\n      parentMetaForKey && Object.setPrototypeOf(metaForKey, parentMetaForKey);\n    }\n\n    parentMetadataMap && Object.setPrototypeOf(metadataMap, parentMetadataMap), obj[Symbol.metadata || Symbol.for(\"Symbol.metadata\")] = metadataMap;\n  }\n}\n\nfunction createAddInitializerMethod(initializers, decoratorFinishedRef) {\n  return function (initializer) {\n    assertNotFinished(decoratorFinishedRef, \"addInitializer\"), assertCallable(initializer, \"An initializer\"), initializers.push(initializer);\n  };\n}\n\nfunction memberDec(dec, name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value) {\n  var kindStr;\n\n  switch (kind) {\n    case 1:\n      kindStr = \"accessor\";\n      break;\n\n    case 2:\n      kindStr = \"method\";\n      break;\n\n    case 3:\n      kindStr = \"getter\";\n      break;\n\n    case 4:\n      kindStr = \"setter\";\n      break;\n\n    default:\n      kindStr = \"field\";\n  }\n\n  var metadataKind,\n      metadataName,\n      ctx = {\n    kind: kindStr,\n    name: isPrivate ? \"#\" + name : name,\n    isStatic: isStatic,\n    isPrivate: isPrivate\n  },\n      decoratorFinishedRef = {\n    v: !1\n  };\n\n  if (0 !== kind && (ctx.addInitializer = createAddInitializerMethod(initializers, decoratorFinishedRef)), isPrivate) {\n    metadataKind = 2, metadataName = Symbol(name);\n    var access = {};\n    0 === kind ? (access.get = desc.get, access.set = desc.set) : 2 === kind ? access.get = function () {\n      return desc.value;\n    } : (1 !== kind && 3 !== kind || (access.get = function () {\n      return desc.get.call(this);\n    }), 1 !== kind && 4 !== kind || (access.set = function (v) {\n      desc.set.call(this, v);\n    })), ctx.access = access;\n  } else metadataKind = 1, metadataName = name;\n\n  try {\n    return dec(value, Object.assign(ctx, createMetadataMethodsForProperty(metadataMap, metadataKind, metadataName, decoratorFinishedRef)));\n  } finally {\n    decoratorFinishedRef.v = !0;\n  }\n}\n\nfunction assertNotFinished(decoratorFinishedRef, fnName) {\n  if (decoratorFinishedRef.v) throw new Error(\"attempted to call \" + fnName + \" after decoration was finished\");\n}\n\nfunction assertMetadataKey(key) {\n  if (\"symbol\" != typeof key) throw new TypeError(\"Metadata keys must be symbols, received: \" + key);\n}\n\nfunction assertCallable(fn, hint) {\n  if (\"function\" != typeof fn) throw new TypeError(hint + \" must be a function\");\n}\n\nfunction assertValidReturnValue(kind, value) {\n  var type = typeof value;\n\n  if (1 === kind) {\n    if (\"object\" !== type || null === value) throw new TypeError(\"accessor decorators must return an object with get, set, or init properties or void 0\");\n    void 0 !== value.get && assertCallable(value.get, \"accessor.get\"), void 0 !== value.set && assertCallable(value.set, \"accessor.set\"), void 0 !== value.init && assertCallable(value.init, \"accessor.init\"), void 0 !== value.initializer && assertCallable(value.initializer, \"accessor.initializer\");\n  } else if (\"function\" !== type) {\n    var hint;\n    throw hint = 0 === kind ? \"field\" : 10 === kind ? \"class\" : \"method\", new TypeError(hint + \" decorators must return a function or void 0\");\n  }\n}\n\nfunction getInit(desc) {\n  var initializer;\n  return null == (initializer = desc.init) && (initializer = desc.initializer) && \"undefined\" != typeof console && console.warn(\".initializer has been renamed to .init as of March 2022\"), initializer;\n}\n\nfunction applyMemberDec(ret, base, decInfo, name, kind, isStatic, isPrivate, metadataMap, initializers) {\n  var desc,\n      initializer,\n      value,\n      newValue,\n      get,\n      set,\n      decs = decInfo[0];\n  if (isPrivate ? desc = 0 === kind || 1 === kind ? {\n    get: decInfo[3],\n    set: decInfo[4]\n  } : 3 === kind ? {\n    get: decInfo[3]\n  } : 4 === kind ? {\n    set: decInfo[3]\n  } : {\n    value: decInfo[3]\n  } : 0 !== kind && (desc = Object.getOwnPropertyDescriptor(base, name)), 1 === kind ? value = {\n    get: desc.get,\n    set: desc.set\n  } : 2 === kind ? value = desc.value : 3 === kind ? value = desc.get : 4 === kind && (value = desc.set), \"function\" == typeof decs) void 0 !== (newValue = memberDec(decs, name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value)) && (assertValidReturnValue(kind, newValue), 0 === kind ? initializer = newValue : 1 === kind ? (initializer = getInit(newValue), get = newValue.get || value.get, set = newValue.set || value.set, value = {\n    get: get,\n    set: set\n  }) : value = newValue);else for (var i = decs.length - 1; i >= 0; i--) {\n    var newInit;\n    if (void 0 !== (newValue = memberDec(decs[i], name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value))) assertValidReturnValue(kind, newValue), 0 === kind ? newInit = newValue : 1 === kind ? (newInit = getInit(newValue), get = newValue.get || value.get, set = newValue.set || value.set, value = {\n      get: get,\n      set: set\n    }) : value = newValue, void 0 !== newInit && (void 0 === initializer ? initializer = newInit : \"function\" == typeof initializer ? initializer = [initializer, newInit] : initializer.push(newInit));\n  }\n\n  if (0 === kind || 1 === kind) {\n    if (void 0 === initializer) initializer = function (instance, init) {\n      return init;\n    };else if (\"function\" != typeof initializer) {\n      var ownInitializers = initializer;\n\n      initializer = function (instance, init) {\n        for (var value = init, i = 0; i < ownInitializers.length; i++) value = ownInitializers[i].call(instance, value);\n\n        return value;\n      };\n    } else {\n      var originalInitializer = initializer;\n\n      initializer = function (instance, init) {\n        return originalInitializer.call(instance, init);\n      };\n    }\n    ret.push(initializer);\n  }\n\n  0 !== kind && (1 === kind ? (desc.get = value.get, desc.set = value.set) : 2 === kind ? desc.value = value : 3 === kind ? desc.get = value : 4 === kind && (desc.set = value), isPrivate ? 1 === kind ? (ret.push(function (instance, args) {\n    return value.get.call(instance, args);\n  }), ret.push(function (instance, args) {\n    return value.set.call(instance, args);\n  })) : 2 === kind ? ret.push(value) : ret.push(function (instance, args) {\n    return value.call(instance, args);\n  }) : Object.defineProperty(base, name, desc));\n}\n\nfunction applyMemberDecs(ret, Class, protoMetadataMap, staticMetadataMap, decInfos) {\n  for (var protoInitializers, staticInitializers, existingProtoNonFields = new Map(), existingStaticNonFields = new Map(), i = 0; i < decInfos.length; i++) {\n    var decInfo = decInfos[i];\n\n    if (Array.isArray(decInfo)) {\n      var base,\n          metadataMap,\n          initializers,\n          kind = decInfo[1],\n          name = decInfo[2],\n          isPrivate = decInfo.length > 3,\n          isStatic = kind >= 5;\n\n      if (isStatic ? (base = Class, metadataMap = staticMetadataMap, 0 !== (kind -= 5) && (initializers = staticInitializers = staticInitializers || [])) : (base = Class.prototype, metadataMap = protoMetadataMap, 0 !== kind && (initializers = protoInitializers = protoInitializers || [])), 0 !== kind && !isPrivate) {\n        var existingNonFields = isStatic ? existingStaticNonFields : existingProtoNonFields,\n            existingKind = existingNonFields.get(name) || 0;\n        if (!0 === existingKind || 3 === existingKind && 4 !== kind || 4 === existingKind && 3 !== kind) throw new Error(\"Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: \" + name);\n        !existingKind && kind > 2 ? existingNonFields.set(name, kind) : existingNonFields.set(name, !0);\n      }\n\n      applyMemberDec(ret, base, decInfo, name, kind, isStatic, isPrivate, metadataMap, initializers);\n    }\n  }\n\n  pushInitializers(ret, protoInitializers), pushInitializers(ret, staticInitializers);\n}\n\nfunction pushInitializers(ret, initializers) {\n  initializers && ret.push(function (instance) {\n    for (var i = 0; i < initializers.length; i++) initializers[i].call(instance);\n\n    return instance;\n  });\n}\n\nfunction applyClassDecs(ret, targetClass, metadataMap, classDecs) {\n  if (classDecs.length > 0) {\n    for (var initializers = [], newClass = targetClass, name = targetClass.name, i = classDecs.length - 1; i >= 0; i--) {\n      var decoratorFinishedRef = {\n        v: !1\n      };\n\n      try {\n        var ctx = Object.assign({\n          kind: \"class\",\n          name: name,\n          addInitializer: createAddInitializerMethod(initializers, decoratorFinishedRef)\n        }, createMetadataMethodsForProperty(metadataMap, 0, name, decoratorFinishedRef)),\n            nextNewClass = classDecs[i](newClass, ctx);\n      } finally {\n        decoratorFinishedRef.v = !0;\n      }\n\n      void 0 !== nextNewClass && (assertValidReturnValue(10, nextNewClass), newClass = nextNewClass);\n    }\n\n    ret.push(newClass, function () {\n      for (var i = 0; i < initializers.length; i++) initializers[i].call(newClass);\n    });\n  }\n}\n\nfunction _applyDecs(targetClass, memberDecs, classDecs) {\n  var ret = [],\n      staticMetadataMap = {},\n      protoMetadataMap = {};\n  return applyMemberDecs(ret, targetClass, protoMetadataMap, staticMetadataMap, memberDecs), convertMetadataMapToFinal(targetClass.prototype, protoMetadataMap), applyClassDecs(ret, targetClass, staticMetadataMap, classDecs), convertMetadataMapToFinal(targetClass, staticMetadataMap), ret;\n}\n\nfunction _asyncIterator(iterable) {\n  var method,\n      async,\n      sync,\n      retry = 2;\n\n  for (\"undefined\" != typeof Symbol && (async = Symbol.asyncIterator, sync = Symbol.iterator); retry--;) {\n    if (async && null != (method = iterable[async])) return method.call(iterable);\n    if (sync && null != (method = iterable[sync])) return new AsyncFromSyncIterator(method.call(iterable));\n    async = \"@@asyncIterator\", sync = \"@@iterator\";\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}\n\nfunction AsyncFromSyncIterator(s) {\n  function AsyncFromSyncIteratorContinuation(r) {\n    if (Object(r) !== r) return Promise.reject(new TypeError(r + \" is not an object.\"));\n    var done = r.done;\n    return Promise.resolve(r.value).then(function (value) {\n      return {\n        value: value,\n        done: done\n      };\n    });\n  }\n\n  return AsyncFromSyncIterator = function (s) {\n    this.s = s, this.n = s.next;\n  }, AsyncFromSyncIterator.prototype = {\n    s: null,\n    n: null,\n    next: function () {\n      return AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments));\n    },\n    return: function (value) {\n      var ret = this.s.return;\n      return void 0 === ret ? Promise.resolve({\n        value: value,\n        done: !0\n      }) : AsyncFromSyncIteratorContinuation(ret.apply(this.s, arguments));\n    },\n    throw: function (value) {\n      var thr = this.s.return;\n      return void 0 === thr ? Promise.reject(value) : AsyncFromSyncIteratorContinuation(thr.apply(this.s, arguments));\n    }\n  }, new AsyncFromSyncIterator(s);\n}\n\nvar REACT_ELEMENT_TYPE;\n\nfunction _jsx(type, props, key, children) {\n  REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);\n  var defaultProps = type && type.defaultProps,\n      childrenLength = arguments.length - 3;\n  if (props || 0 === childrenLength || (props = {\n    children: void 0\n  }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {\n    for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];\n\n    props.children = childArray;\n  }\n  if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: void 0 === key ? null : \"\" + key,\n    ref: null,\n    props: props,\n    _owner: null\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      return groups[name] = result[g[name]], groups;\n    }, Object.create(null));\n  }\n\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    return result && (result.groups = buildGroups(result, this)), result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        return \"$\" + groups[name];\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\n\nfunction _AwaitValue(value) {\n  this.wrapped = value;\n}\n\nfunction _AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof _AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen.return !== \"function\") {\n    this.return = undefined;\n  }\n}\n\n_AsyncGenerator.prototype[typeof Symbol === \"function\" && Symbol.asyncIterator || \"@@asyncIterator\"] = function () {\n  return this;\n};\n\n_AsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\n_AsyncGenerator.prototype.throw = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\n_AsyncGenerator.prototype.return = function (arg) {\n  return this._invoke(\"return\", arg);\n};\n\nfunction _wrapAsyncGenerator(fn) {\n  return function () {\n    return new _AsyncGenerator(fn.apply(this, arguments));\n  };\n}\n\nfunction _awaitAsyncGenerator(value) {\n  return new _AwaitValue(value);\n}\n\nfunction _asyncGeneratorDelegate(inner, awaitWrap) {\n  var iter = {},\n      waiting = false;\n\n  function pump(key, value) {\n    waiting = true;\n    value = new Promise(function (resolve) {\n      resolve(inner[key](value));\n    });\n    return {\n      done: false,\n      value: awaitWrap(value)\n    };\n  }\n\n  ;\n\n  iter[typeof Symbol !== \"undefined\" && Symbol.iterator || \"@@iterator\"] = function () {\n    return this;\n  };\n\n  iter.next = function (value) {\n    if (waiting) {\n      waiting = false;\n      return value;\n    }\n\n    return pump(\"next\", value);\n  };\n\n  if (typeof inner.throw === \"function\") {\n    iter.throw = function (value) {\n      if (waiting) {\n        waiting = false;\n        throw value;\n      }\n\n      return pump(\"throw\", value);\n    };\n  }\n\n  if (typeof inner.return === \"function\") {\n    iter.return = function (value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump(\"return\", value);\n    };\n  }\n\n  return iter;\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _defineEnumerableProperties(obj, descs) {\n  for (var key in descs) {\n    var desc = descs[key];\n    desc.configurable = desc.enumerable = true;\n    if (\"value\" in desc) desc.writable = true;\n    Object.defineProperty(obj, key, desc);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n    for (var i = 0; i < objectSymbols.length; i++) {\n      var sym = objectSymbols[i];\n      var desc = descs[sym];\n      desc.configurable = desc.enumerable = true;\n      if (\"value\" in desc) desc.writable = true;\n      Object.defineProperty(obj, sym, desc);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys.push.apply(ownKeys, Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nfunction _instanceof(left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return !!right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _newArrowCheck(innerThis, boundThis) {\n  if (innerThis !== boundThis) {\n    throw new TypeError(\"Cannot instantiate an arrow function\");\n  }\n}\n\nfunction _objectDestructuringEmpty(obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get.apply(this, arguments);\n}\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = _superPropBase(target, property);\n\n      var desc;\n\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        _defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nfunction _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _taggedTemplateLiteralLoose(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  strings.raw = raw;\n  return strings;\n}\n\nfunction _readOnlyError(name) {\n  throw new TypeError(\"\\\"\" + name + \"\\\" is read-only\");\n}\n\nfunction _writeOnlyError(name) {\n  throw new TypeError(\"\\\"\" + name + \"\\\" is write-only\");\n}\n\nfunction _classNameTDZError(name) {\n  throw new Error(\"Class \\\"\" + name + \"\\\" cannot be referenced in computed property keys.\");\n}\n\nfunction _temporalUndefined() {}\n\nfunction _tdz(name) {\n  throw new ReferenceError(name + \" is not defined - temporal dead zone\");\n}\n\nfunction _temporalRef(val, name) {\n  return val === _temporalUndefined ? _tdz(name) : val;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _slicedToArrayLoose(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toArray(arr) {\n  return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _maybeArrayLike(next, arr, i) {\n  if (arr && !Array.isArray(arr) && typeof arr.length === \"number\") {\n    var len = arr.length;\n    return _arrayLikeToArray(arr, i !== void 0 && i < len ? i : len);\n  }\n\n  return next(arr, i);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _iterableToArrayLimitLoose(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n\n  for (_i = _i.call(arr), _step; !(_step = _i.next()).done;) {\n    _arr.push(_step.value);\n\n    if (i && _arr.length === i) break;\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _skipFirstGeneratorNext(fn) {\n  return function () {\n    var it = fn.apply(this, arguments);\n    it.next();\n    return it;\n  };\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _initializerWarningHelper(descriptor, context) {\n  throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.');\n}\n\nfunction _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object.keys(descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object.defineProperty(target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\nvar id$2 = 0;\n\nfunction _classPrivateFieldLooseKey(name) {\n  return \"__private_\" + id$2++ + \"_\" + name;\n}\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) {\n  if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n    throw new TypeError(\"attempted to use private field on non-instance\");\n  }\n\n  return receiver;\n}\n\nfunction _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\");\n\n  return _classApplyDescriptorGet(receiver, descriptor);\n}\n\nfunction _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\");\n\n  _classApplyDescriptorSet(receiver, descriptor, value);\n\n  return value;\n}\n\nfunction _classPrivateFieldDestructureSet(receiver, privateMap) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\");\n\n  return _classApplyDescriptorDestructureSet(receiver, descriptor);\n}\n\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n\n  return privateMap.get(receiver);\n}\n\nfunction _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n  _classCheckPrivateStaticAccess(receiver, classConstructor);\n\n  _classCheckPrivateStaticFieldDescriptor(descriptor, \"get\");\n\n  return _classApplyDescriptorGet(receiver, descriptor);\n}\n\nfunction _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n  _classCheckPrivateStaticAccess(receiver, classConstructor);\n\n  _classCheckPrivateStaticFieldDescriptor(descriptor, \"set\");\n\n  _classApplyDescriptorSet(receiver, descriptor, value);\n\n  return value;\n}\n\nfunction _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n  _classCheckPrivateStaticAccess(receiver, classConstructor);\n\n  return method;\n}\n\nfunction _classStaticPrivateMethodSet() {\n  throw new TypeError(\"attempted to set read only static private field\");\n}\n\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n\n  return descriptor.value;\n}\n\nfunction _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    descriptor.value = value;\n  }\n}\n\nfunction _classApplyDescriptorDestructureSet(receiver, descriptor) {\n  if (descriptor.set) {\n    if (!(\"__destrObj\" in descriptor)) {\n      descriptor.__destrObj = {\n        set value(v) {\n          descriptor.set.call(receiver, v);\n        }\n\n      };\n    }\n\n    return descriptor.__destrObj;\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    return descriptor;\n  }\n}\n\nfunction _classStaticPrivateFieldDestructureSet(receiver, classConstructor, descriptor) {\n  _classCheckPrivateStaticAccess(receiver, classConstructor);\n\n  _classCheckPrivateStaticFieldDescriptor(descriptor, \"set\");\n\n  return _classApplyDescriptorDestructureSet(receiver, descriptor);\n}\n\nfunction _classCheckPrivateStaticAccess(receiver, classConstructor) {\n  if (receiver !== classConstructor) {\n    throw new TypeError(\"Private static access of wrong provenance\");\n  }\n}\n\nfunction _classCheckPrivateStaticFieldDescriptor(descriptor, action) {\n  if (descriptor === undefined) {\n    throw new TypeError(\"attempted to \" + action + \" private static field before its declaration\");\n  }\n}\n\nfunction _decorate(decorators, factory, superClass, mixins) {\n  var api = _getDecoratorsApi();\n\n  if (mixins) {\n    for (var i = 0; i < mixins.length; i++) {\n      api = mixins[i](api);\n    }\n  }\n\n  var r = factory(function initialize(O) {\n    api.initializeInstanceElements(O, decorated.elements);\n  }, superClass);\n  var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators);\n  api.initializeClassElements(r.F, decorated.elements);\n  return api.runClassFinishers(r.F, decorated.finishers);\n}\n\nfunction _getDecoratorsApi() {\n  _getDecoratorsApi = function () {\n    return api;\n  };\n\n  var api = {\n    elementsDefinitionOrder: [[\"method\"], [\"field\"]],\n    initializeInstanceElements: function (O, elements) {\n      [\"method\", \"field\"].forEach(function (kind) {\n        elements.forEach(function (element) {\n          if (element.kind === kind && element.placement === \"own\") {\n            this.defineClassElement(O, element);\n          }\n        }, this);\n      }, this);\n    },\n    initializeClassElements: function (F, elements) {\n      var proto = F.prototype;\n      [\"method\", \"field\"].forEach(function (kind) {\n        elements.forEach(function (element) {\n          var placement = element.placement;\n\n          if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) {\n            var receiver = placement === \"static\" ? F : proto;\n            this.defineClassElement(receiver, element);\n          }\n        }, this);\n      }, this);\n    },\n    defineClassElement: function (receiver, element) {\n      var descriptor = element.descriptor;\n\n      if (element.kind === \"field\") {\n        var initializer = element.initializer;\n        descriptor = {\n          enumerable: descriptor.enumerable,\n          writable: descriptor.writable,\n          configurable: descriptor.configurable,\n          value: initializer === void 0 ? void 0 : initializer.call(receiver)\n        };\n      }\n\n      Object.defineProperty(receiver, element.key, descriptor);\n    },\n    decorateClass: function (elements, decorators) {\n      var newElements = [];\n      var finishers = [];\n      var placements = {\n        static: [],\n        prototype: [],\n        own: []\n      };\n      elements.forEach(function (element) {\n        this.addElementPlacement(element, placements);\n      }, this);\n      elements.forEach(function (element) {\n        if (!_hasDecorators(element)) return newElements.push(element);\n        var elementFinishersExtras = this.decorateElement(element, placements);\n        newElements.push(elementFinishersExtras.element);\n        newElements.push.apply(newElements, elementFinishersExtras.extras);\n        finishers.push.apply(finishers, elementFinishersExtras.finishers);\n      }, this);\n\n      if (!decorators) {\n        return {\n          elements: newElements,\n          finishers: finishers\n        };\n      }\n\n      var result = this.decorateConstructor(newElements, decorators);\n      finishers.push.apply(finishers, result.finishers);\n      result.finishers = finishers;\n      return result;\n    },\n    addElementPlacement: function (element, placements, silent) {\n      var keys = placements[element.placement];\n\n      if (!silent && keys.indexOf(element.key) !== -1) {\n        throw new TypeError(\"Duplicated element (\" + element.key + \")\");\n      }\n\n      keys.push(element.key);\n    },\n    decorateElement: function (element, placements) {\n      var extras = [];\n      var finishers = [];\n\n      for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n        var keys = placements[element.placement];\n        keys.splice(keys.indexOf(element.key), 1);\n        var elementObject = this.fromElementDescriptor(element);\n        var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject);\n        element = elementFinisherExtras.element;\n        this.addElementPlacement(element, placements);\n\n        if (elementFinisherExtras.finisher) {\n          finishers.push(elementFinisherExtras.finisher);\n        }\n\n        var newExtras = elementFinisherExtras.extras;\n\n        if (newExtras) {\n          for (var j = 0; j < newExtras.length; j++) {\n            this.addElementPlacement(newExtras[j], placements);\n          }\n\n          extras.push.apply(extras, newExtras);\n        }\n      }\n\n      return {\n        element: element,\n        finishers: finishers,\n        extras: extras\n      };\n    },\n    decorateConstructor: function (elements, decorators) {\n      var finishers = [];\n\n      for (var i = decorators.length - 1; i >= 0; i--) {\n        var obj = this.fromClassDescriptor(elements);\n        var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj);\n\n        if (elementsAndFinisher.finisher !== undefined) {\n          finishers.push(elementsAndFinisher.finisher);\n        }\n\n        if (elementsAndFinisher.elements !== undefined) {\n          elements = elementsAndFinisher.elements;\n\n          for (var j = 0; j < elements.length - 1; j++) {\n            for (var k = j + 1; k < elements.length; k++) {\n              if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) {\n                throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\");\n              }\n            }\n          }\n        }\n      }\n\n      return {\n        elements: elements,\n        finishers: finishers\n      };\n    },\n    fromElementDescriptor: function (element) {\n      var obj = {\n        kind: element.kind,\n        key: element.key,\n        placement: element.placement,\n        descriptor: element.descriptor\n      };\n      var desc = {\n        value: \"Descriptor\",\n        configurable: true\n      };\n      Object.defineProperty(obj, Symbol.toStringTag, desc);\n      if (element.kind === \"field\") obj.initializer = element.initializer;\n      return obj;\n    },\n    toElementDescriptors: function (elementObjects) {\n      if (elementObjects === undefined) return;\n      return _toArray(elementObjects).map(function (elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n        this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\");\n        this.disallowProperty(elementObject, \"extras\", \"An element descriptor\");\n        return element;\n      }, this);\n    },\n    toElementDescriptor: function (elementObject) {\n      var kind = String(elementObject.kind);\n\n      if (kind !== \"method\" && kind !== \"field\") {\n        throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"');\n      }\n\n      var key = _toPropertyKey(elementObject.key);\n\n      var placement = String(elementObject.placement);\n\n      if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") {\n        throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"');\n      }\n\n      var descriptor = elementObject.descriptor;\n      this.disallowProperty(elementObject, \"elements\", \"An element descriptor\");\n      var element = {\n        kind: kind,\n        key: key,\n        placement: placement,\n        descriptor: Object.assign({}, descriptor)\n      };\n\n      if (kind !== \"field\") {\n        this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\");\n      } else {\n        this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\");\n        this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\");\n        this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\");\n        element.initializer = elementObject.initializer;\n      }\n\n      return element;\n    },\n    toElementFinisherExtras: function (elementObject) {\n      var element = this.toElementDescriptor(elementObject);\n\n      var finisher = _optionalCallableProperty(elementObject, \"finisher\");\n\n      var extras = this.toElementDescriptors(elementObject.extras);\n      return {\n        element: element,\n        finisher: finisher,\n        extras: extras\n      };\n    },\n    fromClassDescriptor: function (elements) {\n      var obj = {\n        kind: \"class\",\n        elements: elements.map(this.fromElementDescriptor, this)\n      };\n      var desc = {\n        value: \"Descriptor\",\n        configurable: true\n      };\n      Object.defineProperty(obj, Symbol.toStringTag, desc);\n      return obj;\n    },\n    toClassDescriptor: function (obj) {\n      var kind = String(obj.kind);\n\n      if (kind !== \"class\") {\n        throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"');\n      }\n\n      this.disallowProperty(obj, \"key\", \"A class descriptor\");\n      this.disallowProperty(obj, \"placement\", \"A class descriptor\");\n      this.disallowProperty(obj, \"descriptor\", \"A class descriptor\");\n      this.disallowProperty(obj, \"initializer\", \"A class descriptor\");\n      this.disallowProperty(obj, \"extras\", \"A class descriptor\");\n\n      var finisher = _optionalCallableProperty(obj, \"finisher\");\n\n      var elements = this.toElementDescriptors(obj.elements);\n      return {\n        elements: elements,\n        finisher: finisher\n      };\n    },\n    runClassFinishers: function (constructor, finishers) {\n      for (var i = 0; i < finishers.length; i++) {\n        var newConstructor = (0, finishers[i])(constructor);\n\n        if (newConstructor !== undefined) {\n          if (typeof newConstructor !== \"function\") {\n            throw new TypeError(\"Finishers must return a constructor.\");\n          }\n\n          constructor = newConstructor;\n        }\n      }\n\n      return constructor;\n    },\n    disallowProperty: function (obj, name, objectType) {\n      if (obj[name] !== undefined) {\n        throw new TypeError(objectType + \" can't have a .\" + name + \" property.\");\n      }\n    }\n  };\n  return api;\n}\n\nfunction _createElementDescriptor(def) {\n  var key = _toPropertyKey(def.key);\n\n  var descriptor;\n\n  if (def.kind === \"method\") {\n    descriptor = {\n      value: def.value,\n      writable: true,\n      configurable: true,\n      enumerable: false\n    };\n  } else if (def.kind === \"get\") {\n    descriptor = {\n      get: def.value,\n      configurable: true,\n      enumerable: false\n    };\n  } else if (def.kind === \"set\") {\n    descriptor = {\n      set: def.value,\n      configurable: true,\n      enumerable: false\n    };\n  } else if (def.kind === \"field\") {\n    descriptor = {\n      configurable: true,\n      writable: true,\n      enumerable: true\n    };\n  }\n\n  var element = {\n    kind: def.kind === \"field\" ? \"field\" : \"method\",\n    key: key,\n    placement: def.static ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\",\n    descriptor: descriptor\n  };\n  if (def.decorators) element.decorators = def.decorators;\n  if (def.kind === \"field\") element.initializer = def.value;\n  return element;\n}\n\nfunction _coalesceGetterSetter(element, other) {\n  if (element.descriptor.get !== undefined) {\n    other.descriptor.get = element.descriptor.get;\n  } else {\n    other.descriptor.set = element.descriptor.set;\n  }\n}\n\nfunction _coalesceClassElements(elements) {\n  var newElements = [];\n\n  var isSameElement = function (other) {\n    return other.kind === \"method\" && other.key === element.key && other.placement === element.placement;\n  };\n\n  for (var i = 0; i < elements.length; i++) {\n    var element = elements[i];\n    var other;\n\n    if (element.kind === \"method\" && (other = newElements.find(isSameElement))) {\n      if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n        if (_hasDecorators(element) || _hasDecorators(other)) {\n          throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\");\n        }\n\n        other.descriptor = element.descriptor;\n      } else {\n        if (_hasDecorators(element)) {\n          if (_hasDecorators(other)) {\n            throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\");\n          }\n\n          other.decorators = element.decorators;\n        }\n\n        _coalesceGetterSetter(element, other);\n      }\n    } else {\n      newElements.push(element);\n    }\n  }\n\n  return newElements;\n}\n\nfunction _hasDecorators(element) {\n  return element.decorators && element.decorators.length;\n}\n\nfunction _isDataDescriptor(desc) {\n  return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n}\n\nfunction _optionalCallableProperty(obj, name) {\n  var value = obj[name];\n\n  if (value !== undefined && typeof value !== \"function\") {\n    throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n  }\n\n  return value;\n}\n\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n\n  privateMap.set(obj, value);\n}\n\nfunction _classPrivateMethodInitSpec(obj, privateSet) {\n  _checkPrivateRedeclaration(obj, privateSet);\n\n  privateSet.add(obj);\n}\n\nfunction _classPrivateMethodSet() {\n  throw new TypeError(\"attempted to reassign private method\");\n}\n\nfunction _identity(x) {\n  return x;\n}\n\nclass BasicObject {\n  static proxyMethod(expression) {\n    const {\n      name,\n      toMethod,\n      toProperty,\n      optional\n    } = parseProxyMethodExpression(expression);\n\n    this.prototype[name] = function () {\n      let subject;\n      let object;\n\n      if (toMethod) {\n        if (optional) {\n          var _this$toMethod;\n\n          object = (_this$toMethod = this[toMethod]) === null || _this$toMethod === void 0 ? void 0 : _this$toMethod.call(this);\n        } else {\n          object = this[toMethod]();\n        }\n      } else if (toProperty) {\n        object = this[toProperty];\n      }\n\n      if (optional) {\n        var _object;\n\n        subject = (_object = object) === null || _object === void 0 ? void 0 : _object[name];\n\n        if (subject) {\n          return apply.call(subject, object, arguments);\n        }\n      } else {\n        subject = object[name];\n        return apply.call(subject, object, arguments);\n      }\n    };\n  }\n\n}\n\nconst parseProxyMethodExpression = function (expression) {\n  const match = expression.match(proxyMethodExpressionPattern);\n\n  if (!match) {\n    throw new Error(\"can't parse @proxyMethod expression: \".concat(expression));\n  }\n\n  const args = {\n    name: match[4]\n  };\n\n  if (match[2] != null) {\n    args.toMethod = match[1];\n  } else {\n    args.toProperty = match[1];\n  }\n\n  if (match[3] != null) {\n    args.optional = true;\n  }\n\n  return args;\n};\n\nconst {\n  apply\n} = Function.prototype;\nconst proxyMethodExpressionPattern = new RegExp(\"\\\n^\\\n(.+?)\\\n(\\\\(\\\\))?\\\n(\\\\?)?\\\n\\\\.\\\n(.+?)\\\n$\\\n\");\n\nvar _Array$from, _$codePointAt$1, _$1, _String$fromCodePoint;\nclass UTF16String extends BasicObject {\n  static box() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n\n    if (value instanceof this) {\n      return value;\n    } else {\n      return this.fromUCS2String(value === null || value === void 0 ? void 0 : value.toString());\n    }\n  }\n\n  static fromUCS2String(ucs2String) {\n    return new this(ucs2String, ucs2decode(ucs2String));\n  }\n\n  static fromCodepoints(codepoints) {\n    return new this(ucs2encode(codepoints), codepoints);\n  }\n\n  constructor(ucs2String, codepoints) {\n    super(...arguments);\n    this.ucs2String = ucs2String;\n    this.codepoints = codepoints;\n    this.length = this.codepoints.length;\n    this.ucs2Length = this.ucs2String.length;\n  }\n\n  offsetToUCS2Offset(offset) {\n    return ucs2encode(this.codepoints.slice(0, Math.max(0, offset))).length;\n  }\n\n  offsetFromUCS2Offset(ucs2Offset) {\n    return ucs2decode(this.ucs2String.slice(0, Math.max(0, ucs2Offset))).length;\n  }\n\n  slice() {\n    return this.constructor.fromCodepoints(this.codepoints.slice(...arguments));\n  }\n\n  charAt(offset) {\n    return this.slice(offset, offset + 1);\n  }\n\n  isEqualTo(value) {\n    return this.constructor.box(value).ucs2String === this.ucs2String;\n  }\n\n  toJSON() {\n    return this.ucs2String;\n  }\n\n  getCacheKey() {\n    return this.ucs2String;\n  }\n\n  toString() {\n    return this.ucs2String;\n  }\n\n}\nconst hasArrayFrom = ((_Array$from = Array.from) === null || _Array$from === void 0 ? void 0 : _Array$from.call(Array, \"\\ud83d\\udc7c\").length) === 1;\nconst hasStringCodePointAt$1 = ((_$codePointAt$1 = (_$1 = \" \").codePointAt) === null || _$codePointAt$1 === void 0 ? void 0 : _$codePointAt$1.call(_$1, 0)) != null;\nconst hasStringFromCodePoint = ((_String$fromCodePoint = String.fromCodePoint) === null || _String$fromCodePoint === void 0 ? void 0 : _String$fromCodePoint.call(String, 32, 128124)) === \" \\ud83d\\udc7c\"; // UCS-2 conversion helpers ported from Mathias Bynens' Punycode.js:\n// https://github.com/bestiejs/punycode.js#punycodeucs2\n\nlet ucs2decode, ucs2encode; // Creates an array containing the numeric code points of each Unicode\n// character in the string. While JavaScript uses UCS-2 internally,\n// this function will convert a pair of surrogate halves (each of which\n// UCS-2 exposes as separate characters) into a single code point,\n// matching UTF-16.\n\nif (hasArrayFrom && hasStringCodePointAt$1) {\n  ucs2decode = string => Array.from(string).map(char => char.codePointAt(0));\n} else {\n  ucs2decode = function (string) {\n    const output = [];\n    let counter = 0;\n    const {\n      length\n    } = string;\n\n    while (counter < length) {\n      let value = string.charCodeAt(counter++);\n\n      if (0xd800 <= value && value <= 0xdbff && counter < length) {\n        // high surrogate, and there is a next character\n        const extra = string.charCodeAt(counter++);\n\n        if ((extra & 0xfc00) === 0xdc00) {\n          // low surrogate\n          value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n        } else {\n          // unmatched surrogate; only append this code unit, in case the\n          // next code unit is the high surrogate of a surrogate pair\n          counter--;\n        }\n      }\n\n      output.push(value);\n    }\n\n    return output;\n  };\n} // Creates a string based on an array of numeric code points.\n\n\nif (hasStringFromCodePoint) {\n  ucs2encode = array => String.fromCodePoint(...Array.from(array || []));\n} else {\n  ucs2encode = function (array) {\n    const characters = (() => {\n      const result = [];\n      Array.from(array).forEach(value => {\n        let output = \"\";\n\n        if (value > 0xffff) {\n          value -= 0x10000;\n          output += String.fromCharCode(value >>> 10 & 0x3ff | 0xd800);\n          value = 0xdc00 | value & 0x3ff;\n        }\n\n        result.push(output + String.fromCharCode(value));\n      });\n      return result;\n    })();\n\n    return characters.join(\"\");\n  };\n}\n\nlet id$1 = 0;\nclass TrixObject extends BasicObject {\n  static fromJSONString(jsonString) {\n    return this.fromJSON(JSON.parse(jsonString));\n  }\n\n  constructor() {\n    super(...arguments);\n    this.id = ++id$1;\n  }\n\n  hasSameConstructorAs(object) {\n    return this.constructor === (object === null || object === void 0 ? void 0 : object.constructor);\n  }\n\n  isEqualTo(object) {\n    return this === object;\n  }\n\n  inspect() {\n    const parts = [];\n    const contents = this.contentsForInspection() || {};\n\n    for (const key in contents) {\n      const value = contents[key];\n      parts.push(\"\".concat(key, \"=\").concat(value));\n    }\n\n    return \"#<\".concat(this.constructor.name, \":\").concat(this.id).concat(parts.length ? \" \".concat(parts.join(\", \")) : \"\", \">\");\n  }\n\n  contentsForInspection() {}\n\n  toJSONString() {\n    return JSON.stringify(this);\n  }\n\n  toUTF16String() {\n    return UTF16String.box(this);\n  }\n\n  getCacheKey() {\n    return this.id.toString();\n  }\n\n}\n\n/* eslint-disable\n    id-length,\n*/\nconst arraysAreEqual = function () {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (let index = 0; index < a.length; index++) {\n    const value = a[index];\n\n    if (value !== b[index]) {\n      return false;\n    }\n  }\n\n  return true;\n};\nconst arrayStartsWith = function () {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return arraysAreEqual(a.slice(0, b.length), b);\n};\nconst spliceArray = function (array) {\n  const result = array.slice(0);\n\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  result.splice(...args);\n  return result;\n};\nconst summarizeArrayChange = function () {\n  let oldArray = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let newArray = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  const added = [];\n  const removed = [];\n  const existingValues = new Set();\n  oldArray.forEach(value => {\n    existingValues.add(value);\n  });\n  const currentValues = new Set();\n  newArray.forEach(value => {\n    currentValues.add(value);\n\n    if (!existingValues.has(value)) {\n      added.push(value);\n    }\n  });\n  oldArray.forEach(value => {\n    if (!currentValues.has(value)) {\n      removed.push(value);\n    }\n  });\n  return {\n    added,\n    removed\n  };\n};\n\nconst RTL_PATTERN = /[\\u05BE\\u05C0\\u05C3\\u05D0-\\u05EA\\u05F0-\\u05F4\\u061B\\u061F\\u0621-\\u063A\\u0640-\\u064A\\u066D\\u0671-\\u06B7\\u06BA-\\u06BE\\u06C0-\\u06CE\\u06D0-\\u06D5\\u06E5\\u06E6\\u200F\\u202B\\u202E\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE72\\uFE74\\uFE76-\\uFEFC]/;\nconst getDirection = function () {\n  const input = makeElement(\"input\", {\n    dir: \"auto\",\n    name: \"x\",\n    dirName: \"x.dir\"\n  });\n  const form = makeElement(\"form\");\n  form.appendChild(input);\n\n  const supportsDirName = function () {\n    try {\n      return new FormData(form).has(input.dirName);\n    } catch (error) {\n      return false;\n    }\n  }();\n\n  const supportsDirSelector = function () {\n    try {\n      return input.matches(\":dir(ltr),:dir(rtl)\");\n    } catch (error) {\n      return false;\n    }\n  }();\n\n  if (supportsDirName) {\n    return function (string) {\n      input.value = string;\n      return new FormData(form).get(input.dirName);\n    };\n  } else if (supportsDirSelector) {\n    return function (string) {\n      input.value = string;\n\n      if (input.matches(\":dir(rtl)\")) {\n        return \"rtl\";\n      } else {\n        return \"ltr\";\n      }\n    };\n  } else {\n    return function (string) {\n      const char = string.trim().charAt(0);\n\n      if (RTL_PATTERN.test(char)) {\n        return \"rtl\";\n      } else {\n        return \"ltr\";\n      }\n    };\n  }\n}();\n\nlet allAttributeNames = null;\nlet blockAttributeNames = null;\nlet textAttributeNames = null;\nlet listAttributeNames = null;\nconst getAllAttributeNames = () => {\n  if (!allAttributeNames) {\n    allAttributeNames = getTextAttributeNames().concat(getBlockAttributeNames());\n  }\n\n  return allAttributeNames;\n};\nconst getBlockConfig = attributeName => config.blockAttributes[attributeName];\nconst getBlockAttributeNames = () => {\n  if (!blockAttributeNames) {\n    blockAttributeNames = Object.keys(config.blockAttributes);\n  }\n\n  return blockAttributeNames;\n};\nconst getTextConfig = attributeName => config.textAttributes[attributeName];\nconst getTextAttributeNames = () => {\n  if (!textAttributeNames) {\n    textAttributeNames = Object.keys(config.textAttributes);\n  }\n\n  return textAttributeNames;\n};\nconst getListAttributeNames = () => {\n  if (!listAttributeNames) {\n    listAttributeNames = [];\n\n    for (const key in config.blockAttributes) {\n      const {\n        listAttribute\n      } = config.blockAttributes[key];\n\n      if (listAttribute != null) {\n        listAttributeNames.push(listAttribute);\n      }\n    }\n  }\n\n  return listAttributeNames;\n};\n\n/* eslint-disable\n*/\nconst installDefaultCSSForTagName = function (tagName, defaultCSS) {\n  const styleElement = insertStyleElementForTagName(tagName);\n  styleElement.textContent = defaultCSS.replace(/%t/g, tagName);\n};\n\nconst insertStyleElementForTagName = function (tagName) {\n  const element = document.createElement(\"style\");\n  element.setAttribute(\"type\", \"text/css\");\n  element.setAttribute(\"data-tag-name\", tagName.toLowerCase());\n  const nonce = getCSPNonce();\n\n  if (nonce) {\n    element.setAttribute(\"nonce\", nonce);\n  }\n\n  document.head.insertBefore(element, document.head.firstChild);\n  return element;\n};\n\nconst getCSPNonce = function () {\n  const element = getMetaElement(\"trix-csp-nonce\") || getMetaElement(\"csp-nonce\");\n\n  if (element) {\n    return element.getAttribute(\"content\");\n  }\n};\n\nconst getMetaElement = name => document.head.querySelector(\"meta[name=\".concat(name, \"]\"));\n\nconst testTransferData = {\n  \"application/x-trix-feature-detection\": \"test\"\n};\nconst dataTransferIsPlainText = function (dataTransfer) {\n  const text = dataTransfer.getData(\"text/plain\");\n  const html = dataTransfer.getData(\"text/html\");\n\n  if (text && html) {\n    const {\n      body\n    } = new DOMParser().parseFromString(html, \"text/html\");\n\n    if (body.textContent === text) {\n      return !body.querySelector(\"*\");\n    }\n  } else {\n    return text === null || text === void 0 ? void 0 : text.length;\n  }\n};\nconst dataTransferIsWritable = function (dataTransfer) {\n  if (!(dataTransfer !== null && dataTransfer !== void 0 && dataTransfer.setData)) return false;\n\n  for (const key in testTransferData) {\n    const value = testTransferData[key];\n\n    try {\n      dataTransfer.setData(key, value);\n      if (!dataTransfer.getData(key) === value) return false;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  return true;\n};\nconst keyEventIsKeyboardCommand = function () {\n  if (/Mac|^iP/.test(navigator.platform)) {\n    return event => event.metaKey;\n  } else {\n    return event => event.ctrlKey;\n  }\n}();\n\nconst defer = fn => setTimeout(fn, 1);\n\n/* eslint-disable\n    id-length,\n*/\nconst copyObject = function () {\n  let object = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const result = {};\n\n  for (const key in object) {\n    const value = object[key];\n    result[key] = value;\n  }\n\n  return result;\n};\nconst objectsAreEqual = function () {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n\n  for (const key in a) {\n    const value = a[key];\n\n    if (value !== b[key]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst normalizeRange = function (range) {\n  if (range == null) return;\n\n  if (!Array.isArray(range)) {\n    range = [range, range];\n  }\n\n  return [copyValue(range[0]), copyValue(range[1] != null ? range[1] : range[0])];\n};\nconst rangeIsCollapsed = function (range) {\n  if (range == null) return;\n  const [start, end] = normalizeRange(range);\n  return rangeValuesAreEqual(start, end);\n};\nconst rangesAreEqual = function (leftRange, rightRange) {\n  if (leftRange == null || rightRange == null) return;\n  const [leftStart, leftEnd] = normalizeRange(leftRange);\n  const [rightStart, rightEnd] = normalizeRange(rightRange);\n  return rangeValuesAreEqual(leftStart, rightStart) && rangeValuesAreEqual(leftEnd, rightEnd);\n};\n\nconst copyValue = function (value) {\n  if (typeof value === \"number\") {\n    return value;\n  } else {\n    return copyObject(value);\n  }\n};\n\nconst rangeValuesAreEqual = function (left, right) {\n  if (typeof left === \"number\") {\n    return left === right;\n  } else {\n    return objectsAreEqual(left, right);\n  }\n};\n\n/* eslint-disable\n    id-length,\n*/\nclass SelectionChangeObserver extends BasicObject {\n  constructor() {\n    super(...arguments);\n    this.update = this.update.bind(this);\n    this.run = this.run.bind(this);\n    this.selectionManagers = [];\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true;\n\n      if (\"onselectionchange\" in document) {\n        return document.addEventListener(\"selectionchange\", this.update, true);\n      } else {\n        return this.run();\n      }\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false;\n      return document.removeEventListener(\"selectionchange\", this.update, true);\n    }\n  }\n\n  registerSelectionManager(selectionManager) {\n    if (!this.selectionManagers.includes(selectionManager)) {\n      this.selectionManagers.push(selectionManager);\n      return this.start();\n    }\n  }\n\n  unregisterSelectionManager(selectionManager) {\n    this.selectionManagers = this.selectionManagers.filter(s => s !== selectionManager);\n\n    if (this.selectionManagers.length === 0) {\n      return this.stop();\n    }\n  }\n\n  notifySelectionManagersOfSelectionChange() {\n    return this.selectionManagers.map(selectionManager => selectionManager.selectionDidChange());\n  }\n\n  update() {\n    const domRange = getDOMRange();\n\n    if (!domRangesAreEqual(domRange, this.domRange)) {\n      this.domRange = domRange;\n      return this.notifySelectionManagersOfSelectionChange();\n    }\n  }\n\n  reset() {\n    this.domRange = null;\n    return this.update();\n  } // Private\n\n\n  run() {\n    if (this.started) {\n      this.update();\n      return requestAnimationFrame(this.run);\n    }\n  }\n\n}\n\nconst domRangesAreEqual = (left, right) => (left === null || left === void 0 ? void 0 : left.startContainer) === (right === null || right === void 0 ? void 0 : right.startContainer) && (left === null || left === void 0 ? void 0 : left.startOffset) === (right === null || right === void 0 ? void 0 : right.startOffset) && (left === null || left === void 0 ? void 0 : left.endContainer) === (right === null || right === void 0 ? void 0 : right.endContainer) && (left === null || left === void 0 ? void 0 : left.endOffset) === (right === null || right === void 0 ? void 0 : right.endOffset);\n\nconst selectionChangeObserver = new SelectionChangeObserver();\nconst getDOMSelection = function () {\n  const selection = window.getSelection();\n\n  if (selection.rangeCount > 0) {\n    return selection;\n  }\n};\nconst getDOMRange = function () {\n  var _getDOMSelection;\n\n  const domRange = (_getDOMSelection = getDOMSelection()) === null || _getDOMSelection === void 0 ? void 0 : _getDOMSelection.getRangeAt(0);\n\n  if (domRange) {\n    if (!domRangeIsPrivate(domRange)) {\n      return domRange;\n    }\n  }\n};\nconst setDOMRange = function (domRange) {\n  const selection = window.getSelection();\n  selection.removeAllRanges();\n  selection.addRange(domRange);\n  return selectionChangeObserver.update();\n}; // In Firefox, clicking certain <input> elements changes the selection to a\n// private element used to draw its UI. Attempting to access properties of those\n// elements throws an error.\n// https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n\nconst domRangeIsPrivate = domRange => nodeIsPrivate(domRange.startContainer) || nodeIsPrivate(domRange.endContainer);\n\nconst nodeIsPrivate = node => !Object.getPrototypeOf(node);\n\n/* eslint-disable\n    id-length,\n    no-useless-escape,\n*/\nconst normalizeSpaces = string => string.replace(new RegExp(\"\".concat(ZERO_WIDTH_SPACE), \"g\"), \"\").replace(new RegExp(\"\".concat(NON_BREAKING_SPACE), \"g\"), \" \");\nconst normalizeNewlines = string => string.replace(/\\r\\n/g, \"\\n\");\nconst breakableWhitespacePattern = new RegExp(\"[^\\\\S\".concat(NON_BREAKING_SPACE, \"]\"));\nconst squishBreakableWhitespace = string => string // Replace all breakable whitespace characters with a space\n.replace(new RegExp(\"\".concat(breakableWhitespacePattern.source), \"g\"), \" \") // Replace two or more spaces with a single space\n.replace(/\\ {2,}/g, \" \");\nconst summarizeStringChange = function (oldString, newString) {\n  let added, removed;\n  oldString = UTF16String.box(oldString);\n  newString = UTF16String.box(newString);\n\n  if (newString.length < oldString.length) {\n    [removed, added] = utf16StringDifferences(oldString, newString);\n  } else {\n    [added, removed] = utf16StringDifferences(newString, oldString);\n  }\n\n  return {\n    added,\n    removed\n  };\n};\n\nconst utf16StringDifferences = function (a, b) {\n  if (a.isEqualTo(b)) {\n    return [\"\", \"\"];\n  }\n\n  const diffA = utf16StringDifference(a, b);\n  const {\n    length\n  } = diffA.utf16String;\n  let diffB;\n\n  if (length) {\n    const {\n      offset\n    } = diffA;\n    const codepoints = a.codepoints.slice(0, offset).concat(a.codepoints.slice(offset + length));\n    diffB = utf16StringDifference(b, UTF16String.fromCodepoints(codepoints));\n  } else {\n    diffB = utf16StringDifference(b, a);\n  }\n\n  return [diffA.utf16String.toString(), diffB.utf16String.toString()];\n};\n\nconst utf16StringDifference = function (a, b) {\n  let leftIndex = 0;\n  let rightIndexA = a.length;\n  let rightIndexB = b.length;\n\n  while (leftIndex < rightIndexA && a.charAt(leftIndex).isEqualTo(b.charAt(leftIndex))) {\n    leftIndex++;\n  }\n\n  while (rightIndexA > leftIndex + 1 && a.charAt(rightIndexA - 1).isEqualTo(b.charAt(rightIndexB - 1))) {\n    rightIndexA--;\n    rightIndexB--;\n  }\n\n  return {\n    utf16String: a.slice(leftIndex, rightIndexA),\n    offset: leftIndex\n  };\n};\n\nclass Hash extends TrixObject {\n  static fromCommonAttributesOfObjects() {\n    let objects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    if (!objects.length) {\n      return new this();\n    }\n\n    let hash = box(objects[0]);\n    let keys = hash.getKeys();\n    objects.slice(1).forEach(object => {\n      keys = hash.getKeysCommonToHash(box(object));\n      hash = hash.slice(keys);\n    });\n    return hash;\n  }\n\n  static box(values) {\n    return box(values);\n  }\n\n  constructor() {\n    let values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(...arguments);\n    this.values = copy(values);\n  }\n\n  add(key, value) {\n    return this.merge(object(key, value));\n  }\n\n  remove(key) {\n    return new Hash(copy(this.values, key));\n  }\n\n  get(key) {\n    return this.values[key];\n  }\n\n  has(key) {\n    return key in this.values;\n  }\n\n  merge(values) {\n    return new Hash(merge(this.values, unbox(values)));\n  }\n\n  slice(keys) {\n    const values = {};\n    keys.forEach(key => {\n      if (this.has(key)) {\n        values[key] = this.values[key];\n      }\n    });\n    return new Hash(values);\n  }\n\n  getKeys() {\n    return Object.keys(this.values);\n  }\n\n  getKeysCommonToHash(hash) {\n    hash = box(hash);\n    return this.getKeys().filter(key => this.values[key] === hash.values[key]);\n  }\n\n  isEqualTo(values) {\n    return arraysAreEqual(this.toArray(), box(values).toArray());\n  }\n\n  isEmpty() {\n    return this.getKeys().length === 0;\n  }\n\n  toArray() {\n    if (!this.array) {\n      const result = [];\n\n      for (const key in this.values) {\n        const value = this.values[key];\n        result.push(result.push(key, value));\n      }\n\n      this.array = result.slice(0);\n    }\n\n    return this.array;\n  }\n\n  toObject() {\n    return copy(this.values);\n  }\n\n  toJSON() {\n    return this.toObject();\n  }\n\n  contentsForInspection() {\n    return {\n      values: JSON.stringify(this.values)\n    };\n  }\n\n}\n\nconst object = function (key, value) {\n  const result = {};\n  result[key] = value;\n  return result;\n};\n\nconst merge = function (object, values) {\n  const result = copy(object);\n\n  for (const key in values) {\n    const value = values[key];\n    result[key] = value;\n  }\n\n  return result;\n};\n\nconst copy = function (object, keyToRemove) {\n  const result = {};\n  const sortedKeys = Object.keys(object).sort();\n  sortedKeys.forEach(key => {\n    if (key !== keyToRemove) {\n      result[key] = object[key];\n    }\n  });\n  return result;\n};\n\nconst box = function (object) {\n  if (object instanceof Hash) {\n    return object;\n  } else {\n    return new Hash(object);\n  }\n};\n\nconst unbox = function (object) {\n  if (object instanceof Hash) {\n    return object.values;\n  } else {\n    return object;\n  }\n};\n\nclass Operation extends BasicObject {\n  isPerforming() {\n    return this.performing === true;\n  }\n\n  hasPerformed() {\n    return this.performed === true;\n  }\n\n  hasSucceeded() {\n    return this.performed && this.succeeded;\n  }\n\n  hasFailed() {\n    return this.performed && !this.succeeded;\n  }\n\n  getPromise() {\n    if (!this.promise) {\n      this.promise = new Promise((resolve, reject) => {\n        this.performing = true;\n        return this.perform((succeeded, result) => {\n          this.succeeded = succeeded;\n          this.performing = false;\n          this.performed = true;\n\n          if (this.succeeded) {\n            resolve(result);\n          } else {\n            reject(result);\n          }\n        });\n      });\n    }\n\n    return this.promise;\n  }\n\n  perform(callback) {\n    return callback(false);\n  }\n\n  release() {\n    var _this$promise, _this$promise$cancel;\n\n    (_this$promise = this.promise) === null || _this$promise === void 0 ? void 0 : (_this$promise$cancel = _this$promise.cancel) === null || _this$promise$cancel === void 0 ? void 0 : _this$promise$cancel.call(_this$promise);\n    this.promise = null;\n    this.performing = null;\n    this.performed = null;\n    this.succeeded = null;\n  }\n\n}\nOperation.proxyMethod(\"getPromise().then\");\nOperation.proxyMethod(\"getPromise().catch\");\n\nclass ImagePreloadOperation extends Operation {\n  constructor(url) {\n    super(...arguments);\n    this.url = url;\n  }\n\n  perform(callback) {\n    const image = new Image();\n\n    image.onload = () => {\n      image.width = this.width = image.naturalWidth;\n      image.height = this.height = image.naturalHeight;\n      return callback(true, image);\n    };\n\n    image.onerror = () => callback(false);\n\n    image.src = this.url;\n  }\n\n}\n\nclass Attachment extends TrixObject {\n  static attachmentForFile(file) {\n    const attributes = this.attributesForFile(file);\n    const attachment = new this(attributes);\n    attachment.setFile(file);\n    return attachment;\n  }\n\n  static attributesForFile(file) {\n    return new Hash({\n      filename: file.name,\n      filesize: file.size,\n      contentType: file.type\n    });\n  }\n\n  static fromJSON(attachmentJSON) {\n    return new this(attachmentJSON);\n  }\n\n  constructor() {\n    let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(attributes);\n    this.releaseFile = this.releaseFile.bind(this);\n    this.attributes = Hash.box(attributes);\n    this.didChangeAttributes();\n  }\n\n  getAttribute(attribute) {\n    return this.attributes.get(attribute);\n  }\n\n  hasAttribute(attribute) {\n    return this.attributes.has(attribute);\n  }\n\n  getAttributes() {\n    return this.attributes.toObject();\n  }\n\n  setAttributes() {\n    let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const newAttributes = this.attributes.merge(attributes);\n\n    if (!this.attributes.isEqualTo(newAttributes)) {\n      var _this$previewDelegate, _this$previewDelegate2, _this$delegate, _this$delegate$attach;\n\n      this.attributes = newAttributes;\n      this.didChangeAttributes();\n      (_this$previewDelegate = this.previewDelegate) === null || _this$previewDelegate === void 0 ? void 0 : (_this$previewDelegate2 = _this$previewDelegate.attachmentDidChangeAttributes) === null || _this$previewDelegate2 === void 0 ? void 0 : _this$previewDelegate2.call(_this$previewDelegate, this);\n      return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$attach = _this$delegate.attachmentDidChangeAttributes) === null || _this$delegate$attach === void 0 ? void 0 : _this$delegate$attach.call(_this$delegate, this);\n    }\n  }\n\n  didChangeAttributes() {\n    if (this.isPreviewable()) {\n      return this.preloadURL();\n    }\n  }\n\n  isPending() {\n    return this.file != null && !(this.getURL() || this.getHref());\n  }\n\n  isPreviewable() {\n    if (this.attributes.has(\"previewable\")) {\n      return this.attributes.get(\"previewable\");\n    } else {\n      return Attachment.previewablePattern.test(this.getContentType());\n    }\n  }\n\n  getType() {\n    if (this.hasContent()) {\n      return \"content\";\n    } else if (this.isPreviewable()) {\n      return \"preview\";\n    } else {\n      return \"file\";\n    }\n  }\n\n  getURL() {\n    return this.attributes.get(\"url\");\n  }\n\n  getHref() {\n    return this.attributes.get(\"href\");\n  }\n\n  getFilename() {\n    return this.attributes.get(\"filename\") || \"\";\n  }\n\n  getFilesize() {\n    return this.attributes.get(\"filesize\");\n  }\n\n  getFormattedFilesize() {\n    const filesize = this.attributes.get(\"filesize\");\n\n    if (typeof filesize === \"number\") {\n      return config.fileSize.formatter(filesize);\n    } else {\n      return \"\";\n    }\n  }\n\n  getExtension() {\n    var _this$getFilename$mat;\n\n    return (_this$getFilename$mat = this.getFilename().match(/\\.(\\w+)$/)) === null || _this$getFilename$mat === void 0 ? void 0 : _this$getFilename$mat[1].toLowerCase();\n  }\n\n  getContentType() {\n    return this.attributes.get(\"contentType\");\n  }\n\n  hasContent() {\n    return this.attributes.has(\"content\");\n  }\n\n  getContent() {\n    return this.attributes.get(\"content\");\n  }\n\n  getWidth() {\n    return this.attributes.get(\"width\");\n  }\n\n  getHeight() {\n    return this.attributes.get(\"height\");\n  }\n\n  getFile() {\n    return this.file;\n  }\n\n  setFile(file) {\n    this.file = file;\n\n    if (this.isPreviewable()) {\n      return this.preloadFile();\n    }\n  }\n\n  releaseFile() {\n    this.releasePreloadedFile();\n    this.file = null;\n  }\n\n  getUploadProgress() {\n    return this.uploadProgress != null ? this.uploadProgress : 0;\n  }\n\n  setUploadProgress(value) {\n    if (this.uploadProgress !== value) {\n      var _this$uploadProgressD, _this$uploadProgressD2;\n\n      this.uploadProgress = value;\n      return (_this$uploadProgressD = this.uploadProgressDelegate) === null || _this$uploadProgressD === void 0 ? void 0 : (_this$uploadProgressD2 = _this$uploadProgressD.attachmentDidChangeUploadProgress) === null || _this$uploadProgressD2 === void 0 ? void 0 : _this$uploadProgressD2.call(_this$uploadProgressD, this);\n    }\n  }\n\n  toJSON() {\n    return this.getAttributes();\n  }\n\n  getCacheKey() {\n    return [super.getCacheKey(...arguments), this.attributes.getCacheKey(), this.getPreviewURL()].join(\"/\");\n  } // Previewable\n\n\n  getPreviewURL() {\n    return this.previewURL || this.preloadingURL;\n  }\n\n  setPreviewURL(url) {\n    if (url !== this.getPreviewURL()) {\n      var _this$previewDelegate3, _this$previewDelegate4, _this$delegate2, _this$delegate2$attac;\n\n      this.previewURL = url;\n      (_this$previewDelegate3 = this.previewDelegate) === null || _this$previewDelegate3 === void 0 ? void 0 : (_this$previewDelegate4 = _this$previewDelegate3.attachmentDidChangeAttributes) === null || _this$previewDelegate4 === void 0 ? void 0 : _this$previewDelegate4.call(_this$previewDelegate3, this);\n      return (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$attac = _this$delegate2.attachmentDidChangePreviewURL) === null || _this$delegate2$attac === void 0 ? void 0 : _this$delegate2$attac.call(_this$delegate2, this);\n    }\n  }\n\n  preloadURL() {\n    return this.preload(this.getURL(), this.releaseFile);\n  }\n\n  preloadFile() {\n    if (this.file) {\n      this.fileObjectURL = URL.createObjectURL(this.file);\n      return this.preload(this.fileObjectURL);\n    }\n  }\n\n  releasePreloadedFile() {\n    if (this.fileObjectURL) {\n      URL.revokeObjectURL(this.fileObjectURL);\n      this.fileObjectURL = null;\n    }\n  }\n\n  preload(url, callback) {\n    if (url && url !== this.getPreviewURL()) {\n      this.preloadingURL = url;\n      const operation = new ImagePreloadOperation(url);\n      return operation.then(_ref => {\n        let {\n          width,\n          height\n        } = _ref;\n\n        if (!this.getWidth() || !this.getHeight()) {\n          this.setAttributes({\n            width,\n            height\n          });\n        }\n\n        this.preloadingURL = null;\n        this.setPreviewURL(url);\n        return callback === null || callback === void 0 ? void 0 : callback();\n      }).catch(() => {\n        this.preloadingURL = null;\n        return callback === null || callback === void 0 ? void 0 : callback();\n      });\n    }\n  }\n\n}\n\n_defineProperty(Attachment, \"previewablePattern\", /^image(\\/(gif|png|jpe?g)|$)/);\n\nclass ManagedAttachment extends BasicObject {\n  constructor(attachmentManager, attachment) {\n    super(...arguments);\n    this.attachmentManager = attachmentManager;\n    this.attachment = attachment;\n    this.id = this.attachment.id;\n    this.file = this.attachment.file;\n  }\n\n  remove() {\n    return this.attachmentManager.requestRemovalOfAttachment(this.attachment);\n  }\n\n}\nManagedAttachment.proxyMethod(\"attachment.getAttribute\");\nManagedAttachment.proxyMethod(\"attachment.hasAttribute\");\nManagedAttachment.proxyMethod(\"attachment.setAttribute\");\nManagedAttachment.proxyMethod(\"attachment.getAttributes\");\nManagedAttachment.proxyMethod(\"attachment.setAttributes\");\nManagedAttachment.proxyMethod(\"attachment.isPending\");\nManagedAttachment.proxyMethod(\"attachment.isPreviewable\");\nManagedAttachment.proxyMethod(\"attachment.getURL\");\nManagedAttachment.proxyMethod(\"attachment.getHref\");\nManagedAttachment.proxyMethod(\"attachment.getFilename\");\nManagedAttachment.proxyMethod(\"attachment.getFilesize\");\nManagedAttachment.proxyMethod(\"attachment.getFormattedFilesize\");\nManagedAttachment.proxyMethod(\"attachment.getExtension\");\nManagedAttachment.proxyMethod(\"attachment.getContentType\");\nManagedAttachment.proxyMethod(\"attachment.getFile\");\nManagedAttachment.proxyMethod(\"attachment.setFile\");\nManagedAttachment.proxyMethod(\"attachment.releaseFile\");\nManagedAttachment.proxyMethod(\"attachment.getUploadProgress\");\nManagedAttachment.proxyMethod(\"attachment.setUploadProgress\");\n\nclass AttachmentManager extends BasicObject {\n  constructor() {\n    let attachments = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n    this.managedAttachments = {};\n    Array.from(attachments).forEach(attachment => {\n      this.manageAttachment(attachment);\n    });\n  }\n\n  getAttachments() {\n    const result = [];\n\n    for (const id in this.managedAttachments) {\n      const attachment = this.managedAttachments[id];\n      result.push(attachment);\n    }\n\n    return result;\n  }\n\n  manageAttachment(attachment) {\n    if (!this.managedAttachments[attachment.id]) {\n      this.managedAttachments[attachment.id] = new ManagedAttachment(this, attachment);\n    }\n\n    return this.managedAttachments[attachment.id];\n  }\n\n  attachmentIsManaged(attachment) {\n    return attachment.id in this.managedAttachments;\n  }\n\n  requestRemovalOfAttachment(attachment) {\n    if (this.attachmentIsManaged(attachment)) {\n      var _this$delegate, _this$delegate$attach;\n\n      return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$attach = _this$delegate.attachmentManagerDidRequestRemovalOfAttachment) === null || _this$delegate$attach === void 0 ? void 0 : _this$delegate$attach.call(_this$delegate, attachment);\n    }\n  }\n\n  unmanageAttachment(attachment) {\n    const managedAttachment = this.managedAttachments[attachment.id];\n    delete this.managedAttachments[attachment.id];\n    return managedAttachment;\n  }\n\n}\n\nclass Piece extends TrixObject {\n  static registerType(type, constructor) {\n    constructor.type = type;\n    this.types[type] = constructor;\n  }\n\n  static fromJSON(pieceJSON) {\n    const constructor = this.types[pieceJSON.type];\n\n    if (constructor) {\n      return constructor.fromJSON(pieceJSON);\n    }\n  }\n\n  constructor(value) {\n    let attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(...arguments);\n    this.attributes = Hash.box(attributes);\n  }\n\n  copyWithAttributes(attributes) {\n    return new this.constructor(this.getValue(), attributes);\n  }\n\n  copyWithAdditionalAttributes(attributes) {\n    return this.copyWithAttributes(this.attributes.merge(attributes));\n  }\n\n  copyWithoutAttribute(attribute) {\n    return this.copyWithAttributes(this.attributes.remove(attribute));\n  }\n\n  copy() {\n    return this.copyWithAttributes(this.attributes);\n  }\n\n  getAttribute(attribute) {\n    return this.attributes.get(attribute);\n  }\n\n  getAttributesHash() {\n    return this.attributes;\n  }\n\n  getAttributes() {\n    return this.attributes.toObject();\n  }\n\n  hasAttribute(attribute) {\n    return this.attributes.has(attribute);\n  }\n\n  hasSameStringValueAsPiece(piece) {\n    return piece && this.toString() === piece.toString();\n  }\n\n  hasSameAttributesAsPiece(piece) {\n    return piece && (this.attributes === piece.attributes || this.attributes.isEqualTo(piece.attributes));\n  }\n\n  isBlockBreak() {\n    return false;\n  }\n\n  isEqualTo(piece) {\n    return super.isEqualTo(...arguments) || this.hasSameConstructorAs(piece) && this.hasSameStringValueAsPiece(piece) && this.hasSameAttributesAsPiece(piece);\n  }\n\n  isEmpty() {\n    return this.length === 0;\n  }\n\n  isSerializable() {\n    return true;\n  }\n\n  toJSON() {\n    return {\n      type: this.constructor.type,\n      attributes: this.getAttributes()\n    };\n  }\n\n  contentsForInspection() {\n    return {\n      type: this.constructor.type,\n      attributes: this.attributes.inspect()\n    };\n  } // Grouping\n\n\n  canBeGrouped() {\n    return this.hasAttribute(\"href\");\n  }\n\n  canBeGroupedWith(piece) {\n    return this.getAttribute(\"href\") === piece.getAttribute(\"href\");\n  } // Splittable\n\n\n  getLength() {\n    return this.length;\n  }\n\n  canBeConsolidatedWith(piece) {\n    return false;\n  }\n\n}\n\n_defineProperty(Piece, \"types\", {});\n\nclass AttachmentPiece extends Piece {\n  static fromJSON(pieceJSON) {\n    return new this(Attachment.fromJSON(pieceJSON.attachment), pieceJSON.attributes);\n  }\n\n  constructor(attachment) {\n    super(...arguments);\n    this.attachment = attachment;\n    this.length = 1;\n    this.ensureAttachmentExclusivelyHasAttribute(\"href\");\n\n    if (!this.attachment.hasContent()) {\n      this.removeProhibitedAttributes();\n    }\n  }\n\n  ensureAttachmentExclusivelyHasAttribute(attribute) {\n    if (this.hasAttribute(attribute)) {\n      if (!this.attachment.hasAttribute(attribute)) {\n        this.attachment.setAttributes(this.attributes.slice(attribute));\n      }\n\n      this.attributes = this.attributes.remove(attribute);\n    }\n  }\n\n  removeProhibitedAttributes() {\n    const attributes = this.attributes.slice(AttachmentPiece.permittedAttributes);\n\n    if (!attributes.isEqualTo(this.attributes)) {\n      this.attributes = attributes;\n    }\n  }\n\n  getValue() {\n    return this.attachment;\n  }\n\n  isSerializable() {\n    return !this.attachment.isPending();\n  }\n\n  getCaption() {\n    return this.attributes.get(\"caption\") || \"\";\n  }\n\n  isEqualTo(piece) {\n    var _piece$attachment;\n\n    return super.isEqualTo(piece) && this.attachment.id === (piece === null || piece === void 0 ? void 0 : (_piece$attachment = piece.attachment) === null || _piece$attachment === void 0 ? void 0 : _piece$attachment.id);\n  }\n\n  toString() {\n    return OBJECT_REPLACEMENT_CHARACTER;\n  }\n\n  toJSON() {\n    const json = super.toJSON(...arguments);\n    json.attachment = this.attachment;\n    return json;\n  }\n\n  getCacheKey() {\n    return [super.getCacheKey(...arguments), this.attachment.getCacheKey()].join(\"/\");\n  }\n\n  toConsole() {\n    return JSON.stringify(this.toString());\n  }\n\n}\n\n_defineProperty(AttachmentPiece, \"permittedAttributes\", [\"caption\", \"presentation\"]);\n\nPiece.registerType(\"attachment\", AttachmentPiece);\n\nclass StringPiece extends Piece {\n  static fromJSON(pieceJSON) {\n    return new this(pieceJSON.string, pieceJSON.attributes);\n  }\n\n  constructor(string) {\n    super(...arguments);\n    this.string = normalizeNewlines(string);\n    this.length = this.string.length;\n  }\n\n  getValue() {\n    return this.string;\n  }\n\n  toString() {\n    return this.string.toString();\n  }\n\n  isBlockBreak() {\n    return this.toString() === \"\\n\" && this.getAttribute(\"blockBreak\") === true;\n  }\n\n  toJSON() {\n    const result = super.toJSON(...arguments);\n    result.string = this.string;\n    return result;\n  } // Splittable\n\n\n  canBeConsolidatedWith(piece) {\n    return piece && this.hasSameConstructorAs(piece) && this.hasSameAttributesAsPiece(piece);\n  }\n\n  consolidateWith(piece) {\n    return new this.constructor(this.toString() + piece.toString(), this.attributes);\n  }\n\n  splitAtOffset(offset) {\n    let left, right;\n\n    if (offset === 0) {\n      left = null;\n      right = this;\n    } else if (offset === this.length) {\n      left = this;\n      right = null;\n    } else {\n      left = new this.constructor(this.string.slice(0, offset), this.attributes);\n      right = new this.constructor(this.string.slice(offset), this.attributes);\n    }\n\n    return [left, right];\n  }\n\n  toConsole() {\n    let {\n      string\n    } = this;\n\n    if (string.length > 15) {\n      string = string.slice(0, 14) + \"…\";\n    }\n\n    return JSON.stringify(string.toString());\n  }\n\n}\nPiece.registerType(\"string\", StringPiece);\n\n/* eslint-disable\n    prefer-const,\n*/\nclass SplittableList extends TrixObject {\n  static box(objects) {\n    if (objects instanceof this) {\n      return objects;\n    } else {\n      return new this(objects);\n    }\n  }\n\n  constructor() {\n    let objects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n    this.objects = objects.slice(0);\n    this.length = this.objects.length;\n  }\n\n  indexOf(object) {\n    return this.objects.indexOf(object);\n  }\n\n  splice() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return new this.constructor(spliceArray(this.objects, ...args));\n  }\n\n  eachObject(callback) {\n    return this.objects.map((object, index) => callback(object, index));\n  }\n\n  insertObjectAtIndex(object, index) {\n    return this.splice(index, 0, object);\n  }\n\n  insertSplittableListAtIndex(splittableList, index) {\n    return this.splice(index, 0, ...splittableList.objects);\n  }\n\n  insertSplittableListAtPosition(splittableList, position) {\n    const [objects, index] = this.splitObjectAtPosition(position);\n    return new this.constructor(objects).insertSplittableListAtIndex(splittableList, index);\n  }\n\n  editObjectAtIndex(index, callback) {\n    return this.replaceObjectAtIndex(callback(this.objects[index]), index);\n  }\n\n  replaceObjectAtIndex(object, index) {\n    return this.splice(index, 1, object);\n  }\n\n  removeObjectAtIndex(index) {\n    return this.splice(index, 1);\n  }\n\n  getObjectAtIndex(index) {\n    return this.objects[index];\n  }\n\n  getSplittableListInRange(range) {\n    const [objects, leftIndex, rightIndex] = this.splitObjectsAtRange(range);\n    return new this.constructor(objects.slice(leftIndex, rightIndex + 1));\n  }\n\n  selectSplittableList(test) {\n    const objects = this.objects.filter(object => test(object));\n    return new this.constructor(objects);\n  }\n\n  removeObjectsInRange(range) {\n    const [objects, leftIndex, rightIndex] = this.splitObjectsAtRange(range);\n    return new this.constructor(objects).splice(leftIndex, rightIndex - leftIndex + 1);\n  }\n\n  transformObjectsInRange(range, transform) {\n    const [objects, leftIndex, rightIndex] = this.splitObjectsAtRange(range);\n    const transformedObjects = objects.map((object, index) => leftIndex <= index && index <= rightIndex ? transform(object) : object);\n    return new this.constructor(transformedObjects);\n  }\n\n  splitObjectsAtRange(range) {\n    let rightOuterIndex;\n    let [objects, leftInnerIndex, offset] = this.splitObjectAtPosition(startOfRange(range));\n    [objects, rightOuterIndex] = new this.constructor(objects).splitObjectAtPosition(endOfRange(range) + offset);\n    return [objects, leftInnerIndex, rightOuterIndex - 1];\n  }\n\n  getObjectAtPosition(position) {\n    const {\n      index\n    } = this.findIndexAndOffsetAtPosition(position);\n    return this.objects[index];\n  }\n\n  splitObjectAtPosition(position) {\n    let splitIndex, splitOffset;\n    const {\n      index,\n      offset\n    } = this.findIndexAndOffsetAtPosition(position);\n    const objects = this.objects.slice(0);\n\n    if (index != null) {\n      if (offset === 0) {\n        splitIndex = index;\n        splitOffset = 0;\n      } else {\n        const object = this.getObjectAtIndex(index);\n        const [leftObject, rightObject] = object.splitAtOffset(offset);\n        objects.splice(index, 1, leftObject, rightObject);\n        splitIndex = index + 1;\n        splitOffset = leftObject.getLength() - offset;\n      }\n    } else {\n      splitIndex = objects.length;\n      splitOffset = 0;\n    }\n\n    return [objects, splitIndex, splitOffset];\n  }\n\n  consolidate() {\n    const objects = [];\n    let pendingObject = this.objects[0];\n    this.objects.slice(1).forEach(object => {\n      var _pendingObject$canBeC, _pendingObject;\n\n      if ((_pendingObject$canBeC = (_pendingObject = pendingObject).canBeConsolidatedWith) !== null && _pendingObject$canBeC !== void 0 && _pendingObject$canBeC.call(_pendingObject, object)) {\n        pendingObject = pendingObject.consolidateWith(object);\n      } else {\n        objects.push(pendingObject);\n        pendingObject = object;\n      }\n    });\n\n    if (pendingObject) {\n      objects.push(pendingObject);\n    }\n\n    return new this.constructor(objects);\n  }\n\n  consolidateFromIndexToIndex(startIndex, endIndex) {\n    const objects = this.objects.slice(0);\n    const objectsInRange = objects.slice(startIndex, endIndex + 1);\n    const consolidatedInRange = new this.constructor(objectsInRange).consolidate().toArray();\n    return this.splice(startIndex, objectsInRange.length, ...consolidatedInRange);\n  }\n\n  findIndexAndOffsetAtPosition(position) {\n    let index;\n    let currentPosition = 0;\n\n    for (index = 0; index < this.objects.length; index++) {\n      const object = this.objects[index];\n      const nextPosition = currentPosition + object.getLength();\n\n      if (currentPosition <= position && position < nextPosition) {\n        return {\n          index,\n          offset: position - currentPosition\n        };\n      }\n\n      currentPosition = nextPosition;\n    }\n\n    return {\n      index: null,\n      offset: null\n    };\n  }\n\n  findPositionAtIndexAndOffset(index, offset) {\n    let position = 0;\n\n    for (let currentIndex = 0; currentIndex < this.objects.length; currentIndex++) {\n      const object = this.objects[currentIndex];\n\n      if (currentIndex < index) {\n        position += object.getLength();\n      } else if (currentIndex === index) {\n        position += offset;\n        break;\n      }\n    }\n\n    return position;\n  }\n\n  getEndPosition() {\n    if (this.endPosition == null) {\n      this.endPosition = 0;\n      this.objects.forEach(object => this.endPosition += object.getLength());\n    }\n\n    return this.endPosition;\n  }\n\n  toString() {\n    return this.objects.join(\"\");\n  }\n\n  toArray() {\n    return this.objects.slice(0);\n  }\n\n  toJSON() {\n    return this.toArray();\n  }\n\n  isEqualTo(splittableList) {\n    return super.isEqualTo(...arguments) || objectArraysAreEqual(this.objects, splittableList === null || splittableList === void 0 ? void 0 : splittableList.objects);\n  }\n\n  contentsForInspection() {\n    return {\n      objects: \"[\".concat(this.objects.map(object => object.inspect()).join(\", \"), \"]\")\n    };\n  }\n\n}\n\nconst objectArraysAreEqual = function (left) {\n  let right = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (left.length !== right.length) {\n    return false;\n  }\n\n  let result = true;\n\n  for (let index = 0; index < left.length; index++) {\n    const object = left[index];\n\n    if (result && !object.isEqualTo(right[index])) {\n      result = false;\n    }\n  }\n\n  return result;\n};\n\nconst startOfRange = range => range[0];\n\nconst endOfRange = range => range[1];\n\nclass Text extends TrixObject {\n  static textForAttachmentWithAttributes(attachment, attributes) {\n    const piece = new AttachmentPiece(attachment, attributes);\n    return new this([piece]);\n  }\n\n  static textForStringWithAttributes(string, attributes) {\n    const piece = new StringPiece(string, attributes);\n    return new this([piece]);\n  }\n\n  static fromJSON(textJSON) {\n    const pieces = Array.from(textJSON).map(pieceJSON => Piece.fromJSON(pieceJSON));\n    return new this(pieces);\n  }\n\n  constructor() {\n    let pieces = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n    const notEmpty = pieces.filter(piece => !piece.isEmpty());\n    this.pieceList = new SplittableList(notEmpty);\n  }\n\n  copy() {\n    return this.copyWithPieceList(this.pieceList);\n  }\n\n  copyWithPieceList(pieceList) {\n    return new this.constructor(pieceList.consolidate().toArray());\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const pieces = this.getPieces().map(piece => objectMap.find(piece) || piece);\n    return new this.constructor(pieces);\n  }\n\n  appendText(text) {\n    return this.insertTextAtPosition(text, this.getLength());\n  }\n\n  insertTextAtPosition(text, position) {\n    return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(text.pieceList, position));\n  }\n\n  removeTextAtRange(range) {\n    return this.copyWithPieceList(this.pieceList.removeObjectsInRange(range));\n  }\n\n  replaceTextAtRange(text, range) {\n    return this.removeTextAtRange(range).insertTextAtPosition(text, range[0]);\n  }\n\n  moveTextFromRangeToPosition(range, position) {\n    if (range[0] <= position && position <= range[1]) return;\n    const text = this.getTextAtRange(range);\n    const length = text.getLength();\n\n    if (range[0] < position) {\n      position -= length;\n    }\n\n    return this.removeTextAtRange(range).insertTextAtPosition(text, position);\n  }\n\n  addAttributeAtRange(attribute, value, range) {\n    const attributes = {};\n    attributes[attribute] = value;\n    return this.addAttributesAtRange(attributes, range);\n  }\n\n  addAttributesAtRange(attributes, range) {\n    return this.copyWithPieceList(this.pieceList.transformObjectsInRange(range, piece => piece.copyWithAdditionalAttributes(attributes)));\n  }\n\n  removeAttributeAtRange(attribute, range) {\n    return this.copyWithPieceList(this.pieceList.transformObjectsInRange(range, piece => piece.copyWithoutAttribute(attribute)));\n  }\n\n  setAttributesAtRange(attributes, range) {\n    return this.copyWithPieceList(this.pieceList.transformObjectsInRange(range, piece => piece.copyWithAttributes(attributes)));\n  }\n\n  getAttributesAtPosition(position) {\n    var _this$pieceList$getOb;\n\n    return ((_this$pieceList$getOb = this.pieceList.getObjectAtPosition(position)) === null || _this$pieceList$getOb === void 0 ? void 0 : _this$pieceList$getOb.getAttributes()) || {};\n  }\n\n  getCommonAttributes() {\n    const objects = Array.from(this.pieceList.toArray()).map(piece => piece.getAttributes());\n    return Hash.fromCommonAttributesOfObjects(objects).toObject();\n  }\n\n  getCommonAttributesAtRange(range) {\n    return this.getTextAtRange(range).getCommonAttributes() || {};\n  }\n\n  getExpandedRangeForAttributeAtOffset(attributeName, offset) {\n    let right;\n    let left = right = offset;\n    const length = this.getLength();\n\n    while (left > 0 && this.getCommonAttributesAtRange([left - 1, right])[attributeName]) {\n      left--;\n    }\n\n    while (right < length && this.getCommonAttributesAtRange([offset, right + 1])[attributeName]) {\n      right++;\n    }\n\n    return [left, right];\n  }\n\n  getTextAtRange(range) {\n    return this.copyWithPieceList(this.pieceList.getSplittableListInRange(range));\n  }\n\n  getStringAtRange(range) {\n    return this.pieceList.getSplittableListInRange(range).toString();\n  }\n\n  getStringAtPosition(position) {\n    return this.getStringAtRange([position, position + 1]);\n  }\n\n  startsWithString(string) {\n    return this.getStringAtRange([0, string.length]) === string;\n  }\n\n  endsWithString(string) {\n    const length = this.getLength();\n    return this.getStringAtRange([length - string.length, length]) === string;\n  }\n\n  getAttachmentPieces() {\n    return this.pieceList.toArray().filter(piece => !!piece.attachment);\n  }\n\n  getAttachments() {\n    return this.getAttachmentPieces().map(piece => piece.attachment);\n  }\n\n  getAttachmentAndPositionById(attachmentId) {\n    let position = 0;\n\n    for (const piece of this.pieceList.toArray()) {\n      var _piece$attachment;\n\n      if (((_piece$attachment = piece.attachment) === null || _piece$attachment === void 0 ? void 0 : _piece$attachment.id) === attachmentId) {\n        return {\n          attachment: piece.attachment,\n          position\n        };\n      }\n\n      position += piece.length;\n    }\n\n    return {\n      attachment: null,\n      position: null\n    };\n  }\n\n  getAttachmentById(attachmentId) {\n    const {\n      attachment\n    } = this.getAttachmentAndPositionById(attachmentId);\n    return attachment;\n  }\n\n  getRangeOfAttachment(attachment) {\n    const attachmentAndPosition = this.getAttachmentAndPositionById(attachment.id);\n    const position = attachmentAndPosition.position;\n    attachment = attachmentAndPosition.attachment;\n\n    if (attachment) {\n      return [position, position + 1];\n    }\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    const range = this.getRangeOfAttachment(attachment);\n\n    if (range) {\n      return this.addAttributesAtRange(attributes, range);\n    } else {\n      return this;\n    }\n  }\n\n  getLength() {\n    return this.pieceList.getEndPosition();\n  }\n\n  isEmpty() {\n    return this.getLength() === 0;\n  }\n\n  isEqualTo(text) {\n    var _text$pieceList;\n\n    return super.isEqualTo(text) || (text === null || text === void 0 ? void 0 : (_text$pieceList = text.pieceList) === null || _text$pieceList === void 0 ? void 0 : _text$pieceList.isEqualTo(this.pieceList));\n  }\n\n  isBlockBreak() {\n    return this.getLength() === 1 && this.pieceList.getObjectAtIndex(0).isBlockBreak();\n  }\n\n  eachPiece(callback) {\n    return this.pieceList.eachObject(callback);\n  }\n\n  getPieces() {\n    return this.pieceList.toArray();\n  }\n\n  getPieceAtPosition(position) {\n    return this.pieceList.getObjectAtPosition(position);\n  }\n\n  contentsForInspection() {\n    return {\n      pieceList: this.pieceList.inspect()\n    };\n  }\n\n  toSerializableText() {\n    const pieceList = this.pieceList.selectSplittableList(piece => piece.isSerializable());\n    return this.copyWithPieceList(pieceList);\n  }\n\n  toString() {\n    return this.pieceList.toString();\n  }\n\n  toJSON() {\n    return this.pieceList.toJSON();\n  }\n\n  toConsole() {\n    return JSON.stringify(this.pieceList.toArray().map(piece => JSON.parse(piece.toConsole())));\n  } // BIDI\n\n\n  getDirection() {\n    return getDirection(this.toString());\n  }\n\n  isRTL() {\n    return this.getDirection() === \"rtl\";\n  }\n\n}\n\nclass Block extends TrixObject {\n  static fromJSON(blockJSON) {\n    const text = Text.fromJSON(blockJSON.text);\n    return new this(text, blockJSON.attributes);\n  }\n\n  constructor(text, attributes) {\n    super(...arguments);\n    this.text = applyBlockBreakToText(text || new Text());\n    this.attributes = attributes || [];\n  }\n\n  isEmpty() {\n    return this.text.isBlockBreak();\n  }\n\n  isEqualTo(block) {\n    if (super.isEqualTo(block)) return true;\n    return this.text.isEqualTo(block === null || block === void 0 ? void 0 : block.text) && arraysAreEqual(this.attributes, block === null || block === void 0 ? void 0 : block.attributes);\n  }\n\n  copyWithText(text) {\n    return new Block(text, this.attributes);\n  }\n\n  copyWithoutText() {\n    return this.copyWithText(null);\n  }\n\n  copyWithAttributes(attributes) {\n    return new Block(this.text, attributes);\n  }\n\n  copyWithoutAttributes() {\n    return this.copyWithAttributes(null);\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const mappedText = objectMap.find(this.text);\n\n    if (mappedText) {\n      return this.copyWithText(mappedText);\n    } else {\n      return this.copyWithText(this.text.copyUsingObjectMap(objectMap));\n    }\n  }\n\n  addAttribute(attribute) {\n    const attributes = this.attributes.concat(expandAttribute(attribute));\n    return this.copyWithAttributes(attributes);\n  }\n\n  removeAttribute(attribute) {\n    const {\n      listAttribute\n    } = getBlockConfig(attribute);\n    const attributes = removeLastValue(removeLastValue(this.attributes, attribute), listAttribute);\n    return this.copyWithAttributes(attributes);\n  }\n\n  removeLastAttribute() {\n    return this.removeAttribute(this.getLastAttribute());\n  }\n\n  getLastAttribute() {\n    return getLastElement(this.attributes);\n  }\n\n  getAttributes() {\n    return this.attributes.slice(0);\n  }\n\n  getAttributeLevel() {\n    return this.attributes.length;\n  }\n\n  getAttributeAtLevel(level) {\n    return this.attributes[level - 1];\n  }\n\n  hasAttribute(attributeName) {\n    return this.attributes.includes(attributeName);\n  }\n\n  hasAttributes() {\n    return this.getAttributeLevel() > 0;\n  }\n\n  getLastNestableAttribute() {\n    return getLastElement(this.getNestableAttributes());\n  }\n\n  getNestableAttributes() {\n    return this.attributes.filter(attribute => getBlockConfig(attribute).nestable);\n  }\n\n  getNestingLevel() {\n    return this.getNestableAttributes().length;\n  }\n\n  decreaseNestingLevel() {\n    const attribute = this.getLastNestableAttribute();\n\n    if (attribute) {\n      return this.removeAttribute(attribute);\n    } else {\n      return this;\n    }\n  }\n\n  increaseNestingLevel() {\n    const attribute = this.getLastNestableAttribute();\n\n    if (attribute) {\n      const index = this.attributes.lastIndexOf(attribute);\n      const attributes = spliceArray(this.attributes, index + 1, 0, ...expandAttribute(attribute));\n      return this.copyWithAttributes(attributes);\n    } else {\n      return this;\n    }\n  }\n\n  getListItemAttributes() {\n    return this.attributes.filter(attribute => getBlockConfig(attribute).listAttribute);\n  }\n\n  isListItem() {\n    var _getBlockConfig;\n\n    return (_getBlockConfig = getBlockConfig(this.getLastAttribute())) === null || _getBlockConfig === void 0 ? void 0 : _getBlockConfig.listAttribute;\n  }\n\n  isTerminalBlock() {\n    var _getBlockConfig2;\n\n    return (_getBlockConfig2 = getBlockConfig(this.getLastAttribute())) === null || _getBlockConfig2 === void 0 ? void 0 : _getBlockConfig2.terminal;\n  }\n\n  breaksOnReturn() {\n    var _getBlockConfig3;\n\n    return (_getBlockConfig3 = getBlockConfig(this.getLastAttribute())) === null || _getBlockConfig3 === void 0 ? void 0 : _getBlockConfig3.breakOnReturn;\n  }\n\n  findLineBreakInDirectionFromPosition(direction, position) {\n    const string = this.toString();\n    let result;\n\n    switch (direction) {\n      case \"forward\":\n        result = string.indexOf(\"\\n\", position);\n        break;\n\n      case \"backward\":\n        result = string.slice(0, position).lastIndexOf(\"\\n\");\n    }\n\n    if (result !== -1) {\n      return result;\n    }\n  }\n\n  contentsForInspection() {\n    return {\n      text: this.text.inspect(),\n      attributes: this.attributes\n    };\n  }\n\n  toString() {\n    return this.text.toString();\n  }\n\n  toJSON() {\n    return {\n      text: this.text,\n      attributes: this.attributes\n    };\n  } // BIDI\n\n\n  getDirection() {\n    return this.text.getDirection();\n  }\n\n  isRTL() {\n    return this.text.isRTL();\n  } // Splittable\n\n\n  getLength() {\n    return this.text.getLength();\n  }\n\n  canBeConsolidatedWith(block) {\n    return !this.hasAttributes() && !block.hasAttributes() && this.getDirection() === block.getDirection();\n  }\n\n  consolidateWith(block) {\n    const newlineText = Text.textForStringWithAttributes(\"\\n\");\n    const text = this.getTextWithoutBlockBreak().appendText(newlineText);\n    return this.copyWithText(text.appendText(block.text));\n  }\n\n  splitAtOffset(offset) {\n    let left, right;\n\n    if (offset === 0) {\n      left = null;\n      right = this;\n    } else if (offset === this.getLength()) {\n      left = this;\n      right = null;\n    } else {\n      left = this.copyWithText(this.text.getTextAtRange([0, offset]));\n      right = this.copyWithText(this.text.getTextAtRange([offset, this.getLength()]));\n    }\n\n    return [left, right];\n  }\n\n  getBlockBreakPosition() {\n    return this.text.getLength() - 1;\n  }\n\n  getTextWithoutBlockBreak() {\n    if (textEndsInBlockBreak(this.text)) {\n      return this.text.getTextAtRange([0, this.getBlockBreakPosition()]);\n    } else {\n      return this.text.copy();\n    }\n  } // Grouping\n\n\n  canBeGrouped(depth) {\n    return this.attributes[depth];\n  }\n\n  canBeGroupedWith(otherBlock, depth) {\n    const otherAttributes = otherBlock.getAttributes();\n    const otherAttribute = otherAttributes[depth];\n    const attribute = this.attributes[depth];\n    return attribute === otherAttribute && !(getBlockConfig(attribute).group === false && !getListAttributeNames().includes(otherAttributes[depth + 1])) && (this.getDirection() === otherBlock.getDirection() || otherBlock.isEmpty());\n  }\n\n} // Block breaks\n\nconst applyBlockBreakToText = function (text) {\n  text = unmarkExistingInnerBlockBreaksInText(text);\n  text = addBlockBreakToText(text);\n  return text;\n};\n\nconst unmarkExistingInnerBlockBreaksInText = function (text) {\n  let modified = false;\n  const pieces = text.getPieces();\n  let innerPieces = pieces.slice(0, pieces.length - 1);\n  const lastPiece = pieces[pieces.length - 1];\n  if (!lastPiece) return text;\n  innerPieces = innerPieces.map(piece => {\n    if (piece.isBlockBreak()) {\n      modified = true;\n      return unmarkBlockBreakPiece(piece);\n    } else {\n      return piece;\n    }\n  });\n\n  if (modified) {\n    return new Text([...innerPieces, lastPiece]);\n  } else {\n    return text;\n  }\n};\n\nconst blockBreakText = Text.textForStringWithAttributes(\"\\n\", {\n  blockBreak: true\n});\n\nconst addBlockBreakToText = function (text) {\n  if (textEndsInBlockBreak(text)) {\n    return text;\n  } else {\n    return text.appendText(blockBreakText);\n  }\n};\n\nconst textEndsInBlockBreak = function (text) {\n  const length = text.getLength();\n\n  if (length === 0) {\n    return false;\n  }\n\n  const endText = text.getTextAtRange([length - 1, length]);\n  return endText.isBlockBreak();\n};\n\nconst unmarkBlockBreakPiece = piece => piece.copyWithoutAttribute(\"blockBreak\"); // Attributes\n\n\nconst expandAttribute = function (attribute) {\n  const {\n    listAttribute\n  } = getBlockConfig(attribute);\n\n  if (listAttribute) {\n    return [listAttribute, attribute];\n  } else {\n    return [attribute];\n  }\n}; // Array helpers\n\n\nconst getLastElement = array => array.slice(-1)[0];\n\nconst removeLastValue = function (array, value) {\n  const index = array.lastIndexOf(value);\n\n  if (index === -1) {\n    return array;\n  } else {\n    return spliceArray(array, index, 1);\n  }\n};\n\nclass ObjectMap extends BasicObject {\n  constructor() {\n    let objects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n    this.objects = {};\n    Array.from(objects).forEach(object => {\n      const hash = JSON.stringify(object);\n\n      if (this.objects[hash] == null) {\n        this.objects[hash] = object;\n      }\n    });\n  }\n\n  find(object) {\n    const hash = JSON.stringify(object);\n    return this.objects[hash];\n  }\n\n}\n\nclass Document extends TrixObject {\n  static fromJSON(documentJSON) {\n    const blocks = Array.from(documentJSON).map(blockJSON => Block.fromJSON(blockJSON));\n    return new this(blocks);\n  }\n\n  static fromString(string, textAttributes) {\n    const text = Text.textForStringWithAttributes(string, textAttributes);\n    return new this([new Block(text)]);\n  }\n\n  constructor() {\n    let blocks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(...arguments);\n\n    if (blocks.length === 0) {\n      blocks = [new Block()];\n    }\n\n    this.blockList = SplittableList.box(blocks);\n  }\n\n  isEmpty() {\n    const block = this.getBlockAtIndex(0);\n    return this.blockList.length === 1 && block.isEmpty() && !block.hasAttributes();\n  }\n\n  copy() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const blocks = options.consolidateBlocks ? this.blockList.consolidate().toArray() : this.blockList.toArray();\n    return new this.constructor(blocks);\n  }\n\n  copyUsingObjectsFromDocument(sourceDocument) {\n    const objectMap = new ObjectMap(sourceDocument.getObjects());\n    return this.copyUsingObjectMap(objectMap);\n  }\n\n  copyUsingObjectMap(objectMap) {\n    const blocks = this.getBlocks().map(block => {\n      const mappedBlock = objectMap.find(block);\n      return mappedBlock || block.copyUsingObjectMap(objectMap);\n    });\n    return new this.constructor(blocks);\n  }\n\n  copyWithBaseBlockAttributes() {\n    let blockAttributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    const blocks = this.getBlocks().map(block => {\n      const attributes = blockAttributes.concat(block.getAttributes());\n      return block.copyWithAttributes(attributes);\n    });\n    return new this.constructor(blocks);\n  }\n\n  replaceBlock(oldBlock, newBlock) {\n    const index = this.blockList.indexOf(oldBlock);\n\n    if (index === -1) {\n      return this;\n    }\n\n    return new this.constructor(this.blockList.replaceObjectAtIndex(newBlock, index));\n  }\n\n  insertDocumentAtRange(document, range) {\n    const {\n      blockList\n    } = document;\n    range = normalizeRange(range);\n    let [position] = range;\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    let result = this;\n    const block = this.getBlockAtPosition(position);\n\n    if (rangeIsCollapsed(range) && block.isEmpty() && !block.hasAttributes()) {\n      result = new this.constructor(result.blockList.removeObjectAtIndex(index));\n    } else if (block.getBlockBreakPosition() === offset) {\n      position++;\n    }\n\n    result = result.removeTextAtRange(range);\n    return new this.constructor(result.blockList.insertSplittableListAtPosition(blockList, position));\n  }\n\n  mergeDocumentAtRange(document, range) {\n    let formattedDocument, result;\n    range = normalizeRange(range);\n    const [startPosition] = range;\n    const startLocation = this.locationFromPosition(startPosition);\n    const blockAttributes = this.getBlockAtIndex(startLocation.index).getAttributes();\n    const baseBlockAttributes = document.getBaseBlockAttributes();\n    const trailingBlockAttributes = blockAttributes.slice(-baseBlockAttributes.length);\n\n    if (arraysAreEqual(baseBlockAttributes, trailingBlockAttributes)) {\n      const leadingBlockAttributes = blockAttributes.slice(0, -baseBlockAttributes.length);\n      formattedDocument = document.copyWithBaseBlockAttributes(leadingBlockAttributes);\n    } else {\n      formattedDocument = document.copy({\n        consolidateBlocks: true\n      }).copyWithBaseBlockAttributes(blockAttributes);\n    }\n\n    const blockCount = formattedDocument.getBlockCount();\n    const firstBlock = formattedDocument.getBlockAtIndex(0);\n\n    if (arraysAreEqual(blockAttributes, firstBlock.getAttributes())) {\n      const firstText = firstBlock.getTextWithoutBlockBreak();\n      result = this.insertTextAtRange(firstText, range);\n\n      if (blockCount > 1) {\n        formattedDocument = new this.constructor(formattedDocument.getBlocks().slice(1));\n        const position = startPosition + firstText.getLength();\n        result = result.insertDocumentAtRange(formattedDocument, position);\n      }\n    } else {\n      result = this.insertDocumentAtRange(formattedDocument, range);\n    }\n\n    return result;\n  }\n\n  insertTextAtRange(text, range) {\n    range = normalizeRange(range);\n    const [startPosition] = range;\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(startPosition);\n    const document = this.removeTextAtRange(range);\n    return new this.constructor(document.blockList.editObjectAtIndex(index, block => block.copyWithText(block.text.insertTextAtPosition(text, offset))));\n  }\n\n  removeTextAtRange(range) {\n    let blocks;\n    range = normalizeRange(range);\n    const [leftPosition, rightPosition] = range;\n\n    if (rangeIsCollapsed(range)) {\n      return this;\n    }\n\n    const [leftLocation, rightLocation] = Array.from(this.locationRangeFromRange(range));\n    const leftIndex = leftLocation.index;\n    const leftOffset = leftLocation.offset;\n    const leftBlock = this.getBlockAtIndex(leftIndex);\n    const rightIndex = rightLocation.index;\n    const rightOffset = rightLocation.offset;\n    const rightBlock = this.getBlockAtIndex(rightIndex);\n    const removeRightNewline = rightPosition - leftPosition === 1 && leftBlock.getBlockBreakPosition() === leftOffset && rightBlock.getBlockBreakPosition() !== rightOffset && rightBlock.text.getStringAtPosition(rightOffset) === \"\\n\";\n\n    if (removeRightNewline) {\n      blocks = this.blockList.editObjectAtIndex(rightIndex, block => block.copyWithText(block.text.removeTextAtRange([rightOffset, rightOffset + 1])));\n    } else {\n      let block;\n      const leftText = leftBlock.text.getTextAtRange([0, leftOffset]);\n      const rightText = rightBlock.text.getTextAtRange([rightOffset, rightBlock.getLength()]);\n      const text = leftText.appendText(rightText);\n      const removingLeftBlock = leftIndex !== rightIndex && leftOffset === 0;\n      const useRightBlock = removingLeftBlock && leftBlock.getAttributeLevel() >= rightBlock.getAttributeLevel();\n\n      if (useRightBlock) {\n        block = rightBlock.copyWithText(text);\n      } else {\n        block = leftBlock.copyWithText(text);\n      }\n\n      const affectedBlockCount = rightIndex + 1 - leftIndex;\n      blocks = this.blockList.splice(leftIndex, affectedBlockCount, block);\n    }\n\n    return new this.constructor(blocks);\n  }\n\n  moveTextFromRangeToPosition(range, position) {\n    let text;\n    range = normalizeRange(range);\n    const [startPosition, endPosition] = range;\n\n    if (startPosition <= position && position <= endPosition) {\n      return this;\n    }\n\n    let document = this.getDocumentAtRange(range);\n    let result = this.removeTextAtRange(range);\n    const movingRightward = startPosition < position;\n\n    if (movingRightward) {\n      position -= document.getLength();\n    }\n\n    const [firstBlock, ...blocks] = document.getBlocks();\n\n    if (blocks.length === 0) {\n      text = firstBlock.getTextWithoutBlockBreak();\n\n      if (movingRightward) {\n        position += 1;\n      }\n    } else {\n      text = firstBlock.text;\n    }\n\n    result = result.insertTextAtRange(text, position);\n\n    if (blocks.length === 0) {\n      return result;\n    }\n\n    document = new this.constructor(blocks);\n    position += text.getLength();\n    return result.insertDocumentAtRange(document, position);\n  }\n\n  addAttributeAtRange(attribute, value, range) {\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, (block, textRange, index) => blockList = blockList.editObjectAtIndex(index, function () {\n      if (getBlockConfig(attribute)) {\n        return block.addAttribute(attribute, value);\n      } else {\n        if (textRange[0] === textRange[1]) {\n          return block;\n        } else {\n          return block.copyWithText(block.text.addAttributeAtRange(attribute, value, textRange));\n        }\n      }\n    }));\n    return new this.constructor(blockList);\n  }\n\n  addAttribute(attribute, value) {\n    let {\n      blockList\n    } = this;\n    this.eachBlock((block, index) => blockList = blockList.editObjectAtIndex(index, () => block.addAttribute(attribute, value)));\n    return new this.constructor(blockList);\n  }\n\n  removeAttributeAtRange(attribute, range) {\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, function (block, textRange, index) {\n      if (getBlockConfig(attribute)) {\n        blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(attribute));\n      } else if (textRange[0] !== textRange[1]) {\n        blockList = blockList.editObjectAtIndex(index, () => block.copyWithText(block.text.removeAttributeAtRange(attribute, textRange)));\n      }\n    });\n    return new this.constructor(blockList);\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    const range = this.getRangeOfAttachment(attachment);\n    const [startPosition] = Array.from(range);\n    const {\n      index\n    } = this.locationFromPosition(startPosition);\n    const text = this.getTextAtIndex(index);\n    return new this.constructor(this.blockList.editObjectAtIndex(index, block => block.copyWithText(text.updateAttributesForAttachment(attributes, attachment))));\n  }\n\n  removeAttributeForAttachment(attribute, attachment) {\n    const range = this.getRangeOfAttachment(attachment);\n    return this.removeAttributeAtRange(attribute, range);\n  }\n\n  insertBlockBreakAtRange(range) {\n    let blocks;\n    range = normalizeRange(range);\n    const [startPosition] = range;\n    const {\n      offset\n    } = this.locationFromPosition(startPosition);\n    const document = this.removeTextAtRange(range);\n\n    if (offset === 0) {\n      blocks = [new Block()];\n    }\n\n    return new this.constructor(document.blockList.insertSplittableListAtPosition(new SplittableList(blocks), startPosition));\n  }\n\n  applyBlockAttributeAtRange(attributeName, value, range) {\n    const expanded = this.expandRangeToLineBreaksAndSplitBlocks(range);\n    let document = expanded.document;\n    range = expanded.range;\n    const blockConfig = getBlockConfig(attributeName);\n\n    if (blockConfig.listAttribute) {\n      document = document.removeLastListAttributeAtRange(range, {\n        exceptAttributeName: attributeName\n      });\n      const converted = document.convertLineBreaksToBlockBreaksInRange(range);\n      document = converted.document;\n      range = converted.range;\n    } else if (blockConfig.exclusive) {\n      document = document.removeBlockAttributesAtRange(range);\n    } else if (blockConfig.terminal) {\n      document = document.removeLastTerminalAttributeAtRange(range);\n    } else {\n      document = document.consolidateBlocksAtRange(range);\n    }\n\n    return document.addAttributeAtRange(attributeName, value, range);\n  }\n\n  removeLastListAttributeAtRange(range) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, function (block, textRange, index) {\n      const lastAttributeName = block.getLastAttribute();\n\n      if (!lastAttributeName) {\n        return;\n      }\n\n      if (!getBlockConfig(lastAttributeName).listAttribute) {\n        return;\n      }\n\n      if (lastAttributeName === options.exceptAttributeName) {\n        return;\n      }\n\n      blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(lastAttributeName));\n    });\n    return new this.constructor(blockList);\n  }\n\n  removeLastTerminalAttributeAtRange(range) {\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, function (block, textRange, index) {\n      const lastAttributeName = block.getLastAttribute();\n\n      if (!lastAttributeName) {\n        return;\n      }\n\n      if (!getBlockConfig(lastAttributeName).terminal) {\n        return;\n      }\n\n      blockList = blockList.editObjectAtIndex(index, () => block.removeAttribute(lastAttributeName));\n    });\n    return new this.constructor(blockList);\n  }\n\n  removeBlockAttributesAtRange(range) {\n    let {\n      blockList\n    } = this;\n    this.eachBlockAtRange(range, function (block, textRange, index) {\n      if (block.hasAttributes()) {\n        blockList = blockList.editObjectAtIndex(index, () => block.copyWithoutAttributes());\n      }\n    });\n    return new this.constructor(blockList);\n  }\n\n  expandRangeToLineBreaksAndSplitBlocks(range) {\n    let position;\n    range = normalizeRange(range);\n    let [startPosition, endPosition] = range;\n    const startLocation = this.locationFromPosition(startPosition);\n    const endLocation = this.locationFromPosition(endPosition);\n    let document = this;\n    const startBlock = document.getBlockAtIndex(startLocation.index);\n    startLocation.offset = startBlock.findLineBreakInDirectionFromPosition(\"backward\", startLocation.offset);\n\n    if (startLocation.offset != null) {\n      position = document.positionFromLocation(startLocation);\n      document = document.insertBlockBreakAtRange([position, position + 1]);\n      endLocation.index += 1;\n      endLocation.offset -= document.getBlockAtIndex(startLocation.index).getLength();\n      startLocation.index += 1;\n    }\n\n    startLocation.offset = 0;\n\n    if (endLocation.offset === 0 && endLocation.index > startLocation.index) {\n      endLocation.index -= 1;\n      endLocation.offset = document.getBlockAtIndex(endLocation.index).getBlockBreakPosition();\n    } else {\n      const endBlock = document.getBlockAtIndex(endLocation.index);\n\n      if (endBlock.text.getStringAtRange([endLocation.offset - 1, endLocation.offset]) === \"\\n\") {\n        endLocation.offset -= 1;\n      } else {\n        endLocation.offset = endBlock.findLineBreakInDirectionFromPosition(\"forward\", endLocation.offset);\n      }\n\n      if (endLocation.offset !== endBlock.getBlockBreakPosition()) {\n        position = document.positionFromLocation(endLocation);\n        document = document.insertBlockBreakAtRange([position, position + 1]);\n      }\n    }\n\n    startPosition = document.positionFromLocation(startLocation);\n    endPosition = document.positionFromLocation(endLocation);\n    range = normalizeRange([startPosition, endPosition]);\n    return {\n      document,\n      range\n    };\n  }\n\n  convertLineBreaksToBlockBreaksInRange(range) {\n    range = normalizeRange(range);\n    let [position] = range;\n    const string = this.getStringAtRange(range).slice(0, -1);\n    let document = this;\n    string.replace(/.*?\\n/g, function (match) {\n      position += match.length;\n      document = document.insertBlockBreakAtRange([position - 1, position]);\n    });\n    return {\n      document,\n      range\n    };\n  }\n\n  consolidateBlocksAtRange(range) {\n    range = normalizeRange(range);\n    const [startPosition, endPosition] = range;\n    const startIndex = this.locationFromPosition(startPosition).index;\n    const endIndex = this.locationFromPosition(endPosition).index;\n    return new this.constructor(this.blockList.consolidateFromIndexToIndex(startIndex, endIndex));\n  }\n\n  getDocumentAtRange(range) {\n    range = normalizeRange(range);\n    const blocks = this.blockList.getSplittableListInRange(range).toArray();\n    return new this.constructor(blocks);\n  }\n\n  getStringAtRange(range) {\n    let endIndex;\n    const array = range = normalizeRange(range),\n          endPosition = array[array.length - 1];\n\n    if (endPosition !== this.getLength()) {\n      endIndex = -1;\n    }\n\n    return this.getDocumentAtRange(range).toString().slice(0, endIndex);\n  }\n\n  getBlockAtIndex(index) {\n    return this.blockList.getObjectAtIndex(index);\n  }\n\n  getBlockAtPosition(position) {\n    const {\n      index\n    } = this.locationFromPosition(position);\n    return this.getBlockAtIndex(index);\n  }\n\n  getTextAtIndex(index) {\n    var _this$getBlockAtIndex;\n\n    return (_this$getBlockAtIndex = this.getBlockAtIndex(index)) === null || _this$getBlockAtIndex === void 0 ? void 0 : _this$getBlockAtIndex.text;\n  }\n\n  getTextAtPosition(position) {\n    const {\n      index\n    } = this.locationFromPosition(position);\n    return this.getTextAtIndex(index);\n  }\n\n  getPieceAtPosition(position) {\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    return this.getTextAtIndex(index).getPieceAtPosition(offset);\n  }\n\n  getCharacterAtPosition(position) {\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    return this.getTextAtIndex(index).getStringAtRange([offset, offset + 1]);\n  }\n\n  getLength() {\n    return this.blockList.getEndPosition();\n  }\n\n  getBlocks() {\n    return this.blockList.toArray();\n  }\n\n  getBlockCount() {\n    return this.blockList.length;\n  }\n\n  getEditCount() {\n    return this.editCount;\n  }\n\n  eachBlock(callback) {\n    return this.blockList.eachObject(callback);\n  }\n\n  eachBlockAtRange(range, callback) {\n    let block, textRange;\n    range = normalizeRange(range);\n    const [startPosition, endPosition] = range;\n    const startLocation = this.locationFromPosition(startPosition);\n    const endLocation = this.locationFromPosition(endPosition);\n\n    if (startLocation.index === endLocation.index) {\n      block = this.getBlockAtIndex(startLocation.index);\n      textRange = [startLocation.offset, endLocation.offset];\n      return callback(block, textRange, startLocation.index);\n    } else {\n      for (let index = startLocation.index; index <= endLocation.index; index++) {\n        block = this.getBlockAtIndex(index);\n\n        if (block) {\n          switch (index) {\n            case startLocation.index:\n              textRange = [startLocation.offset, block.text.getLength()];\n              break;\n\n            case endLocation.index:\n              textRange = [0, endLocation.offset];\n              break;\n\n            default:\n              textRange = [0, block.text.getLength()];\n          }\n\n          callback(block, textRange, index);\n        }\n      }\n    }\n  }\n\n  getCommonAttributesAtRange(range) {\n    range = normalizeRange(range);\n    const [startPosition] = range;\n\n    if (rangeIsCollapsed(range)) {\n      return this.getCommonAttributesAtPosition(startPosition);\n    } else {\n      const textAttributes = [];\n      const blockAttributes = [];\n      this.eachBlockAtRange(range, function (block, textRange) {\n        if (textRange[0] !== textRange[1]) {\n          textAttributes.push(block.text.getCommonAttributesAtRange(textRange));\n          return blockAttributes.push(attributesForBlock(block));\n        }\n      });\n      return Hash.fromCommonAttributesOfObjects(textAttributes).merge(Hash.fromCommonAttributesOfObjects(blockAttributes)).toObject();\n    }\n  }\n\n  getCommonAttributesAtPosition(position) {\n    let key, value;\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    const block = this.getBlockAtIndex(index);\n\n    if (!block) {\n      return {};\n    }\n\n    const commonAttributes = attributesForBlock(block);\n    const attributes = block.text.getAttributesAtPosition(offset);\n    const attributesLeft = block.text.getAttributesAtPosition(offset - 1);\n    const inheritableAttributes = Object.keys(config.textAttributes).filter(key => {\n      return config.textAttributes[key].inheritable;\n    });\n\n    for (key in attributesLeft) {\n      value = attributesLeft[key];\n\n      if (value === attributes[key] || inheritableAttributes.includes(key)) {\n        commonAttributes[key] = value;\n      }\n    }\n\n    return commonAttributes;\n  }\n\n  getRangeOfCommonAttributeAtPosition(attributeName, position) {\n    const {\n      index,\n      offset\n    } = this.locationFromPosition(position);\n    const text = this.getTextAtIndex(index);\n    const [startOffset, endOffset] = Array.from(text.getExpandedRangeForAttributeAtOffset(attributeName, offset));\n    const start = this.positionFromLocation({\n      index,\n      offset: startOffset\n    });\n    const end = this.positionFromLocation({\n      index,\n      offset: endOffset\n    });\n    return normalizeRange([start, end]);\n  }\n\n  getBaseBlockAttributes() {\n    let baseBlockAttributes = this.getBlockAtIndex(0).getAttributes();\n\n    for (let blockIndex = 1; blockIndex < this.getBlockCount(); blockIndex++) {\n      const blockAttributes = this.getBlockAtIndex(blockIndex).getAttributes();\n      const lastAttributeIndex = Math.min(baseBlockAttributes.length, blockAttributes.length);\n\n      baseBlockAttributes = (() => {\n        const result = [];\n\n        for (let index = 0; index < lastAttributeIndex; index++) {\n          if (blockAttributes[index] !== baseBlockAttributes[index]) {\n            break;\n          }\n\n          result.push(blockAttributes[index]);\n        }\n\n        return result;\n      })();\n    }\n\n    return baseBlockAttributes;\n  }\n\n  getAttachmentById(attachmentId) {\n    for (const attachment of this.getAttachments()) {\n      if (attachment.id === attachmentId) {\n        return attachment;\n      }\n    }\n  }\n\n  getAttachmentPieces() {\n    let attachmentPieces = [];\n    this.blockList.eachObject(_ref => {\n      let {\n        text\n      } = _ref;\n      return attachmentPieces = attachmentPieces.concat(text.getAttachmentPieces());\n    });\n    return attachmentPieces;\n  }\n\n  getAttachments() {\n    return this.getAttachmentPieces().map(piece => piece.attachment);\n  }\n\n  getRangeOfAttachment(attachment) {\n    let position = 0;\n    const iterable = this.blockList.toArray();\n\n    for (let index = 0; index < iterable.length; index++) {\n      const {\n        text\n      } = iterable[index];\n      const textRange = text.getRangeOfAttachment(attachment);\n\n      if (textRange) {\n        return normalizeRange([position + textRange[0], position + textRange[1]]);\n      }\n\n      position += text.getLength();\n    }\n  }\n\n  getLocationRangeOfAttachment(attachment) {\n    const range = this.getRangeOfAttachment(attachment);\n    return this.locationRangeFromRange(range);\n  }\n\n  getAttachmentPieceForAttachment(attachment) {\n    for (const piece of this.getAttachmentPieces()) {\n      if (piece.attachment === attachment) {\n        return piece;\n      }\n    }\n  }\n\n  findRangesForBlockAttribute(attributeName) {\n    let position = 0;\n    const ranges = [];\n    this.getBlocks().forEach(block => {\n      const length = block.getLength();\n\n      if (block.hasAttribute(attributeName)) {\n        ranges.push([position, position + length]);\n      }\n\n      position += length;\n    });\n    return ranges;\n  }\n\n  findRangesForTextAttribute(attributeName) {\n    let {\n      withValue\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let position = 0;\n    let range = [];\n    const ranges = [];\n\n    const match = function (piece) {\n      if (withValue) {\n        return piece.getAttribute(attributeName) === withValue;\n      } else {\n        return piece.hasAttribute(attributeName);\n      }\n    };\n\n    this.getPieces().forEach(piece => {\n      const length = piece.getLength();\n\n      if (match(piece)) {\n        if (range[1] === position) {\n          range[1] = position + length;\n        } else {\n          ranges.push(range = [position, position + length]);\n        }\n      }\n\n      position += length;\n    });\n    return ranges;\n  }\n\n  locationFromPosition(position) {\n    const location = this.blockList.findIndexAndOffsetAtPosition(Math.max(0, position));\n\n    if (location.index != null) {\n      return location;\n    } else {\n      const blocks = this.getBlocks();\n      return {\n        index: blocks.length - 1,\n        offset: blocks[blocks.length - 1].getLength()\n      };\n    }\n  }\n\n  positionFromLocation(location) {\n    return this.blockList.findPositionAtIndexAndOffset(location.index, location.offset);\n  }\n\n  locationRangeFromPosition(position) {\n    return normalizeRange(this.locationFromPosition(position));\n  }\n\n  locationRangeFromRange(range) {\n    range = normalizeRange(range);\n    if (!range) return;\n    const [startPosition, endPosition] = Array.from(range);\n    const startLocation = this.locationFromPosition(startPosition);\n    const endLocation = this.locationFromPosition(endPosition);\n    return normalizeRange([startLocation, endLocation]);\n  }\n\n  rangeFromLocationRange(locationRange) {\n    let rightPosition;\n    locationRange = normalizeRange(locationRange);\n    const leftPosition = this.positionFromLocation(locationRange[0]);\n\n    if (!rangeIsCollapsed(locationRange)) {\n      rightPosition = this.positionFromLocation(locationRange[1]);\n    }\n\n    return normalizeRange([leftPosition, rightPosition]);\n  }\n\n  isEqualTo(document) {\n    return this.blockList.isEqualTo(document === null || document === void 0 ? void 0 : document.blockList);\n  }\n\n  getTexts() {\n    return this.getBlocks().map(block => block.text);\n  }\n\n  getPieces() {\n    const pieces = [];\n    Array.from(this.getTexts()).forEach(text => {\n      pieces.push(...Array.from(text.getPieces() || []));\n    });\n    return pieces;\n  }\n\n  getObjects() {\n    return this.getBlocks().concat(this.getTexts()).concat(this.getPieces());\n  }\n\n  toSerializableDocument() {\n    const blocks = [];\n    this.blockList.eachObject(block => blocks.push(block.copyWithText(block.text.toSerializableText())));\n    return new this.constructor(blocks);\n  }\n\n  toString() {\n    return this.blockList.toString();\n  }\n\n  toJSON() {\n    return this.blockList.toJSON();\n  }\n\n  toConsole() {\n    return JSON.stringify(this.blockList.toArray()).map(block => JSON.parse(block.text.toConsole()));\n  }\n\n}\n\nconst attributesForBlock = function (block) {\n  const attributes = {};\n  const attributeName = block.getLastAttribute();\n\n  if (attributeName) {\n    attributes[attributeName] = true;\n  }\n\n  return attributes;\n};\n\nconst DEFAULT_ALLOWED_ATTRIBUTES = \"style href src width height class\".split(\" \");\nconst DEFAULT_FORBIDDEN_PROTOCOLS = \"javascript:\".split(\" \");\nconst DEFAULT_FORBIDDEN_ELEMENTS = \"script iframe\".split(\" \");\nclass HTMLSanitizer extends BasicObject {\n  static sanitize(html, options) {\n    const sanitizer = new this(html, options);\n    sanitizer.sanitize();\n    return sanitizer;\n  }\n\n  constructor(html) {\n    let {\n      allowedAttributes,\n      forbiddenProtocols,\n      forbiddenElements\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(...arguments);\n    this.allowedAttributes = allowedAttributes || DEFAULT_ALLOWED_ATTRIBUTES;\n    this.forbiddenProtocols = forbiddenProtocols || DEFAULT_FORBIDDEN_PROTOCOLS;\n    this.forbiddenElements = forbiddenElements || DEFAULT_FORBIDDEN_ELEMENTS;\n    this.body = createBodyElementForHTML(html);\n  }\n\n  sanitize() {\n    this.sanitizeElements();\n    return this.normalizeListElementNesting();\n  }\n\n  getHTML() {\n    return this.body.innerHTML;\n  }\n\n  getBody() {\n    return this.body;\n  } // Private\n\n\n  sanitizeElements() {\n    const walker = walkTree(this.body);\n    const nodesToRemove = [];\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode;\n\n      switch (node.nodeType) {\n        case Node.ELEMENT_NODE:\n          if (this.elementIsRemovable(node)) {\n            nodesToRemove.push(node);\n          } else {\n            this.sanitizeElement(node);\n          }\n\n          break;\n\n        case Node.COMMENT_NODE:\n          nodesToRemove.push(node);\n          break;\n      }\n    }\n\n    nodesToRemove.forEach(node => removeNode(node));\n    return this.body;\n  }\n\n  sanitizeElement(element) {\n    if (element.hasAttribute(\"href\")) {\n      if (this.forbiddenProtocols.includes(element.protocol)) {\n        element.removeAttribute(\"href\");\n      }\n    }\n\n    Array.from(element.attributes).forEach(_ref => {\n      let {\n        name\n      } = _ref;\n\n      if (!this.allowedAttributes.includes(name) && name.indexOf(\"data-trix\") !== 0) {\n        element.removeAttribute(name);\n      }\n    });\n    return element;\n  }\n\n  normalizeListElementNesting() {\n    Array.from(this.body.querySelectorAll(\"ul,ol\")).forEach(listElement => {\n      const previousElement = listElement.previousElementSibling;\n\n      if (previousElement) {\n        if (tagName(previousElement) === \"li\") {\n          previousElement.appendChild(listElement);\n        }\n      }\n    });\n    return this.body;\n  }\n\n  elementIsRemovable(element) {\n    if ((element === null || element === void 0 ? void 0 : element.nodeType) !== Node.ELEMENT_NODE) return;\n    return this.elementIsForbidden(element) || this.elementIsntSerializable(element);\n  }\n\n  elementIsForbidden(element) {\n    return this.forbiddenElements.includes(tagName(element));\n  }\n\n  elementIsntSerializable(element) {\n    return element.getAttribute(\"data-trix-serialize\") === \"false\" && !nodeIsAttachmentElement(element);\n  }\n\n}\n\nconst createBodyElementForHTML = function () {\n  let html = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  // Remove everything after </html>\n  html = html.replace(/<\\/html[^>]*>[^]*$/i, \"</html>\");\n  const doc = document.implementation.createHTMLDocument(\"\");\n  doc.documentElement.innerHTML = html;\n  Array.from(doc.head.querySelectorAll(\"style\")).forEach(element => {\n    doc.body.appendChild(element);\n  });\n  return doc.body;\n};\n\n/* eslint-disable\n    no-case-declarations,\n    no-irregular-whitespace,\n*/\n\nconst pieceForString = function (string) {\n  let attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const type = \"string\";\n  string = normalizeSpaces(string);\n  return {\n    string,\n    attributes,\n    type\n  };\n};\n\nconst pieceForAttachment = function (attachment) {\n  let attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const type = \"attachment\";\n  return {\n    attachment,\n    attributes,\n    type\n  };\n};\n\nconst blockForAttributes = function () {\n  let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const text = [];\n  return {\n    text,\n    attributes\n  };\n};\n\nconst parseTrixDataAttribute = (element, name) => {\n  try {\n    return JSON.parse(element.getAttribute(\"data-trix-\".concat(name)));\n  } catch (error) {\n    return {};\n  }\n};\n\nconst getImageDimensions = element => {\n  const width = element.getAttribute(\"width\");\n  const height = element.getAttribute(\"height\");\n  const dimensions = {};\n\n  if (width) {\n    dimensions.width = parseInt(width, 10);\n  }\n\n  if (height) {\n    dimensions.height = parseInt(height, 10);\n  }\n\n  return dimensions;\n};\n\nclass HTMLParser extends BasicObject {\n  static parse(html, options) {\n    const parser = new this(html, options);\n    parser.parse();\n    return parser;\n  }\n\n  constructor(html) {\n    let {\n      referenceElement\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(...arguments);\n    this.html = html;\n    this.referenceElement = referenceElement;\n    this.blocks = [];\n    this.blockElements = [];\n    this.processedElements = [];\n  }\n\n  getDocument() {\n    return Document.fromJSON(this.blocks);\n  } // HTML parsing\n\n\n  parse() {\n    try {\n      this.createHiddenContainer();\n      const html = HTMLSanitizer.sanitize(this.html).getHTML();\n      this.containerElement.innerHTML = html;\n      const walker = walkTree(this.containerElement, {\n        usingFilter: nodeFilter\n      });\n\n      while (walker.nextNode()) {\n        this.processNode(walker.currentNode);\n      }\n\n      return this.translateBlockElementMarginsToNewlines();\n    } finally {\n      this.removeHiddenContainer();\n    }\n  }\n\n  createHiddenContainer() {\n    if (this.referenceElement) {\n      this.containerElement = this.referenceElement.cloneNode(false);\n      this.containerElement.removeAttribute(\"id\");\n      this.containerElement.setAttribute(\"data-trix-internal\", \"\");\n      this.containerElement.style.display = \"none\";\n      return this.referenceElement.parentNode.insertBefore(this.containerElement, this.referenceElement.nextSibling);\n    } else {\n      this.containerElement = makeElement({\n        tagName: \"div\",\n        style: {\n          display: \"none\"\n        }\n      });\n      return document.body.appendChild(this.containerElement);\n    }\n  }\n\n  removeHiddenContainer() {\n    return removeNode(this.containerElement);\n  }\n\n  processNode(node) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        if (!this.isInsignificantTextNode(node)) {\n          this.appendBlockForTextNode(node);\n          return this.processTextNode(node);\n        }\n\n        break;\n\n      case Node.ELEMENT_NODE:\n        this.appendBlockForElement(node);\n        return this.processElement(node);\n    }\n  }\n\n  appendBlockForTextNode(node) {\n    const element = node.parentNode;\n\n    if (element === this.currentBlockElement && this.isBlockElement(node.previousSibling)) {\n      return this.appendStringWithAttributes(\"\\n\");\n    } else if (element === this.containerElement || this.isBlockElement(element)) {\n      var _this$currentBlock;\n\n      const attributes = this.getBlockAttributes(element);\n\n      if (!arraysAreEqual(attributes, (_this$currentBlock = this.currentBlock) === null || _this$currentBlock === void 0 ? void 0 : _this$currentBlock.attributes)) {\n        this.currentBlock = this.appendBlockForAttributesWithElement(attributes, element);\n        this.currentBlockElement = element;\n      }\n    }\n  }\n\n  appendBlockForElement(element) {\n    const elementIsBlockElement = this.isBlockElement(element);\n    const currentBlockContainsElement = elementContainsNode(this.currentBlockElement, element);\n\n    if (elementIsBlockElement && !this.isBlockElement(element.firstChild)) {\n      if (!this.isInsignificantTextNode(element.firstChild) || !this.isBlockElement(element.firstElementChild)) {\n        const attributes = this.getBlockAttributes(element);\n\n        if (element.firstChild) {\n          if (!(currentBlockContainsElement && arraysAreEqual(attributes, this.currentBlock.attributes))) {\n            this.currentBlock = this.appendBlockForAttributesWithElement(attributes, element);\n            this.currentBlockElement = element;\n          } else {\n            return this.appendStringWithAttributes(\"\\n\");\n          }\n        }\n      }\n    } else if (this.currentBlockElement && !currentBlockContainsElement && !elementIsBlockElement) {\n      const parentBlockElement = this.findParentBlockElement(element);\n\n      if (parentBlockElement) {\n        return this.appendBlockForElement(parentBlockElement);\n      } else {\n        this.currentBlock = this.appendEmptyBlock();\n        this.currentBlockElement = null;\n      }\n    }\n  }\n\n  findParentBlockElement(element) {\n    let {\n      parentElement\n    } = element;\n\n    while (parentElement && parentElement !== this.containerElement) {\n      if (this.isBlockElement(parentElement) && this.blockElements.includes(parentElement)) {\n        return parentElement;\n      } else {\n        parentElement = parentElement.parentElement;\n      }\n    }\n\n    return null;\n  }\n\n  processTextNode(node) {\n    let string = node.data;\n\n    if (!elementCanDisplayPreformattedText(node.parentNode)) {\n      var _node$previousSibling;\n\n      string = squishBreakableWhitespace(string);\n\n      if (stringEndsWithWhitespace((_node$previousSibling = node.previousSibling) === null || _node$previousSibling === void 0 ? void 0 : _node$previousSibling.textContent)) {\n        string = leftTrimBreakableWhitespace(string);\n      }\n    }\n\n    return this.appendStringWithAttributes(string, this.getTextAttributes(node.parentNode));\n  }\n\n  processElement(element) {\n    let attributes;\n\n    if (nodeIsAttachmentElement(element)) {\n      attributes = parseTrixDataAttribute(element, \"attachment\");\n\n      if (Object.keys(attributes).length) {\n        const textAttributes = this.getTextAttributes(element);\n        this.appendAttachmentWithAttributes(attributes, textAttributes); // We have everything we need so avoid processing inner nodes\n\n        element.innerHTML = \"\";\n      }\n\n      return this.processedElements.push(element);\n    } else {\n      switch (tagName(element)) {\n        case \"br\":\n          if (!this.isExtraBR(element) && !this.isBlockElement(element.nextSibling)) {\n            this.appendStringWithAttributes(\"\\n\", this.getTextAttributes(element));\n          }\n\n          return this.processedElements.push(element);\n\n        case \"img\":\n          attributes = {\n            url: element.getAttribute(\"src\"),\n            contentType: \"image\"\n          };\n          const object = getImageDimensions(element);\n\n          for (const key in object) {\n            const value = object[key];\n            attributes[key] = value;\n          }\n\n          this.appendAttachmentWithAttributes(attributes, this.getTextAttributes(element));\n          return this.processedElements.push(element);\n\n        case \"tr\":\n          if (element.parentNode.firstChild !== element) {\n            return this.appendStringWithAttributes(\"\\n\");\n          }\n\n          break;\n\n        case \"td\":\n          if (element.parentNode.firstChild !== element) {\n            return this.appendStringWithAttributes(\" | \");\n          }\n\n          break;\n      }\n    }\n  } // Document construction\n\n\n  appendBlockForAttributesWithElement(attributes, element) {\n    this.blockElements.push(element);\n    const block = blockForAttributes(attributes);\n    this.blocks.push(block);\n    return block;\n  }\n\n  appendEmptyBlock() {\n    return this.appendBlockForAttributesWithElement([], null);\n  }\n\n  appendStringWithAttributes(string, attributes) {\n    return this.appendPiece(pieceForString(string, attributes));\n  }\n\n  appendAttachmentWithAttributes(attachment, attributes) {\n    return this.appendPiece(pieceForAttachment(attachment, attributes));\n  }\n\n  appendPiece(piece) {\n    if (this.blocks.length === 0) {\n      this.appendEmptyBlock();\n    }\n\n    return this.blocks[this.blocks.length - 1].text.push(piece);\n  }\n\n  appendStringToTextAtIndex(string, index) {\n    const {\n      text\n    } = this.blocks[index];\n    const piece = text[text.length - 1];\n\n    if ((piece === null || piece === void 0 ? void 0 : piece.type) === \"string\") {\n      piece.string += string;\n    } else {\n      return text.push(pieceForString(string));\n    }\n  }\n\n  prependStringToTextAtIndex(string, index) {\n    const {\n      text\n    } = this.blocks[index];\n    const piece = text[0];\n\n    if ((piece === null || piece === void 0 ? void 0 : piece.type) === \"string\") {\n      piece.string = string + piece.string;\n    } else {\n      return text.unshift(pieceForString(string));\n    }\n  } // Attribute parsing\n\n\n  getTextAttributes(element) {\n    let value;\n    const attributes = {};\n\n    for (const attribute in config.textAttributes) {\n      const configAttr = config.textAttributes[attribute];\n\n      if (configAttr.tagName && findClosestElementFromNode(element, {\n        matchingSelector: configAttr.tagName,\n        untilNode: this.containerElement\n      })) {\n        attributes[attribute] = true;\n      } else if (configAttr.parser) {\n        value = configAttr.parser(element);\n\n        if (value) {\n          let attributeInheritedFromBlock = false;\n\n          for (const blockElement of this.findBlockElementAncestors(element)) {\n            if (configAttr.parser(blockElement) === value) {\n              attributeInheritedFromBlock = true;\n              break;\n            }\n          }\n\n          if (!attributeInheritedFromBlock) {\n            attributes[attribute] = value;\n          }\n        }\n      } else if (configAttr.styleProperty) {\n        value = element.style[configAttr.styleProperty];\n\n        if (value) {\n          attributes[attribute] = value;\n        }\n      }\n    }\n\n    if (nodeIsAttachmentElement(element)) {\n      const object = parseTrixDataAttribute(element, \"attributes\");\n\n      for (const key in object) {\n        value = object[key];\n        attributes[key] = value;\n      }\n    }\n\n    return attributes;\n  }\n\n  getBlockAttributes(element) {\n    const attributes = [];\n\n    while (element && element !== this.containerElement) {\n      for (const attribute in config.blockAttributes) {\n        const attrConfig = config.blockAttributes[attribute];\n\n        if (attrConfig.parse !== false) {\n          if (tagName(element) === attrConfig.tagName) {\n            var _attrConfig$test;\n\n            if ((_attrConfig$test = attrConfig.test) !== null && _attrConfig$test !== void 0 && _attrConfig$test.call(attrConfig, element) || !attrConfig.test) {\n              attributes.push(attribute);\n\n              if (attrConfig.listAttribute) {\n                attributes.push(attrConfig.listAttribute);\n              }\n            }\n          }\n        }\n      }\n\n      element = element.parentNode;\n    }\n\n    return attributes.reverse();\n  }\n\n  findBlockElementAncestors(element) {\n    const ancestors = [];\n\n    while (element && element !== this.containerElement) {\n      const tag = tagName(element);\n\n      if (getBlockTagNames().includes(tag)) {\n        ancestors.push(element);\n      }\n\n      element = element.parentNode;\n    }\n\n    return ancestors;\n  } // Element inspection\n\n\n  isBlockElement(element) {\n    if ((element === null || element === void 0 ? void 0 : element.nodeType) !== Node.ELEMENT_NODE) return;\n    if (nodeIsAttachmentElement(element)) return;\n    if (findClosestElementFromNode(element, {\n      matchingSelector: \"td\",\n      untilNode: this.containerElement\n    })) return;\n    return getBlockTagNames().includes(tagName(element)) || window.getComputedStyle(element).display === \"block\";\n  }\n\n  isInsignificantTextNode(node) {\n    if ((node === null || node === void 0 ? void 0 : node.nodeType) !== Node.TEXT_NODE) return;\n    if (!stringIsAllBreakableWhitespace(node.data)) return;\n    const {\n      parentNode,\n      previousSibling,\n      nextSibling\n    } = node;\n    if (nodeEndsWithNonWhitespace(parentNode.previousSibling) && !this.isBlockElement(parentNode.previousSibling)) return;\n    if (elementCanDisplayPreformattedText(parentNode)) return;\n    return !previousSibling || this.isBlockElement(previousSibling) || !nextSibling || this.isBlockElement(nextSibling);\n  }\n\n  isExtraBR(element) {\n    return tagName(element) === \"br\" && this.isBlockElement(element.parentNode) && element.parentNode.lastChild === element;\n  } // Margin translation\n\n\n  translateBlockElementMarginsToNewlines() {\n    const defaultMargin = this.getMarginOfDefaultBlockElement();\n\n    for (let index = 0; index < this.blocks.length; index++) {\n      const margin = this.getMarginOfBlockElementAtIndex(index);\n\n      if (margin) {\n        if (margin.top > defaultMargin.top * 2) {\n          this.prependStringToTextAtIndex(\"\\n\", index);\n        }\n\n        if (margin.bottom > defaultMargin.bottom * 2) {\n          this.appendStringToTextAtIndex(\"\\n\", index);\n        }\n      }\n    }\n  }\n\n  getMarginOfBlockElementAtIndex(index) {\n    const element = this.blockElements[index];\n\n    if (element) {\n      if (element.textContent) {\n        if (!getBlockTagNames().includes(tagName(element)) && !this.processedElements.includes(element)) {\n          return getBlockElementMargin(element);\n        }\n      }\n    }\n  }\n\n  getMarginOfDefaultBlockElement() {\n    const element = makeElement(config.blockAttributes.default.tagName);\n    this.containerElement.appendChild(element);\n    return getBlockElementMargin(element);\n  }\n\n} // Helpers\n\nconst elementCanDisplayPreformattedText = function (element) {\n  const {\n    whiteSpace\n  } = window.getComputedStyle(element);\n  return [\"pre\", \"pre-wrap\", \"pre-line\"].includes(whiteSpace);\n};\n\nconst nodeEndsWithNonWhitespace = node => node && !stringEndsWithWhitespace(node.textContent);\n\nconst getBlockElementMargin = function (element) {\n  const style = window.getComputedStyle(element);\n\n  if (style.display === \"block\") {\n    return {\n      top: parseInt(style.marginTop),\n      bottom: parseInt(style.marginBottom)\n    };\n  }\n};\n\nconst nodeFilter = function (node) {\n  if (tagName(node) === \"style\") {\n    return NodeFilter.FILTER_REJECT;\n  } else {\n    return NodeFilter.FILTER_ACCEPT;\n  }\n}; // Whitespace\n\n\nconst leftTrimBreakableWhitespace = string => string.replace(new RegExp(\"^\".concat(breakableWhitespacePattern.source, \"+\")), \"\");\n\nconst stringIsAllBreakableWhitespace = string => new RegExp(\"^\".concat(breakableWhitespacePattern.source, \"*$\")).test(string);\n\nconst stringEndsWithWhitespace = string => /\\s$/.test(string);\n\nclass LineBreakInsertion {\n  constructor(composition) {\n    this.composition = composition;\n    this.document = this.composition.document;\n    const selectedRange = this.composition.getSelectedRange();\n    this.startPosition = selectedRange[0];\n    this.endPosition = selectedRange[1];\n    this.startLocation = this.document.locationFromPosition(this.startPosition);\n    this.endLocation = this.document.locationFromPosition(this.endPosition);\n    this.block = this.document.getBlockAtIndex(this.endLocation.index);\n    this.breaksOnReturn = this.block.breaksOnReturn();\n    this.previousCharacter = this.block.text.getStringAtPosition(this.endLocation.offset - 1);\n    this.nextCharacter = this.block.text.getStringAtPosition(this.endLocation.offset);\n  }\n\n  shouldInsertBlockBreak() {\n    if (this.block.hasAttributes() && this.block.isListItem() && !this.block.isEmpty()) {\n      return this.startLocation.offset !== 0;\n    } else {\n      return this.breaksOnReturn && this.nextCharacter !== \"\\n\";\n    }\n  }\n\n  shouldBreakFormattedBlock() {\n    return this.block.hasAttributes() && !this.block.isListItem() && (this.breaksOnReturn && this.nextCharacter === \"\\n\" || this.previousCharacter === \"\\n\");\n  }\n\n  shouldDecreaseListLevel() {\n    return this.block.hasAttributes() && this.block.isListItem() && this.block.isEmpty();\n  }\n\n  shouldPrependListItem() {\n    return this.block.isListItem() && this.startLocation.offset === 0 && !this.block.isEmpty();\n  }\n\n  shouldRemoveLastBlockAttribute() {\n    return this.block.hasAttributes() && !this.block.isListItem() && this.block.isEmpty();\n  }\n\n}\n\nconst PLACEHOLDER = \" \";\nclass Composition extends BasicObject {\n  constructor() {\n    super(...arguments);\n    this.document = new Document();\n    this.attachments = [];\n    this.currentAttributes = {};\n    this.revision = 0;\n  }\n\n  setDocument(document) {\n    if (!document.isEqualTo(this.document)) {\n      var _this$delegate, _this$delegate$compos;\n\n      this.document = document;\n      this.refreshAttachments();\n      this.revision++;\n      return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$compos = _this$delegate.compositionDidChangeDocument) === null || _this$delegate$compos === void 0 ? void 0 : _this$delegate$compos.call(_this$delegate, document);\n    }\n  } // Snapshots\n\n\n  getSnapshot() {\n    return {\n      document: this.document,\n      selectedRange: this.getSelectedRange()\n    };\n  }\n\n  loadSnapshot(_ref) {\n    var _this$delegate2, _this$delegate2$compo, _this$delegate3, _this$delegate3$compo;\n\n    let {\n      document,\n      selectedRange\n    } = _ref;\n    (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$compo = _this$delegate2.compositionWillLoadSnapshot) === null || _this$delegate2$compo === void 0 ? void 0 : _this$delegate2$compo.call(_this$delegate2);\n    this.setDocument(document != null ? document : new Document());\n    this.setSelection(selectedRange != null ? selectedRange : [0, 0]);\n    return (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : (_this$delegate3$compo = _this$delegate3.compositionDidLoadSnapshot) === null || _this$delegate3$compo === void 0 ? void 0 : _this$delegate3$compo.call(_this$delegate3);\n  } // Responder protocol\n\n\n  insertText(text) {\n    let {\n      updatePosition\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      updatePosition: true\n    };\n    const selectedRange = this.getSelectedRange();\n    this.setDocument(this.document.insertTextAtRange(text, selectedRange));\n    const startPosition = selectedRange[0];\n    const endPosition = startPosition + text.getLength();\n\n    if (updatePosition) {\n      this.setSelection(endPosition);\n    }\n\n    return this.notifyDelegateOfInsertionAtRange([startPosition, endPosition]);\n  }\n\n  insertBlock() {\n    let block = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Block();\n    const document = new Document([block]);\n    return this.insertDocument(document);\n  }\n\n  insertDocument() {\n    let document = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Document();\n    const selectedRange = this.getSelectedRange();\n    this.setDocument(this.document.insertDocumentAtRange(document, selectedRange));\n    const startPosition = selectedRange[0];\n    const endPosition = startPosition + document.getLength();\n    this.setSelection(endPosition);\n    return this.notifyDelegateOfInsertionAtRange([startPosition, endPosition]);\n  }\n\n  insertString(string, options) {\n    const attributes = this.getCurrentTextAttributes();\n    const text = Text.textForStringWithAttributes(string, attributes);\n    return this.insertText(text, options);\n  }\n\n  insertBlockBreak() {\n    const selectedRange = this.getSelectedRange();\n    this.setDocument(this.document.insertBlockBreakAtRange(selectedRange));\n    const startPosition = selectedRange[0];\n    const endPosition = startPosition + 1;\n    this.setSelection(endPosition);\n    return this.notifyDelegateOfInsertionAtRange([startPosition, endPosition]);\n  }\n\n  insertLineBreak() {\n    const insertion = new LineBreakInsertion(this);\n\n    if (insertion.shouldDecreaseListLevel()) {\n      this.decreaseListLevel();\n      return this.setSelection(insertion.startPosition);\n    } else if (insertion.shouldPrependListItem()) {\n      const document = new Document([insertion.block.copyWithoutText()]);\n      return this.insertDocument(document);\n    } else if (insertion.shouldInsertBlockBreak()) {\n      return this.insertBlockBreak();\n    } else if (insertion.shouldRemoveLastBlockAttribute()) {\n      return this.removeLastBlockAttribute();\n    } else if (insertion.shouldBreakFormattedBlock()) {\n      return this.breakFormattedBlock(insertion);\n    } else {\n      return this.insertString(\"\\n\");\n    }\n  }\n\n  insertHTML(html) {\n    const document = HTMLParser.parse(html).getDocument();\n    const selectedRange = this.getSelectedRange();\n    this.setDocument(this.document.mergeDocumentAtRange(document, selectedRange));\n    const startPosition = selectedRange[0];\n    const endPosition = startPosition + document.getLength() - 1;\n    this.setSelection(endPosition);\n    return this.notifyDelegateOfInsertionAtRange([startPosition, endPosition]);\n  }\n\n  replaceHTML(html) {\n    const document = HTMLParser.parse(html).getDocument().copyUsingObjectsFromDocument(this.document);\n    const locationRange = this.getLocationRange({\n      strict: false\n    });\n    const selectedRange = this.document.rangeFromLocationRange(locationRange);\n    this.setDocument(document);\n    return this.setSelection(selectedRange);\n  }\n\n  insertFile(file) {\n    return this.insertFiles([file]);\n  }\n\n  insertFiles(files) {\n    const attachments = [];\n    Array.from(files).forEach(file => {\n      var _this$delegate4;\n\n      if ((_this$delegate4 = this.delegate) !== null && _this$delegate4 !== void 0 && _this$delegate4.compositionShouldAcceptFile(file)) {\n        const attachment = Attachment.attachmentForFile(file);\n        attachments.push(attachment);\n      }\n    });\n    return this.insertAttachments(attachments);\n  }\n\n  insertAttachment(attachment) {\n    return this.insertAttachments([attachment]);\n  }\n\n  insertAttachments(attachments) {\n    let text = new Text();\n    Array.from(attachments).forEach(attachment => {\n      var _config$attachments$t;\n\n      const type = attachment.getType();\n      const presentation = (_config$attachments$t = config.attachments[type]) === null || _config$attachments$t === void 0 ? void 0 : _config$attachments$t.presentation;\n      const attributes = this.getCurrentTextAttributes();\n\n      if (presentation) {\n        attributes.presentation = presentation;\n      }\n\n      const attachmentText = Text.textForAttachmentWithAttributes(attachment, attributes);\n      text = text.appendText(attachmentText);\n    });\n    return this.insertText(text);\n  }\n\n  shouldManageDeletingInDirection(direction) {\n    const locationRange = this.getLocationRange();\n\n    if (rangeIsCollapsed(locationRange)) {\n      if (direction === \"backward\" && locationRange[0].offset === 0) {\n        return true;\n      }\n\n      if (this.shouldManageMovingCursorInDirection(direction)) {\n        return true;\n      }\n    } else {\n      if (locationRange[0].index !== locationRange[1].index) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  deleteInDirection(direction) {\n    let {\n      length\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let attachment, deletingIntoPreviousBlock, selectionSpansBlocks;\n    const locationRange = this.getLocationRange();\n    let range = this.getSelectedRange();\n    const selectionIsCollapsed = rangeIsCollapsed(range);\n\n    if (selectionIsCollapsed) {\n      deletingIntoPreviousBlock = direction === \"backward\" && locationRange[0].offset === 0;\n    } else {\n      selectionSpansBlocks = locationRange[0].index !== locationRange[1].index;\n    }\n\n    if (deletingIntoPreviousBlock) {\n      if (this.canDecreaseBlockAttributeLevel()) {\n        const block = this.getBlock();\n\n        if (block.isListItem()) {\n          this.decreaseListLevel();\n        } else {\n          this.decreaseBlockAttributeLevel();\n        }\n\n        this.setSelection(range[0]);\n\n        if (block.isEmpty()) {\n          return false;\n        }\n      }\n    }\n\n    if (selectionIsCollapsed) {\n      range = this.getExpandedRangeInDirection(direction, {\n        length\n      });\n\n      if (direction === \"backward\") {\n        attachment = this.getAttachmentAtRange(range);\n      }\n    }\n\n    if (attachment) {\n      this.editAttachment(attachment);\n      return false;\n    } else {\n      this.setDocument(this.document.removeTextAtRange(range));\n      this.setSelection(range[0]);\n\n      if (deletingIntoPreviousBlock || selectionSpansBlocks) {\n        return false;\n      }\n    }\n  }\n\n  moveTextFromRange(range) {\n    const [position] = Array.from(this.getSelectedRange());\n    this.setDocument(this.document.moveTextFromRangeToPosition(range, position));\n    return this.setSelection(position);\n  }\n\n  removeAttachment(attachment) {\n    const range = this.document.getRangeOfAttachment(attachment);\n\n    if (range) {\n      this.stopEditingAttachment();\n      this.setDocument(this.document.removeTextAtRange(range));\n      return this.setSelection(range[0]);\n    }\n  }\n\n  removeLastBlockAttribute() {\n    const [startPosition, endPosition] = Array.from(this.getSelectedRange());\n    const block = this.document.getBlockAtPosition(endPosition);\n    this.removeCurrentAttribute(block.getLastAttribute());\n    return this.setSelection(startPosition);\n  }\n\n  insertPlaceholder() {\n    this.placeholderPosition = this.getPosition();\n    return this.insertString(PLACEHOLDER);\n  }\n\n  selectPlaceholder() {\n    if (this.placeholderPosition != null) {\n      this.setSelectedRange([this.placeholderPosition, this.placeholderPosition + PLACEHOLDER.length]);\n      return this.getSelectedRange();\n    }\n  }\n\n  forgetPlaceholder() {\n    this.placeholderPosition = null;\n  } // Current attributes\n\n\n  hasCurrentAttribute(attributeName) {\n    const value = this.currentAttributes[attributeName];\n    return value != null && value !== false;\n  }\n\n  toggleCurrentAttribute(attributeName) {\n    const value = !this.currentAttributes[attributeName];\n\n    if (value) {\n      return this.setCurrentAttribute(attributeName, value);\n    } else {\n      return this.removeCurrentAttribute(attributeName);\n    }\n  }\n\n  canSetCurrentAttribute(attributeName) {\n    if (getBlockConfig(attributeName)) {\n      return this.canSetCurrentBlockAttribute(attributeName);\n    } else {\n      return this.canSetCurrentTextAttribute(attributeName);\n    }\n  }\n\n  canSetCurrentTextAttribute(attributeName) {\n    const document = this.getSelectedDocument();\n    if (!document) return;\n\n    for (const attachment of Array.from(document.getAttachments())) {\n      if (!attachment.hasContent()) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  canSetCurrentBlockAttribute(attributeName) {\n    const block = this.getBlock();\n    if (!block) return;\n    return !block.isTerminalBlock();\n  }\n\n  setCurrentAttribute(attributeName, value) {\n    if (getBlockConfig(attributeName)) {\n      return this.setBlockAttribute(attributeName, value);\n    } else {\n      this.setTextAttribute(attributeName, value);\n      this.currentAttributes[attributeName] = value;\n      return this.notifyDelegateOfCurrentAttributesChange();\n    }\n  }\n\n  setTextAttribute(attributeName, value) {\n    const selectedRange = this.getSelectedRange();\n    if (!selectedRange) return;\n    const [startPosition, endPosition] = Array.from(selectedRange);\n\n    if (startPosition === endPosition) {\n      if (attributeName === \"href\") {\n        const text = Text.textForStringWithAttributes(value, {\n          href: value\n        });\n        return this.insertText(text);\n      }\n    } else {\n      return this.setDocument(this.document.addAttributeAtRange(attributeName, value, selectedRange));\n    }\n  }\n\n  setBlockAttribute(attributeName, value) {\n    const selectedRange = this.getSelectedRange();\n\n    if (this.canSetCurrentAttribute(attributeName)) {\n      this.setDocument(this.document.applyBlockAttributeAtRange(attributeName, value, selectedRange));\n      return this.setSelection(selectedRange);\n    }\n  }\n\n  removeCurrentAttribute(attributeName) {\n    if (getBlockConfig(attributeName)) {\n      this.removeBlockAttribute(attributeName);\n      return this.updateCurrentAttributes();\n    } else {\n      this.removeTextAttribute(attributeName);\n      delete this.currentAttributes[attributeName];\n      return this.notifyDelegateOfCurrentAttributesChange();\n    }\n  }\n\n  removeTextAttribute(attributeName) {\n    const selectedRange = this.getSelectedRange();\n    if (!selectedRange) return;\n    return this.setDocument(this.document.removeAttributeAtRange(attributeName, selectedRange));\n  }\n\n  removeBlockAttribute(attributeName) {\n    const selectedRange = this.getSelectedRange();\n    if (!selectedRange) return;\n    return this.setDocument(this.document.removeAttributeAtRange(attributeName, selectedRange));\n  }\n\n  canDecreaseNestingLevel() {\n    var _this$getBlock;\n\n    return ((_this$getBlock = this.getBlock()) === null || _this$getBlock === void 0 ? void 0 : _this$getBlock.getNestingLevel()) > 0;\n  }\n\n  canIncreaseNestingLevel() {\n    var _getBlockConfig;\n\n    const block = this.getBlock();\n    if (!block) return;\n\n    if ((_getBlockConfig = getBlockConfig(block.getLastNestableAttribute())) !== null && _getBlockConfig !== void 0 && _getBlockConfig.listAttribute) {\n      const previousBlock = this.getPreviousBlock();\n\n      if (previousBlock) {\n        return arrayStartsWith(previousBlock.getListItemAttributes(), block.getListItemAttributes());\n      }\n    } else {\n      return block.getNestingLevel() > 0;\n    }\n  }\n\n  decreaseNestingLevel() {\n    const block = this.getBlock();\n    if (!block) return;\n    return this.setDocument(this.document.replaceBlock(block, block.decreaseNestingLevel()));\n  }\n\n  increaseNestingLevel() {\n    const block = this.getBlock();\n    if (!block) return;\n    return this.setDocument(this.document.replaceBlock(block, block.increaseNestingLevel()));\n  }\n\n  canDecreaseBlockAttributeLevel() {\n    var _this$getBlock2;\n\n    return ((_this$getBlock2 = this.getBlock()) === null || _this$getBlock2 === void 0 ? void 0 : _this$getBlock2.getAttributeLevel()) > 0;\n  }\n\n  decreaseBlockAttributeLevel() {\n    var _this$getBlock3;\n\n    const attribute = (_this$getBlock3 = this.getBlock()) === null || _this$getBlock3 === void 0 ? void 0 : _this$getBlock3.getLastAttribute();\n\n    if (attribute) {\n      return this.removeCurrentAttribute(attribute);\n    }\n  }\n\n  decreaseListLevel() {\n    let [startPosition] = Array.from(this.getSelectedRange());\n    const {\n      index\n    } = this.document.locationFromPosition(startPosition);\n    let endIndex = index;\n    const attributeLevel = this.getBlock().getAttributeLevel();\n    let block = this.document.getBlockAtIndex(endIndex + 1);\n\n    while (block) {\n      if (!block.isListItem() || block.getAttributeLevel() <= attributeLevel) {\n        break;\n      }\n\n      endIndex++;\n      block = this.document.getBlockAtIndex(endIndex + 1);\n    }\n\n    startPosition = this.document.positionFromLocation({\n      index,\n      offset: 0\n    });\n    const endPosition = this.document.positionFromLocation({\n      index: endIndex,\n      offset: 0\n    });\n    return this.setDocument(this.document.removeLastListAttributeAtRange([startPosition, endPosition]));\n  }\n\n  updateCurrentAttributes() {\n    const selectedRange = this.getSelectedRange({\n      ignoreLock: true\n    });\n\n    if (selectedRange) {\n      const currentAttributes = this.document.getCommonAttributesAtRange(selectedRange);\n      Array.from(getAllAttributeNames()).forEach(attributeName => {\n        if (!currentAttributes[attributeName]) {\n          if (!this.canSetCurrentAttribute(attributeName)) {\n            currentAttributes[attributeName] = false;\n          }\n        }\n      });\n\n      if (!objectsAreEqual(currentAttributes, this.currentAttributes)) {\n        this.currentAttributes = currentAttributes;\n        return this.notifyDelegateOfCurrentAttributesChange();\n      }\n    }\n  }\n\n  getCurrentAttributes() {\n    return extend.call({}, this.currentAttributes);\n  }\n\n  getCurrentTextAttributes() {\n    const attributes = {};\n\n    for (const key in this.currentAttributes) {\n      const value = this.currentAttributes[key];\n\n      if (value !== false) {\n        if (getTextConfig(key)) {\n          attributes[key] = value;\n        }\n      }\n    }\n\n    return attributes;\n  } // Selection freezing\n\n\n  freezeSelection() {\n    return this.setCurrentAttribute(\"frozen\", true);\n  }\n\n  thawSelection() {\n    return this.removeCurrentAttribute(\"frozen\");\n  }\n\n  hasFrozenSelection() {\n    return this.hasCurrentAttribute(\"frozen\");\n  }\n\n  setSelection(selectedRange) {\n    var _this$delegate5;\n\n    const locationRange = this.document.locationRangeFromRange(selectedRange);\n    return (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : _this$delegate5.compositionDidRequestChangingSelectionToLocationRange(locationRange);\n  }\n\n  getSelectedRange() {\n    const locationRange = this.getLocationRange();\n\n    if (locationRange) {\n      return this.document.rangeFromLocationRange(locationRange);\n    }\n  }\n\n  setSelectedRange(selectedRange) {\n    const locationRange = this.document.locationRangeFromRange(selectedRange);\n    return this.getSelectionManager().setLocationRange(locationRange);\n  }\n\n  getPosition() {\n    const locationRange = this.getLocationRange();\n\n    if (locationRange) {\n      return this.document.positionFromLocation(locationRange[0]);\n    }\n  }\n\n  getLocationRange(options) {\n    if (this.targetLocationRange) {\n      return this.targetLocationRange;\n    } else {\n      return this.getSelectionManager().getLocationRange(options) || normalizeRange({\n        index: 0,\n        offset: 0\n      });\n    }\n  }\n\n  withTargetLocationRange(locationRange, fn) {\n    let result;\n    this.targetLocationRange = locationRange;\n\n    try {\n      result = fn();\n    } finally {\n      this.targetLocationRange = null;\n    }\n\n    return result;\n  }\n\n  withTargetRange(range, fn) {\n    const locationRange = this.document.locationRangeFromRange(range);\n    return this.withTargetLocationRange(locationRange, fn);\n  }\n\n  withTargetDOMRange(domRange, fn) {\n    const locationRange = this.createLocationRangeFromDOMRange(domRange, {\n      strict: false\n    });\n    return this.withTargetLocationRange(locationRange, fn);\n  }\n\n  getExpandedRangeInDirection(direction) {\n    let {\n      length\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let [startPosition, endPosition] = Array.from(this.getSelectedRange());\n\n    if (direction === \"backward\") {\n      if (length) {\n        startPosition -= length;\n      } else {\n        startPosition = this.translateUTF16PositionFromOffset(startPosition, -1);\n      }\n    } else {\n      if (length) {\n        endPosition += length;\n      } else {\n        endPosition = this.translateUTF16PositionFromOffset(endPosition, 1);\n      }\n    }\n\n    return normalizeRange([startPosition, endPosition]);\n  }\n\n  shouldManageMovingCursorInDirection(direction) {\n    if (this.editingAttachment) {\n      return true;\n    }\n\n    const range = this.getExpandedRangeInDirection(direction);\n    return this.getAttachmentAtRange(range) != null;\n  }\n\n  moveCursorInDirection(direction) {\n    let canEditAttachment, range;\n\n    if (this.editingAttachment) {\n      range = this.document.getRangeOfAttachment(this.editingAttachment);\n    } else {\n      const selectedRange = this.getSelectedRange();\n      range = this.getExpandedRangeInDirection(direction);\n      canEditAttachment = !rangesAreEqual(selectedRange, range);\n    }\n\n    if (direction === \"backward\") {\n      this.setSelectedRange(range[0]);\n    } else {\n      this.setSelectedRange(range[1]);\n    }\n\n    if (canEditAttachment) {\n      const attachment = this.getAttachmentAtRange(range);\n\n      if (attachment) {\n        return this.editAttachment(attachment);\n      }\n    }\n  }\n\n  expandSelectionInDirection(direction) {\n    let {\n      length\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const range = this.getExpandedRangeInDirection(direction, {\n      length\n    });\n    return this.setSelectedRange(range);\n  }\n\n  expandSelectionForEditing() {\n    if (this.hasCurrentAttribute(\"href\")) {\n      return this.expandSelectionAroundCommonAttribute(\"href\");\n    }\n  }\n\n  expandSelectionAroundCommonAttribute(attributeName) {\n    const position = this.getPosition();\n    const range = this.document.getRangeOfCommonAttributeAtPosition(attributeName, position);\n    return this.setSelectedRange(range);\n  }\n\n  selectionContainsAttachments() {\n    var _this$getSelectedAtta;\n\n    return ((_this$getSelectedAtta = this.getSelectedAttachments()) === null || _this$getSelectedAtta === void 0 ? void 0 : _this$getSelectedAtta.length) > 0;\n  }\n\n  selectionIsInCursorTarget() {\n    return this.editingAttachment || this.positionIsCursorTarget(this.getPosition());\n  }\n\n  positionIsCursorTarget(position) {\n    const location = this.document.locationFromPosition(position);\n\n    if (location) {\n      return this.locationIsCursorTarget(location);\n    }\n  }\n\n  positionIsBlockBreak(position) {\n    var _this$document$getPie;\n\n    return (_this$document$getPie = this.document.getPieceAtPosition(position)) === null || _this$document$getPie === void 0 ? void 0 : _this$document$getPie.isBlockBreak();\n  }\n\n  getSelectedDocument() {\n    const selectedRange = this.getSelectedRange();\n\n    if (selectedRange) {\n      return this.document.getDocumentAtRange(selectedRange);\n    }\n  }\n\n  getSelectedAttachments() {\n    var _this$getSelectedDocu;\n\n    return (_this$getSelectedDocu = this.getSelectedDocument()) === null || _this$getSelectedDocu === void 0 ? void 0 : _this$getSelectedDocu.getAttachments();\n  } // Attachments\n\n\n  getAttachments() {\n    return this.attachments.slice(0);\n  }\n\n  refreshAttachments() {\n    const attachments = this.document.getAttachments();\n    const {\n      added,\n      removed\n    } = summarizeArrayChange(this.attachments, attachments);\n    this.attachments = attachments;\n    Array.from(removed).forEach(attachment => {\n      var _this$delegate6, _this$delegate6$compo;\n\n      attachment.delegate = null;\n      (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : (_this$delegate6$compo = _this$delegate6.compositionDidRemoveAttachment) === null || _this$delegate6$compo === void 0 ? void 0 : _this$delegate6$compo.call(_this$delegate6, attachment);\n    });\n    return (() => {\n      const result = [];\n      Array.from(added).forEach(attachment => {\n        var _this$delegate7, _this$delegate7$compo;\n\n        attachment.delegate = this;\n        result.push((_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : (_this$delegate7$compo = _this$delegate7.compositionDidAddAttachment) === null || _this$delegate7$compo === void 0 ? void 0 : _this$delegate7$compo.call(_this$delegate7, attachment));\n      });\n      return result;\n    })();\n  } // Attachment delegate\n\n\n  attachmentDidChangeAttributes(attachment) {\n    var _this$delegate8, _this$delegate8$compo;\n\n    this.revision++;\n    return (_this$delegate8 = this.delegate) === null || _this$delegate8 === void 0 ? void 0 : (_this$delegate8$compo = _this$delegate8.compositionDidEditAttachment) === null || _this$delegate8$compo === void 0 ? void 0 : _this$delegate8$compo.call(_this$delegate8, attachment);\n  }\n\n  attachmentDidChangePreviewURL(attachment) {\n    var _this$delegate9, _this$delegate9$compo;\n\n    this.revision++;\n    return (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : (_this$delegate9$compo = _this$delegate9.compositionDidChangeAttachmentPreviewURL) === null || _this$delegate9$compo === void 0 ? void 0 : _this$delegate9$compo.call(_this$delegate9, attachment);\n  } // Attachment editing\n\n\n  editAttachment(attachment, options) {\n    var _this$delegate10, _this$delegate10$comp;\n\n    if (attachment === this.editingAttachment) return;\n    this.stopEditingAttachment();\n    this.editingAttachment = attachment;\n    return (_this$delegate10 = this.delegate) === null || _this$delegate10 === void 0 ? void 0 : (_this$delegate10$comp = _this$delegate10.compositionDidStartEditingAttachment) === null || _this$delegate10$comp === void 0 ? void 0 : _this$delegate10$comp.call(_this$delegate10, this.editingAttachment, options);\n  }\n\n  stopEditingAttachment() {\n    var _this$delegate11, _this$delegate11$comp;\n\n    if (!this.editingAttachment) return;\n    (_this$delegate11 = this.delegate) === null || _this$delegate11 === void 0 ? void 0 : (_this$delegate11$comp = _this$delegate11.compositionDidStopEditingAttachment) === null || _this$delegate11$comp === void 0 ? void 0 : _this$delegate11$comp.call(_this$delegate11, this.editingAttachment);\n    this.editingAttachment = null;\n  }\n\n  updateAttributesForAttachment(attributes, attachment) {\n    return this.setDocument(this.document.updateAttributesForAttachment(attributes, attachment));\n  }\n\n  removeAttributeForAttachment(attribute, attachment) {\n    return this.setDocument(this.document.removeAttributeForAttachment(attribute, attachment));\n  } // Private\n\n\n  breakFormattedBlock(insertion) {\n    let {\n      document\n    } = insertion;\n    const {\n      block\n    } = insertion;\n    let position = insertion.startPosition;\n    let range = [position - 1, position];\n\n    if (block.getBlockBreakPosition() === insertion.startLocation.offset) {\n      if (block.breaksOnReturn() && insertion.nextCharacter === \"\\n\") {\n        position += 1;\n      } else {\n        document = document.removeTextAtRange(range);\n      }\n\n      range = [position, position];\n    } else if (insertion.nextCharacter === \"\\n\") {\n      if (insertion.previousCharacter === \"\\n\") {\n        range = [position - 1, position + 1];\n      } else {\n        range = [position, position + 1];\n        position += 1;\n      }\n    } else if (insertion.startLocation.offset - 1 !== 0) {\n      position += 1;\n    }\n\n    const newDocument = new Document([block.removeLastAttribute().copyWithoutText()]);\n    this.setDocument(document.insertDocumentAtRange(newDocument, range));\n    return this.setSelection(position);\n  }\n\n  getPreviousBlock() {\n    const locationRange = this.getLocationRange();\n\n    if (locationRange) {\n      const {\n        index\n      } = locationRange[0];\n\n      if (index > 0) {\n        return this.document.getBlockAtIndex(index - 1);\n      }\n    }\n  }\n\n  getBlock() {\n    const locationRange = this.getLocationRange();\n\n    if (locationRange) {\n      return this.document.getBlockAtIndex(locationRange[0].index);\n    }\n  }\n\n  getAttachmentAtRange(range) {\n    const document = this.document.getDocumentAtRange(range);\n\n    if (document.toString() === \"\".concat(OBJECT_REPLACEMENT_CHARACTER, \"\\n\")) {\n      return document.getAttachments()[0];\n    }\n  }\n\n  notifyDelegateOfCurrentAttributesChange() {\n    var _this$delegate12, _this$delegate12$comp;\n\n    return (_this$delegate12 = this.delegate) === null || _this$delegate12 === void 0 ? void 0 : (_this$delegate12$comp = _this$delegate12.compositionDidChangeCurrentAttributes) === null || _this$delegate12$comp === void 0 ? void 0 : _this$delegate12$comp.call(_this$delegate12, this.currentAttributes);\n  }\n\n  notifyDelegateOfInsertionAtRange(range) {\n    var _this$delegate13, _this$delegate13$comp;\n\n    return (_this$delegate13 = this.delegate) === null || _this$delegate13 === void 0 ? void 0 : (_this$delegate13$comp = _this$delegate13.compositionDidPerformInsertionAtRange) === null || _this$delegate13$comp === void 0 ? void 0 : _this$delegate13$comp.call(_this$delegate13, range);\n  }\n\n  translateUTF16PositionFromOffset(position, offset) {\n    const utf16string = this.document.toUTF16String();\n    const utf16position = utf16string.offsetFromUCS2Offset(position);\n    return utf16string.offsetToUCS2Offset(utf16position + offset);\n  }\n\n}\nComposition.proxyMethod(\"getSelectionManager().getPointRange\");\nComposition.proxyMethod(\"getSelectionManager().setLocationRangeFromPointRange\");\nComposition.proxyMethod(\"getSelectionManager().createLocationRangeFromDOMRange\");\nComposition.proxyMethod(\"getSelectionManager().locationIsCursorTarget\");\nComposition.proxyMethod(\"getSelectionManager().selectionIsExpanded\");\nComposition.proxyMethod(\"delegate?.getSelectionManager\");\n\nclass UndoManager extends BasicObject {\n  constructor(composition) {\n    super(...arguments);\n    this.composition = composition;\n    this.undoEntries = [];\n    this.redoEntries = [];\n  }\n\n  recordUndoEntry(description) {\n    let {\n      context,\n      consolidatable\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const previousEntry = this.undoEntries.slice(-1)[0];\n\n    if (!consolidatable || !entryHasDescriptionAndContext(previousEntry, description, context)) {\n      const undoEntry = this.createEntry({\n        description,\n        context\n      });\n      this.undoEntries.push(undoEntry);\n      this.redoEntries = [];\n    }\n  }\n\n  undo() {\n    const undoEntry = this.undoEntries.pop();\n\n    if (undoEntry) {\n      const redoEntry = this.createEntry(undoEntry);\n      this.redoEntries.push(redoEntry);\n      return this.composition.loadSnapshot(undoEntry.snapshot);\n    }\n  }\n\n  redo() {\n    const redoEntry = this.redoEntries.pop();\n\n    if (redoEntry) {\n      const undoEntry = this.createEntry(redoEntry);\n      this.undoEntries.push(undoEntry);\n      return this.composition.loadSnapshot(redoEntry.snapshot);\n    }\n  }\n\n  canUndo() {\n    return this.undoEntries.length > 0;\n  }\n\n  canRedo() {\n    return this.redoEntries.length > 0;\n  } // Private\n\n\n  createEntry() {\n    let {\n      description,\n      context\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return {\n      description: description === null || description === void 0 ? void 0 : description.toString(),\n      context: JSON.stringify(context),\n      snapshot: this.composition.getSnapshot()\n    };\n  }\n\n}\n\nconst entryHasDescriptionAndContext = (entry, description, context) => (entry === null || entry === void 0 ? void 0 : entry.description) === (description === null || description === void 0 ? void 0 : description.toString()) && (entry === null || entry === void 0 ? void 0 : entry.context) === JSON.stringify(context);\n\nconst attachmentGalleryFilter = function (snapshot) {\n  const filter = new Filter(snapshot);\n  filter.perform();\n  return filter.getSnapshot();\n};\nconst BLOCK_ATTRIBUTE_NAME = \"attachmentGallery\";\nconst TEXT_ATTRIBUTE_NAME = \"presentation\";\nconst TEXT_ATTRIBUTE_VALUE = \"gallery\";\n\nclass Filter {\n  constructor(snapshot) {\n    this.document = snapshot.document;\n    this.selectedRange = snapshot.selectedRange;\n  }\n\n  perform() {\n    this.removeBlockAttribute();\n    return this.applyBlockAttribute();\n  }\n\n  getSnapshot() {\n    return {\n      document: this.document,\n      selectedRange: this.selectedRange\n    };\n  } // Private\n\n\n  removeBlockAttribute() {\n    return this.findRangesOfBlocks().map(range => this.document = this.document.removeAttributeAtRange(BLOCK_ATTRIBUTE_NAME, range));\n  }\n\n  applyBlockAttribute() {\n    let offset = 0;\n    this.findRangesOfPieces().forEach(range => {\n      if (range[1] - range[0] > 1) {\n        range[0] += offset;\n        range[1] += offset;\n\n        if (this.document.getCharacterAtPosition(range[1]) !== \"\\n\") {\n          this.document = this.document.insertBlockBreakAtRange(range[1]);\n\n          if (range[1] < this.selectedRange[1]) {\n            this.moveSelectedRangeForward();\n          }\n\n          range[1]++;\n          offset++;\n        }\n\n        if (range[0] !== 0) {\n          if (this.document.getCharacterAtPosition(range[0] - 1) !== \"\\n\") {\n            this.document = this.document.insertBlockBreakAtRange(range[0]);\n\n            if (range[0] < this.selectedRange[0]) {\n              this.moveSelectedRangeForward();\n            }\n\n            range[0]++;\n            offset++;\n          }\n        }\n\n        this.document = this.document.applyBlockAttributeAtRange(BLOCK_ATTRIBUTE_NAME, true, range);\n      }\n    });\n  }\n\n  findRangesOfBlocks() {\n    return this.document.findRangesForBlockAttribute(BLOCK_ATTRIBUTE_NAME);\n  }\n\n  findRangesOfPieces() {\n    return this.document.findRangesForTextAttribute(TEXT_ATTRIBUTE_NAME, {\n      withValue: TEXT_ATTRIBUTE_VALUE\n    });\n  }\n\n  moveSelectedRangeForward() {\n    this.selectedRange[0] += 1;\n    this.selectedRange[1] += 1;\n  }\n\n}\n\nconst DEFAULT_FILTERS = [attachmentGalleryFilter];\nclass Editor {\n  constructor(composition, selectionManager, element) {\n    this.insertFiles = this.insertFiles.bind(this);\n    this.composition = composition;\n    this.selectionManager = selectionManager;\n    this.element = element;\n    this.undoManager = new UndoManager(this.composition);\n    this.filters = DEFAULT_FILTERS.slice(0);\n  }\n\n  loadDocument(document) {\n    return this.loadSnapshot({\n      document,\n      selectedRange: [0, 0]\n    });\n  }\n\n  loadHTML() {\n    let html = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    const document = HTMLParser.parse(html, {\n      referenceElement: this.element\n    }).getDocument();\n    return this.loadDocument(document);\n  }\n\n  loadJSON(_ref) {\n    let {\n      document,\n      selectedRange\n    } = _ref;\n    document = Document.fromJSON(document);\n    return this.loadSnapshot({\n      document,\n      selectedRange\n    });\n  }\n\n  loadSnapshot(snapshot) {\n    this.undoManager = new UndoManager(this.composition);\n    return this.composition.loadSnapshot(snapshot);\n  }\n\n  getDocument() {\n    return this.composition.document;\n  }\n\n  getSelectedDocument() {\n    return this.composition.getSelectedDocument();\n  }\n\n  getSnapshot() {\n    return this.composition.getSnapshot();\n  }\n\n  toJSON() {\n    return this.getSnapshot();\n  } // Document manipulation\n\n\n  deleteInDirection(direction) {\n    return this.composition.deleteInDirection(direction);\n  }\n\n  insertAttachment(attachment) {\n    return this.composition.insertAttachment(attachment);\n  }\n\n  insertAttachments(attachments) {\n    return this.composition.insertAttachments(attachments);\n  }\n\n  insertDocument(document) {\n    return this.composition.insertDocument(document);\n  }\n\n  insertFile(file) {\n    return this.composition.insertFile(file);\n  }\n\n  insertFiles(files) {\n    return this.composition.insertFiles(files);\n  }\n\n  insertHTML(html) {\n    return this.composition.insertHTML(html);\n  }\n\n  insertString(string) {\n    return this.composition.insertString(string);\n  }\n\n  insertText(text) {\n    return this.composition.insertText(text);\n  }\n\n  insertLineBreak() {\n    return this.composition.insertLineBreak();\n  } // Selection\n\n\n  getSelectedRange() {\n    return this.composition.getSelectedRange();\n  }\n\n  getPosition() {\n    return this.composition.getPosition();\n  }\n\n  getClientRectAtPosition(position) {\n    const locationRange = this.getDocument().locationRangeFromRange([position, position + 1]);\n    return this.selectionManager.getClientRectAtLocationRange(locationRange);\n  }\n\n  expandSelectionInDirection(direction) {\n    return this.composition.expandSelectionInDirection(direction);\n  }\n\n  moveCursorInDirection(direction) {\n    return this.composition.moveCursorInDirection(direction);\n  }\n\n  setSelectedRange(selectedRange) {\n    return this.composition.setSelectedRange(selectedRange);\n  } // Attributes\n\n\n  activateAttribute(name) {\n    let value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    return this.composition.setCurrentAttribute(name, value);\n  }\n\n  attributeIsActive(name) {\n    return this.composition.hasCurrentAttribute(name);\n  }\n\n  canActivateAttribute(name) {\n    return this.composition.canSetCurrentAttribute(name);\n  }\n\n  deactivateAttribute(name) {\n    return this.composition.removeCurrentAttribute(name);\n  } // Nesting level\n\n\n  canDecreaseNestingLevel() {\n    return this.composition.canDecreaseNestingLevel();\n  }\n\n  canIncreaseNestingLevel() {\n    return this.composition.canIncreaseNestingLevel();\n  }\n\n  decreaseNestingLevel() {\n    if (this.canDecreaseNestingLevel()) {\n      return this.composition.decreaseNestingLevel();\n    }\n  }\n\n  increaseNestingLevel() {\n    if (this.canIncreaseNestingLevel()) {\n      return this.composition.increaseNestingLevel();\n    }\n  } // Undo/redo\n\n\n  canRedo() {\n    return this.undoManager.canRedo();\n  }\n\n  canUndo() {\n    return this.undoManager.canUndo();\n  }\n\n  recordUndoEntry(description) {\n    let {\n      context,\n      consolidatable\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this.undoManager.recordUndoEntry(description, {\n      context,\n      consolidatable\n    });\n  }\n\n  redo() {\n    if (this.canRedo()) {\n      return this.undoManager.redo();\n    }\n  }\n\n  undo() {\n    if (this.canUndo()) {\n      return this.undoManager.undo();\n    }\n  }\n\n}\n\n/* eslint-disable\n    no-var,\n    prefer-const,\n*/\nclass LocationMapper {\n  constructor(element) {\n    this.element = element;\n  }\n\n  findLocationFromContainerAndOffset(container, offset) {\n    let {\n      strict\n    } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      strict: true\n    };\n    let childIndex = 0;\n    let foundBlock = false;\n    const location = {\n      index: 0,\n      offset: 0\n    };\n    const attachmentElement = this.findAttachmentElementParentForNode(container);\n\n    if (attachmentElement) {\n      container = attachmentElement.parentNode;\n      offset = findChildIndexOfNode(attachmentElement);\n    }\n\n    const walker = walkTree(this.element, {\n      usingFilter: rejectAttachmentContents\n    });\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode;\n\n      if (node === container && nodeIsTextNode(container)) {\n        if (!nodeIsCursorTarget(node)) {\n          location.offset += offset;\n        }\n\n        break;\n      } else {\n        if (node.parentNode === container) {\n          if (childIndex++ === offset) {\n            break;\n          }\n        } else if (!elementContainsNode(container, node)) {\n          if (childIndex > 0) {\n            break;\n          }\n        }\n\n        if (nodeIsBlockStart(node, {\n          strict\n        })) {\n          if (foundBlock) {\n            location.index++;\n          }\n\n          location.offset = 0;\n          foundBlock = true;\n        } else {\n          location.offset += nodeLength(node);\n        }\n      }\n    }\n\n    return location;\n  }\n\n  findContainerAndOffsetFromLocation(location) {\n    let container, offset;\n\n    if (location.index === 0 && location.offset === 0) {\n      container = this.element;\n      offset = 0;\n\n      while (container.firstChild) {\n        container = container.firstChild;\n\n        if (nodeIsBlockContainer(container)) {\n          offset = 1;\n          break;\n        }\n      }\n\n      return [container, offset];\n    }\n\n    let [node, nodeOffset] = this.findNodeAndOffsetFromLocation(location);\n    if (!node) return;\n\n    if (nodeIsTextNode(node)) {\n      if (nodeLength(node) === 0) {\n        container = node.parentNode.parentNode;\n        offset = findChildIndexOfNode(node.parentNode);\n\n        if (nodeIsCursorTarget(node, {\n          name: \"right\"\n        })) {\n          offset++;\n        }\n      } else {\n        container = node;\n        offset = location.offset - nodeOffset;\n      }\n    } else {\n      container = node.parentNode;\n\n      if (!nodeIsBlockStart(node.previousSibling)) {\n        if (!nodeIsBlockContainer(container)) {\n          while (node === container.lastChild) {\n            node = container;\n            container = container.parentNode;\n\n            if (nodeIsBlockContainer(container)) {\n              break;\n            }\n          }\n        }\n      }\n\n      offset = findChildIndexOfNode(node);\n\n      if (location.offset !== 0) {\n        offset++;\n      }\n    }\n\n    return [container, offset];\n  }\n\n  findNodeAndOffsetFromLocation(location) {\n    let node, nodeOffset;\n    let offset = 0;\n\n    for (const currentNode of this.getSignificantNodesForIndex(location.index)) {\n      const length = nodeLength(currentNode);\n\n      if (location.offset <= offset + length) {\n        if (nodeIsTextNode(currentNode)) {\n          node = currentNode;\n          nodeOffset = offset;\n\n          if (location.offset === nodeOffset && nodeIsCursorTarget(node)) {\n            break;\n          }\n        } else if (!node) {\n          node = currentNode;\n          nodeOffset = offset;\n        }\n      }\n\n      offset += length;\n\n      if (offset > location.offset) {\n        break;\n      }\n    }\n\n    return [node, nodeOffset];\n  } // Private\n\n\n  findAttachmentElementParentForNode(node) {\n    while (node && node !== this.element) {\n      if (nodeIsAttachmentElement(node)) {\n        return node;\n      }\n\n      node = node.parentNode;\n    }\n  }\n\n  getSignificantNodesForIndex(index) {\n    const nodes = [];\n    const walker = walkTree(this.element, {\n      usingFilter: acceptSignificantNodes\n    });\n    let recordingNodes = false;\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode;\n\n      if (nodeIsBlockStartComment(node)) {\n        var blockIndex;\n\n        if (blockIndex != null) {\n          blockIndex++;\n        } else {\n          blockIndex = 0;\n        }\n\n        if (blockIndex === index) {\n          recordingNodes = true;\n        } else if (recordingNodes) {\n          break;\n        }\n      } else if (recordingNodes) {\n        nodes.push(node);\n      }\n    }\n\n    return nodes;\n  }\n\n}\n\nconst nodeLength = function (node) {\n  if (node.nodeType === Node.TEXT_NODE) {\n    if (nodeIsCursorTarget(node)) {\n      return 0;\n    } else {\n      const string = node.textContent;\n      return string.length;\n    }\n  } else if (tagName(node) === \"br\" || nodeIsAttachmentElement(node)) {\n    return 1;\n  } else {\n    return 0;\n  }\n};\n\nconst acceptSignificantNodes = function (node) {\n  if (rejectEmptyTextNodes(node) === NodeFilter.FILTER_ACCEPT) {\n    return rejectAttachmentContents(node);\n  } else {\n    return NodeFilter.FILTER_REJECT;\n  }\n};\n\nconst rejectEmptyTextNodes = function (node) {\n  if (nodeIsEmptyTextNode(node)) {\n    return NodeFilter.FILTER_REJECT;\n  } else {\n    return NodeFilter.FILTER_ACCEPT;\n  }\n};\n\nconst rejectAttachmentContents = function (node) {\n  if (nodeIsAttachmentElement(node.parentNode)) {\n    return NodeFilter.FILTER_REJECT;\n  } else {\n    return NodeFilter.FILTER_ACCEPT;\n  }\n};\n\n/* eslint-disable\n    id-length,\n    no-empty,\n*/\nclass PointMapper {\n  createDOMRangeFromPoint(_ref) {\n    let {\n      x,\n      y\n    } = _ref;\n    let domRange;\n\n    if (document.caretPositionFromPoint) {\n      const {\n        offsetNode,\n        offset\n      } = document.caretPositionFromPoint(x, y);\n      domRange = document.createRange();\n      domRange.setStart(offsetNode, offset);\n      return domRange;\n    } else if (document.caretRangeFromPoint) {\n      return document.caretRangeFromPoint(x, y);\n    } else if (document.body.createTextRange) {\n      const originalDOMRange = getDOMRange();\n\n      try {\n        // IE 11 throws \"Unspecified error\" when using moveToPoint\n        // during a drag-and-drop operation.\n        const textRange = document.body.createTextRange();\n        textRange.moveToPoint(x, y);\n        textRange.select();\n      } catch (error) {}\n\n      domRange = getDOMRange();\n      setDOMRange(originalDOMRange);\n      return domRange;\n    }\n  }\n\n  getClientRectsForDOMRange(domRange) {\n    const array = Array.from(domRange.getClientRects());\n    const start = array[0];\n    const end = array[array.length - 1];\n    return [start, end];\n  }\n\n}\n\n/* eslint-disable\n*/\nclass SelectionManager extends BasicObject {\n  constructor(element) {\n    super(...arguments);\n    this.didMouseDown = this.didMouseDown.bind(this);\n    this.selectionDidChange = this.selectionDidChange.bind(this);\n    this.element = element;\n    this.locationMapper = new LocationMapper(this.element);\n    this.pointMapper = new PointMapper();\n    this.lockCount = 0;\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      withCallback: this.didMouseDown\n    });\n  }\n\n  getLocationRange() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (options.strict === false) {\n      return this.createLocationRangeFromDOMRange(getDOMRange());\n    } else if (options.ignoreLock) {\n      return this.currentLocationRange;\n    } else if (this.lockedLocationRange) {\n      return this.lockedLocationRange;\n    } else {\n      return this.currentLocationRange;\n    }\n  }\n\n  setLocationRange(locationRange) {\n    if (this.lockedLocationRange) return;\n    locationRange = normalizeRange(locationRange);\n    const domRange = this.createDOMRangeFromLocationRange(locationRange);\n\n    if (domRange) {\n      setDOMRange(domRange);\n      this.updateCurrentLocationRange(locationRange);\n    }\n  }\n\n  setLocationRangeFromPointRange(pointRange) {\n    pointRange = normalizeRange(pointRange);\n    const startLocation = this.getLocationAtPoint(pointRange[0]);\n    const endLocation = this.getLocationAtPoint(pointRange[1]);\n    this.setLocationRange([startLocation, endLocation]);\n  }\n\n  getClientRectAtLocationRange(locationRange) {\n    const domRange = this.createDOMRangeFromLocationRange(locationRange);\n\n    if (domRange) {\n      return this.getClientRectsForDOMRange(domRange)[1];\n    }\n  }\n\n  locationIsCursorTarget(location) {\n    const node = Array.from(this.findNodeAndOffsetFromLocation(location))[0];\n    return nodeIsCursorTarget(node);\n  }\n\n  lock() {\n    if (this.lockCount++ === 0) {\n      this.updateCurrentLocationRange();\n      this.lockedLocationRange = this.getLocationRange();\n    }\n  }\n\n  unlock() {\n    if (--this.lockCount === 0) {\n      const {\n        lockedLocationRange\n      } = this;\n      this.lockedLocationRange = null;\n\n      if (lockedLocationRange != null) {\n        return this.setLocationRange(lockedLocationRange);\n      }\n    }\n  }\n\n  clearSelection() {\n    var _getDOMSelection;\n\n    return (_getDOMSelection = getDOMSelection()) === null || _getDOMSelection === void 0 ? void 0 : _getDOMSelection.removeAllRanges();\n  }\n\n  selectionIsCollapsed() {\n    var _getDOMRange;\n\n    return ((_getDOMRange = getDOMRange()) === null || _getDOMRange === void 0 ? void 0 : _getDOMRange.collapsed) === true;\n  }\n\n  selectionIsExpanded() {\n    return !this.selectionIsCollapsed();\n  }\n\n  createLocationRangeFromDOMRange(domRange, options) {\n    if (domRange == null || !this.domRangeWithinElement(domRange)) return;\n    const start = this.findLocationFromContainerAndOffset(domRange.startContainer, domRange.startOffset, options);\n    if (!start) return;\n    const end = domRange.collapsed ? undefined : this.findLocationFromContainerAndOffset(domRange.endContainer, domRange.endOffset, options);\n    return normalizeRange([start, end]);\n  }\n\n  didMouseDown() {\n    return this.pauseTemporarily();\n  }\n\n  pauseTemporarily() {\n    let resumeHandlers;\n    this.paused = true;\n\n    const resume = () => {\n      this.paused = false;\n      clearTimeout(resumeTimeout);\n      Array.from(resumeHandlers).forEach(handler => {\n        handler.destroy();\n      });\n\n      if (elementContainsNode(document, this.element)) {\n        return this.selectionDidChange();\n      }\n    };\n\n    const resumeTimeout = setTimeout(resume, 200);\n    resumeHandlers = [\"mousemove\", \"keydown\"].map(eventName => handleEvent(eventName, {\n      onElement: document,\n      withCallback: resume\n    }));\n  }\n\n  selectionDidChange() {\n    if (!this.paused && !innerElementIsActive(this.element)) {\n      return this.updateCurrentLocationRange();\n    }\n  }\n\n  updateCurrentLocationRange(locationRange) {\n    if (locationRange != null ? locationRange : locationRange = this.createLocationRangeFromDOMRange(getDOMRange())) {\n      if (!rangesAreEqual(locationRange, this.currentLocationRange)) {\n        var _this$delegate, _this$delegate$locati;\n\n        this.currentLocationRange = locationRange;\n        return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$locati = _this$delegate.locationRangeDidChange) === null || _this$delegate$locati === void 0 ? void 0 : _this$delegate$locati.call(_this$delegate, this.currentLocationRange.slice(0));\n      }\n    }\n  }\n\n  createDOMRangeFromLocationRange(locationRange) {\n    const rangeStart = this.findContainerAndOffsetFromLocation(locationRange[0]);\n    const rangeEnd = rangeIsCollapsed(locationRange) ? rangeStart : this.findContainerAndOffsetFromLocation(locationRange[1]) || rangeStart;\n\n    if (rangeStart != null && rangeEnd != null) {\n      const domRange = document.createRange();\n      domRange.setStart(...Array.from(rangeStart || []));\n      domRange.setEnd(...Array.from(rangeEnd || []));\n      return domRange;\n    }\n  }\n\n  getLocationAtPoint(point) {\n    const domRange = this.createDOMRangeFromPoint(point);\n\n    if (domRange) {\n      var _this$createLocationR;\n\n      return (_this$createLocationR = this.createLocationRangeFromDOMRange(domRange)) === null || _this$createLocationR === void 0 ? void 0 : _this$createLocationR[0];\n    }\n  }\n\n  domRangeWithinElement(domRange) {\n    if (domRange.collapsed) {\n      return elementContainsNode(this.element, domRange.startContainer);\n    } else {\n      return elementContainsNode(this.element, domRange.startContainer) && elementContainsNode(this.element, domRange.endContainer);\n    }\n  }\n\n}\nSelectionManager.proxyMethod(\"locationMapper.findLocationFromContainerAndOffset\");\nSelectionManager.proxyMethod(\"locationMapper.findContainerAndOffsetFromLocation\");\nSelectionManager.proxyMethod(\"locationMapper.findNodeAndOffsetFromLocation\");\nSelectionManager.proxyMethod(\"pointMapper.createDOMRangeFromPoint\");\nSelectionManager.proxyMethod(\"pointMapper.getClientRectsForDOMRange\");\n\nvar models = {\n  Attachment,\n  AttachmentManager,\n  AttachmentPiece,\n  Block,\n  Composition,\n  Cocument: Document,\n  Editor,\n  HTMLParser,\n  HTMLSanitizer,\n  LineBreakInsertion,\n  LocationMapper,\n  ManagedAttachment,\n  Piece,\n  PointMapper,\n  SelectionManager,\n  SplittableList,\n  StringPiece,\n  Text,\n  UndoManager\n};\n\nconst Trix = {\n  VERSION: version,\n  config\n};\nObject.assign(Trix, models);\nwindow.Trix = Trix;\n\nclass ObjectGroup {\n  static groupObjects() {\n    let ungroupedObjects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let {\n      depth,\n      asTree\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let group;\n\n    if (asTree) {\n      if (depth == null) {\n        depth = 0;\n      }\n    }\n\n    const objects = [];\n    Array.from(ungroupedObjects).forEach(object => {\n      var _object$canBeGrouped2;\n\n      if (group) {\n        var _object$canBeGrouped, _group$canBeGroupedWi, _group;\n\n        if ((_object$canBeGrouped = object.canBeGrouped) !== null && _object$canBeGrouped !== void 0 && _object$canBeGrouped.call(object, depth) && (_group$canBeGroupedWi = (_group = group[group.length - 1]).canBeGroupedWith) !== null && _group$canBeGroupedWi !== void 0 && _group$canBeGroupedWi.call(_group, object, depth)) {\n          group.push(object);\n          return;\n        } else {\n          objects.push(new this(group, {\n            depth,\n            asTree\n          }));\n          group = null;\n        }\n      }\n\n      if ((_object$canBeGrouped2 = object.canBeGrouped) !== null && _object$canBeGrouped2 !== void 0 && _object$canBeGrouped2.call(object, depth)) {\n        group = [object];\n      } else {\n        objects.push(object);\n      }\n    });\n\n    if (group) {\n      objects.push(new this(group, {\n        depth,\n        asTree\n      }));\n    }\n\n    return objects;\n  }\n\n  constructor() {\n    let objects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let {\n      depth,\n      asTree\n    } = arguments.length > 1 ? arguments[1] : undefined;\n    this.objects = objects;\n\n    if (asTree) {\n      this.depth = depth;\n      this.objects = this.constructor.groupObjects(this.objects, {\n        asTree,\n        depth: this.depth + 1\n      });\n    }\n  }\n\n  getObjects() {\n    return this.objects;\n  }\n\n  getDepth() {\n    return this.depth;\n  }\n\n  getCacheKey() {\n    const keys = [\"objectGroup\"];\n    Array.from(this.getObjects()).forEach(object => {\n      keys.push(object.getCacheKey());\n    });\n    return keys.join(\"/\");\n  }\n\n}\n\nclass ElementStore {\n  constructor(elements) {\n    this.reset(elements);\n  }\n\n  add(element) {\n    const key = getKey(element);\n    this.elements[key] = element;\n  }\n\n  remove(element) {\n    const key = getKey(element);\n    const value = this.elements[key];\n\n    if (value) {\n      delete this.elements[key];\n      return value;\n    }\n  }\n\n  reset() {\n    let elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    this.elements = {};\n    Array.from(elements).forEach(element => {\n      this.add(element);\n    });\n    return elements;\n  }\n\n}\n\nconst getKey = element => element.dataset.trixStoreKey;\n\nclass ObjectView extends BasicObject {\n  constructor(object) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(...arguments);\n    this.object = object;\n    this.options = options;\n    this.childViews = [];\n    this.rootView = this;\n  }\n\n  getNodes() {\n    if (!this.nodes) {\n      this.nodes = this.createNodes();\n    }\n\n    return this.nodes.map(node => node.cloneNode(true));\n  }\n\n  invalidate() {\n    var _this$parentView;\n\n    this.nodes = null;\n    this.childViews = [];\n    return (_this$parentView = this.parentView) === null || _this$parentView === void 0 ? void 0 : _this$parentView.invalidate();\n  }\n\n  invalidateViewForObject(object) {\n    var _this$findViewForObje;\n\n    return (_this$findViewForObje = this.findViewForObject(object)) === null || _this$findViewForObje === void 0 ? void 0 : _this$findViewForObje.invalidate();\n  }\n\n  findOrCreateCachedChildView(viewClass, object, options) {\n    let view = this.getCachedViewForObject(object);\n\n    if (view) {\n      this.recordChildView(view);\n    } else {\n      view = this.createChildView(...arguments);\n      this.cacheViewForObject(view, object);\n    }\n\n    return view;\n  }\n\n  createChildView(viewClass, object) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (object instanceof ObjectGroup) {\n      options.viewClass = viewClass;\n      viewClass = ObjectGroupView;\n    }\n\n    const view = new viewClass(object, options);\n    return this.recordChildView(view);\n  }\n\n  recordChildView(view) {\n    view.parentView = this;\n    view.rootView = this.rootView;\n    this.childViews.push(view);\n    return view;\n  }\n\n  getAllChildViews() {\n    let views = [];\n    this.childViews.forEach(childView => {\n      views.push(childView);\n      views = views.concat(childView.getAllChildViews());\n    });\n    return views;\n  }\n\n  findElement() {\n    return this.findElementForObject(this.object);\n  }\n\n  findElementForObject(object) {\n    const id = object === null || object === void 0 ? void 0 : object.id;\n\n    if (id) {\n      return this.rootView.element.querySelector(\"[data-trix-id='\".concat(id, \"']\"));\n    }\n  }\n\n  findViewForObject(object) {\n    for (const view of this.getAllChildViews()) {\n      if (view.object === object) {\n        return view;\n      }\n    }\n  }\n\n  getViewCache() {\n    if (this.rootView === this) {\n      if (this.isViewCachingEnabled()) {\n        if (!this.viewCache) {\n          this.viewCache = {};\n        }\n\n        return this.viewCache;\n      }\n    } else {\n      return this.rootView.getViewCache();\n    }\n  }\n\n  isViewCachingEnabled() {\n    return this.shouldCacheViews !== false;\n  }\n\n  enableViewCaching() {\n    this.shouldCacheViews = true;\n  }\n\n  disableViewCaching() {\n    this.shouldCacheViews = false;\n  }\n\n  getCachedViewForObject(object) {\n    var _this$getViewCache;\n\n    return (_this$getViewCache = this.getViewCache()) === null || _this$getViewCache === void 0 ? void 0 : _this$getViewCache[object.getCacheKey()];\n  }\n\n  cacheViewForObject(view, object) {\n    const cache = this.getViewCache();\n\n    if (cache) {\n      cache[object.getCacheKey()] = view;\n    }\n  }\n\n  garbageCollectCachedViews() {\n    const cache = this.getViewCache();\n\n    if (cache) {\n      const views = this.getAllChildViews().concat(this);\n      const objectKeys = views.map(view => view.object.getCacheKey());\n\n      for (const key in cache) {\n        if (!objectKeys.includes(key)) {\n          delete cache[key];\n        }\n      }\n    }\n  }\n\n}\nclass ObjectGroupView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.objectGroup = this.object;\n    this.viewClass = this.options.viewClass;\n    delete this.options.viewClass;\n  }\n\n  getChildViews() {\n    if (!this.childViews.length) {\n      Array.from(this.objectGroup.getObjects()).forEach(object => {\n        this.findOrCreateCachedChildView(this.viewClass, object, this.options);\n      });\n    }\n\n    return this.childViews;\n  }\n\n  createNodes() {\n    const element = this.createContainerElement();\n    this.getChildViews().forEach(view => {\n      Array.from(view.getNodes()).forEach(node => {\n        element.appendChild(node);\n      });\n    });\n    return [element];\n  }\n\n  createContainerElement() {\n    let depth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.objectGroup.getDepth();\n    return this.getChildViews()[0].createContainerElement(depth);\n  }\n\n}\n\nconst {\n  css: css$2\n} = config;\nclass AttachmentView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.attachment = this.object;\n    this.attachment.uploadProgressDelegate = this;\n    this.attachmentPiece = this.options.piece;\n  }\n\n  createContentNodes() {\n    return [];\n  }\n\n  createNodes() {\n    let innerElement;\n    const figure = innerElement = makeElement({\n      tagName: \"figure\",\n      className: this.getClassName(),\n      data: this.getData(),\n      editable: false\n    });\n    const href = this.getHref();\n\n    if (href) {\n      innerElement = makeElement({\n        tagName: \"a\",\n        editable: false,\n        attributes: {\n          href,\n          tabindex: -1\n        }\n      });\n      figure.appendChild(innerElement);\n    }\n\n    if (this.attachment.hasContent()) {\n      innerElement.innerHTML = this.attachment.getContent();\n    } else {\n      this.createContentNodes().forEach(node => {\n        innerElement.appendChild(node);\n      });\n    }\n\n    innerElement.appendChild(this.createCaptionElement());\n\n    if (this.attachment.isPending()) {\n      this.progressElement = makeElement({\n        tagName: \"progress\",\n        attributes: {\n          class: css$2.attachmentProgress,\n          value: this.attachment.getUploadProgress(),\n          max: 100\n        },\n        data: {\n          trixMutable: true,\n          trixStoreKey: [\"progressElement\", this.attachment.id].join(\"/\")\n        }\n      });\n      figure.appendChild(this.progressElement);\n    }\n\n    return [createCursorTarget(\"left\"), figure, createCursorTarget(\"right\")];\n  }\n\n  createCaptionElement() {\n    const figcaption = makeElement({\n      tagName: \"figcaption\",\n      className: css$2.attachmentCaption\n    });\n    const caption = this.attachmentPiece.getCaption();\n\n    if (caption) {\n      figcaption.classList.add(\"\".concat(css$2.attachmentCaption, \"--edited\"));\n      figcaption.textContent = caption;\n    } else {\n      let name, size;\n      const captionConfig = this.getCaptionConfig();\n\n      if (captionConfig.name) {\n        name = this.attachment.getFilename();\n      }\n\n      if (captionConfig.size) {\n        size = this.attachment.getFormattedFilesize();\n      }\n\n      if (name) {\n        const nameElement = makeElement({\n          tagName: \"span\",\n          className: css$2.attachmentName,\n          textContent: name\n        });\n        figcaption.appendChild(nameElement);\n      }\n\n      if (size) {\n        if (name) {\n          figcaption.appendChild(document.createTextNode(\" \"));\n        }\n\n        const sizeElement = makeElement({\n          tagName: \"span\",\n          className: css$2.attachmentSize,\n          textContent: size\n        });\n        figcaption.appendChild(sizeElement);\n      }\n    }\n\n    return figcaption;\n  }\n\n  getClassName() {\n    const names = [css$2.attachment, \"\".concat(css$2.attachment, \"--\").concat(this.attachment.getType())];\n    const extension = this.attachment.getExtension();\n\n    if (extension) {\n      names.push(\"\".concat(css$2.attachment, \"--\").concat(extension));\n    }\n\n    return names.join(\" \");\n  }\n\n  getData() {\n    const data = {\n      trixAttachment: JSON.stringify(this.attachment),\n      trixContentType: this.attachment.getContentType(),\n      trixId: this.attachment.id\n    };\n    const {\n      attributes\n    } = this.attachmentPiece;\n\n    if (!attributes.isEmpty()) {\n      data.trixAttributes = JSON.stringify(attributes);\n    }\n\n    if (this.attachment.isPending()) {\n      data.trixSerialize = false;\n    }\n\n    return data;\n  }\n\n  getHref() {\n    if (!htmlContainsTagName(this.attachment.getContent(), \"a\")) {\n      return this.attachment.getHref();\n    }\n  }\n\n  getCaptionConfig() {\n    var _config$attachments$t;\n\n    const type = this.attachment.getType();\n    const captionConfig = copyObject((_config$attachments$t = config.attachments[type]) === null || _config$attachments$t === void 0 ? void 0 : _config$attachments$t.caption);\n\n    if (type === \"file\") {\n      captionConfig.name = true;\n    }\n\n    return captionConfig;\n  }\n\n  findProgressElement() {\n    var _this$findElement;\n\n    return (_this$findElement = this.findElement()) === null || _this$findElement === void 0 ? void 0 : _this$findElement.querySelector(\"progress\");\n  } // Attachment delegate\n\n\n  attachmentDidChangeUploadProgress() {\n    const value = this.attachment.getUploadProgress();\n    const progressElement = this.findProgressElement();\n\n    if (progressElement) {\n      progressElement.value = value;\n    }\n  }\n\n}\n\nconst createCursorTarget = name => makeElement({\n  tagName: \"span\",\n  textContent: ZERO_WIDTH_SPACE,\n  data: {\n    trixCursorTarget: name,\n    trixSerialize: false\n  }\n});\n\nconst htmlContainsTagName = function (html, tagName) {\n  const div = makeElement(\"div\");\n  div.innerHTML = html || \"\";\n  return div.querySelector(tagName);\n};\n\nclass PreviewableAttachmentView extends AttachmentView {\n  constructor() {\n    super(...arguments);\n    this.attachment.previewDelegate = this;\n  }\n\n  createContentNodes() {\n    this.image = makeElement({\n      tagName: \"img\",\n      attributes: {\n        src: \"\"\n      },\n      data: {\n        trixMutable: true\n      }\n    });\n    this.refresh(this.image);\n    return [this.image];\n  }\n\n  createCaptionElement() {\n    const figcaption = super.createCaptionElement(...arguments);\n\n    if (!figcaption.textContent) {\n      figcaption.setAttribute(\"data-trix-placeholder\", config.lang.captionPlaceholder);\n    }\n\n    return figcaption;\n  }\n\n  refresh(image) {\n    if (!image) {\n      var _this$findElement;\n\n      image = (_this$findElement = this.findElement()) === null || _this$findElement === void 0 ? void 0 : _this$findElement.querySelector(\"img\");\n    }\n\n    if (image) {\n      return this.updateAttributesForImage(image);\n    }\n  }\n\n  updateAttributesForImage(image) {\n    const url = this.attachment.getURL();\n    const previewURL = this.attachment.getPreviewURL();\n    image.src = previewURL || url;\n\n    if (previewURL === url) {\n      image.removeAttribute(\"data-trix-serialized-attributes\");\n    } else {\n      const serializedAttributes = JSON.stringify({\n        src: url\n      });\n      image.setAttribute(\"data-trix-serialized-attributes\", serializedAttributes);\n    }\n\n    const width = this.attachment.getWidth();\n    const height = this.attachment.getHeight();\n\n    if (width != null) {\n      image.width = width;\n    }\n\n    if (height != null) {\n      image.height = height;\n    }\n\n    const storeKey = [\"imageElement\", this.attachment.id, image.src, image.width, image.height].join(\"/\");\n    image.dataset.trixStoreKey = storeKey;\n  } // Attachment delegate\n\n\n  attachmentDidChangeAttributes() {\n    this.refresh(this.image);\n    return this.refresh();\n  }\n\n}\n\n/* eslint-disable\n    no-useless-escape,\n    no-var,\n*/\nclass PieceView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.piece = this.object;\n    this.attributes = this.piece.getAttributes();\n    this.textConfig = this.options.textConfig;\n    this.context = this.options.context;\n\n    if (this.piece.attachment) {\n      this.attachment = this.piece.attachment;\n    } else {\n      this.string = this.piece.toString();\n    }\n  }\n\n  createNodes() {\n    let nodes = this.attachment ? this.createAttachmentNodes() : this.createStringNodes();\n    const element = this.createElement();\n\n    if (element) {\n      const innerElement = findInnerElement(element);\n      Array.from(nodes).forEach(node => {\n        innerElement.appendChild(node);\n      });\n      nodes = [element];\n    }\n\n    return nodes;\n  }\n\n  createAttachmentNodes() {\n    const constructor = this.attachment.isPreviewable() ? PreviewableAttachmentView : AttachmentView;\n    const view = this.createChildView(constructor, this.piece.attachment, {\n      piece: this.piece\n    });\n    return view.getNodes();\n  }\n\n  createStringNodes() {\n    var _this$textConfig;\n\n    if ((_this$textConfig = this.textConfig) !== null && _this$textConfig !== void 0 && _this$textConfig.plaintext) {\n      return [document.createTextNode(this.string)];\n    } else {\n      const nodes = [];\n      const iterable = this.string.split(\"\\n\");\n\n      for (let index = 0; index < iterable.length; index++) {\n        const substring = iterable[index];\n\n        if (index > 0) {\n          const element = makeElement(\"br\");\n          nodes.push(element);\n        }\n\n        if (substring.length) {\n          const node = document.createTextNode(this.preserveSpaces(substring));\n          nodes.push(node);\n        }\n      }\n\n      return nodes;\n    }\n  }\n\n  createElement() {\n    let element, key, value;\n    const styles = {};\n\n    for (key in this.attributes) {\n      value = this.attributes[key];\n      const config = getTextConfig(key);\n\n      if (config) {\n        if (config.tagName) {\n          var innerElement;\n          const pendingElement = makeElement(config.tagName);\n\n          if (innerElement) {\n            innerElement.appendChild(pendingElement);\n            innerElement = pendingElement;\n          } else {\n            element = innerElement = pendingElement;\n          }\n        }\n\n        if (config.styleProperty) {\n          styles[config.styleProperty] = value;\n        }\n\n        if (config.style) {\n          for (key in config.style) {\n            value = config.style[key];\n            styles[key] = value;\n          }\n        }\n      }\n    }\n\n    if (Object.keys(styles).length) {\n      if (!element) {\n        element = makeElement(\"span\");\n      }\n\n      for (key in styles) {\n        value = styles[key];\n        element.style[key] = value;\n      }\n    }\n\n    return element;\n  }\n\n  createContainerElement() {\n    for (const key in this.attributes) {\n      const value = this.attributes[key];\n      const config = getTextConfig(key);\n\n      if (config) {\n        if (config.groupTagName) {\n          const attributes = {};\n          attributes[key] = value;\n          return makeElement(config.groupTagName, attributes);\n        }\n      }\n    }\n  }\n\n  preserveSpaces(string) {\n    if (this.context.isLast) {\n      string = string.replace(/\\ $/, NON_BREAKING_SPACE);\n    }\n\n    string = string.replace(/(\\S)\\ {3}(\\S)/g, \"$1 \".concat(NON_BREAKING_SPACE, \" $2\")).replace(/\\ {2}/g, \"\".concat(NON_BREAKING_SPACE, \" \")).replace(/\\ {2}/g, \" \".concat(NON_BREAKING_SPACE));\n\n    if (this.context.isFirst || this.context.followsWhitespace) {\n      string = string.replace(/^\\ /, NON_BREAKING_SPACE);\n    }\n\n    return string;\n  }\n\n}\n\n/* eslint-disable\n    no-var,\n*/\nclass TextView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.text = this.object;\n    this.textConfig = this.options.textConfig;\n  }\n\n  createNodes() {\n    const nodes = [];\n    const pieces = ObjectGroup.groupObjects(this.getPieces());\n    const lastIndex = pieces.length - 1;\n\n    for (let index = 0; index < pieces.length; index++) {\n      const piece = pieces[index];\n      const context = {};\n\n      if (index === 0) {\n        context.isFirst = true;\n      }\n\n      if (index === lastIndex) {\n        context.isLast = true;\n      }\n\n      if (endsWithWhitespace(previousPiece)) {\n        context.followsWhitespace = true;\n      }\n\n      const view = this.findOrCreateCachedChildView(PieceView, piece, {\n        textConfig: this.textConfig,\n        context\n      });\n      nodes.push(...Array.from(view.getNodes() || []));\n      var previousPiece = piece;\n    }\n\n    return nodes;\n  }\n\n  getPieces() {\n    return Array.from(this.text.getPieces()).filter(piece => !piece.hasAttribute(\"blockBreak\"));\n  }\n\n}\n\nconst endsWithWhitespace = piece => /\\s$/.test(piece === null || piece === void 0 ? void 0 : piece.toString());\n\nconst {\n  css: css$1\n} = config;\nclass BlockView extends ObjectView {\n  constructor() {\n    super(...arguments);\n    this.block = this.object;\n    this.attributes = this.block.getAttributes();\n  }\n\n  createNodes() {\n    const comment = document.createComment(\"block\");\n    const nodes = [comment];\n\n    if (this.block.isEmpty()) {\n      nodes.push(makeElement(\"br\"));\n    } else {\n      var _getBlockConfig;\n\n      const textConfig = (_getBlockConfig = getBlockConfig(this.block.getLastAttribute())) === null || _getBlockConfig === void 0 ? void 0 : _getBlockConfig.text;\n      const textView = this.findOrCreateCachedChildView(TextView, this.block.text, {\n        textConfig\n      });\n      nodes.push(...Array.from(textView.getNodes() || []));\n\n      if (this.shouldAddExtraNewlineElement()) {\n        nodes.push(makeElement(\"br\"));\n      }\n    }\n\n    if (this.attributes.length) {\n      return nodes;\n    } else {\n      let attributes;\n      const {\n        tagName\n      } = config.blockAttributes.default;\n\n      if (this.block.isRTL()) {\n        attributes = {\n          dir: \"rtl\"\n        };\n      }\n\n      const element = makeElement({\n        tagName,\n        attributes\n      });\n      nodes.forEach(node => element.appendChild(node));\n      return [element];\n    }\n  }\n\n  createContainerElement(depth) {\n    let attributes, className;\n    const attributeName = this.attributes[depth];\n    const {\n      tagName\n    } = getBlockConfig(attributeName);\n\n    if (depth === 0 && this.block.isRTL()) {\n      attributes = {\n        dir: \"rtl\"\n      };\n    }\n\n    if (attributeName === \"attachmentGallery\") {\n      const size = this.block.getBlockBreakPosition();\n      className = \"\".concat(css$1.attachmentGallery, \" \").concat(css$1.attachmentGallery, \"--\").concat(size);\n    }\n\n    return makeElement({\n      tagName,\n      className,\n      attributes\n    });\n  } // A single <br> at the end of a block element has no visual representation\n  // so add an extra one.\n\n\n  shouldAddExtraNewlineElement() {\n    return /\\n\\n$/.test(this.block.toString());\n  }\n\n}\n\nclass DocumentView extends ObjectView {\n  static render(document) {\n    const element = makeElement(\"div\");\n    const view = new this(document, {\n      element\n    });\n    view.render();\n    view.sync();\n    return element;\n  }\n\n  constructor() {\n    super(...arguments);\n    this.element = this.options.element;\n    this.elementStore = new ElementStore();\n    this.setDocument(this.object);\n  }\n\n  setDocument(document) {\n    if (!document.isEqualTo(this.document)) {\n      this.document = this.object = document;\n    }\n  }\n\n  render() {\n    this.childViews = [];\n    this.shadowElement = makeElement(\"div\");\n\n    if (!this.document.isEmpty()) {\n      const objects = ObjectGroup.groupObjects(this.document.getBlocks(), {\n        asTree: true\n      });\n      Array.from(objects).forEach(object => {\n        const view = this.findOrCreateCachedChildView(BlockView, object);\n        Array.from(view.getNodes()).map(node => this.shadowElement.appendChild(node));\n      });\n    }\n  }\n\n  isSynced() {\n    return elementsHaveEqualHTML(this.shadowElement, this.element);\n  }\n\n  sync() {\n    const fragment = this.createDocumentFragmentForSync();\n\n    while (this.element.lastChild) {\n      this.element.removeChild(this.element.lastChild);\n    }\n\n    this.element.appendChild(fragment);\n    return this.didSync();\n  } // Private\n\n\n  didSync() {\n    this.elementStore.reset(findStoredElements(this.element));\n    return defer(() => this.garbageCollectCachedViews());\n  }\n\n  createDocumentFragmentForSync() {\n    const fragment = document.createDocumentFragment();\n    Array.from(this.shadowElement.childNodes).forEach(node => {\n      fragment.appendChild(node.cloneNode(true));\n    });\n    Array.from(findStoredElements(fragment)).forEach(element => {\n      const storedElement = this.elementStore.remove(element);\n\n      if (storedElement) {\n        element.parentNode.replaceChild(storedElement, element);\n      }\n    });\n    return fragment;\n  }\n\n}\n\nconst findStoredElements = element => element.querySelectorAll(\"[data-trix-store-key]\");\n\nconst elementsHaveEqualHTML = (element, otherElement) => ignoreSpaces(element.innerHTML) === ignoreSpaces(otherElement.innerHTML);\n\nconst ignoreSpaces = html => html.replace(/&nbsp;/g, \" \");\n\n/* eslint-disable\n    no-empty,\n*/\nconst unserializableElementSelector = \"[data-trix-serialize=false]\";\nconst unserializableAttributeNames = [\"contenteditable\", \"data-trix-id\", \"data-trix-store-key\", \"data-trix-mutable\", \"data-trix-placeholder\", \"tabindex\"];\nconst serializedAttributesAttribute = \"data-trix-serialized-attributes\";\nconst serializedAttributesSelector = \"[\".concat(serializedAttributesAttribute, \"]\");\nconst blockCommentPattern = new RegExp(\"<!--block-->\", \"g\");\nconst serializers = {\n  \"application/json\": function (serializable) {\n    let document;\n\n    if (serializable instanceof Document) {\n      document = serializable;\n    } else if (serializable instanceof HTMLElement) {\n      document = HTMLParser.parse(serializable.innerHTML).getDocument();\n    } else {\n      throw new Error(\"unserializable object\");\n    }\n\n    return document.toSerializableDocument().toJSONString();\n  },\n  \"text/html\": function (serializable) {\n    let element;\n\n    if (serializable instanceof Document) {\n      element = DocumentView.render(serializable);\n    } else if (serializable instanceof HTMLElement) {\n      element = serializable.cloneNode(true);\n    } else {\n      throw new Error(\"unserializable object\");\n    } // Remove unserializable elements\n\n\n    Array.from(element.querySelectorAll(unserializableElementSelector)).forEach(el => {\n      removeNode(el);\n    }); // Remove unserializable attributes\n\n    unserializableAttributeNames.forEach(attribute => {\n      Array.from(element.querySelectorAll(\"[\".concat(attribute, \"]\"))).forEach(el => {\n        el.removeAttribute(attribute);\n      });\n    }); // Rewrite elements with serialized attribute overrides\n\n    Array.from(element.querySelectorAll(serializedAttributesSelector)).forEach(el => {\n      try {\n        const attributes = JSON.parse(el.getAttribute(serializedAttributesAttribute));\n        el.removeAttribute(serializedAttributesAttribute);\n\n        for (const name in attributes) {\n          const value = attributes[name];\n          el.setAttribute(name, value);\n        }\n      } catch (error) {}\n    });\n    return element.innerHTML.replace(blockCommentPattern, \"\");\n  }\n};\nconst deserializers = {\n  \"application/json\": function (string) {\n    return Document.fromJSONString(string);\n  },\n  \"text/html\": function (string) {\n    return HTMLParser.parse(string).getDocument();\n  }\n};\nconst serializeToContentType = function (serializable, contentType) {\n  const serializer = serializers[contentType];\n\n  if (serializer) {\n    return serializer(serializable);\n  } else {\n    throw new Error(\"unknown content type: \".concat(contentType));\n  }\n};\nconst deserializeFromContentType = function (string, contentType) {\n  const deserializer = deserializers[contentType];\n\n  if (deserializer) {\n    return deserializer(string);\n  } else {\n    throw new Error(\"unknown content type: \".concat(contentType));\n  }\n};\n\nconst mutableAttributeName = \"data-trix-mutable\";\nconst mutableSelector = \"[\".concat(mutableAttributeName, \"]\");\nconst options = {\n  attributes: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true\n};\nclass MutationObserver extends BasicObject {\n  constructor(element) {\n    super(element);\n    this.didMutate = this.didMutate.bind(this);\n    this.element = element;\n    this.observer = new window.MutationObserver(this.didMutate);\n    this.start();\n  }\n\n  start() {\n    this.reset();\n    return this.observer.observe(this.element, options);\n  }\n\n  stop() {\n    return this.observer.disconnect();\n  }\n\n  didMutate(mutations) {\n    this.mutations.push(...Array.from(this.findSignificantMutations(mutations) || []));\n\n    if (this.mutations.length) {\n      var _this$delegate, _this$delegate$elemen;\n\n      (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$elemen = _this$delegate.elementDidMutate) === null || _this$delegate$elemen === void 0 ? void 0 : _this$delegate$elemen.call(_this$delegate, this.getMutationSummary());\n      return this.reset();\n    }\n  } // Private\n\n\n  reset() {\n    this.mutations = [];\n  }\n\n  findSignificantMutations(mutations) {\n    return mutations.filter(mutation => {\n      return this.mutationIsSignificant(mutation);\n    });\n  }\n\n  mutationIsSignificant(mutation) {\n    if (this.nodeIsMutable(mutation.target)) {\n      return false;\n    }\n\n    for (const node of Array.from(this.nodesModifiedByMutation(mutation))) {\n      if (this.nodeIsSignificant(node)) return true;\n    }\n\n    return false;\n  }\n\n  nodeIsSignificant(node) {\n    return node !== this.element && !this.nodeIsMutable(node) && !nodeIsEmptyTextNode(node);\n  }\n\n  nodeIsMutable(node) {\n    return findClosestElementFromNode(node, {\n      matchingSelector: mutableSelector\n    });\n  }\n\n  nodesModifiedByMutation(mutation) {\n    const nodes = [];\n\n    switch (mutation.type) {\n      case \"attributes\":\n        if (mutation.attributeName !== mutableAttributeName) {\n          nodes.push(mutation.target);\n        }\n\n        break;\n\n      case \"characterData\":\n        // Changes to text nodes should consider the parent element\n        nodes.push(mutation.target.parentNode);\n        nodes.push(mutation.target);\n        break;\n\n      case \"childList\":\n        // Consider each added or removed node\n        nodes.push(...Array.from(mutation.addedNodes || []));\n        nodes.push(...Array.from(mutation.removedNodes || []));\n        break;\n    }\n\n    return nodes;\n  }\n\n  getMutationSummary() {\n    return this.getTextMutationSummary();\n  }\n\n  getTextMutationSummary() {\n    const {\n      additions,\n      deletions\n    } = this.getTextChangesFromCharacterData();\n    const textChanges = this.getTextChangesFromChildList();\n    Array.from(textChanges.additions).forEach(addition => {\n      if (!Array.from(additions).includes(addition)) {\n        additions.push(addition);\n      }\n    });\n    deletions.push(...Array.from(textChanges.deletions || []));\n    const summary = {};\n    const added = additions.join(\"\");\n\n    if (added) {\n      summary.textAdded = added;\n    }\n\n    const deleted = deletions.join(\"\");\n\n    if (deleted) {\n      summary.textDeleted = deleted;\n    }\n\n    return summary;\n  }\n\n  getMutationsByType(type) {\n    return Array.from(this.mutations).filter(mutation => mutation.type === type);\n  }\n\n  getTextChangesFromChildList() {\n    let textAdded, textRemoved;\n    const addedNodes = [];\n    const removedNodes = [];\n    Array.from(this.getMutationsByType(\"childList\")).forEach(mutation => {\n      addedNodes.push(...Array.from(mutation.addedNodes || []));\n      removedNodes.push(...Array.from(mutation.removedNodes || []));\n    });\n    const singleBlockCommentRemoved = addedNodes.length === 0 && removedNodes.length === 1 && nodeIsBlockStartComment(removedNodes[0]);\n\n    if (singleBlockCommentRemoved) {\n      textAdded = [];\n      textRemoved = [\"\\n\"];\n    } else {\n      textAdded = getTextForNodes(addedNodes);\n      textRemoved = getTextForNodes(removedNodes);\n    }\n\n    const additions = textAdded.filter((text, index) => text !== textRemoved[index]).map(normalizeSpaces);\n    const deletions = textRemoved.filter((text, index) => text !== textAdded[index]).map(normalizeSpaces);\n    return {\n      additions,\n      deletions\n    };\n  }\n\n  getTextChangesFromCharacterData() {\n    let added, removed;\n    const characterMutations = this.getMutationsByType(\"characterData\");\n\n    if (characterMutations.length) {\n      const startMutation = characterMutations[0],\n            endMutation = characterMutations[characterMutations.length - 1];\n      const oldString = normalizeSpaces(startMutation.oldValue);\n      const newString = normalizeSpaces(endMutation.target.data);\n      const summarized = summarizeStringChange(oldString, newString);\n      added = summarized.added;\n      removed = summarized.removed;\n    }\n\n    return {\n      additions: added ? [added] : [],\n      deletions: removed ? [removed] : []\n    };\n  }\n\n}\n\nconst getTextForNodes = function () {\n  let nodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const text = [];\n\n  for (const node of Array.from(nodes)) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        text.push(node.data);\n        break;\n\n      case Node.ELEMENT_NODE:\n        if (tagName(node) === \"br\") {\n          text.push(\"\\n\");\n        } else {\n          text.push(...Array.from(getTextForNodes(node.childNodes) || []));\n        }\n\n        break;\n    }\n  }\n\n  return text;\n};\n\nclass Controller extends BasicObject {}\n\n/* eslint-disable\n    no-empty,\n*/\nclass FileVerificationOperation extends Operation {\n  constructor(file) {\n    super(...arguments);\n    this.file = file;\n  }\n\n  perform(callback) {\n    const reader = new FileReader();\n\n    reader.onerror = () => callback(false);\n\n    reader.onload = () => {\n      reader.onerror = null;\n\n      try {\n        reader.abort();\n      } catch (error) {}\n\n      return callback(true, this.file);\n    };\n\n    return reader.readAsArrayBuffer(this.file);\n  }\n\n}\n\nclass InputController extends BasicObject {\n  constructor(element) {\n    super(...arguments);\n    this.element = element;\n    this.mutationObserver = new MutationObserver(this.element);\n    this.mutationObserver.delegate = this;\n\n    for (const eventName in this.constructor.events) {\n      handleEvent(eventName, {\n        onElement: this.element,\n        withCallback: this.handlerFor(eventName)\n      });\n    }\n  }\n\n  elementDidMutate(mutationSummary) {}\n\n  editorWillSyncDocumentView() {\n    return this.mutationObserver.stop();\n  }\n\n  editorDidSyncDocumentView() {\n    return this.mutationObserver.start();\n  }\n\n  requestRender() {\n    var _this$delegate, _this$delegate$inputC;\n\n    return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$inputC = _this$delegate.inputControllerDidRequestRender) === null || _this$delegate$inputC === void 0 ? void 0 : _this$delegate$inputC.call(_this$delegate);\n  }\n\n  requestReparse() {\n    var _this$delegate2, _this$delegate2$input;\n\n    (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$input = _this$delegate2.inputControllerDidRequestReparse) === null || _this$delegate2$input === void 0 ? void 0 : _this$delegate2$input.call(_this$delegate2);\n    return this.requestRender();\n  }\n\n  attachFiles(files) {\n    const operations = Array.from(files).map(file => new FileVerificationOperation(file));\n    return Promise.all(operations).then(files => {\n      this.handleInput(function () {\n        var _this$delegate3, _this$responder;\n\n        (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : _this$delegate3.inputControllerWillAttachFiles();\n        (_this$responder = this.responder) === null || _this$responder === void 0 ? void 0 : _this$responder.insertFiles(files);\n        return this.requestRender();\n      });\n    });\n  } // Private\n\n\n  handlerFor(eventName) {\n    return event => {\n      if (!event.defaultPrevented) {\n        this.handleInput(() => {\n          if (!innerElementIsActive(this.element)) {\n            this.eventName = eventName;\n            this.constructor.events[eventName].call(this, event);\n          }\n        });\n      }\n    };\n  }\n\n  handleInput(callback) {\n    try {\n      var _this$delegate4;\n\n      (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.inputControllerWillHandleInput();\n      callback.call(this);\n    } finally {\n      var _this$delegate5;\n\n      (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : _this$delegate5.inputControllerDidHandleInput();\n    }\n  }\n\n  createLinkHTML(href, text) {\n    const link = document.createElement(\"a\");\n    link.href = href;\n    link.textContent = text ? text : href;\n    return link.outerHTML;\n  }\n\n}\n\n_defineProperty(InputController, \"events\", {});\n\nvar _$codePointAt, _;\nconst {\n  browser,\n  keyNames: keyNames$1\n} = config;\nlet pastedFileCount = 0;\nclass Level0InputController extends InputController {\n  constructor() {\n    super(...arguments);\n    this.resetInputSummary();\n  }\n\n  setInputSummary() {\n    let summary = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.inputSummary.eventName = this.eventName;\n\n    for (const key in summary) {\n      const value = summary[key];\n      this.inputSummary[key] = value;\n    }\n\n    return this.inputSummary;\n  }\n\n  resetInputSummary() {\n    this.inputSummary = {};\n  }\n\n  reset() {\n    this.resetInputSummary();\n    return selectionChangeObserver.reset();\n  } // Mutation observer delegate\n\n\n  elementDidMutate(mutationSummary) {\n    if (this.isComposing()) {\n      var _this$delegate, _this$delegate$inputC;\n\n      return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$inputC = _this$delegate.inputControllerDidAllowUnhandledInput) === null || _this$delegate$inputC === void 0 ? void 0 : _this$delegate$inputC.call(_this$delegate);\n    } else {\n      return this.handleInput(function () {\n        if (this.mutationIsSignificant(mutationSummary)) {\n          if (this.mutationIsExpected(mutationSummary)) {\n            this.requestRender();\n          } else {\n            this.requestReparse();\n          }\n        }\n\n        return this.reset();\n      });\n    }\n  }\n\n  mutationIsExpected(_ref) {\n    let {\n      textAdded,\n      textDeleted\n    } = _ref;\n\n    if (this.inputSummary.preferDocument) {\n      return true;\n    }\n\n    const mutationAdditionMatchesSummary = textAdded != null ? textAdded === this.inputSummary.textAdded : !this.inputSummary.textAdded;\n    const mutationDeletionMatchesSummary = textDeleted != null ? this.inputSummary.didDelete : !this.inputSummary.didDelete;\n    const unexpectedNewlineAddition = [\"\\n\", \" \\n\"].includes(textAdded) && !mutationAdditionMatchesSummary;\n    const unexpectedNewlineDeletion = textDeleted === \"\\n\" && !mutationDeletionMatchesSummary;\n    const singleUnexpectedNewline = unexpectedNewlineAddition && !unexpectedNewlineDeletion || unexpectedNewlineDeletion && !unexpectedNewlineAddition;\n\n    if (singleUnexpectedNewline) {\n      const range = this.getSelectedRange();\n\n      if (range) {\n        var _this$responder;\n\n        const offset = unexpectedNewlineAddition ? textAdded.replace(/\\n$/, \"\").length || -1 : (textAdded === null || textAdded === void 0 ? void 0 : textAdded.length) || 1;\n\n        if ((_this$responder = this.responder) !== null && _this$responder !== void 0 && _this$responder.positionIsBlockBreak(range[1] + offset)) {\n          return true;\n        }\n      }\n    }\n\n    return mutationAdditionMatchesSummary && mutationDeletionMatchesSummary;\n  }\n\n  mutationIsSignificant(mutationSummary) {\n    var _this$compositionInpu;\n\n    const textChanged = Object.keys(mutationSummary).length > 0;\n    const composedEmptyString = ((_this$compositionInpu = this.compositionInput) === null || _this$compositionInpu === void 0 ? void 0 : _this$compositionInpu.getEndData()) === \"\";\n    return textChanged || !composedEmptyString;\n  } // Private\n\n\n  getCompositionInput() {\n    if (this.isComposing()) {\n      return this.compositionInput;\n    } else {\n      this.compositionInput = new CompositionInput(this);\n    }\n  }\n\n  isComposing() {\n    return this.compositionInput && !this.compositionInput.isEnded();\n  }\n\n  deleteInDirection(direction, event) {\n    var _this$responder2;\n\n    if (((_this$responder2 = this.responder) === null || _this$responder2 === void 0 ? void 0 : _this$responder2.deleteInDirection(direction)) === false) {\n      if (event) {\n        event.preventDefault();\n        return this.requestRender();\n      }\n    } else {\n      return this.setInputSummary({\n        didDelete: true\n      });\n    }\n  }\n\n  serializeSelectionToDataTransfer(dataTransfer) {\n    var _this$responder3;\n\n    if (!dataTransferIsWritable(dataTransfer)) return;\n    const document = (_this$responder3 = this.responder) === null || _this$responder3 === void 0 ? void 0 : _this$responder3.getSelectedDocument().toSerializableDocument();\n    dataTransfer.setData(\"application/x-trix-document\", JSON.stringify(document));\n    dataTransfer.setData(\"text/html\", DocumentView.render(document).innerHTML);\n    dataTransfer.setData(\"text/plain\", document.toString().replace(/\\n$/, \"\"));\n    return true;\n  }\n\n  canAcceptDataTransfer(dataTransfer) {\n    const types = {};\n    Array.from((dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.types) || []).forEach(type => {\n      types[type] = true;\n    });\n    return types.Files || types[\"application/x-trix-document\"] || types[\"text/html\"] || types[\"text/plain\"];\n  }\n\n  getPastedHTMLUsingHiddenElement(callback) {\n    const selectedRange = this.getSelectedRange();\n    const style = {\n      position: \"absolute\",\n      left: \"\".concat(window.pageXOffset, \"px\"),\n      top: \"\".concat(window.pageYOffset, \"px\"),\n      opacity: 0\n    };\n    const element = makeElement({\n      style,\n      tagName: \"div\",\n      editable: true\n    });\n    document.body.appendChild(element);\n    element.focus();\n    return requestAnimationFrame(() => {\n      const html = element.innerHTML;\n      removeNode(element);\n      this.setSelectedRange(selectedRange);\n      return callback(html);\n    });\n  }\n\n}\n\n_defineProperty(Level0InputController, \"events\", {\n  keydown(event) {\n    if (!this.isComposing()) {\n      this.resetInputSummary();\n    }\n\n    this.inputSummary.didInput = true;\n    const keyName = keyNames$1[event.keyCode];\n\n    if (keyName) {\n      var _context2;\n\n      let context = this.keys;\n      [\"ctrl\", \"alt\", \"shift\", \"meta\"].forEach(modifier => {\n        if (event[\"\".concat(modifier, \"Key\")]) {\n          var _context;\n\n          if (modifier === \"ctrl\") {\n            modifier = \"control\";\n          }\n\n          context = (_context = context) === null || _context === void 0 ? void 0 : _context[modifier];\n        }\n      });\n\n      if (((_context2 = context) === null || _context2 === void 0 ? void 0 : _context2[keyName]) != null) {\n        this.setInputSummary({\n          keyName\n        });\n        selectionChangeObserver.reset();\n        context[keyName].call(this, event);\n      }\n    }\n\n    if (keyEventIsKeyboardCommand(event)) {\n      const character = String.fromCharCode(event.keyCode).toLowerCase();\n\n      if (character) {\n        var _this$delegate3;\n\n        const keys = [\"alt\", \"shift\"].map(modifier => {\n          if (event[\"\".concat(modifier, \"Key\")]) {\n            return modifier;\n          }\n        }).filter(key => key);\n        keys.push(character);\n\n        if ((_this$delegate3 = this.delegate) !== null && _this$delegate3 !== void 0 && _this$delegate3.inputControllerDidReceiveKeyboardCommand(keys)) {\n          event.preventDefault();\n        }\n      }\n    }\n  },\n\n  keypress(event) {\n    if (this.inputSummary.eventName != null) return;\n    if (event.metaKey) return;\n    if (event.ctrlKey && !event.altKey) return;\n    const string = stringFromKeyEvent(event);\n\n    if (string) {\n      var _this$delegate4, _this$responder9;\n\n      (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.inputControllerWillPerformTyping();\n      (_this$responder9 = this.responder) === null || _this$responder9 === void 0 ? void 0 : _this$responder9.insertString(string);\n      return this.setInputSummary({\n        textAdded: string,\n        didDelete: this.selectionIsExpanded()\n      });\n    }\n  },\n\n  textInput(event) {\n    // Handle autocapitalization\n    const {\n      data\n    } = event;\n    const {\n      textAdded\n    } = this.inputSummary;\n\n    if (textAdded && textAdded !== data && textAdded.toUpperCase() === data) {\n      var _this$responder10;\n\n      const range = this.getSelectedRange();\n      this.setSelectedRange([range[0], range[1] + textAdded.length]);\n      (_this$responder10 = this.responder) === null || _this$responder10 === void 0 ? void 0 : _this$responder10.insertString(data);\n      this.setInputSummary({\n        textAdded: data\n      });\n      return this.setSelectedRange(range);\n    }\n  },\n\n  dragenter(event) {\n    event.preventDefault();\n  },\n\n  dragstart(event) {\n    var _this$delegate5, _this$delegate5$input;\n\n    this.serializeSelectionToDataTransfer(event.dataTransfer);\n    this.draggedRange = this.getSelectedRange();\n    return (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : (_this$delegate5$input = _this$delegate5.inputControllerDidStartDrag) === null || _this$delegate5$input === void 0 ? void 0 : _this$delegate5$input.call(_this$delegate5);\n  },\n\n  dragover(event) {\n    if (this.draggedRange || this.canAcceptDataTransfer(event.dataTransfer)) {\n      event.preventDefault();\n      const draggingPoint = {\n        x: event.clientX,\n        y: event.clientY\n      };\n\n      if (!objectsAreEqual(draggingPoint, this.draggingPoint)) {\n        var _this$delegate6, _this$delegate6$input;\n\n        this.draggingPoint = draggingPoint;\n        return (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : (_this$delegate6$input = _this$delegate6.inputControllerDidReceiveDragOverPoint) === null || _this$delegate6$input === void 0 ? void 0 : _this$delegate6$input.call(_this$delegate6, this.draggingPoint);\n      }\n    }\n  },\n\n  dragend(event) {\n    var _this$delegate7, _this$delegate7$input;\n\n    (_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : (_this$delegate7$input = _this$delegate7.inputControllerDidCancelDrag) === null || _this$delegate7$input === void 0 ? void 0 : _this$delegate7$input.call(_this$delegate7);\n    this.draggedRange = null;\n    this.draggingPoint = null;\n  },\n\n  drop(event) {\n    var _event$dataTransfer, _this$responder11;\n\n    event.preventDefault();\n    const files = (_event$dataTransfer = event.dataTransfer) === null || _event$dataTransfer === void 0 ? void 0 : _event$dataTransfer.files;\n    const documentJSON = event.dataTransfer.getData(\"application/x-trix-document\");\n    const point = {\n      x: event.clientX,\n      y: event.clientY\n    };\n    (_this$responder11 = this.responder) === null || _this$responder11 === void 0 ? void 0 : _this$responder11.setLocationRangeFromPointRange(point);\n\n    if (files !== null && files !== void 0 && files.length) {\n      this.attachFiles(files);\n    } else if (this.draggedRange) {\n      var _this$delegate8, _this$responder12;\n\n      (_this$delegate8 = this.delegate) === null || _this$delegate8 === void 0 ? void 0 : _this$delegate8.inputControllerWillMoveText();\n      (_this$responder12 = this.responder) === null || _this$responder12 === void 0 ? void 0 : _this$responder12.moveTextFromRange(this.draggedRange);\n      this.draggedRange = null;\n      this.requestRender();\n    } else if (documentJSON) {\n      var _this$responder13;\n\n      const document = Document.fromJSONString(documentJSON);\n      (_this$responder13 = this.responder) === null || _this$responder13 === void 0 ? void 0 : _this$responder13.insertDocument(document);\n      this.requestRender();\n    }\n\n    this.draggedRange = null;\n    this.draggingPoint = null;\n  },\n\n  cut(event) {\n    var _this$responder14;\n\n    if ((_this$responder14 = this.responder) !== null && _this$responder14 !== void 0 && _this$responder14.selectionIsExpanded()) {\n      var _this$delegate9;\n\n      if (this.serializeSelectionToDataTransfer(event.clipboardData)) {\n        event.preventDefault();\n      }\n\n      (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : _this$delegate9.inputControllerWillCutText();\n      this.deleteInDirection(\"backward\");\n\n      if (event.defaultPrevented) {\n        return this.requestRender();\n      }\n    }\n  },\n\n  copy(event) {\n    var _this$responder15;\n\n    if ((_this$responder15 = this.responder) !== null && _this$responder15 !== void 0 && _this$responder15.selectionIsExpanded()) {\n      if (this.serializeSelectionToDataTransfer(event.clipboardData)) {\n        event.preventDefault();\n      }\n    }\n  },\n\n  paste(event) {\n    const clipboard = event.clipboardData || event.testClipboardData;\n    const paste = {\n      clipboard\n    };\n\n    if (!clipboard || pasteEventIsCrippledSafariHTMLPaste(event)) {\n      this.getPastedHTMLUsingHiddenElement(html => {\n        var _this$delegate10, _this$responder16, _this$delegate11;\n\n        paste.type = \"text/html\";\n        paste.html = html;\n        (_this$delegate10 = this.delegate) === null || _this$delegate10 === void 0 ? void 0 : _this$delegate10.inputControllerWillPaste(paste);\n        (_this$responder16 = this.responder) === null || _this$responder16 === void 0 ? void 0 : _this$responder16.insertHTML(paste.html);\n        this.requestRender();\n        return (_this$delegate11 = this.delegate) === null || _this$delegate11 === void 0 ? void 0 : _this$delegate11.inputControllerDidPaste(paste);\n      });\n      return;\n    }\n\n    const href = clipboard.getData(\"URL\");\n    const html = clipboard.getData(\"text/html\");\n    const name = clipboard.getData(\"public.url-name\");\n\n    if (href) {\n      var _this$delegate12, _this$responder17, _this$delegate13;\n\n      let string;\n      paste.type = \"text/html\";\n\n      if (name) {\n        string = squishBreakableWhitespace(name).trim();\n      } else {\n        string = href;\n      }\n\n      paste.html = this.createLinkHTML(href, string);\n      (_this$delegate12 = this.delegate) === null || _this$delegate12 === void 0 ? void 0 : _this$delegate12.inputControllerWillPaste(paste);\n      this.setInputSummary({\n        textAdded: string,\n        didDelete: this.selectionIsExpanded()\n      });\n      (_this$responder17 = this.responder) === null || _this$responder17 === void 0 ? void 0 : _this$responder17.insertHTML(paste.html);\n      this.requestRender();\n      (_this$delegate13 = this.delegate) === null || _this$delegate13 === void 0 ? void 0 : _this$delegate13.inputControllerDidPaste(paste);\n    } else if (dataTransferIsPlainText(clipboard)) {\n      var _this$delegate14, _this$responder18, _this$delegate15;\n\n      paste.type = \"text/plain\";\n      paste.string = clipboard.getData(\"text/plain\");\n      (_this$delegate14 = this.delegate) === null || _this$delegate14 === void 0 ? void 0 : _this$delegate14.inputControllerWillPaste(paste);\n      this.setInputSummary({\n        textAdded: paste.string,\n        didDelete: this.selectionIsExpanded()\n      });\n      (_this$responder18 = this.responder) === null || _this$responder18 === void 0 ? void 0 : _this$responder18.insertString(paste.string);\n      this.requestRender();\n      (_this$delegate15 = this.delegate) === null || _this$delegate15 === void 0 ? void 0 : _this$delegate15.inputControllerDidPaste(paste);\n    } else if (html) {\n      var _this$delegate16, _this$responder19, _this$delegate17;\n\n      paste.type = \"text/html\";\n      paste.html = html;\n      (_this$delegate16 = this.delegate) === null || _this$delegate16 === void 0 ? void 0 : _this$delegate16.inputControllerWillPaste(paste);\n      (_this$responder19 = this.responder) === null || _this$responder19 === void 0 ? void 0 : _this$responder19.insertHTML(paste.html);\n      this.requestRender();\n      (_this$delegate17 = this.delegate) === null || _this$delegate17 === void 0 ? void 0 : _this$delegate17.inputControllerDidPaste(paste);\n    } else if (Array.from(clipboard.types).includes(\"Files\")) {\n      var _clipboard$items, _clipboard$items$, _clipboard$items$$get;\n\n      const file = (_clipboard$items = clipboard.items) === null || _clipboard$items === void 0 ? void 0 : (_clipboard$items$ = _clipboard$items[0]) === null || _clipboard$items$ === void 0 ? void 0 : (_clipboard$items$$get = _clipboard$items$.getAsFile) === null || _clipboard$items$$get === void 0 ? void 0 : _clipboard$items$$get.call(_clipboard$items$);\n\n      if (file) {\n        var _this$delegate18, _this$responder20, _this$delegate19;\n\n        const extension = extensionForFile(file);\n\n        if (!file.name && extension) {\n          file.name = \"pasted-file-\".concat(++pastedFileCount, \".\").concat(extension);\n        }\n\n        paste.type = \"File\";\n        paste.file = file;\n        (_this$delegate18 = this.delegate) === null || _this$delegate18 === void 0 ? void 0 : _this$delegate18.inputControllerWillAttachFiles();\n        (_this$responder20 = this.responder) === null || _this$responder20 === void 0 ? void 0 : _this$responder20.insertFile(paste.file);\n        this.requestRender();\n        (_this$delegate19 = this.delegate) === null || _this$delegate19 === void 0 ? void 0 : _this$delegate19.inputControllerDidPaste(paste);\n      }\n    }\n\n    event.preventDefault();\n  },\n\n  compositionstart(event) {\n    return this.getCompositionInput().start(event.data);\n  },\n\n  compositionupdate(event) {\n    return this.getCompositionInput().update(event.data);\n  },\n\n  compositionend(event) {\n    return this.getCompositionInput().end(event.data);\n  },\n\n  beforeinput(event) {\n    this.inputSummary.didInput = true;\n  },\n\n  input(event) {\n    this.inputSummary.didInput = true;\n    return event.stopPropagation();\n  }\n\n});\n\n_defineProperty(Level0InputController, \"keys\", {\n  backspace(event) {\n    var _this$delegate20;\n\n    (_this$delegate20 = this.delegate) === null || _this$delegate20 === void 0 ? void 0 : _this$delegate20.inputControllerWillPerformTyping();\n    return this.deleteInDirection(\"backward\", event);\n  },\n\n  delete(event) {\n    var _this$delegate21;\n\n    (_this$delegate21 = this.delegate) === null || _this$delegate21 === void 0 ? void 0 : _this$delegate21.inputControllerWillPerformTyping();\n    return this.deleteInDirection(\"forward\", event);\n  },\n\n  return(event) {\n    var _this$delegate22, _this$responder21;\n\n    this.setInputSummary({\n      preferDocument: true\n    });\n    (_this$delegate22 = this.delegate) === null || _this$delegate22 === void 0 ? void 0 : _this$delegate22.inputControllerWillPerformTyping();\n    return (_this$responder21 = this.responder) === null || _this$responder21 === void 0 ? void 0 : _this$responder21.insertLineBreak();\n  },\n\n  tab(event) {\n    var _this$responder22;\n\n    if ((_this$responder22 = this.responder) !== null && _this$responder22 !== void 0 && _this$responder22.canIncreaseNestingLevel()) {\n      var _this$responder23;\n\n      (_this$responder23 = this.responder) === null || _this$responder23 === void 0 ? void 0 : _this$responder23.increaseNestingLevel();\n      this.requestRender();\n      event.preventDefault();\n    }\n  },\n\n  left(event) {\n    if (this.selectionIsInCursorTarget()) {\n      var _this$responder24;\n\n      event.preventDefault();\n      return (_this$responder24 = this.responder) === null || _this$responder24 === void 0 ? void 0 : _this$responder24.moveCursorInDirection(\"backward\");\n    }\n  },\n\n  right(event) {\n    if (this.selectionIsInCursorTarget()) {\n      var _this$responder25;\n\n      event.preventDefault();\n      return (_this$responder25 = this.responder) === null || _this$responder25 === void 0 ? void 0 : _this$responder25.moveCursorInDirection(\"forward\");\n    }\n  },\n\n  control: {\n    d(event) {\n      var _this$delegate23;\n\n      (_this$delegate23 = this.delegate) === null || _this$delegate23 === void 0 ? void 0 : _this$delegate23.inputControllerWillPerformTyping();\n      return this.deleteInDirection(\"forward\", event);\n    },\n\n    h(event) {\n      var _this$delegate24;\n\n      (_this$delegate24 = this.delegate) === null || _this$delegate24 === void 0 ? void 0 : _this$delegate24.inputControllerWillPerformTyping();\n      return this.deleteInDirection(\"backward\", event);\n    },\n\n    o(event) {\n      var _this$delegate25, _this$responder26;\n\n      event.preventDefault();\n      (_this$delegate25 = this.delegate) === null || _this$delegate25 === void 0 ? void 0 : _this$delegate25.inputControllerWillPerformTyping();\n      (_this$responder26 = this.responder) === null || _this$responder26 === void 0 ? void 0 : _this$responder26.insertString(\"\\n\", {\n        updatePosition: false\n      });\n      return this.requestRender();\n    }\n\n  },\n  shift: {\n    return(event) {\n      var _this$delegate26, _this$responder27;\n\n      (_this$delegate26 = this.delegate) === null || _this$delegate26 === void 0 ? void 0 : _this$delegate26.inputControllerWillPerformTyping();\n      (_this$responder27 = this.responder) === null || _this$responder27 === void 0 ? void 0 : _this$responder27.insertString(\"\\n\");\n      this.requestRender();\n      event.preventDefault();\n    },\n\n    tab(event) {\n      var _this$responder28;\n\n      if ((_this$responder28 = this.responder) !== null && _this$responder28 !== void 0 && _this$responder28.canDecreaseNestingLevel()) {\n        var _this$responder29;\n\n        (_this$responder29 = this.responder) === null || _this$responder29 === void 0 ? void 0 : _this$responder29.decreaseNestingLevel();\n        this.requestRender();\n        event.preventDefault();\n      }\n    },\n\n    left(event) {\n      if (this.selectionIsInCursorTarget()) {\n        event.preventDefault();\n        return this.expandSelectionInDirection(\"backward\");\n      }\n    },\n\n    right(event) {\n      if (this.selectionIsInCursorTarget()) {\n        event.preventDefault();\n        return this.expandSelectionInDirection(\"forward\");\n      }\n    }\n\n  },\n  alt: {\n    backspace(event) {\n      var _this$delegate27;\n\n      this.setInputSummary({\n        preferDocument: false\n      });\n      return (_this$delegate27 = this.delegate) === null || _this$delegate27 === void 0 ? void 0 : _this$delegate27.inputControllerWillPerformTyping();\n    }\n\n  },\n  meta: {\n    backspace(event) {\n      var _this$delegate28;\n\n      this.setInputSummary({\n        preferDocument: false\n      });\n      return (_this$delegate28 = this.delegate) === null || _this$delegate28 === void 0 ? void 0 : _this$delegate28.inputControllerWillPerformTyping();\n    }\n\n  }\n});\n\nLevel0InputController.proxyMethod(\"responder?.getSelectedRange\");\nLevel0InputController.proxyMethod(\"responder?.setSelectedRange\");\nLevel0InputController.proxyMethod(\"responder?.expandSelectionInDirection\");\nLevel0InputController.proxyMethod(\"responder?.selectionIsInCursorTarget\");\nLevel0InputController.proxyMethod(\"responder?.selectionIsExpanded\");\n\nconst extensionForFile = file => {\n  var _file$type, _file$type$match;\n\n  return (_file$type = file.type) === null || _file$type === void 0 ? void 0 : (_file$type$match = _file$type.match(/\\/(\\w+)$/)) === null || _file$type$match === void 0 ? void 0 : _file$type$match[1];\n};\n\nconst hasStringCodePointAt = !!((_$codePointAt = (_ = \" \").codePointAt) !== null && _$codePointAt !== void 0 && _$codePointAt.call(_, 0));\n\nconst stringFromKeyEvent = function (event) {\n  if (event.key && hasStringCodePointAt && event.key.codePointAt(0) === event.keyCode) {\n    return event.key;\n  } else {\n    let code;\n\n    if (event.which === null) {\n      code = event.keyCode;\n    } else if (event.which !== 0 && event.charCode !== 0) {\n      code = event.charCode;\n    }\n\n    if (code != null && keyNames$1[code] !== \"escape\") {\n      return UTF16String.fromCodepoints([code]).toString();\n    }\n  }\n};\n\nconst pasteEventIsCrippledSafariHTMLPaste = function (event) {\n  const paste = event.clipboardData;\n\n  if (paste) {\n    if (paste.types.includes(\"text/html\")) {\n      // Answer is yes if there's any possibility of Paste and Match Style in Safari,\n      // which is nearly impossible to detect confidently: https://bugs.webkit.org/show_bug.cgi?id=174165\n      for (const type of paste.types) {\n        const hasPasteboardFlavor = /^CorePasteboardFlavorType/.test(type);\n        const hasReadableDynamicData = /^dyn\\./.test(type) && paste.getData(type);\n        const mightBePasteAndMatchStyle = hasPasteboardFlavor || hasReadableDynamicData;\n\n        if (mightBePasteAndMatchStyle) {\n          return true;\n        }\n      }\n\n      return false;\n    } else {\n      const isExternalHTMLPaste = paste.types.includes(\"com.apple.webarchive\");\n      const isExternalRichTextPaste = paste.types.includes(\"com.apple.flat-rtfd\");\n      return isExternalHTMLPaste || isExternalRichTextPaste;\n    }\n  }\n};\n\nclass CompositionInput extends BasicObject {\n  constructor(inputController) {\n    super(...arguments);\n    this.inputController = inputController;\n    this.responder = this.inputController.responder;\n    this.delegate = this.inputController.delegate;\n    this.inputSummary = this.inputController.inputSummary;\n    this.data = {};\n  }\n\n  start(data) {\n    this.data.start = data;\n\n    if (this.isSignificant()) {\n      var _this$responder5;\n\n      if (this.inputSummary.eventName === \"keypress\" && this.inputSummary.textAdded) {\n        var _this$responder4;\n\n        (_this$responder4 = this.responder) === null || _this$responder4 === void 0 ? void 0 : _this$responder4.deleteInDirection(\"left\");\n      }\n\n      if (!this.selectionIsExpanded()) {\n        this.insertPlaceholder();\n        this.requestRender();\n      }\n\n      this.range = (_this$responder5 = this.responder) === null || _this$responder5 === void 0 ? void 0 : _this$responder5.getSelectedRange();\n    }\n  }\n\n  update(data) {\n    this.data.update = data;\n\n    if (this.isSignificant()) {\n      const range = this.selectPlaceholder();\n\n      if (range) {\n        this.forgetPlaceholder();\n        this.range = range;\n      }\n    }\n  }\n\n  end(data) {\n    this.data.end = data;\n\n    if (this.isSignificant()) {\n      this.forgetPlaceholder();\n\n      if (this.canApplyToDocument()) {\n        var _this$delegate2, _this$responder6, _this$responder7, _this$responder8;\n\n        this.setInputSummary({\n          preferDocument: true,\n          didInput: false\n        });\n        (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : _this$delegate2.inputControllerWillPerformTyping();\n        (_this$responder6 = this.responder) === null || _this$responder6 === void 0 ? void 0 : _this$responder6.setSelectedRange(this.range);\n        (_this$responder7 = this.responder) === null || _this$responder7 === void 0 ? void 0 : _this$responder7.insertString(this.data.end);\n        return (_this$responder8 = this.responder) === null || _this$responder8 === void 0 ? void 0 : _this$responder8.setSelectedRange(this.range[0] + this.data.end.length);\n      } else if (this.data.start != null || this.data.update != null) {\n        this.requestReparse();\n        return this.inputController.reset();\n      }\n    } else {\n      return this.inputController.reset();\n    }\n  }\n\n  getEndData() {\n    return this.data.end;\n  }\n\n  isEnded() {\n    return this.getEndData() != null;\n  }\n\n  isSignificant() {\n    if (browser.composesExistingText) {\n      return this.inputSummary.didInput;\n    } else {\n      return true;\n    }\n  } // Private\n\n\n  canApplyToDocument() {\n    var _this$data$start, _this$data$end;\n\n    return ((_this$data$start = this.data.start) === null || _this$data$start === void 0 ? void 0 : _this$data$start.length) === 0 && ((_this$data$end = this.data.end) === null || _this$data$end === void 0 ? void 0 : _this$data$end.length) > 0 && this.range;\n  }\n\n}\n\nCompositionInput.proxyMethod(\"inputController.setInputSummary\");\nCompositionInput.proxyMethod(\"inputController.requestRender\");\nCompositionInput.proxyMethod(\"inputController.requestReparse\");\nCompositionInput.proxyMethod(\"responder?.selectionIsExpanded\");\nCompositionInput.proxyMethod(\"responder?.insertPlaceholder\");\nCompositionInput.proxyMethod(\"responder?.selectPlaceholder\");\nCompositionInput.proxyMethod(\"responder?.forgetPlaceholder\");\n\nclass Level2InputController extends InputController {\n  constructor() {\n    super(...arguments);\n    this.render = this.render.bind(this);\n  }\n\n  elementDidMutate() {\n    if (this.scheduledRender) {\n      if (this.composing) {\n        var _this$delegate, _this$delegate$inputC;\n\n        return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$inputC = _this$delegate.inputControllerDidAllowUnhandledInput) === null || _this$delegate$inputC === void 0 ? void 0 : _this$delegate$inputC.call(_this$delegate);\n      }\n    } else {\n      return this.reparse();\n    }\n  }\n\n  scheduleRender() {\n    return this.scheduledRender ? this.scheduledRender : this.scheduledRender = requestAnimationFrame(this.render);\n  }\n\n  render() {\n    var _this$afterRender;\n\n    cancelAnimationFrame(this.scheduledRender);\n    this.scheduledRender = null;\n\n    if (!this.composing) {\n      var _this$delegate2;\n\n      (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : _this$delegate2.render();\n    }\n\n    (_this$afterRender = this.afterRender) === null || _this$afterRender === void 0 ? void 0 : _this$afterRender.call(this);\n    this.afterRender = null;\n  }\n\n  reparse() {\n    var _this$delegate3;\n\n    return (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : _this$delegate3.reparse();\n  } // Responder helpers\n\n\n  insertString() {\n    var _this$delegate4;\n\n    let string = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    let options = arguments.length > 1 ? arguments[1] : undefined;\n    (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.inputControllerWillPerformTyping();\n    return this.withTargetDOMRange(function () {\n      var _this$responder;\n\n      return (_this$responder = this.responder) === null || _this$responder === void 0 ? void 0 : _this$responder.insertString(string, options);\n    });\n  }\n\n  toggleAttributeIfSupported(attributeName) {\n    if (getAllAttributeNames().includes(attributeName)) {\n      var _this$delegate5;\n\n      (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : _this$delegate5.inputControllerWillPerformFormatting(attributeName);\n      return this.withTargetDOMRange(function () {\n        var _this$responder2;\n\n        return (_this$responder2 = this.responder) === null || _this$responder2 === void 0 ? void 0 : _this$responder2.toggleCurrentAttribute(attributeName);\n      });\n    }\n  }\n\n  activateAttributeIfSupported(attributeName, value) {\n    if (getAllAttributeNames().includes(attributeName)) {\n      var _this$delegate6;\n\n      (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : _this$delegate6.inputControllerWillPerformFormatting(attributeName);\n      return this.withTargetDOMRange(function () {\n        var _this$responder3;\n\n        return (_this$responder3 = this.responder) === null || _this$responder3 === void 0 ? void 0 : _this$responder3.setCurrentAttribute(attributeName, value);\n      });\n    }\n  }\n\n  deleteInDirection(direction) {\n    let {\n      recordUndoEntry\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      recordUndoEntry: true\n    };\n\n    if (recordUndoEntry) {\n      var _this$delegate7;\n\n      (_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : _this$delegate7.inputControllerWillPerformTyping();\n    }\n\n    const perform = () => {\n      var _this$responder4;\n\n      return (_this$responder4 = this.responder) === null || _this$responder4 === void 0 ? void 0 : _this$responder4.deleteInDirection(direction);\n    };\n\n    const domRange = this.getTargetDOMRange({\n      minLength: 2\n    });\n\n    if (domRange) {\n      return this.withTargetDOMRange(domRange, perform);\n    } else {\n      return perform();\n    }\n  } // Selection helpers\n\n\n  withTargetDOMRange(domRange, fn) {\n    if (typeof domRange === \"function\") {\n      fn = domRange;\n      domRange = this.getTargetDOMRange();\n    }\n\n    if (domRange) {\n      var _this$responder5;\n\n      return (_this$responder5 = this.responder) === null || _this$responder5 === void 0 ? void 0 : _this$responder5.withTargetDOMRange(domRange, fn.bind(this));\n    } else {\n      selectionChangeObserver.reset();\n      return fn.call(this);\n    }\n  }\n\n  getTargetDOMRange() {\n    var _this$event$getTarget, _this$event;\n\n    let {\n      minLength\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      minLength: 0\n    };\n    const targetRanges = (_this$event$getTarget = (_this$event = this.event).getTargetRanges) === null || _this$event$getTarget === void 0 ? void 0 : _this$event$getTarget.call(_this$event);\n\n    if (targetRanges) {\n      if (targetRanges.length) {\n        const domRange = staticRangeToRange(targetRanges[0]);\n\n        if (minLength === 0 || domRange.toString().length >= minLength) {\n          return domRange;\n        }\n      }\n    }\n  }\n\n  withEvent(event, fn) {\n    let result;\n    this.event = event;\n\n    try {\n      result = fn.call(this);\n    } finally {\n      this.event = null;\n    }\n\n    return result;\n  }\n\n}\n\n_defineProperty(Level2InputController, \"events\", {\n  keydown(event) {\n    if (keyEventIsKeyboardCommand(event)) {\n      var _this$delegate8;\n\n      const command = keyboardCommandFromKeyEvent(event);\n\n      if ((_this$delegate8 = this.delegate) !== null && _this$delegate8 !== void 0 && _this$delegate8.inputControllerDidReceiveKeyboardCommand(command)) {\n        event.preventDefault();\n      }\n    } else {\n      let name = event.key;\n\n      if (event.altKey) {\n        name += \"+Alt\";\n      }\n\n      if (event.shiftKey) {\n        name += \"+Shift\";\n      }\n\n      const handler = this.constructor.keys[name];\n\n      if (handler) {\n        return this.withEvent(event, handler);\n      }\n    }\n  },\n\n  // Handle paste event to work around beforeinput.insertFromPaste browser bugs.\n  // Safe to remove each condition once fixed upstream.\n  paste(event) {\n    var _event$clipboardData;\n\n    // https://bugs.webkit.org/show_bug.cgi?id=194921\n    let paste;\n    const href = (_event$clipboardData = event.clipboardData) === null || _event$clipboardData === void 0 ? void 0 : _event$clipboardData.getData(\"URL\");\n\n    if (pasteEventHasFilesOnly(event)) {\n      event.preventDefault();\n      return this.attachFiles(event.clipboardData.files); // https://bugs.chromium.org/p/chromium/issues/detail?id=934448\n    } else if (pasteEventHasPlainTextOnly(event)) {\n      var _this$delegate9, _this$responder6, _this$delegate10;\n\n      event.preventDefault();\n      paste = {\n        type: \"text/plain\",\n        string: event.clipboardData.getData(\"text/plain\")\n      };\n      (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : _this$delegate9.inputControllerWillPaste(paste);\n      (_this$responder6 = this.responder) === null || _this$responder6 === void 0 ? void 0 : _this$responder6.insertString(paste.string);\n      this.render();\n      return (_this$delegate10 = this.delegate) === null || _this$delegate10 === void 0 ? void 0 : _this$delegate10.inputControllerDidPaste(paste); // https://bugs.webkit.org/show_bug.cgi?id=196702\n    } else if (href) {\n      var _this$delegate11, _this$responder7, _this$delegate12;\n\n      event.preventDefault();\n      paste = {\n        type: \"text/html\",\n        html: this.createLinkHTML(href)\n      };\n      (_this$delegate11 = this.delegate) === null || _this$delegate11 === void 0 ? void 0 : _this$delegate11.inputControllerWillPaste(paste);\n      (_this$responder7 = this.responder) === null || _this$responder7 === void 0 ? void 0 : _this$responder7.insertHTML(paste.html);\n      this.render();\n      return (_this$delegate12 = this.delegate) === null || _this$delegate12 === void 0 ? void 0 : _this$delegate12.inputControllerDidPaste(paste);\n    }\n  },\n\n  beforeinput(event) {\n    const handler = this.constructor.inputTypes[event.inputType];\n\n    if (handler) {\n      this.withEvent(event, handler);\n      return this.scheduleRender();\n    }\n  },\n\n  input(event) {\n    return selectionChangeObserver.reset();\n  },\n\n  dragstart(event) {\n    var _this$responder8;\n\n    if ((_this$responder8 = this.responder) !== null && _this$responder8 !== void 0 && _this$responder8.selectionContainsAttachments()) {\n      var _this$responder9;\n\n      event.dataTransfer.setData(\"application/x-trix-dragging\", true);\n      this.dragging = {\n        range: (_this$responder9 = this.responder) === null || _this$responder9 === void 0 ? void 0 : _this$responder9.getSelectedRange(),\n        point: pointFromEvent(event)\n      };\n    }\n  },\n\n  dragenter(event) {\n    if (dragEventHasFiles(event)) {\n      event.preventDefault();\n    }\n  },\n\n  dragover(event) {\n    if (this.dragging) {\n      event.preventDefault();\n      const point = pointFromEvent(event);\n\n      if (!objectsAreEqual(point, this.dragging.point)) {\n        var _this$responder10;\n\n        this.dragging.point = point;\n        return (_this$responder10 = this.responder) === null || _this$responder10 === void 0 ? void 0 : _this$responder10.setLocationRangeFromPointRange(point);\n      }\n    } else if (dragEventHasFiles(event)) {\n      event.preventDefault();\n    }\n  },\n\n  drop(event) {\n    if (this.dragging) {\n      var _this$delegate13, _this$responder11;\n\n      event.preventDefault();\n      (_this$delegate13 = this.delegate) === null || _this$delegate13 === void 0 ? void 0 : _this$delegate13.inputControllerWillMoveText();\n      (_this$responder11 = this.responder) === null || _this$responder11 === void 0 ? void 0 : _this$responder11.moveTextFromRange(this.dragging.range);\n      this.dragging = null;\n      return this.scheduleRender();\n    } else if (dragEventHasFiles(event)) {\n      var _this$responder12;\n\n      event.preventDefault();\n      const point = pointFromEvent(event);\n      (_this$responder12 = this.responder) === null || _this$responder12 === void 0 ? void 0 : _this$responder12.setLocationRangeFromPointRange(point);\n      return this.attachFiles(event.dataTransfer.files);\n    }\n  },\n\n  dragend() {\n    if (this.dragging) {\n      var _this$responder13;\n\n      (_this$responder13 = this.responder) === null || _this$responder13 === void 0 ? void 0 : _this$responder13.setSelectedRange(this.dragging.range);\n      this.dragging = null;\n    }\n  },\n\n  compositionend(event) {\n    if (this.composing) {\n      this.composing = false;\n      return this.scheduleRender();\n    }\n  }\n\n});\n\n_defineProperty(Level2InputController, \"keys\", {\n  ArrowLeft() {\n    var _this$responder14;\n\n    if ((_this$responder14 = this.responder) !== null && _this$responder14 !== void 0 && _this$responder14.shouldManageMovingCursorInDirection(\"backward\")) {\n      var _this$responder15;\n\n      this.event.preventDefault();\n      return (_this$responder15 = this.responder) === null || _this$responder15 === void 0 ? void 0 : _this$responder15.moveCursorInDirection(\"backward\");\n    }\n  },\n\n  ArrowRight() {\n    var _this$responder16;\n\n    if ((_this$responder16 = this.responder) !== null && _this$responder16 !== void 0 && _this$responder16.shouldManageMovingCursorInDirection(\"forward\")) {\n      var _this$responder17;\n\n      this.event.preventDefault();\n      return (_this$responder17 = this.responder) === null || _this$responder17 === void 0 ? void 0 : _this$responder17.moveCursorInDirection(\"forward\");\n    }\n  },\n\n  Backspace() {\n    var _this$responder18;\n\n    if ((_this$responder18 = this.responder) !== null && _this$responder18 !== void 0 && _this$responder18.shouldManageDeletingInDirection(\"backward\")) {\n      var _this$delegate14, _this$responder19;\n\n      this.event.preventDefault();\n      (_this$delegate14 = this.delegate) === null || _this$delegate14 === void 0 ? void 0 : _this$delegate14.inputControllerWillPerformTyping();\n      (_this$responder19 = this.responder) === null || _this$responder19 === void 0 ? void 0 : _this$responder19.deleteInDirection(\"backward\");\n      return this.render();\n    }\n  },\n\n  Tab() {\n    var _this$responder20;\n\n    if ((_this$responder20 = this.responder) !== null && _this$responder20 !== void 0 && _this$responder20.canIncreaseNestingLevel()) {\n      var _this$responder21;\n\n      this.event.preventDefault();\n      (_this$responder21 = this.responder) === null || _this$responder21 === void 0 ? void 0 : _this$responder21.increaseNestingLevel();\n      return this.render();\n    }\n  },\n\n  \"Tab+Shift\"() {\n    var _this$responder22;\n\n    if ((_this$responder22 = this.responder) !== null && _this$responder22 !== void 0 && _this$responder22.canDecreaseNestingLevel()) {\n      var _this$responder23;\n\n      this.event.preventDefault();\n      (_this$responder23 = this.responder) === null || _this$responder23 === void 0 ? void 0 : _this$responder23.decreaseNestingLevel();\n      return this.render();\n    }\n  }\n\n});\n\n_defineProperty(Level2InputController, \"inputTypes\", {\n  deleteByComposition() {\n    return this.deleteInDirection(\"backward\", {\n      recordUndoEntry: false\n    });\n  },\n\n  deleteByCut() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteByDrag() {\n    this.event.preventDefault();\n    return this.withTargetDOMRange(function () {\n      var _this$responder24;\n\n      this.deleteByDragRange = (_this$responder24 = this.responder) === null || _this$responder24 === void 0 ? void 0 : _this$responder24.getSelectedRange();\n    });\n  },\n\n  deleteCompositionText() {\n    return this.deleteInDirection(\"backward\", {\n      recordUndoEntry: false\n    });\n  },\n\n  deleteContent() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteContentBackward() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteContentForward() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  deleteEntireSoftLine() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  deleteHardLineBackward() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteHardLineForward() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  deleteSoftLineBackward() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteSoftLineForward() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  deleteWordBackward() {\n    return this.deleteInDirection(\"backward\");\n  },\n\n  deleteWordForward() {\n    return this.deleteInDirection(\"forward\");\n  },\n\n  formatBackColor() {\n    return this.activateAttributeIfSupported(\"backgroundColor\", this.event.data);\n  },\n\n  formatBold() {\n    return this.toggleAttributeIfSupported(\"bold\");\n  },\n\n  formatFontColor() {\n    return this.activateAttributeIfSupported(\"color\", this.event.data);\n  },\n\n  formatFontName() {\n    return this.activateAttributeIfSupported(\"font\", this.event.data);\n  },\n\n  formatIndent() {\n    var _this$responder25;\n\n    if ((_this$responder25 = this.responder) !== null && _this$responder25 !== void 0 && _this$responder25.canIncreaseNestingLevel()) {\n      return this.withTargetDOMRange(function () {\n        var _this$responder26;\n\n        return (_this$responder26 = this.responder) === null || _this$responder26 === void 0 ? void 0 : _this$responder26.increaseNestingLevel();\n      });\n    }\n  },\n\n  formatItalic() {\n    return this.toggleAttributeIfSupported(\"italic\");\n  },\n\n  formatJustifyCenter() {\n    return this.toggleAttributeIfSupported(\"justifyCenter\");\n  },\n\n  formatJustifyFull() {\n    return this.toggleAttributeIfSupported(\"justifyFull\");\n  },\n\n  formatJustifyLeft() {\n    return this.toggleAttributeIfSupported(\"justifyLeft\");\n  },\n\n  formatJustifyRight() {\n    return this.toggleAttributeIfSupported(\"justifyRight\");\n  },\n\n  formatOutdent() {\n    var _this$responder27;\n\n    if ((_this$responder27 = this.responder) !== null && _this$responder27 !== void 0 && _this$responder27.canDecreaseNestingLevel()) {\n      return this.withTargetDOMRange(function () {\n        var _this$responder28;\n\n        return (_this$responder28 = this.responder) === null || _this$responder28 === void 0 ? void 0 : _this$responder28.decreaseNestingLevel();\n      });\n    }\n  },\n\n  formatRemove() {\n    this.withTargetDOMRange(function () {\n      for (const attributeName in (_this$responder29 = this.responder) === null || _this$responder29 === void 0 ? void 0 : _this$responder29.getCurrentAttributes()) {\n        var _this$responder29, _this$responder30;\n\n        (_this$responder30 = this.responder) === null || _this$responder30 === void 0 ? void 0 : _this$responder30.removeCurrentAttribute(attributeName);\n      }\n    });\n  },\n\n  formatSetBlockTextDirection() {\n    return this.activateAttributeIfSupported(\"blockDir\", this.event.data);\n  },\n\n  formatSetInlineTextDirection() {\n    return this.activateAttributeIfSupported(\"textDir\", this.event.data);\n  },\n\n  formatStrikeThrough() {\n    return this.toggleAttributeIfSupported(\"strike\");\n  },\n\n  formatSubscript() {\n    return this.toggleAttributeIfSupported(\"sub\");\n  },\n\n  formatSuperscript() {\n    return this.toggleAttributeIfSupported(\"sup\");\n  },\n\n  formatUnderline() {\n    return this.toggleAttributeIfSupported(\"underline\");\n  },\n\n  historyRedo() {\n    var _this$delegate15;\n\n    return (_this$delegate15 = this.delegate) === null || _this$delegate15 === void 0 ? void 0 : _this$delegate15.inputControllerWillPerformRedo();\n  },\n\n  historyUndo() {\n    var _this$delegate16;\n\n    return (_this$delegate16 = this.delegate) === null || _this$delegate16 === void 0 ? void 0 : _this$delegate16.inputControllerWillPerformUndo();\n  },\n\n  insertCompositionText() {\n    this.composing = true;\n    return this.insertString(this.event.data);\n  },\n\n  insertFromComposition() {\n    this.composing = false;\n    return this.insertString(this.event.data);\n  },\n\n  insertFromDrop() {\n    const range = this.deleteByDragRange;\n\n    if (range) {\n      var _this$delegate17;\n\n      this.deleteByDragRange = null;\n      (_this$delegate17 = this.delegate) === null || _this$delegate17 === void 0 ? void 0 : _this$delegate17.inputControllerWillMoveText();\n      return this.withTargetDOMRange(function () {\n        var _this$responder31;\n\n        return (_this$responder31 = this.responder) === null || _this$responder31 === void 0 ? void 0 : _this$responder31.moveTextFromRange(range);\n      });\n    }\n  },\n\n  insertFromPaste() {\n    var _dataTransfer$files;\n\n    const {\n      dataTransfer\n    } = this.event;\n    const paste = {\n      dataTransfer\n    };\n    const href = dataTransfer.getData(\"URL\");\n    const html = dataTransfer.getData(\"text/html\");\n\n    if (href) {\n      var _this$delegate18;\n\n      let string;\n      this.event.preventDefault();\n      paste.type = \"text/html\";\n      const name = dataTransfer.getData(\"public.url-name\");\n\n      if (name) {\n        string = squishBreakableWhitespace(name).trim();\n      } else {\n        string = href;\n      }\n\n      paste.html = this.createLinkHTML(href, string);\n      (_this$delegate18 = this.delegate) === null || _this$delegate18 === void 0 ? void 0 : _this$delegate18.inputControllerWillPaste(paste);\n      this.withTargetDOMRange(function () {\n        var _this$responder32;\n\n        return (_this$responder32 = this.responder) === null || _this$responder32 === void 0 ? void 0 : _this$responder32.insertHTML(paste.html);\n      });\n\n      this.afterRender = () => {\n        var _this$delegate19;\n\n        return (_this$delegate19 = this.delegate) === null || _this$delegate19 === void 0 ? void 0 : _this$delegate19.inputControllerDidPaste(paste);\n      };\n    } else if (dataTransferIsPlainText(dataTransfer)) {\n      var _this$delegate20;\n\n      paste.type = \"text/plain\";\n      paste.string = dataTransfer.getData(\"text/plain\");\n      (_this$delegate20 = this.delegate) === null || _this$delegate20 === void 0 ? void 0 : _this$delegate20.inputControllerWillPaste(paste);\n      this.withTargetDOMRange(function () {\n        var _this$responder33;\n\n        return (_this$responder33 = this.responder) === null || _this$responder33 === void 0 ? void 0 : _this$responder33.insertString(paste.string);\n      });\n\n      this.afterRender = () => {\n        var _this$delegate21;\n\n        return (_this$delegate21 = this.delegate) === null || _this$delegate21 === void 0 ? void 0 : _this$delegate21.inputControllerDidPaste(paste);\n      };\n    } else if (html) {\n      var _this$delegate22;\n\n      this.event.preventDefault();\n      paste.type = \"text/html\";\n      paste.html = html;\n      (_this$delegate22 = this.delegate) === null || _this$delegate22 === void 0 ? void 0 : _this$delegate22.inputControllerWillPaste(paste);\n      this.withTargetDOMRange(function () {\n        var _this$responder34;\n\n        return (_this$responder34 = this.responder) === null || _this$responder34 === void 0 ? void 0 : _this$responder34.insertHTML(paste.html);\n      });\n\n      this.afterRender = () => {\n        var _this$delegate23;\n\n        return (_this$delegate23 = this.delegate) === null || _this$delegate23 === void 0 ? void 0 : _this$delegate23.inputControllerDidPaste(paste);\n      };\n    } else if ((_dataTransfer$files = dataTransfer.files) !== null && _dataTransfer$files !== void 0 && _dataTransfer$files.length) {\n      var _this$delegate24;\n\n      paste.type = \"File\";\n      paste.file = dataTransfer.files[0];\n      (_this$delegate24 = this.delegate) === null || _this$delegate24 === void 0 ? void 0 : _this$delegate24.inputControllerWillPaste(paste);\n      this.withTargetDOMRange(function () {\n        var _this$responder35;\n\n        return (_this$responder35 = this.responder) === null || _this$responder35 === void 0 ? void 0 : _this$responder35.insertFile(paste.file);\n      });\n\n      this.afterRender = () => {\n        var _this$delegate25;\n\n        return (_this$delegate25 = this.delegate) === null || _this$delegate25 === void 0 ? void 0 : _this$delegate25.inputControllerDidPaste(paste);\n      };\n    }\n  },\n\n  insertFromYank() {\n    return this.insertString(this.event.data);\n  },\n\n  insertLineBreak() {\n    return this.insertString(\"\\n\");\n  },\n\n  insertLink() {\n    return this.activateAttributeIfSupported(\"href\", this.event.data);\n  },\n\n  insertOrderedList() {\n    return this.toggleAttributeIfSupported(\"number\");\n  },\n\n  insertParagraph() {\n    var _this$delegate26;\n\n    (_this$delegate26 = this.delegate) === null || _this$delegate26 === void 0 ? void 0 : _this$delegate26.inputControllerWillPerformTyping();\n    return this.withTargetDOMRange(function () {\n      var _this$responder36;\n\n      return (_this$responder36 = this.responder) === null || _this$responder36 === void 0 ? void 0 : _this$responder36.insertLineBreak();\n    });\n  },\n\n  insertReplacementText() {\n    return this.insertString(this.event.dataTransfer.getData(\"text/plain\"), {\n      updatePosition: false\n    });\n  },\n\n  insertText() {\n    var _this$event$dataTrans;\n\n    return this.insertString(this.event.data || ((_this$event$dataTrans = this.event.dataTransfer) === null || _this$event$dataTrans === void 0 ? void 0 : _this$event$dataTrans.getData(\"text/plain\")));\n  },\n\n  insertTranspose() {\n    return this.insertString(this.event.data);\n  },\n\n  insertUnorderedList() {\n    return this.toggleAttributeIfSupported(\"bullet\");\n  }\n\n});\n\nconst staticRangeToRange = function (staticRange) {\n  const range = document.createRange();\n  range.setStart(staticRange.startContainer, staticRange.startOffset);\n  range.setEnd(staticRange.endContainer, staticRange.endOffset);\n  return range;\n}; // Event helpers\n\n\nconst dragEventHasFiles = event => {\n  var _event$dataTransfer;\n\n  return Array.from(((_event$dataTransfer = event.dataTransfer) === null || _event$dataTransfer === void 0 ? void 0 : _event$dataTransfer.types) || []).includes(\"Files\");\n};\n\nconst pasteEventHasFilesOnly = function (event) {\n  const clipboard = event.clipboardData;\n\n  if (clipboard) {\n    return clipboard.types.includes(\"Files\") && clipboard.types.length === 1 && clipboard.files.length >= 1;\n  }\n};\n\nconst pasteEventHasPlainTextOnly = function (event) {\n  const clipboard = event.clipboardData;\n\n  if (clipboard) {\n    return clipboard.types.includes(\"text/plain\") && clipboard.types.length === 1;\n  }\n};\n\nconst keyboardCommandFromKeyEvent = function (event) {\n  const command = [];\n\n  if (event.altKey) {\n    command.push(\"alt\");\n  }\n\n  if (event.shiftKey) {\n    command.push(\"shift\");\n  }\n\n  command.push(event.key);\n  return command;\n};\n\nconst pointFromEvent = event => ({\n  x: event.clientX,\n  y: event.clientY\n});\n\nconst {\n  lang,\n  css,\n  keyNames\n} = config;\n\nconst undoable = function (fn) {\n  return function () {\n    const commands = fn.apply(this, arguments);\n    commands.do();\n\n    if (!this.undos) {\n      this.undos = [];\n    }\n\n    this.undos.push(commands.undo);\n  };\n};\n\nclass AttachmentEditorController extends BasicObject {\n  constructor(attachmentPiece, _element, container) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    super(...arguments);\n\n    _defineProperty(this, \"makeElementMutable\", undoable(() => {\n      return {\n        do: () => {\n          this.element.dataset.trixMutable = true;\n        },\n        undo: () => delete this.element.dataset.trixMutable\n      };\n    }));\n\n    _defineProperty(this, \"addToolbar\", undoable(() => {\n      // <div class=\"#{css.attachmentMetadataContainer}\" data-trix-mutable=\"true\">\n      //   <div class=\"trix-button-row\">\n      //     <span class=\"trix-button-group trix-button-group--actions\">\n      //       <button type=\"button\" class=\"trix-button trix-button--remove\" title=\"#{lang.remove}\" data-trix-action=\"remove\">#{lang.remove}</button>\n      //     </span>\n      //   </div>\n      // </div>\n      const element = makeElement({\n        tagName: \"div\",\n        className: css.attachmentToolbar,\n        data: {\n          trixMutable: true\n        },\n        childNodes: makeElement({\n          tagName: \"div\",\n          className: \"trix-button-row\",\n          childNodes: makeElement({\n            tagName: \"span\",\n            className: \"trix-button-group trix-button-group--actions\",\n            childNodes: makeElement({\n              tagName: \"button\",\n              className: \"trix-button trix-button--remove\",\n              textContent: lang.remove,\n              attributes: {\n                title: lang.remove\n              },\n              data: {\n                trixAction: \"remove\"\n              }\n            })\n          })\n        })\n      });\n\n      if (this.attachment.isPreviewable()) {\n        // <div class=\"#{css.attachmentMetadataContainer}\">\n        //   <span class=\"#{css.attachmentMetadata}\">\n        //     <span class=\"#{css.attachmentName}\" title=\"#{name}\">#{name}</span>\n        //     <span class=\"#{css.attachmentSize}\">#{size}</span>\n        //   </span>\n        // </div>\n        element.appendChild(makeElement({\n          tagName: \"div\",\n          className: css.attachmentMetadataContainer,\n          childNodes: makeElement({\n            tagName: \"span\",\n            className: css.attachmentMetadata,\n            childNodes: [makeElement({\n              tagName: \"span\",\n              className: css.attachmentName,\n              textContent: this.attachment.getFilename(),\n              attributes: {\n                title: this.attachment.getFilename()\n              }\n            }), makeElement({\n              tagName: \"span\",\n              className: css.attachmentSize,\n              textContent: this.attachment.getFormattedFilesize()\n            })]\n          })\n        }));\n      }\n\n      handleEvent(\"click\", {\n        onElement: element,\n        withCallback: this.didClickToolbar\n      });\n      handleEvent(\"click\", {\n        onElement: element,\n        matchingSelector: \"[data-trix-action]\",\n        withCallback: this.didClickActionButton\n      });\n      return {\n        do: () => this.element.appendChild(element),\n        undo: () => removeNode(element)\n      };\n    }));\n\n    _defineProperty(this, \"installCaptionEditor\", undoable(() => {\n      const textarea = makeElement({\n        tagName: \"textarea\",\n        className: css.attachmentCaptionEditor,\n        attributes: {\n          placeholder: lang.captionPlaceholder\n        },\n        data: {\n          trixMutable: true\n        }\n      });\n      textarea.value = this.attachmentPiece.getCaption();\n      const textareaClone = textarea.cloneNode();\n      textareaClone.classList.add(\"trix-autoresize-clone\");\n      textareaClone.tabIndex = -1;\n\n      const autoresize = function () {\n        textareaClone.value = textarea.value;\n        textarea.style.height = textareaClone.scrollHeight + \"px\";\n      };\n\n      handleEvent(\"input\", {\n        onElement: textarea,\n        withCallback: autoresize\n      });\n      handleEvent(\"input\", {\n        onElement: textarea,\n        withCallback: this.didInputCaption\n      });\n      handleEvent(\"keydown\", {\n        onElement: textarea,\n        withCallback: this.didKeyDownCaption\n      });\n      handleEvent(\"change\", {\n        onElement: textarea,\n        withCallback: this.didChangeCaption\n      });\n      handleEvent(\"blur\", {\n        onElement: textarea,\n        withCallback: this.didBlurCaption\n      });\n      const figcaption = this.element.querySelector(\"figcaption\");\n      const editingFigcaption = figcaption.cloneNode();\n      return {\n        do: () => {\n          figcaption.style.display = \"none\";\n          editingFigcaption.appendChild(textarea);\n          editingFigcaption.appendChild(textareaClone);\n          editingFigcaption.classList.add(\"\".concat(css.attachmentCaption, \"--editing\"));\n          figcaption.parentElement.insertBefore(editingFigcaption, figcaption);\n          autoresize();\n\n          if (this.options.editCaption) {\n            return defer(() => textarea.focus());\n          }\n        },\n\n        undo() {\n          removeNode(editingFigcaption);\n          figcaption.style.display = null;\n        }\n\n      };\n    }));\n\n    this.didClickToolbar = this.didClickToolbar.bind(this);\n    this.didClickActionButton = this.didClickActionButton.bind(this);\n    this.didKeyDownCaption = this.didKeyDownCaption.bind(this);\n    this.didInputCaption = this.didInputCaption.bind(this);\n    this.didChangeCaption = this.didChangeCaption.bind(this);\n    this.didBlurCaption = this.didBlurCaption.bind(this);\n    this.attachmentPiece = attachmentPiece;\n    this.element = _element;\n    this.container = container;\n    this.options = options;\n    this.attachment = this.attachmentPiece.attachment;\n\n    if (tagName(this.element) === \"a\") {\n      this.element = this.element.firstChild;\n    }\n\n    this.install();\n  }\n\n  install() {\n    this.makeElementMutable();\n    this.addToolbar();\n\n    if (this.attachment.isPreviewable()) {\n      this.installCaptionEditor();\n    }\n  }\n\n  uninstall() {\n    var _this$delegate;\n\n    let undo = this.undos.pop();\n    this.savePendingCaption();\n\n    while (undo) {\n      undo();\n      undo = this.undos.pop();\n    }\n\n    (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : _this$delegate.didUninstallAttachmentEditor(this);\n  } // Private\n\n\n  savePendingCaption() {\n    if (this.pendingCaption) {\n      const caption = this.pendingCaption;\n      this.pendingCaption = null;\n\n      if (caption) {\n        var _this$delegate2, _this$delegate2$attac;\n\n        (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$attac = _this$delegate2.attachmentEditorDidRequestUpdatingAttributesForAttachment) === null || _this$delegate2$attac === void 0 ? void 0 : _this$delegate2$attac.call(_this$delegate2, {\n          caption\n        }, this.attachment);\n      } else {\n        var _this$delegate3, _this$delegate3$attac;\n\n        (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : (_this$delegate3$attac = _this$delegate3.attachmentEditorDidRequestRemovingAttributeForAttachment) === null || _this$delegate3$attac === void 0 ? void 0 : _this$delegate3$attac.call(_this$delegate3, \"caption\", this.attachment);\n      }\n    }\n  } // Installing and uninstalling\n\n\n  // Event handlers\n  didClickToolbar(event) {\n    event.preventDefault();\n    return event.stopPropagation();\n  }\n\n  didClickActionButton(event) {\n    var _this$delegate4;\n\n    const action = event.target.getAttribute(\"data-trix-action\");\n\n    switch (action) {\n      case \"remove\":\n        return (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.attachmentEditorDidRequestRemovalOfAttachment(this.attachment);\n    }\n  }\n\n  didKeyDownCaption(event) {\n    if (keyNames[event.keyCode] === \"return\") {\n      var _this$delegate5, _this$delegate5$attac;\n\n      event.preventDefault();\n      this.savePendingCaption();\n      return (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : (_this$delegate5$attac = _this$delegate5.attachmentEditorDidRequestDeselectingAttachment) === null || _this$delegate5$attac === void 0 ? void 0 : _this$delegate5$attac.call(_this$delegate5, this.attachment);\n    }\n  }\n\n  didInputCaption(event) {\n    this.pendingCaption = event.target.value.replace(/\\s/g, \" \").trim();\n  }\n\n  didChangeCaption(event) {\n    return this.savePendingCaption();\n  }\n\n  didBlurCaption(event) {\n    return this.savePendingCaption();\n  }\n\n}\n\nclass CompositionController extends BasicObject {\n  constructor(element, composition) {\n    super(...arguments);\n    this.didFocus = this.didFocus.bind(this);\n    this.didBlur = this.didBlur.bind(this);\n    this.didClickAttachment = this.didClickAttachment.bind(this);\n    this.element = element;\n    this.composition = composition;\n    this.documentView = new DocumentView(this.composition.document, {\n      element: this.element\n    });\n    handleEvent(\"focus\", {\n      onElement: this.element,\n      withCallback: this.didFocus\n    });\n    handleEvent(\"blur\", {\n      onElement: this.element,\n      withCallback: this.didBlur\n    });\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"a[contenteditable=false]\",\n      preventDefault: true\n    });\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: attachmentSelector,\n      withCallback: this.didClickAttachment\n    });\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"a\".concat(attachmentSelector),\n      preventDefault: true\n    });\n  }\n\n  didFocus(event) {\n    var _this$blurPromise;\n\n    const perform = () => {\n      if (!this.focused) {\n        var _this$delegate, _this$delegate$compos;\n\n        this.focused = true;\n        return (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : (_this$delegate$compos = _this$delegate.compositionControllerDidFocus) === null || _this$delegate$compos === void 0 ? void 0 : _this$delegate$compos.call(_this$delegate);\n      }\n    };\n\n    return ((_this$blurPromise = this.blurPromise) === null || _this$blurPromise === void 0 ? void 0 : _this$blurPromise.then(perform)) || perform();\n  }\n\n  didBlur(event) {\n    this.blurPromise = new Promise(resolve => {\n      return defer(() => {\n        if (!innerElementIsActive(this.element)) {\n          var _this$delegate2, _this$delegate2$compo;\n\n          this.focused = null;\n          (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : (_this$delegate2$compo = _this$delegate2.compositionControllerDidBlur) === null || _this$delegate2$compo === void 0 ? void 0 : _this$delegate2$compo.call(_this$delegate2);\n        }\n\n        this.blurPromise = null;\n        return resolve();\n      });\n    });\n  }\n\n  didClickAttachment(event, target) {\n    var _this$delegate3, _this$delegate3$compo;\n\n    const attachment = this.findAttachmentForElement(target);\n    const editCaption = !!findClosestElementFromNode(event.target, {\n      matchingSelector: \"figcaption\"\n    });\n    return (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : (_this$delegate3$compo = _this$delegate3.compositionControllerDidSelectAttachment) === null || _this$delegate3$compo === void 0 ? void 0 : _this$delegate3$compo.call(_this$delegate3, attachment, {\n      editCaption\n    });\n  }\n\n  getSerializableElement() {\n    if (this.isEditingAttachment()) {\n      return this.documentView.shadowElement;\n    } else {\n      return this.element;\n    }\n  }\n\n  render() {\n    var _this$delegate6, _this$delegate6$compo;\n\n    if (this.revision !== this.composition.revision) {\n      this.documentView.setDocument(this.composition.document);\n      this.documentView.render();\n      this.revision = this.composition.revision;\n    }\n\n    if (this.canSyncDocumentView() && !this.documentView.isSynced()) {\n      var _this$delegate4, _this$delegate4$compo, _this$delegate5, _this$delegate5$compo;\n\n      (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : (_this$delegate4$compo = _this$delegate4.compositionControllerWillSyncDocumentView) === null || _this$delegate4$compo === void 0 ? void 0 : _this$delegate4$compo.call(_this$delegate4);\n      this.documentView.sync();\n      (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : (_this$delegate5$compo = _this$delegate5.compositionControllerDidSyncDocumentView) === null || _this$delegate5$compo === void 0 ? void 0 : _this$delegate5$compo.call(_this$delegate5);\n    }\n\n    return (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : (_this$delegate6$compo = _this$delegate6.compositionControllerDidRender) === null || _this$delegate6$compo === void 0 ? void 0 : _this$delegate6$compo.call(_this$delegate6);\n  }\n\n  rerenderViewForObject(object) {\n    this.invalidateViewForObject(object);\n    return this.render();\n  }\n\n  invalidateViewForObject(object) {\n    return this.documentView.invalidateViewForObject(object);\n  }\n\n  isViewCachingEnabled() {\n    return this.documentView.isViewCachingEnabled();\n  }\n\n  enableViewCaching() {\n    return this.documentView.enableViewCaching();\n  }\n\n  disableViewCaching() {\n    return this.documentView.disableViewCaching();\n  }\n\n  refreshViewCache() {\n    return this.documentView.garbageCollectCachedViews();\n  } // Attachment editor management\n\n\n  isEditingAttachment() {\n    return !!this.attachmentEditor;\n  }\n\n  installAttachmentEditorForAttachment(attachment, options) {\n    var _this$attachmentEdito;\n\n    if (((_this$attachmentEdito = this.attachmentEditor) === null || _this$attachmentEdito === void 0 ? void 0 : _this$attachmentEdito.attachment) === attachment) return;\n    const element = this.documentView.findElementForObject(attachment);\n    if (!element) return;\n    this.uninstallAttachmentEditor();\n    const attachmentPiece = this.composition.document.getAttachmentPieceForAttachment(attachment);\n    this.attachmentEditor = new AttachmentEditorController(attachmentPiece, element, this.element, options);\n    this.attachmentEditor.delegate = this;\n  }\n\n  uninstallAttachmentEditor() {\n    var _this$attachmentEdito2;\n\n    return (_this$attachmentEdito2 = this.attachmentEditor) === null || _this$attachmentEdito2 === void 0 ? void 0 : _this$attachmentEdito2.uninstall();\n  } // Attachment controller delegate\n\n\n  didUninstallAttachmentEditor() {\n    this.attachmentEditor = null;\n    return this.render();\n  }\n\n  attachmentEditorDidRequestUpdatingAttributesForAttachment(attributes, attachment) {\n    var _this$delegate7, _this$delegate7$compo;\n\n    (_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : (_this$delegate7$compo = _this$delegate7.compositionControllerWillUpdateAttachment) === null || _this$delegate7$compo === void 0 ? void 0 : _this$delegate7$compo.call(_this$delegate7, attachment);\n    return this.composition.updateAttributesForAttachment(attributes, attachment);\n  }\n\n  attachmentEditorDidRequestRemovingAttributeForAttachment(attribute, attachment) {\n    var _this$delegate8, _this$delegate8$compo;\n\n    (_this$delegate8 = this.delegate) === null || _this$delegate8 === void 0 ? void 0 : (_this$delegate8$compo = _this$delegate8.compositionControllerWillUpdateAttachment) === null || _this$delegate8$compo === void 0 ? void 0 : _this$delegate8$compo.call(_this$delegate8, attachment);\n    return this.composition.removeAttributeForAttachment(attribute, attachment);\n  }\n\n  attachmentEditorDidRequestRemovalOfAttachment(attachment) {\n    var _this$delegate9, _this$delegate9$compo;\n\n    return (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : (_this$delegate9$compo = _this$delegate9.compositionControllerDidRequestRemovalOfAttachment) === null || _this$delegate9$compo === void 0 ? void 0 : _this$delegate9$compo.call(_this$delegate9, attachment);\n  }\n\n  attachmentEditorDidRequestDeselectingAttachment(attachment) {\n    var _this$delegate10, _this$delegate10$comp;\n\n    return (_this$delegate10 = this.delegate) === null || _this$delegate10 === void 0 ? void 0 : (_this$delegate10$comp = _this$delegate10.compositionControllerDidRequestDeselectingAttachment) === null || _this$delegate10$comp === void 0 ? void 0 : _this$delegate10$comp.call(_this$delegate10, attachment);\n  } // Private\n\n\n  canSyncDocumentView() {\n    return !this.isEditingAttachment();\n  }\n\n  findAttachmentForElement(element) {\n    return this.composition.document.getAttachmentById(parseInt(element.dataset.trixId, 10));\n  }\n\n}\n\nconst attributeButtonSelector = \"[data-trix-attribute]\";\nconst actionButtonSelector = \"[data-trix-action]\";\nconst toolbarButtonSelector = \"\".concat(attributeButtonSelector, \", \").concat(actionButtonSelector);\nconst dialogSelector = \"[data-trix-dialog]\";\nconst activeDialogSelector = \"\".concat(dialogSelector, \"[data-trix-active]\");\nconst dialogButtonSelector = \"\".concat(dialogSelector, \" [data-trix-method]\");\nconst dialogInputSelector = \"\".concat(dialogSelector, \" [data-trix-input]\");\n\nconst getInputForDialog = (element, attributeName) => {\n  if (!attributeName) {\n    attributeName = getAttributeName(element);\n  }\n\n  return element.querySelector(\"[data-trix-input][name='\".concat(attributeName, \"']\"));\n};\n\nconst getActionName = element => element.getAttribute(\"data-trix-action\");\n\nconst getAttributeName = element => {\n  return element.getAttribute(\"data-trix-attribute\") || element.getAttribute(\"data-trix-dialog-attribute\");\n};\n\nconst getDialogName = element => element.getAttribute(\"data-trix-dialog\");\n\nclass ToolbarController extends BasicObject {\n  constructor(element) {\n    super(element);\n    this.didClickActionButton = this.didClickActionButton.bind(this);\n    this.didClickAttributeButton = this.didClickAttributeButton.bind(this);\n    this.didClickDialogButton = this.didClickDialogButton.bind(this);\n    this.didKeyDownDialogInput = this.didKeyDownDialogInput.bind(this);\n    this.element = element;\n    this.attributes = {};\n    this.actions = {};\n    this.resetDialogInputs();\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: actionButtonSelector,\n      withCallback: this.didClickActionButton\n    });\n    handleEvent(\"mousedown\", {\n      onElement: this.element,\n      matchingSelector: attributeButtonSelector,\n      withCallback: this.didClickAttributeButton\n    });\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: toolbarButtonSelector,\n      preventDefault: true\n    });\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: dialogButtonSelector,\n      withCallback: this.didClickDialogButton\n    });\n    handleEvent(\"keydown\", {\n      onElement: this.element,\n      matchingSelector: dialogInputSelector,\n      withCallback: this.didKeyDownDialogInput\n    });\n  } // Event handlers\n\n\n  didClickActionButton(event, element) {\n    var _this$delegate;\n\n    (_this$delegate = this.delegate) === null || _this$delegate === void 0 ? void 0 : _this$delegate.toolbarDidClickButton();\n    event.preventDefault();\n    const actionName = getActionName(element);\n\n    if (this.getDialog(actionName)) {\n      return this.toggleDialog(actionName);\n    } else {\n      var _this$delegate2;\n\n      return (_this$delegate2 = this.delegate) === null || _this$delegate2 === void 0 ? void 0 : _this$delegate2.toolbarDidInvokeAction(actionName);\n    }\n  }\n\n  didClickAttributeButton(event, element) {\n    var _this$delegate3;\n\n    (_this$delegate3 = this.delegate) === null || _this$delegate3 === void 0 ? void 0 : _this$delegate3.toolbarDidClickButton();\n    event.preventDefault();\n    const attributeName = getAttributeName(element);\n\n    if (this.getDialog(attributeName)) {\n      this.toggleDialog(attributeName);\n    } else {\n      var _this$delegate4;\n\n      (_this$delegate4 = this.delegate) === null || _this$delegate4 === void 0 ? void 0 : _this$delegate4.toolbarDidToggleAttribute(attributeName);\n    }\n\n    return this.refreshAttributeButtons();\n  }\n\n  didClickDialogButton(event, element) {\n    const dialogElement = findClosestElementFromNode(element, {\n      matchingSelector: dialogSelector\n    });\n    const method = element.getAttribute(\"data-trix-method\");\n    return this[method].call(this, dialogElement);\n  }\n\n  didKeyDownDialogInput(event, element) {\n    if (event.keyCode === 13) {\n      // Enter key\n      event.preventDefault();\n      const attribute = element.getAttribute(\"name\");\n      const dialog = this.getDialog(attribute);\n      this.setAttribute(dialog);\n    }\n\n    if (event.keyCode === 27) {\n      // Escape key\n      event.preventDefault();\n      return this.hideDialog();\n    }\n  } // Action buttons\n\n\n  updateActions(actions) {\n    this.actions = actions;\n    return this.refreshActionButtons();\n  }\n\n  refreshActionButtons() {\n    return this.eachActionButton((element, actionName) => {\n      element.disabled = this.actions[actionName] === false;\n    });\n  }\n\n  eachActionButton(callback) {\n    return Array.from(this.element.querySelectorAll(actionButtonSelector)).map(element => callback(element, getActionName(element)));\n  } // Attribute buttons\n\n\n  updateAttributes(attributes) {\n    this.attributes = attributes;\n    return this.refreshAttributeButtons();\n  }\n\n  refreshAttributeButtons() {\n    return this.eachAttributeButton((element, attributeName) => {\n      element.disabled = this.attributes[attributeName] === false;\n\n      if (this.attributes[attributeName] || this.dialogIsVisible(attributeName)) {\n        element.setAttribute(\"data-trix-active\", \"\");\n        return element.classList.add(\"trix-active\");\n      } else {\n        element.removeAttribute(\"data-trix-active\");\n        return element.classList.remove(\"trix-active\");\n      }\n    });\n  }\n\n  eachAttributeButton(callback) {\n    return Array.from(this.element.querySelectorAll(attributeButtonSelector)).map(element => callback(element, getAttributeName(element)));\n  }\n\n  applyKeyboardCommand(keys) {\n    const keyString = JSON.stringify(keys.sort());\n\n    for (const button of Array.from(this.element.querySelectorAll(\"[data-trix-key]\"))) {\n      const buttonKeys = button.getAttribute(\"data-trix-key\").split(\"+\");\n      const buttonKeyString = JSON.stringify(buttonKeys.sort());\n\n      if (buttonKeyString === keyString) {\n        triggerEvent(\"mousedown\", {\n          onElement: button\n        });\n        return true;\n      }\n    }\n\n    return false;\n  } // Dialogs\n\n\n  dialogIsVisible(dialogName) {\n    const element = this.getDialog(dialogName);\n\n    if (element) {\n      return element.hasAttribute(\"data-trix-active\");\n    }\n  }\n\n  toggleDialog(dialogName) {\n    if (this.dialogIsVisible(dialogName)) {\n      return this.hideDialog();\n    } else {\n      return this.showDialog(dialogName);\n    }\n  }\n\n  showDialog(dialogName) {\n    var _this$delegate5, _this$delegate6;\n\n    this.hideDialog();\n    (_this$delegate5 = this.delegate) === null || _this$delegate5 === void 0 ? void 0 : _this$delegate5.toolbarWillShowDialog();\n    const element = this.getDialog(dialogName);\n    element.setAttribute(\"data-trix-active\", \"\");\n    element.classList.add(\"trix-active\");\n    Array.from(element.querySelectorAll(\"input[disabled]\")).forEach(disabledInput => {\n      disabledInput.removeAttribute(\"disabled\");\n    });\n    const attributeName = getAttributeName(element);\n\n    if (attributeName) {\n      const input = getInputForDialog(element, dialogName);\n\n      if (input) {\n        input.value = this.attributes[attributeName] || \"\";\n        input.select();\n      }\n    }\n\n    return (_this$delegate6 = this.delegate) === null || _this$delegate6 === void 0 ? void 0 : _this$delegate6.toolbarDidShowDialog(dialogName);\n  }\n\n  setAttribute(dialogElement) {\n    const attributeName = getAttributeName(dialogElement);\n    const input = getInputForDialog(dialogElement, attributeName);\n\n    if (input.willValidate && !input.checkValidity()) {\n      input.setAttribute(\"data-trix-validate\", \"\");\n      input.classList.add(\"trix-validate\");\n      return input.focus();\n    } else {\n      var _this$delegate7;\n\n      (_this$delegate7 = this.delegate) === null || _this$delegate7 === void 0 ? void 0 : _this$delegate7.toolbarDidUpdateAttribute(attributeName, input.value);\n      return this.hideDialog();\n    }\n  }\n\n  removeAttribute(dialogElement) {\n    var _this$delegate8;\n\n    const attributeName = getAttributeName(dialogElement);\n    (_this$delegate8 = this.delegate) === null || _this$delegate8 === void 0 ? void 0 : _this$delegate8.toolbarDidRemoveAttribute(attributeName);\n    return this.hideDialog();\n  }\n\n  hideDialog() {\n    const element = this.element.querySelector(activeDialogSelector);\n\n    if (element) {\n      var _this$delegate9;\n\n      element.removeAttribute(\"data-trix-active\");\n      element.classList.remove(\"trix-active\");\n      this.resetDialogInputs();\n      return (_this$delegate9 = this.delegate) === null || _this$delegate9 === void 0 ? void 0 : _this$delegate9.toolbarDidHideDialog(getDialogName(element));\n    }\n  }\n\n  resetDialogInputs() {\n    Array.from(this.element.querySelectorAll(dialogInputSelector)).forEach(input => {\n      input.setAttribute(\"disabled\", \"disabled\");\n      input.removeAttribute(\"data-trix-validate\");\n      input.classList.remove(\"trix-validate\");\n    });\n  }\n\n  getDialog(dialogName) {\n    return this.element.querySelector(\"[data-trix-dialog=\".concat(dialogName, \"]\"));\n  }\n\n}\n\nconst snapshotsAreEqual = (a, b) => rangesAreEqual(a.selectedRange, b.selectedRange) && a.document.isEqualTo(b.document);\n\nclass EditorController extends Controller {\n  constructor(_ref) {\n    let {\n      editorElement,\n      document,\n      html\n    } = _ref;\n    super(...arguments);\n    this.editorElement = editorElement;\n    this.selectionManager = new SelectionManager(this.editorElement);\n    this.selectionManager.delegate = this;\n    this.composition = new Composition();\n    this.composition.delegate = this;\n    this.attachmentManager = new AttachmentManager(this.composition.getAttachments());\n    this.attachmentManager.delegate = this;\n    this.inputController = config.input.getLevel() === 2 ? new Level2InputController(this.editorElement) : new Level0InputController(this.editorElement);\n    this.inputController.delegate = this;\n    this.inputController.responder = this.composition;\n    this.compositionController = new CompositionController(this.editorElement, this.composition);\n    this.compositionController.delegate = this;\n    this.toolbarController = new ToolbarController(this.editorElement.toolbarElement);\n    this.toolbarController.delegate = this;\n    this.editor = new Editor(this.composition, this.selectionManager, this.editorElement);\n\n    if (document) {\n      this.editor.loadDocument(document);\n    } else {\n      this.editor.loadHTML(html);\n    }\n  }\n\n  registerSelectionManager() {\n    return selectionChangeObserver.registerSelectionManager(this.selectionManager);\n  }\n\n  unregisterSelectionManager() {\n    return selectionChangeObserver.unregisterSelectionManager(this.selectionManager);\n  }\n\n  render() {\n    return this.compositionController.render();\n  }\n\n  reparse() {\n    return this.composition.replaceHTML(this.editorElement.innerHTML);\n  } // Composition delegate\n\n\n  compositionDidChangeDocument(document) {\n    this.notifyEditorElement(\"document-change\");\n\n    if (!this.handlingInput) {\n      return this.render();\n    }\n  }\n\n  compositionDidChangeCurrentAttributes(currentAttributes) {\n    this.currentAttributes = currentAttributes;\n    this.toolbarController.updateAttributes(this.currentAttributes);\n    this.updateCurrentActions();\n    return this.notifyEditorElement(\"attributes-change\", {\n      attributes: this.currentAttributes\n    });\n  }\n\n  compositionDidPerformInsertionAtRange(range) {\n    if (this.pasting) {\n      this.pastedRange = range;\n    }\n  }\n\n  compositionShouldAcceptFile(file) {\n    return this.notifyEditorElement(\"file-accept\", {\n      file\n    });\n  }\n\n  compositionDidAddAttachment(attachment) {\n    const managedAttachment = this.attachmentManager.manageAttachment(attachment);\n    return this.notifyEditorElement(\"attachment-add\", {\n      attachment: managedAttachment\n    });\n  }\n\n  compositionDidEditAttachment(attachment) {\n    this.compositionController.rerenderViewForObject(attachment);\n    const managedAttachment = this.attachmentManager.manageAttachment(attachment);\n    this.notifyEditorElement(\"attachment-edit\", {\n      attachment: managedAttachment\n    });\n    return this.notifyEditorElement(\"change\");\n  }\n\n  compositionDidChangeAttachmentPreviewURL(attachment) {\n    this.compositionController.invalidateViewForObject(attachment);\n    return this.notifyEditorElement(\"change\");\n  }\n\n  compositionDidRemoveAttachment(attachment) {\n    const managedAttachment = this.attachmentManager.unmanageAttachment(attachment);\n    return this.notifyEditorElement(\"attachment-remove\", {\n      attachment: managedAttachment\n    });\n  }\n\n  compositionDidStartEditingAttachment(attachment, options) {\n    this.attachmentLocationRange = this.composition.document.getLocationRangeOfAttachment(attachment);\n    this.compositionController.installAttachmentEditorForAttachment(attachment, options);\n    return this.selectionManager.setLocationRange(this.attachmentLocationRange);\n  }\n\n  compositionDidStopEditingAttachment(attachment) {\n    this.compositionController.uninstallAttachmentEditor();\n    this.attachmentLocationRange = null;\n  }\n\n  compositionDidRequestChangingSelectionToLocationRange(locationRange) {\n    if (this.loadingSnapshot && !this.isFocused()) return;\n    this.requestedLocationRange = locationRange;\n    this.compositionRevisionWhenLocationRangeRequested = this.composition.revision;\n\n    if (!this.handlingInput) {\n      return this.render();\n    }\n  }\n\n  compositionWillLoadSnapshot() {\n    this.loadingSnapshot = true;\n  }\n\n  compositionDidLoadSnapshot() {\n    this.compositionController.refreshViewCache();\n    this.render();\n    this.loadingSnapshot = false;\n  }\n\n  getSelectionManager() {\n    return this.selectionManager;\n  } // Attachment manager delegate\n\n\n  attachmentManagerDidRequestRemovalOfAttachment(attachment) {\n    return this.removeAttachment(attachment);\n  } // Document controller delegate\n\n\n  compositionControllerWillSyncDocumentView() {\n    this.inputController.editorWillSyncDocumentView();\n    this.selectionManager.lock();\n    return this.selectionManager.clearSelection();\n  }\n\n  compositionControllerDidSyncDocumentView() {\n    this.inputController.editorDidSyncDocumentView();\n    this.selectionManager.unlock();\n    this.updateCurrentActions();\n    return this.notifyEditorElement(\"sync\");\n  }\n\n  compositionControllerDidRender() {\n    if (this.requestedLocationRange) {\n      if (this.compositionRevisionWhenLocationRangeRequested === this.composition.revision) {\n        this.selectionManager.setLocationRange(this.requestedLocationRange);\n      }\n\n      this.requestedLocationRange = null;\n      this.compositionRevisionWhenLocationRangeRequested = null;\n    }\n\n    if (this.renderedCompositionRevision !== this.composition.revision) {\n      this.runEditorFilters();\n      this.composition.updateCurrentAttributes();\n      this.notifyEditorElement(\"render\");\n    }\n\n    this.renderedCompositionRevision = this.composition.revision;\n  }\n\n  compositionControllerDidFocus() {\n    if (this.isFocusedInvisibly()) {\n      this.setLocationRange({\n        index: 0,\n        offset: 0\n      });\n    }\n\n    this.toolbarController.hideDialog();\n    return this.notifyEditorElement(\"focus\");\n  }\n\n  compositionControllerDidBlur() {\n    return this.notifyEditorElement(\"blur\");\n  }\n\n  compositionControllerDidSelectAttachment(attachment, options) {\n    this.toolbarController.hideDialog();\n    return this.composition.editAttachment(attachment, options);\n  }\n\n  compositionControllerDidRequestDeselectingAttachment(attachment) {\n    const locationRange = this.attachmentLocationRange || this.composition.document.getLocationRangeOfAttachment(attachment);\n    return this.selectionManager.setLocationRange(locationRange[1]);\n  }\n\n  compositionControllerWillUpdateAttachment(attachment) {\n    return this.editor.recordUndoEntry(\"Edit Attachment\", {\n      context: attachment.id,\n      consolidatable: true\n    });\n  }\n\n  compositionControllerDidRequestRemovalOfAttachment(attachment) {\n    return this.removeAttachment(attachment);\n  } // Input controller delegate\n\n\n  inputControllerWillHandleInput() {\n    this.handlingInput = true;\n    this.requestedRender = false;\n  }\n\n  inputControllerDidRequestRender() {\n    this.requestedRender = true;\n  }\n\n  inputControllerDidHandleInput() {\n    this.handlingInput = false;\n\n    if (this.requestedRender) {\n      this.requestedRender = false;\n      return this.render();\n    }\n  }\n\n  inputControllerDidAllowUnhandledInput() {\n    return this.notifyEditorElement(\"change\");\n  }\n\n  inputControllerDidRequestReparse() {\n    return this.reparse();\n  }\n\n  inputControllerWillPerformTyping() {\n    return this.recordTypingUndoEntry();\n  }\n\n  inputControllerWillPerformFormatting(attributeName) {\n    return this.recordFormattingUndoEntry(attributeName);\n  }\n\n  inputControllerWillCutText() {\n    return this.editor.recordUndoEntry(\"Cut\");\n  }\n\n  inputControllerWillPaste(paste) {\n    this.editor.recordUndoEntry(\"Paste\");\n    this.pasting = true;\n    return this.notifyEditorElement(\"before-paste\", {\n      paste\n    });\n  }\n\n  inputControllerDidPaste(paste) {\n    paste.range = this.pastedRange;\n    this.pastedRange = null;\n    this.pasting = null;\n    return this.notifyEditorElement(\"paste\", {\n      paste\n    });\n  }\n\n  inputControllerWillMoveText() {\n    return this.editor.recordUndoEntry(\"Move\");\n  }\n\n  inputControllerWillAttachFiles() {\n    return this.editor.recordUndoEntry(\"Drop Files\");\n  }\n\n  inputControllerWillPerformUndo() {\n    return this.editor.undo();\n  }\n\n  inputControllerWillPerformRedo() {\n    return this.editor.redo();\n  }\n\n  inputControllerDidReceiveKeyboardCommand(keys) {\n    return this.toolbarController.applyKeyboardCommand(keys);\n  }\n\n  inputControllerDidStartDrag() {\n    this.locationRangeBeforeDrag = this.selectionManager.getLocationRange();\n  }\n\n  inputControllerDidReceiveDragOverPoint(point) {\n    return this.selectionManager.setLocationRangeFromPointRange(point);\n  }\n\n  inputControllerDidCancelDrag() {\n    this.selectionManager.setLocationRange(this.locationRangeBeforeDrag);\n    this.locationRangeBeforeDrag = null;\n  } // Selection manager delegate\n\n\n  locationRangeDidChange(locationRange) {\n    this.composition.updateCurrentAttributes();\n    this.updateCurrentActions();\n\n    if (this.attachmentLocationRange && !rangesAreEqual(this.attachmentLocationRange, locationRange)) {\n      this.composition.stopEditingAttachment();\n    }\n\n    return this.notifyEditorElement(\"selection-change\");\n  } // Toolbar controller delegate\n\n\n  toolbarDidClickButton() {\n    if (!this.getLocationRange()) {\n      return this.setLocationRange({\n        index: 0,\n        offset: 0\n      });\n    }\n  }\n\n  toolbarDidInvokeAction(actionName) {\n    return this.invokeAction(actionName);\n  }\n\n  toolbarDidToggleAttribute(attributeName) {\n    this.recordFormattingUndoEntry(attributeName);\n    this.composition.toggleCurrentAttribute(attributeName);\n    this.render();\n\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus();\n    }\n  }\n\n  toolbarDidUpdateAttribute(attributeName, value) {\n    this.recordFormattingUndoEntry(attributeName);\n    this.composition.setCurrentAttribute(attributeName, value);\n    this.render();\n\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus();\n    }\n  }\n\n  toolbarDidRemoveAttribute(attributeName) {\n    this.recordFormattingUndoEntry(attributeName);\n    this.composition.removeCurrentAttribute(attributeName);\n    this.render();\n\n    if (!this.selectionFrozen) {\n      return this.editorElement.focus();\n    }\n  }\n\n  toolbarWillShowDialog(dialogElement) {\n    this.composition.expandSelectionForEditing();\n    return this.freezeSelection();\n  }\n\n  toolbarDidShowDialog(dialogName) {\n    return this.notifyEditorElement(\"toolbar-dialog-show\", {\n      dialogName\n    });\n  }\n\n  toolbarDidHideDialog(dialogName) {\n    this.thawSelection();\n    this.editorElement.focus();\n    return this.notifyEditorElement(\"toolbar-dialog-hide\", {\n      dialogName\n    });\n  } // Selection\n\n\n  freezeSelection() {\n    if (!this.selectionFrozen) {\n      this.selectionManager.lock();\n      this.composition.freezeSelection();\n      this.selectionFrozen = true;\n      return this.render();\n    }\n  }\n\n  thawSelection() {\n    if (this.selectionFrozen) {\n      this.composition.thawSelection();\n      this.selectionManager.unlock();\n      this.selectionFrozen = false;\n      return this.render();\n    }\n  }\n\n  canInvokeAction(actionName) {\n    if (this.actionIsExternal(actionName)) {\n      return true;\n    } else {\n      var _this$actions$actionN, _this$actions$actionN2;\n\n      return !!((_this$actions$actionN = this.actions[actionName]) !== null && _this$actions$actionN !== void 0 && (_this$actions$actionN2 = _this$actions$actionN.test) !== null && _this$actions$actionN2 !== void 0 && _this$actions$actionN2.call(this));\n    }\n  }\n\n  invokeAction(actionName) {\n    if (this.actionIsExternal(actionName)) {\n      return this.notifyEditorElement(\"action-invoke\", {\n        actionName\n      });\n    } else {\n      var _this$actions$actionN3, _this$actions$actionN4;\n\n      return (_this$actions$actionN3 = this.actions[actionName]) === null || _this$actions$actionN3 === void 0 ? void 0 : (_this$actions$actionN4 = _this$actions$actionN3.perform) === null || _this$actions$actionN4 === void 0 ? void 0 : _this$actions$actionN4.call(this);\n    }\n  }\n\n  actionIsExternal(actionName) {\n    return /^x-./.test(actionName);\n  }\n\n  getCurrentActions() {\n    const result = {};\n\n    for (const actionName in this.actions) {\n      result[actionName] = this.canInvokeAction(actionName);\n    }\n\n    return result;\n  }\n\n  updateCurrentActions() {\n    const currentActions = this.getCurrentActions();\n\n    if (!objectsAreEqual(currentActions, this.currentActions)) {\n      this.currentActions = currentActions;\n      this.toolbarController.updateActions(this.currentActions);\n      return this.notifyEditorElement(\"actions-change\", {\n        actions: this.currentActions\n      });\n    }\n  } // Editor filters\n\n\n  runEditorFilters() {\n    let snapshot = this.composition.getSnapshot();\n    Array.from(this.editor.filters).forEach(filter => {\n      const {\n        document,\n        selectedRange\n      } = snapshot;\n      snapshot = filter.call(this.editor, snapshot) || {};\n\n      if (!snapshot.document) {\n        snapshot.document = document;\n      }\n\n      if (!snapshot.selectedRange) {\n        snapshot.selectedRange = selectedRange;\n      }\n    });\n\n    if (!snapshotsAreEqual(snapshot, this.composition.getSnapshot())) {\n      return this.composition.loadSnapshot(snapshot);\n    }\n  } // Private\n\n\n  updateInputElement() {\n    const element = this.compositionController.getSerializableElement();\n    const value = serializeToContentType(element, \"text/html\");\n    return this.editorElement.setInputElementValue(value);\n  }\n\n  notifyEditorElement(message, data) {\n    switch (message) {\n      case \"document-change\":\n        this.documentChangedSinceLastRender = true;\n        break;\n\n      case \"render\":\n        if (this.documentChangedSinceLastRender) {\n          this.documentChangedSinceLastRender = false;\n          this.notifyEditorElement(\"change\");\n        }\n\n        break;\n\n      case \"change\":\n      case \"attachment-add\":\n      case \"attachment-edit\":\n      case \"attachment-remove\":\n        this.updateInputElement();\n        break;\n    }\n\n    return this.editorElement.notify(message, data);\n  }\n\n  removeAttachment(attachment) {\n    this.editor.recordUndoEntry(\"Delete Attachment\");\n    this.composition.removeAttachment(attachment);\n    return this.render();\n  }\n\n  recordFormattingUndoEntry(attributeName) {\n    const blockConfig = getBlockConfig(attributeName);\n    const locationRange = this.selectionManager.getLocationRange();\n\n    if (blockConfig || !rangeIsCollapsed(locationRange)) {\n      return this.editor.recordUndoEntry(\"Formatting\", {\n        context: this.getUndoContext(),\n        consolidatable: true\n      });\n    }\n  }\n\n  recordTypingUndoEntry() {\n    return this.editor.recordUndoEntry(\"Typing\", {\n      context: this.getUndoContext(this.currentAttributes),\n      consolidatable: true\n    });\n  }\n\n  getUndoContext() {\n    for (var _len = arguments.length, context = new Array(_len), _key = 0; _key < _len; _key++) {\n      context[_key] = arguments[_key];\n    }\n\n    return [this.getLocationContext(), this.getTimeContext(), ...Array.from(context)];\n  }\n\n  getLocationContext() {\n    const locationRange = this.selectionManager.getLocationRange();\n\n    if (rangeIsCollapsed(locationRange)) {\n      return locationRange[0].index;\n    } else {\n      return locationRange;\n    }\n  }\n\n  getTimeContext() {\n    if (config.undoInterval > 0) {\n      return Math.floor(new Date().getTime() / config.undoInterval);\n    } else {\n      return 0;\n    }\n  }\n\n  isFocused() {\n    var _this$editorElement$o;\n\n    return this.editorElement === ((_this$editorElement$o = this.editorElement.ownerDocument) === null || _this$editorElement$o === void 0 ? void 0 : _this$editorElement$o.activeElement);\n  } // Detect \"Cursor disappears sporadically\" Firefox bug.\n  // - https://bugzilla.mozilla.org/show_bug.cgi?id=226301\n\n\n  isFocusedInvisibly() {\n    return this.isFocused() && !this.getLocationRange();\n  }\n\n  get actions() {\n    return this.constructor.actions;\n  }\n\n}\n\n_defineProperty(EditorController, \"actions\", {\n  undo: {\n    test() {\n      return this.editor.canUndo();\n    },\n\n    perform() {\n      return this.editor.undo();\n    }\n\n  },\n  redo: {\n    test() {\n      return this.editor.canRedo();\n    },\n\n    perform() {\n      return this.editor.redo();\n    }\n\n  },\n  link: {\n    test() {\n      return this.editor.canActivateAttribute(\"href\");\n    }\n\n  },\n  increaseNestingLevel: {\n    test() {\n      return this.editor.canIncreaseNestingLevel();\n    },\n\n    perform() {\n      return this.editor.increaseNestingLevel() && this.render();\n    }\n\n  },\n  decreaseNestingLevel: {\n    test() {\n      return this.editor.canDecreaseNestingLevel();\n    },\n\n    perform() {\n      return this.editor.decreaseNestingLevel() && this.render();\n    }\n\n  },\n  attachFiles: {\n    test() {\n      return true;\n    },\n\n    perform() {\n      return config.input.pickFiles(this.editor.insertFiles);\n    }\n\n  }\n});\n\nEditorController.proxyMethod(\"getSelectionManager().setLocationRange\");\nEditorController.proxyMethod(\"getSelectionManager().getLocationRange\");\n\ninstallDefaultCSSForTagName(\"trix-toolbar\", \"%t {\\n  display: block;\\n}\\n\\n%t {\\n  white-space: nowrap;\\n}\\n\\n%t [data-trix-dialog] {\\n  display: none;\\n}\\n\\n%t [data-trix-dialog][data-trix-active] {\\n  display: block;\\n}\\n\\n%t [data-trix-dialog] [data-trix-validate]:invalid {\\n  background-color: #ffdddd;\\n}\");\nclass TrixToolbarElement extends HTMLElement {\n  // Element lifecycle\n  connectedCallback() {\n    if (this.innerHTML === \"\") {\n      this.innerHTML = config.toolbar.getDefaultHTML();\n    }\n  }\n\n}\nwindow.customElements.define(\"trix-toolbar\", TrixToolbarElement);\n\nlet id = 0; // Contenteditable support helpers\n\nconst autofocus = function (element) {\n  if (!document.querySelector(\":focus\")) {\n    if (element.hasAttribute(\"autofocus\") && document.querySelector(\"[autofocus]\") === element) {\n      return element.focus();\n    }\n  }\n};\n\nconst makeEditable = function (element) {\n  if (element.hasAttribute(\"contenteditable\")) {\n    return;\n  }\n\n  element.setAttribute(\"contenteditable\", \"\");\n  return handleEventOnce(\"focus\", {\n    onElement: element,\n\n    withCallback() {\n      return configureContentEditable(element);\n    }\n\n  });\n};\n\nconst configureContentEditable = function (element) {\n  disableObjectResizing(element);\n  return setDefaultParagraphSeparator(element);\n};\n\nconst disableObjectResizing = function (element) {\n  var _document$queryComman, _document;\n\n  if ((_document$queryComman = (_document = document).queryCommandSupported) !== null && _document$queryComman !== void 0 && _document$queryComman.call(_document, \"enableObjectResizing\")) {\n    document.execCommand(\"enableObjectResizing\", false, false);\n    return handleEvent(\"mscontrolselect\", {\n      onElement: element,\n      preventDefault: true\n    });\n  }\n};\n\nconst setDefaultParagraphSeparator = function (element) {\n  var _document$queryComman2, _document2;\n\n  if ((_document$queryComman2 = (_document2 = document).queryCommandSupported) !== null && _document$queryComman2 !== void 0 && _document$queryComman2.call(_document2, \"DefaultParagraphSeparator\")) {\n    const {\n      tagName\n    } = config.blockAttributes.default;\n\n    if ([\"div\", \"p\"].includes(tagName)) {\n      return document.execCommand(\"DefaultParagraphSeparator\", false, tagName);\n    }\n  }\n}; // Accessibility helpers\n\n\nconst addAccessibilityRole = function (element) {\n  if (element.hasAttribute(\"role\")) {\n    return;\n  }\n\n  return element.setAttribute(\"role\", \"textbox\");\n};\n\nconst ensureAriaLabel = function (element) {\n  if (element.hasAttribute(\"aria-label\") || element.hasAttribute(\"aria-labelledby\")) {\n    return;\n  }\n\n  const update = function () {\n    const texts = Array.from(element.labels).map(label => {\n      if (!label.contains(element)) return label.textContent;\n    }).filter(text => text);\n    const text = texts.join(\" \");\n\n    if (text) {\n      return element.setAttribute(\"aria-label\", text);\n    } else {\n      return element.removeAttribute(\"aria-label\");\n    }\n  };\n\n  update();\n  return handleEvent(\"focus\", {\n    onElement: element,\n    withCallback: update\n  });\n}; // Style\n\n\nconst cursorTargetStyles = function () {\n  if (config.browser.forcesObjectResizing) {\n    return {\n      display: \"inline\",\n      width: \"auto\"\n    };\n  } else {\n    return {\n      display: \"inline-block\",\n      width: \"1px\"\n    };\n  }\n}();\n\ninstallDefaultCSSForTagName(\"trix-editor\", \"%t {\\n    display: block;\\n}\\n\\n%t:empty:not(:focus)::before {\\n    content: attr(placeholder);\\n    color: graytext;\\n    cursor: text;\\n    pointer-events: none;\\n    white-space: pre-line;\\n}\\n\\n%t a[contenteditable=false] {\\n    cursor: text;\\n}\\n\\n%t img {\\n    max-width: 100%;\\n    height: auto;\\n}\\n\\n%t \".concat(attachmentSelector, \" figcaption textarea {\\n    resize: none;\\n}\\n\\n%t \").concat(attachmentSelector, \" figcaption textarea.trix-autoresize-clone {\\n    position: absolute;\\n    left: -9999px;\\n    max-height: 0px;\\n}\\n\\n%t \").concat(attachmentSelector, \" figcaption[data-trix-placeholder]:empty::before {\\n    content: attr(data-trix-placeholder);\\n    color: graytext;\\n}\\n\\n%t [data-trix-cursor-target] {\\n    display: \").concat(cursorTargetStyles.display, \" !important;\\n    width: \").concat(cursorTargetStyles.width, \" !important;\\n    padding: 0 !important;\\n    margin: 0 !important;\\n    border: none !important;\\n}\\n\\n%t [data-trix-cursor-target=left] {\\n    vertical-align: top !important;\\n    margin-left: -1px !important;\\n}\\n\\n%t [data-trix-cursor-target=right] {\\n    vertical-align: bottom !important;\\n    margin-right: -1px !important;\\n}\"));\nclass TrixEditorElement extends HTMLElement {\n  // Properties\n  get trixId() {\n    if (this.hasAttribute(\"trix-id\")) {\n      return this.getAttribute(\"trix-id\");\n    } else {\n      this.setAttribute(\"trix-id\", ++id);\n      return this.trixId;\n    }\n  }\n\n  get labels() {\n    const labels = [];\n\n    if (this.id && this.ownerDocument) {\n      labels.push(...Array.from(this.ownerDocument.querySelectorAll(\"label[for='\".concat(this.id, \"']\")) || []));\n    }\n\n    const label = findClosestElementFromNode(this, {\n      matchingSelector: \"label\"\n    });\n\n    if (label) {\n      if ([this, null].includes(label.control)) {\n        labels.push(label);\n      }\n    }\n\n    return labels;\n  }\n\n  get toolbarElement() {\n    if (this.hasAttribute(\"toolbar\")) {\n      var _this$ownerDocument;\n\n      return (_this$ownerDocument = this.ownerDocument) === null || _this$ownerDocument === void 0 ? void 0 : _this$ownerDocument.getElementById(this.getAttribute(\"toolbar\"));\n    } else if (this.parentNode) {\n      const toolbarId = \"trix-toolbar-\".concat(this.trixId);\n      this.setAttribute(\"toolbar\", toolbarId);\n      const element = makeElement(\"trix-toolbar\", {\n        id: toolbarId\n      });\n      this.parentNode.insertBefore(element, this);\n      return element;\n    } else {\n      return undefined;\n    }\n  }\n\n  get form() {\n    var _this$inputElement;\n\n    return (_this$inputElement = this.inputElement) === null || _this$inputElement === void 0 ? void 0 : _this$inputElement.form;\n  }\n\n  get inputElement() {\n    if (this.hasAttribute(\"input\")) {\n      var _this$ownerDocument2;\n\n      return (_this$ownerDocument2 = this.ownerDocument) === null || _this$ownerDocument2 === void 0 ? void 0 : _this$ownerDocument2.getElementById(this.getAttribute(\"input\"));\n    } else if (this.parentNode) {\n      const inputId = \"trix-input-\".concat(this.trixId);\n      this.setAttribute(\"input\", inputId);\n      const element = makeElement(\"input\", {\n        type: \"hidden\",\n        id: inputId\n      });\n      this.parentNode.insertBefore(element, this.nextElementSibling);\n      return element;\n    } else {\n      return undefined;\n    }\n  }\n\n  get editor() {\n    var _this$editorControlle;\n\n    return (_this$editorControlle = this.editorController) === null || _this$editorControlle === void 0 ? void 0 : _this$editorControlle.editor;\n  }\n\n  get name() {\n    var _this$inputElement2;\n\n    return (_this$inputElement2 = this.inputElement) === null || _this$inputElement2 === void 0 ? void 0 : _this$inputElement2.name;\n  }\n\n  get value() {\n    var _this$inputElement3;\n\n    return (_this$inputElement3 = this.inputElement) === null || _this$inputElement3 === void 0 ? void 0 : _this$inputElement3.value;\n  }\n\n  set value(defaultValue) {\n    var _this$editor;\n\n    this.defaultValue = defaultValue;\n    (_this$editor = this.editor) === null || _this$editor === void 0 ? void 0 : _this$editor.loadHTML(this.defaultValue);\n  } // Controller delegate methods\n\n\n  notify(message, data) {\n    if (this.editorController) {\n      return triggerEvent(\"trix-\".concat(message), {\n        onElement: this,\n        attributes: data\n      });\n    }\n  }\n\n  setInputElementValue(value) {\n    if (this.inputElement) {\n      this.inputElement.value = value;\n    }\n  } // Element lifecycle\n\n\n  connectedCallback() {\n    if (!this.hasAttribute(\"data-trix-internal\")) {\n      makeEditable(this);\n      addAccessibilityRole(this);\n      ensureAriaLabel(this);\n\n      if (!this.editorController) {\n        triggerEvent(\"trix-before-initialize\", {\n          onElement: this\n        });\n        this.editorController = new EditorController({\n          editorElement: this,\n          html: this.defaultValue = this.value\n        });\n        requestAnimationFrame(() => triggerEvent(\"trix-initialize\", {\n          onElement: this\n        }));\n      }\n\n      this.editorController.registerSelectionManager();\n      this.registerResetListener();\n      this.registerClickListener();\n      autofocus(this);\n    }\n  }\n\n  disconnectedCallback() {\n    var _this$editorControlle2;\n\n    (_this$editorControlle2 = this.editorController) === null || _this$editorControlle2 === void 0 ? void 0 : _this$editorControlle2.unregisterSelectionManager();\n    this.unregisterResetListener();\n    return this.unregisterClickListener();\n  } // Form support\n\n\n  registerResetListener() {\n    this.resetListener = this.resetBubbled.bind(this);\n    return window.addEventListener(\"reset\", this.resetListener, false);\n  }\n\n  unregisterResetListener() {\n    return window.removeEventListener(\"reset\", this.resetListener, false);\n  }\n\n  registerClickListener() {\n    this.clickListener = this.clickBubbled.bind(this);\n    return window.addEventListener(\"click\", this.clickListener, false);\n  }\n\n  unregisterClickListener() {\n    return window.removeEventListener(\"click\", this.clickListener, false);\n  }\n\n  resetBubbled(event) {\n    if (event.defaultPrevented) return;\n    if (event.target !== this.form) return;\n    return this.reset();\n  }\n\n  clickBubbled(event) {\n    if (event.defaultPrevented) return;\n    if (this.contains(event.target)) return;\n    const label = findClosestElementFromNode(event.target, {\n      matchingSelector: \"label\"\n    });\n    if (!label) return;\n    if (!Array.from(this.labels).includes(label)) return;\n    return this.focus();\n  }\n\n  reset() {\n    this.value = this.defaultValue;\n  }\n\n}\nwindow.customElements.define(\"trix-editor\", TrixEditorElement);\n\nexport { Trix as default };\n","<template>\r\n  <div class=\"wysiwyg\">\r\n    <input :id=\"inputId\" type=\"hidden\" :name=\"name\" :value=\"value\" ref=\"input\">\r\n\r\n    <trix-editor ref=\"trix\" :input=\"inputId\"></trix-editor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport Trix from 'trix'\r\n\r\nVue.config.ignoredElements = ['trix-editor']\r\n\r\nlet { lang } = Trix.config\r\n\r\nTrix.config.toolbar = {\r\n  getDefaultHTML: () => `\r\n    <div class=\"trix-button-row\">\r\n      <span class=\"trix-button-group trix-button-group--text-tools\" data-trix-button-group=\"text-tools\">\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bold\" data-trix-attribute=\"bold\" data-trix-key=\"b\" title=\"${lang.bold}\" tabindex=\"-1\">${lang.bold}</button>\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-italic\" data-trix-attribute=\"italic\" data-trix-key=\"i\" title=\"${lang.italic}\" tabindex=\"-1\">${lang.italic}</button>\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-strike\" data-trix-attribute=\"strike\" title=\"#{lang.strike}\" tabindex=\"-1\">${lang.strike}</button>\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-link\" data-trix-attribute=\"href\" data-trix-action=\"link\" data-trix-key=\"k\" title=\"${lang.link}\" tabindex=\"-1\">${lang.link}</button>\r\n      </span>\r\n      <span class=\"trix-button-group trix-button-group--history-tools\" data-trix-button-group=\"history-tools\">\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-undo\" data-trix-action=\"undo\" data-trix-key=\"z\" title=\"${lang.undo}\" tabindex=\"-1\">${lang.undo}</button>\r\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-redo\" data-trix-action=\"redo\" data-trix-key=\"shift+z\" title=\"${lang.redo}\" tabindex=\"-1\">${lang.redo}</button>\r\n      </span>\r\n    </div>\r\n    <div class=\"trix-dialogs\" data-trix-dialogs>\r\n      <div class=\"trix-dialog trix-dialog--link\" data-trix-dialog=\"href\" data-trix-dialog-attribute=\"href\">\r\n        <div class=\"trix-dialog__link-fields\">\r\n          <input type=\"url\" name=\"href\" class=\"trix-input trix-input--dialog\" placeholder=\"${lang.urlPlaceholder}\" required data-trix-input>\r\n          <div class=\"trix-button-group\">\r\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.link}\" data-trix-method=\"setAttribute\">\r\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.unlink}\" data-trix-method=\"removeAttribute\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `\r\n}\r\n\r\nfunction makeid() {\r\n  let text = \"\"\r\n  const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"\r\n\r\n  for (let i = 0; i < 5; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length))\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\nexport default {\r\n  name: 'nzWysiwyg',\r\n\r\n  props: {\r\n    name: String,\r\n    value: String\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      inputId: makeid()\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.$refs.trix.addEventListener('trix-change', this.onInput)\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.$refs.trix.removeEventListener('trix-change', this.onInput)\r\n  },\r\n\r\n  methods: {\r\n    onInput(e) {\r\n      this.$emit('input', e.target.innerHTML)\r\n    },\r\n\r\n    focus() {\r\n      this.$refs.trix.focus()\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wysiwyg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wysiwyg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Wysiwyg.vue?vue&type=template&id=95efe7ba&\"\nimport script from \"./Wysiwyg.vue?vue&type=script&lang=js&\"\nexport * from \"./Wysiwyg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","Errors","errors","arguments","undefined","this","record","field","hasError","hasOwnProperty","keys","filter","e","startsWith","get","_this","forEach","assign","obj","_typeof","Symbol","iterator","constructor","_Errors","_Errors2","__esModule","default","_util","Form","data","options","processing","successful","withData","withOptions","withErrors","isArray","reduce","carry","element","setInitialValues","guardAgainstReservedFieldName","__options","resetOnSuccess","onSuccess","onFail","windowAxios","window","axios","__http","http","Error","property","initial","fields","filtered","merge","clear","values","_this2","_defineProperty","url","submit","requestType","_this3","__validateRequestType","Promise","resolve","reject","hasFiles","objectToFormData","then","response","catch","error","hasFilesDeep","object","Array","_key","isFile","reset","has","first","requestTypes","indexOf","join","_Form","_interopRequireDefault","fieldName","reservedFieldNames","formData","FormData","parent","append","appendToFormData","getKey","Date","toISOString","File","name","_objects","_formData","_fieldNameValidation","FileList","cloneDeep","clone","_clone","toString","call","a","b","module","array","predicate","fromIndex","fromRight","index","arrayPush","isFlattenable","baseFlatten","depth","isStrict","result","castPath","toKey","path","Stack","baseIsEqual","source","matchData","customizer","noCustomizer","objValue","srcValue","stack","COMPARE_PARTIAL_FLAG","baseMatches","baseMatchesProperty","identity","baseIsMatch","getMatchData","matchesStrictComparable","hasIn","isKey","isStrictComparable","basePickBy","paths","baseGet","baseSet","assignValue","isIndex","isObject","lastIndex","nested","newValue","stringToPath","baseIteratee","isArrayLike","findIndexFunc","collection","iterable","iteratee","flatten","overRest","setToString","func","isArguments","isLength","hasFunc","spreadableSymbol","isConcatSpreadable","isSymbol","reIsDeepProp","reIsPlainProp","type","test","memoize","cache","size","memoizeCapped","rePropName","reEscapeChar","string","charCodeAt","push","replace","match","number","quote","subString","now","toNumber","nativeMax","Math","max","nativeMin","min","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","clearTimeout","cancel","flush","find","createFind","baseFindIndex","toInteger","defaultValue","baseHasIn","hasPath","MapCache","resolver","memoized","set","Cache","root","basePick","pick","flatRest","baseProperty","basePropertyDeep","toFinite","remainder","action","String","required","method","redirectUrl","cancelUrl","submitMore","Boolean","shouldConfirmSubmit","confirmSubmitMessage","trans","shouldAskReason","shouldConfirmCancel","submitOnlyDirty","submitOnlyDirtyMessage","form","newForm","keepAfterSubmit","submittingWithRedirect","submittingWithoutRedirect","confirmingSubmit","confirmingCancel","locale","App","created","document","addEventListener","registerKeyListener","beforeDestroy","removeEventListener","methods","enter","which","keyCode","ctrlKey","shiftKey","submitWithoutRedirect","submitWithRedirect","confirmSubmit","onConfirm","message","confirmText","cancelText","onCancel","promptForReason","$buefy","dialog","confirm","prompt","inputAttrs","placeholder","maxlength","$nextTick","$refs","input","setCustomValidity","validity","valid","validationMessage","notifyNoChanges","toast","open","notifyNoChangesAndRedirect","location","href","isDirty","performSubmitWithRedirect","reason","toLowerCase","onSuccessfulSubmitWithRedirect","onFailedSubmit","hookAfterSubmitWithRedirect","performSubmitWithoutRedirect","onSuccessfulSubmitWithoutRedirect","keep","_pick","populate","hookAfterSubmitWithoutRedirect","duration","_get","_isEqual","confirmCancel","event","preventDefault","defaultTranslations","_keys","mixins","components","NzWysiwyg","NzTaxonAutocomplete","taxon","parent_id","rank","rank_level","author","fe_id","fe_old_id","conservation_legislations","conservation_documents","red_lists","stages","restricted","allochthonous","invasive","uses_atlas_codes","synonyms","countries","removedSynonyms","ranks","conservationLegislations","conservationDocuments","redListCategories","redLists","nativeNames","descriptions","synonymNames","parentName","selectedParent","chosenRedList","synonym_name","computed","rankOptions","availableRedLists","supportedLocales","watch","stages_ids","conservation_legislations_ids","conservation_documents_ids","countries_ids","red_lists_data","red_list_id","category","native_name","description","synonym_names","removed_synonyms","removeSynonym","id","addSynonym","addRedList","removeRedList","getRedListName","onTaxonSelect","shouldResetRank","getRankLevel","focusOnTranslation","attribute","_first","_vm","_c","_self","attrs","on","$event","staticClass","_l","country","model","callback","$$v","$set","expression","_v","_s","domProps","label","ref","refInFor","stage","_e","conservationLegislation","conservationDocument","addedRedList","option","synonym","directives","rawName","content","nativeOn","_k","class","except","autofocus","selected","loading","page","isLastPage","haveThumbnail","icon","fetchData","limit","params","onSelect","onInput","focusOnInput","getValue","enterPressed","loadMore","thumbnail_url","scopedSlots","_u","fn","version","attachmentSelector","attributes","tagName","parse","nestable","heading1","terminal","breakOnReturn","group","code","text","plaintext","bulletList","bullet","listAttribute","tagName$1","parentNode","numberList","attachmentGallery","exclusive","_element$tagName","browser$1","composesExistingText","navigator","userAgent","forcesObjectResizing","supportsInputEvents","InputEvent","lang$1","attachFiles","bold","bullets","byte","bytes","captionPlaceholder","indent","italic","link","numbers","outdent","redo","remove","strike","undo","unlink","urlPlaceholder","GB","KB","MB","PB","TB","sizes","fileSize","prefix","precision","formatter","concat","base","exp","floor","log","withoutInsignificantZeros","pow","toFixed","ZERO_WIDTH_SPACE","NON_BREAKING_SPACE","extend","properties","html","documentElement","matches","handleEvent","eventName","onElement","matchingSelector","withCallback","inPhase","times","selector","useCapture","handler","destroy","findClosestElementFromNode","triggerEvent","bubbles","cancelable","createEvent","initEvent","dispatchEvent","elementMatchesSelector","nodeType","node","untilNode","Node","ELEMENT_NODE","closest","innerElementIsActive","activeElement","elementContainsNode","findChildIndexOfNode","_node","childIndex","previousSibling","removeNode","_node$parentNode","removeChild","walkTree","tree","onlyNodesOfType","usingFilter","expandEntityReferences","whatToShow","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","SHOW_COMMENT","SHOW_ALL","createTreeWalker","makeElement","tag","createElement","editable","contenteditable","setAttribute","style","dataset","className","split","classList","add","textContent","childNodes","childNode","appendChild","blockTagNames","getBlockTagNames","attributes$1","nodeIsBlockContainer","nodeIsBlockStartComment","firstChild","nodeProbablyIsBlockContainer","includes","nodeIsBlockStart","strict","nodeIsCommentNode","COMMENT_NODE","nodeIsCursorTarget","nodeIsTextNode","trixCursorTarget","nodeIsAttachmentElement","nodeIsEmptyTextNode","TEXT_NODE","textAttributes","inheritable","parser","getComputedStyle","fontWeight","fontStyle","groupTagName","getAttribute","frozen","backgroundColor","config","attachments","preview","presentation","caption","file","blockAttributes","browser","css","attachment","attachmentCaption","attachmentCaptionEditor","attachmentMetadata","attachmentMetadataContainer","attachmentName","attachmentProgress","attachmentSize","attachmentToolbar","level2Enabled","getLevel","pickFiles","multiple","hidden","fileInputId","files","getElementById","body","click","keyNames","lang","toolbar","getDefaultHTML","undoInterval","_AwaitValue","wrapped","_AsyncGenerator","gen","front","back","resume","arg","wrappedAwait","settle","done","err","next","_invoke","request","return","asyncIterator","throw","BasicObject","static","toMethod","toProperty","optional","parseProxyMethodExpression","subject","_this$toMethod","_object","proxyMethodExpressionPattern","Function","RegExp","_Array$from","_$codePointAt$1","_String$fromCodePoint","UTF16String","fromUCS2String","ucs2String","ucs2decode","codepoints","ucs2encode","super","ucs2Length","offsetToUCS2Offset","offset","slice","offsetFromUCS2Offset","ucs2Offset","fromCodepoints","charAt","isEqualTo","box","toJSON","getCacheKey","hasArrayFrom","from","hasStringCodePointAt$1","codePointAt","hasStringFromCodePoint","fromCodePoint","map","char","output","counter","extra","fromCharCode","id$1","TrixObject","jsonString","fromJSON","JSON","hasSameConstructorAs","inspect","parts","contents","contentsForInspection","toJSONString","stringify","toUTF16String","arraysAreEqual","spliceArray","_len","splice","RTL_PATTERN","getDirection","dir","dirName","supportsDirName","supportsDirSelector","trim","allAttributeNames","blockAttributeNames","textAttributeNames","listAttributeNames","getAllAttributeNames","getTextAttributeNames","getBlockAttributeNames","getBlockConfig","attributeName","getTextConfig","installDefaultCSSForTagName","defaultCSS","insertStyleElementForTagName","nonce","getCSPNonce","head","insertBefore","getMetaElement","querySelector","testTransferData","dataTransferIsPlainText","dataTransfer","getData","DOMParser","parseFromString","keyEventIsKeyboardCommand","platform","metaKey","defer","copyObject","objectsAreEqual","normalizeRange","range","copyValue","rangeIsCollapsed","start","end","rangeValuesAreEqual","rangesAreEqual","leftRange","rightRange","leftStart","leftEnd","rightStart","rightEnd","left","right","domRangesAreEqual","startContainer","startOffset","endContainer","endOffset","selectionChangeObserver","update","bind","run","selectionManagers","started","stop","registerSelectionManager","selectionManager","unregisterSelectionManager","s","notifySelectionManagersOfSelectionChange","selectionDidChange","domRange","getDOMRange","requestAnimationFrame","getDOMSelection","selection","getSelection","rangeCount","_getDOMSelection","getRangeAt","domRangeIsPrivate","setDOMRange","removeAllRanges","addRange","nodeIsPrivate","getPrototypeOf","normalizeSpaces","breakableWhitespacePattern","squishBreakableWhitespace","utf16StringDifferences","diffA","utf16StringDifference","utf16String","diffB","leftIndex","rightIndexA","rightIndexB","Hash","objects","hash","getKeys","getKeysCommonToHash","copy","unbox","toArray","isEmpty","toObject","keyToRemove","sort","Operation","isPerforming","performing","hasPerformed","performed","hasSucceeded","succeeded","hasFailed","getPromise","promise","perform","release","_this$promise","_this$promise$cancel","proxyMethod","ImagePreloadOperation","image","Image","onload","width","naturalWidth","height","naturalHeight","onerror","src","Attachment","attributesForFile","setFile","filename","filesize","contentType","attachmentJSON","releaseFile","didChangeAttributes","hasAttribute","getAttributes","setAttributes","newAttributes","_this$previewDelegate","_this$previewDelegate2","_this$delegate","_this$delegate$attach","previewDelegate","attachmentDidChangeAttributes","delegate","isPreviewable","preloadURL","isPending","getURL","getHref","previewablePattern","getContentType","getType","hasContent","getFilename","getFilesize","getFormattedFilesize","getExtension","_this$getFilename$mat","getContent","getWidth","getHeight","getFile","preloadFile","releasePreloadedFile","getUploadProgress","uploadProgress","setUploadProgress","_this$uploadProgressD","_this$uploadProgressD2","uploadProgressDelegate","attachmentDidChangeUploadProgress","getPreviewURL","previewURL","preloadingURL","setPreviewURL","_this$previewDelegate3","_this$previewDelegate4","_this$delegate2","_this$delegate2$attac","attachmentDidChangePreviewURL","preload","fileObjectURL","URL","createObjectURL","revokeObjectURL","_ref","ManagedAttachment","attachmentManager","requestRemovalOfAttachment","AttachmentManager","managedAttachments","manageAttachment","getAttachments","attachmentIsManaged","attachmentManagerDidRequestRemovalOfAttachment","unmanageAttachment","managedAttachment","Piece","types","pieceJSON","copyWithAttributes","copyWithAdditionalAttributes","copyWithoutAttribute","getAttributesHash","hasSameStringValueAsPiece","piece","hasSameAttributesAsPiece","isBlockBreak","isSerializable","canBeGrouped","canBeGroupedWith","getLength","canBeConsolidatedWith","AttachmentPiece","ensureAttachmentExclusivelyHasAttribute","removeProhibitedAttributes","permittedAttributes","getCaption","_piece$attachment","json","toConsole","registerType","StringPiece","normalizeNewlines","consolidateWith","splitAtOffset","SplittableList","eachObject","insertObjectAtIndex","insertSplittableListAtIndex","splittableList","insertSplittableListAtPosition","position","splitObjectAtPosition","editObjectAtIndex","replaceObjectAtIndex","removeObjectAtIndex","getObjectAtIndex","getSplittableListInRange","rightIndex","splitObjectsAtRange","selectSplittableList","removeObjectsInRange","transformObjectsInRange","transform","transformedObjects","rightOuterIndex","leftInnerIndex","startOfRange","endOfRange","getObjectAtPosition","findIndexAndOffsetAtPosition","splitIndex","splitOffset","leftObject","rightObject","consolidate","pendingObject","_pendingObject$canBeC","_pendingObject","consolidateFromIndexToIndex","startIndex","endIndex","objectsInRange","consolidatedInRange","currentPosition","nextPosition","findPositionAtIndexAndOffset","currentIndex","getEndPosition","endPosition","objectArraysAreEqual","Text","textJSON","pieces","notEmpty","pieceList","copyWithPieceList","copyUsingObjectMap","objectMap","getPieces","appendText","insertTextAtPosition","removeTextAtRange","replaceTextAtRange","moveTextFromRangeToPosition","getTextAtRange","addAttributeAtRange","addAttributesAtRange","removeAttributeAtRange","setAttributesAtRange","getAttributesAtPosition","_this$pieceList$getOb","getCommonAttributes","fromCommonAttributesOfObjects","getCommonAttributesAtRange","getExpandedRangeForAttributeAtOffset","getStringAtRange","getStringAtPosition","startsWithString","endsWithString","getAttachmentPieces","getAttachmentAndPositionById","attachmentId","getAttachmentById","getRangeOfAttachment","attachmentAndPosition","updateAttributesForAttachment","_text$pieceList","eachPiece","getPieceAtPosition","toSerializableText","isRTL","Block","blockJSON","applyBlockBreakToText","block","copyWithText","copyWithoutText","copyWithoutAttributes","mappedText","addAttribute","expandAttribute","removeAttribute","removeLastValue","removeLastAttribute","getLastAttribute","getLastElement","getAttributeLevel","getAttributeAtLevel","level","hasAttributes","getLastNestableAttribute","getNestableAttributes","getNestingLevel","decreaseNestingLevel","increaseNestingLevel","lastIndexOf","getListItemAttributes","isListItem","_getBlockConfig","isTerminalBlock","_getBlockConfig2","breaksOnReturn","_getBlockConfig3","findLineBreakInDirectionFromPosition","direction","newlineText","textForStringWithAttributes","getTextWithoutBlockBreak","getBlockBreakPosition","textEndsInBlockBreak","otherBlock","otherAttributes","otherAttribute","getListAttributeNames","unmarkExistingInnerBlockBreaksInText","addBlockBreakToText","modified","innerPieces","lastPiece","unmarkBlockBreakPiece","blockBreakText","blockBreak","ObjectMap","Document","documentJSON","blocks","blockList","getBlockAtIndex","consolidateBlocks","copyUsingObjectsFromDocument","sourceDocument","getObjects","getBlocks","copyWithBaseBlockAttributes","replaceBlock","oldBlock","newBlock","insertDocumentAtRange","locationFromPosition","getBlockAtPosition","mergeDocumentAtRange","formattedDocument","startPosition","startLocation","baseBlockAttributes","getBaseBlockAttributes","trailingBlockAttributes","leadingBlockAttributes","blockCount","getBlockCount","firstBlock","firstText","insertTextAtRange","leftPosition","rightPosition","leftLocation","rightLocation","locationRangeFromRange","leftOffset","leftBlock","rightOffset","rightBlock","leftText","rightText","affectedBlockCount","getDocumentAtRange","movingRightward","eachBlockAtRange","textRange","eachBlock","getTextAtIndex","removeAttributeForAttachment","insertBlockBreakAtRange","applyBlockAttributeAtRange","expanded","expandRangeToLineBreaksAndSplitBlocks","blockConfig","removeLastListAttributeAtRange","exceptAttributeName","converted","convertLineBreaksToBlockBreaksInRange","removeBlockAttributesAtRange","removeLastTerminalAttributeAtRange","consolidateBlocksAtRange","lastAttributeName","endLocation","startBlock","positionFromLocation","endBlock","_this$getBlockAtIndex","getTextAtPosition","getCharacterAtPosition","getEditCount","editCount","getCommonAttributesAtPosition","attributesForBlock","commonAttributes","attributesLeft","inheritableAttributes","getRangeOfCommonAttributeAtPosition","blockIndex","lastAttributeIndex","attachmentPieces","getLocationRangeOfAttachment","getAttachmentPieceForAttachment","findRangesForBlockAttribute","ranges","findRangesForTextAttribute","withValue","locationRangeFromPosition","rangeFromLocationRange","locationRange","getTexts","toSerializableDocument","DEFAULT_ALLOWED_ATTRIBUTES","DEFAULT_FORBIDDEN_PROTOCOLS","DEFAULT_FORBIDDEN_ELEMENTS","HTMLSanitizer","sanitizer","sanitize","allowedAttributes","forbiddenProtocols","forbiddenElements","createBodyElementForHTML","sanitizeElements","normalizeListElementNesting","getHTML","innerHTML","getBody","walker","nodesToRemove","nextNode","currentNode","elementIsRemovable","sanitizeElement","protocol","querySelectorAll","listElement","previousElement","previousElementSibling","elementIsForbidden","elementIsntSerializable","doc","implementation","createHTMLDocument","pieceForString","parseTrixDataAttribute","HTMLParser","referenceElement","blockElements","processedElements","getDocument","createHiddenContainer","containerElement","nodeFilter","processNode","translateBlockElementMarginsToNewlines","removeHiddenContainer","cloneNode","display","nextSibling","isInsignificantTextNode","appendBlockForTextNode","processTextNode","appendBlockForElement","processElement","currentBlockElement","isBlockElement","appendStringWithAttributes","_this$currentBlock","getBlockAttributes","currentBlock","appendBlockForAttributesWithElement","elementIsBlockElement","currentBlockContainsElement","firstElementChild","parentBlockElement","findParentBlockElement","appendEmptyBlock","parentElement","_node$previousSibling","elementCanDisplayPreformattedText","stringEndsWithWhitespace","leftTrimBreakableWhitespace","getTextAttributes","appendAttachmentWithAttributes","isExtraBR","dimensions","parseInt","getImageDimensions","blockForAttributes","appendPiece","pieceForAttachment","appendStringToTextAtIndex","prependStringToTextAtIndex","unshift","configAttr","attributeInheritedFromBlock","blockElement","findBlockElementAncestors","styleProperty","attrConfig","_attrConfig$test","reverse","ancestors","stringIsAllBreakableWhitespace","nodeEndsWithNonWhitespace","lastChild","defaultMargin","getMarginOfDefaultBlockElement","margin","getMarginOfBlockElementAtIndex","top","bottom","getBlockElementMargin","whiteSpace","marginTop","marginBottom","FILTER_REJECT","FILTER_ACCEPT","LineBreakInsertion","composition","selectedRange","getSelectedRange","previousCharacter","nextCharacter","shouldInsertBlockBreak","shouldBreakFormattedBlock","shouldDecreaseListLevel","shouldPrependListItem","shouldRemoveLastBlockAttribute","Composition","currentAttributes","revision","setDocument","_this$delegate$compos","refreshAttachments","compositionDidChangeDocument","getSnapshot","loadSnapshot","_this$delegate2$compo","_this$delegate3","_this$delegate3$compo","compositionWillLoadSnapshot","setSelection","compositionDidLoadSnapshot","insertText","updatePosition","notifyDelegateOfInsertionAtRange","insertBlock","insertDocument","insertString","getCurrentTextAttributes","insertBlockBreak","insertLineBreak","insertion","decreaseListLevel","removeLastBlockAttribute","breakFormattedBlock","insertHTML","replaceHTML","getLocationRange","insertFile","insertFiles","_this$delegate4","compositionShouldAcceptFile","attachmentForFile","insertAttachments","insertAttachment","_config$attachments$t","attachmentText","textForAttachmentWithAttributes","shouldManageDeletingInDirection","shouldManageMovingCursorInDirection","deleteInDirection","deletingIntoPreviousBlock","selectionSpansBlocks","selectionIsCollapsed","canDecreaseBlockAttributeLevel","getBlock","decreaseBlockAttributeLevel","getExpandedRangeInDirection","getAttachmentAtRange","editAttachment","moveTextFromRange","removeAttachment","stopEditingAttachment","removeCurrentAttribute","insertPlaceholder","placeholderPosition","getPosition","selectPlaceholder","setSelectedRange","forgetPlaceholder","hasCurrentAttribute","toggleCurrentAttribute","setCurrentAttribute","canSetCurrentAttribute","canSetCurrentBlockAttribute","canSetCurrentTextAttribute","getSelectedDocument","setBlockAttribute","setTextAttribute","notifyDelegateOfCurrentAttributesChange","removeBlockAttribute","updateCurrentAttributes","removeTextAttribute","canDecreaseNestingLevel","_this$getBlock","canIncreaseNestingLevel","previousBlock","getPreviousBlock","arrayStartsWith","_this$getBlock2","_this$getBlock3","attributeLevel","ignoreLock","getCurrentAttributes","freezeSelection","thawSelection","hasFrozenSelection","_this$delegate5","compositionDidRequestChangingSelectionToLocationRange","getSelectionManager","setLocationRange","targetLocationRange","withTargetLocationRange","withTargetRange","withTargetDOMRange","createLocationRangeFromDOMRange","translateUTF16PositionFromOffset","editingAttachment","moveCursorInDirection","canEditAttachment","expandSelectionInDirection","expandSelectionForEditing","expandSelectionAroundCommonAttribute","selectionContainsAttachments","_this$getSelectedAtta","getSelectedAttachments","selectionIsInCursorTarget","positionIsCursorTarget","locationIsCursorTarget","positionIsBlockBreak","_this$document$getPie","_this$getSelectedDocu","added","removed","oldArray","newArray","existingValues","Set","currentValues","summarizeArrayChange","_this$delegate6","_this$delegate6$compo","compositionDidRemoveAttachment","_this$delegate7","_this$delegate7$compo","compositionDidAddAttachment","_this$delegate8","_this$delegate8$compo","compositionDidEditAttachment","_this$delegate9","_this$delegate9$compo","compositionDidChangeAttachmentPreviewURL","_this$delegate10","_this$delegate10$comp","compositionDidStartEditingAttachment","_this$delegate11","_this$delegate11$comp","compositionDidStopEditingAttachment","newDocument","_this$delegate12","_this$delegate12$comp","compositionDidChangeCurrentAttributes","_this$delegate13","_this$delegate13$comp","compositionDidPerformInsertionAtRange","utf16string","utf16position","UndoManager","undoEntries","redoEntries","recordUndoEntry","context","consolidatable","previousEntry","entryHasDescriptionAndContext","undoEntry","createEntry","pop","redoEntry","snapshot","canUndo","canRedo","entry","BLOCK_ATTRIBUTE_NAME","Filter","applyBlockAttribute","findRangesOfBlocks","findRangesOfPieces","moveSelectedRangeForward","DEFAULT_FILTERS","Editor","undoManager","filters","loadDocument","loadHTML","loadJSON","getClientRectAtPosition","getClientRectAtLocationRange","activateAttribute","attributeIsActive","canActivateAttribute","deactivateAttribute","LocationMapper","findLocationFromContainerAndOffset","container","foundBlock","attachmentElement","findAttachmentElementParentForNode","rejectAttachmentContents","nodeLength","findContainerAndOffsetFromLocation","nodeOffset","findNodeAndOffsetFromLocation","getSignificantNodesForIndex","nodes","acceptSignificantNodes","recordingNodes","rejectEmptyTextNodes","PointMapper","createDOMRangeFromPoint","x","y","caretPositionFromPoint","offsetNode","createRange","setStart","caretRangeFromPoint","createTextRange","originalDOMRange","moveToPoint","select","getClientRectsForDOMRange","getClientRects","SelectionManager","didMouseDown","locationMapper","pointMapper","lockCount","currentLocationRange","lockedLocationRange","createDOMRangeFromLocationRange","updateCurrentLocationRange","setLocationRangeFromPointRange","pointRange","getLocationAtPoint","lock","unlock","clearSelection","_getDOMRange","collapsed","selectionIsExpanded","domRangeWithinElement","pauseTemporarily","resumeHandlers","paused","resumeTimeout","_this$delegate$locati","locationRangeDidChange","rangeStart","rangeEnd","setEnd","point","_this$createLocationR","models","Cocument","Trix","VERSION","ObjectGroup","ungroupedObjects","asTree","_object$canBeGrouped2","_object$canBeGrouped","_group$canBeGroupedWi","_group","groupObjects","getDepth","ElementStore","elements","trixStoreKey","ObjectView","childViews","rootView","getNodes","createNodes","invalidate","_this$parentView","parentView","invalidateViewForObject","_this$findViewForObje","findViewForObject","findOrCreateCachedChildView","viewClass","view","getCachedViewForObject","recordChildView","createChildView","cacheViewForObject","ObjectGroupView","getAllChildViews","views","childView","findElement","findElementForObject","getViewCache","isViewCachingEnabled","viewCache","shouldCacheViews","enableViewCaching","disableViewCaching","_this$getViewCache","garbageCollectCachedViews","objectKeys","objectGroup","getChildViews","createContainerElement","css$2","AttachmentView","attachmentPiece","createContentNodes","innerElement","figure","getClassName","tabindex","createCaptionElement","progressElement","trixMutable","createCursorTarget","figcaption","captionConfig","getCaptionConfig","nameElement","createTextNode","sizeElement","names","extension","trixAttachment","trixContentType","trixId","trixAttributes","trixSerialize","htmlContainsTagName","findProgressElement","_this$findElement","div","PreviewableAttachmentView","refresh","updateAttributesForImage","serializedAttributes","storeKey","PieceView","textConfig","createAttachmentNodes","createStringNodes","_element","findInnerElement","_this$textConfig","substring","preserveSpaces","styles","pendingElement","isLast","isFirst","followsWhitespace","TextView","endsWithWhitespace","previousPiece","css$1","BlockView","createComment","textView","shouldAddExtraNewlineElement","DocumentView","render","sync","elementStore","shadowElement","isSynced","elementsHaveEqualHTML","fragment","createDocumentFragmentForSync","didSync","findStoredElements","createDocumentFragment","storedElement","replaceChild","otherElement","ignoreSpaces","unserializableAttributeNames","serializedAttributesAttribute","serializedAttributesSelector","blockCommentPattern","serializers","serializable","HTMLElement","el","mutableAttributeName","mutableSelector","childList","characterData","characterDataOldValue","subtree","MutationObserver","didMutate","observer","observe","disconnect","mutations","_this$delegate$elemen","findSignificantMutations","elementDidMutate","getMutationSummary","mutation","mutationIsSignificant","nodeIsMutable","nodesModifiedByMutation","nodeIsSignificant","addedNodes","removedNodes","getTextMutationSummary","additions","deletions","getTextChangesFromCharacterData","textChanges","getTextChangesFromChildList","addition","summary","textAdded","deleted","textDeleted","getMutationsByType","textRemoved","getTextForNodes","characterMutations","startMutation","endMutation","summarized","oldString","newString","summarizeStringChange","oldValue","Controller","FileVerificationOperation","reader","FileReader","abort","readAsArrayBuffer","InputController","mutationObserver","events","handlerFor","mutationSummary","editorWillSyncDocumentView","editorDidSyncDocumentView","requestRender","_this$delegate$inputC","inputControllerDidRequestRender","requestReparse","_this$delegate2$input","inputControllerDidRequestReparse","operations","all","handleInput","_this$responder","inputControllerWillAttachFiles","responder","defaultPrevented","inputControllerWillHandleInput","inputControllerDidHandleInput","createLinkHTML","outerHTML","_$codePointAt","keyNames$1","pastedFileCount","Level0InputController","resetInputSummary","setInputSummary","inputSummary","isComposing","inputControllerDidAllowUnhandledInput","mutationIsExpected","preferDocument","mutationAdditionMatchesSummary","mutationDeletionMatchesSummary","didDelete","unexpectedNewlineAddition","unexpectedNewlineDeletion","_this$compositionInpu","textChanged","composedEmptyString","compositionInput","getEndData","getCompositionInput","CompositionInput","isEnded","_this$responder2","serializeSelectionToDataTransfer","_this$responder3","setData","dataTransferIsWritable","canAcceptDataTransfer","Files","getPastedHTMLUsingHiddenElement","pageXOffset","pageYOffset","opacity","focus","keydown","didInput","keyName","_context2","modifier","_context","character","inputControllerDidReceiveKeyboardCommand","keypress","altKey","stringFromKeyEvent","_this$responder9","inputControllerWillPerformTyping","textInput","toUpperCase","_this$responder10","dragenter","dragstart","_this$delegate5$input","draggedRange","inputControllerDidStartDrag","dragover","draggingPoint","clientX","clientY","_this$delegate6$input","inputControllerDidReceiveDragOverPoint","dragend","_this$delegate7$input","inputControllerDidCancelDrag","drop","_event$dataTransfer","_this$responder11","_this$responder12","inputControllerWillMoveText","_this$responder13","fromJSONString","cut","_this$responder14","clipboardData","inputControllerWillCutText","_this$responder15","paste","clipboard","testClipboardData","pasteEventIsCrippledSafariHTMLPaste","_this$responder16","inputControllerWillPaste","inputControllerDidPaste","_this$responder17","_this$delegate14","_this$responder18","_this$delegate15","_this$delegate16","_this$responder19","_this$delegate17","_clipboard$items","_clipboard$items$","_clipboard$items$$get","items","getAsFile","_this$delegate18","_this$responder20","_this$delegate19","extensionForFile","compositionstart","compositionupdate","compositionend","beforeinput","stopPropagation","backspace","_this$delegate20","delete","_this$delegate21","_this$delegate22","_this$responder21","tab","_this$responder22","_this$responder23","_this$responder24","_this$responder25","control","d","_this$delegate23","h","_this$delegate24","o","_this$delegate25","_this$responder26","shift","_this$delegate26","_this$responder27","_this$responder28","_this$responder29","alt","_this$delegate27","meta","_this$delegate28","_file$type","_file$type$match","hasStringCodePointAt","charCode","hasPasteboardFlavor","hasReadableDynamicData","isExternalHTMLPaste","isExternalRichTextPaste","inputController","isSignificant","_this$responder5","_this$responder4","canApplyToDocument","_this$responder6","_this$responder7","_this$responder8","_this$data$start","_this$data$end","Level2InputController","scheduledRender","composing","reparse","scheduleRender","_this$afterRender","cancelAnimationFrame","afterRender","toggleAttributeIfSupported","inputControllerWillPerformFormatting","activateAttributeIfSupported","getTargetDOMRange","minLength","_this$event$getTarget","_this$event","targetRanges","getTargetRanges","staticRangeToRange","withEvent","command","keyboardCommandFromKeyEvent","_event$clipboardData","pasteEventHasFilesOnly","pasteEventHasPlainTextOnly","inputTypes","inputType","dragging","pointFromEvent","dragEventHasFiles","ArrowLeft","ArrowRight","Backspace","Tab","deleteByComposition","deleteByCut","deleteByDrag","deleteByDragRange","deleteCompositionText","deleteContent","deleteContentBackward","deleteContentForward","deleteEntireSoftLine","deleteHardLineBackward","deleteHardLineForward","deleteSoftLineBackward","deleteSoftLineForward","deleteWordBackward","deleteWordForward","formatBackColor","formatBold","formatFontColor","formatFontName","formatIndent","formatItalic","formatJustifyCenter","formatJustifyFull","formatJustifyLeft","formatJustifyRight","formatOutdent","formatRemove","_this$responder30","formatSetBlockTextDirection","formatSetInlineTextDirection","formatStrikeThrough","formatSubscript","formatSuperscript","formatUnderline","historyRedo","inputControllerWillPerformRedo","historyUndo","inputControllerWillPerformUndo","insertCompositionText","insertFromComposition","insertFromDrop","_this$responder31","insertFromPaste","_dataTransfer$files","_this$responder32","_this$responder33","_this$responder34","_this$responder35","insertFromYank","insertLink","insertOrderedList","insertParagraph","_this$responder36","insertReplacementText","_this$event$dataTrans","insertTranspose","insertUnorderedList","staticRange","undoable","commands","do","undos","AttachmentEditorController","title","trixAction","didClickToolbar","didClickActionButton","textarea","textareaClone","tabIndex","autoresize","scrollHeight","didInputCaption","didKeyDownCaption","didChangeCaption","didBlurCaption","editingFigcaption","editCaption","install","makeElementMutable","addToolbar","installCaptionEditor","uninstall","savePendingCaption","didUninstallAttachmentEditor","pendingCaption","_this$delegate3$attac","attachmentEditorDidRequestUpdatingAttributesForAttachment","attachmentEditorDidRequestRemovingAttributeForAttachment","attachmentEditorDidRequestRemovalOfAttachment","_this$delegate5$attac","attachmentEditorDidRequestDeselectingAttachment","CompositionController","didFocus","didBlur","didClickAttachment","documentView","_this$blurPromise","focused","compositionControllerDidFocus","blurPromise","compositionControllerDidBlur","findAttachmentForElement","compositionControllerDidSelectAttachment","getSerializableElement","isEditingAttachment","_this$delegate4$compo","_this$delegate5$compo","canSyncDocumentView","compositionControllerWillSyncDocumentView","compositionControllerDidSyncDocumentView","compositionControllerDidRender","rerenderViewForObject","refreshViewCache","attachmentEditor","installAttachmentEditorForAttachment","_this$attachmentEdito","uninstallAttachmentEditor","_this$attachmentEdito2","compositionControllerWillUpdateAttachment","compositionControllerDidRequestRemovalOfAttachment","compositionControllerDidRequestDeselectingAttachment","attributeButtonSelector","actionButtonSelector","toolbarButtonSelector","dialogSelector","activeDialogSelector","dialogButtonSelector","dialogInputSelector","getInputForDialog","getAttributeName","getActionName","ToolbarController","didClickAttributeButton","didClickDialogButton","didKeyDownDialogInput","actions","resetDialogInputs","toolbarDidClickButton","actionName","getDialog","toggleDialog","toolbarDidInvokeAction","toolbarDidToggleAttribute","refreshAttributeButtons","dialogElement","hideDialog","updateActions","refreshActionButtons","eachActionButton","disabled","updateAttributes","eachAttributeButton","dialogIsVisible","applyKeyboardCommand","keyString","button","buttonKeys","dialogName","showDialog","toolbarWillShowDialog","disabledInput","toolbarDidShowDialog","willValidate","checkValidity","toolbarDidUpdateAttribute","toolbarDidRemoveAttribute","toolbarDidHideDialog","getDialogName","EditorController","editorElement","compositionController","toolbarController","toolbarElement","editor","notifyEditorElement","handlingInput","updateCurrentActions","pasting","pastedRange","attachmentLocationRange","loadingSnapshot","isFocused","requestedLocationRange","compositionRevisionWhenLocationRangeRequested","renderedCompositionRevision","runEditorFilters","isFocusedInvisibly","requestedRender","recordTypingUndoEntry","recordFormattingUndoEntry","locationRangeBeforeDrag","invokeAction","selectionFrozen","canInvokeAction","actionIsExternal","_this$actions$actionN","_this$actions$actionN2","_this$actions$actionN3","_this$actions$actionN4","getCurrentActions","currentActions","updateInputElement","serializer","serializeToContentType","setInputElementValue","documentChangedSinceLastRender","notify","getUndoContext","getLocationContext","getTimeContext","getTime","_this$editorElement$o","ownerDocument","TrixToolbarElement","connectedCallback","customElements","define","makeEditable","handleEventOnce","configureContentEditable","disableObjectResizing","setDefaultParagraphSeparator","_document$queryComman","_document","queryCommandSupported","execCommand","_document$queryComman2","_document2","cursorTargetStyles","TrixEditorElement","labels","_this$ownerDocument","toolbarId","_this$inputElement","inputElement","_this$ownerDocument2","inputId","nextElementSibling","_this$editorControlle","editorController","_this$inputElement2","_this$inputElement3","_this$editor","addAccessibilityRole","texts","contains","ensureAriaLabel","registerResetListener","registerClickListener","disconnectedCallback","_this$editorControlle2","unregisterResetListener","unregisterClickListener","resetListener","resetBubbled","clickListener","clickBubbled","Vue","makeid","mounted"],"sourceRoot":""}